import{j as C,a as fe,F as yt}from"./jsx-runtime-5BUNAZ9W.js";import{r as I,R as Ps}from"./index-4g5l5LRQ.js";import{c as En,g as Fh}from"./_commonjsHelpers-4gQjN7DL.js";const zh=0,Ys=2,Xs="blue",Oe=14,Vu=16,Ks=[[0,0],[.5,0],[1,0],[1,.5],[1,1],[.5,1],[0,1],[0,.5]],Js=["brush","rect","square","line","polygon","circle","curve","ellipse","picture","text","triangle"],st=["transparent","black","white","red","green","blue","yellow"],vr=[0,1,2],$h=[0,1,2,3],gs=[[1,0],[1,2],[4,6]],Gh=["arial","serif","monospace"],Rn="serif",Ph=36,Nn={APP:1,LOADING:2,PANEL:3,SNACKBAR:4},kr=[10,20,40],vu=18,e1=n=>{n.lineCap="round",n.lineJoin="round"},rn=(n,a={})=>{const{fillColor:i="transparent",globalAlpha:o=100,strokeColor:c=Xs,lineWidth:f=Ys,lineDash:d=0}=a;o!==void 0&&(n.globalAlpha=o/100),i&&(n.fillStyle=i),c&&(n.strokeStyle=c),f&&(n.lineWidth=f),d!==void 0&&f&&n.setLineDash([gs[d][0]*f,gs[d][1]*f])},t1=(n,a,i,o,c)=>{n.save(),n.scale(a,a),n.translate(i[0],i[1]),o!==0&&(n.translate(c[0],c[1]),n.rotate(o),n.translate(-c[0],-c[1]))};var Ia={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ia.exports;(function(n,a){(function(){function i(g,V,l){switch(l.length){case 0:return g.call(V);case 1:return g.call(V,l[0]);case 2:return g.call(V,l[0],l[1]);case 3:return g.call(V,l[0],l[1],l[2])}return g.apply(V,l)}function o(g,V,l,U){for(var X=-1,j=g==null?0:g.length;++X<j;){var ct=g[X];V(U,ct,l(ct),g)}return U}function c(g,V){for(var l=-1,U=g==null?0:g.length;++l<U&&V(g[l],l,g)!==!1;);return g}function f(g,V){for(var l=g==null?0:g.length;l--&&V(g[l],l,g)!==!1;);return g}function d(g,V){for(var l=-1,U=g==null?0:g.length;++l<U;)if(!V(g[l],l,g))return!1;return!0}function p(g,V){for(var l=-1,U=g==null?0:g.length,X=0,j=[];++l<U;){var ct=g[l];V(ct,l,g)&&(j[X++]=ct)}return j}function _(g,V){return!!(g!=null&&g.length)&&S(g,V,0)>-1}function b(g,V,l){for(var U=-1,X=g==null?0:g.length;++U<X;)if(l(V,g[U]))return!0;return!1}function w(g,V){for(var l=-1,U=g==null?0:g.length,X=Array(U);++l<U;)X[l]=V(g[l],l,g);return X}function E(g,V){for(var l=-1,U=V.length,X=g.length;++l<U;)g[X+l]=V[l];return g}function R(g,V,l,U){var X=-1,j=g==null?0:g.length;for(U&&j&&(l=g[++X]);++X<j;)l=V(l,g[X],X,g);return l}function N(g,V,l,U){var X=g==null?0:g.length;for(U&&X&&(l=g[--X]);X--;)l=V(l,g[X],X,g);return l}function q(g,V){for(var l=-1,U=g==null?0:g.length;++l<U;)if(V(g[l],l,g))return!0;return!1}function B(g){return g.split("")}function k(g){return g.match($1)||[]}function M(g,V,l){var U;return l(g,function(X,j,ct){if(V(X,j,ct))return U=j,!1}),U}function K(g,V,l,U){for(var X=g.length,j=l+(U?1:-1);U?j--:++j<X;)if(V(g[j],j,g))return j;return-1}function S(g,V,l){return V===V?Ze(g,V,l):K(g,pe,l)}function te(g,V,l,U){for(var X=l-1,j=g.length;++X<j;)if(U(g[X],V))return X;return-1}function pe(g){return g!==g}function ve(g,V){var l=g==null?0:g.length;return l?W(g,V)/l:Or}function we(g){return function(V){return V==null?m:V[g]}}function ge(g){return function(V){return g==null?m:g[V]}}function H(g,V,l,U,X){return X(g,function(j,ct,Qi){l=U?(U=!1,j):V(l,j,ct,Qi)}),l}function $(g,V){var l=g.length;for(g.sort(V);l--;)g[l]=g[l].value;return g}function W(g,V){for(var l,U=-1,X=g.length;++U<X;){var j=V(g[U]);j!==m&&(l=l===m?j:l+j)}return l}function oe(g,V){for(var l=-1,U=Array(g);++l<g;)U[l]=V(l);return U}function ee(g,V){return w(V,function(l){return[l,g[l]]})}function he(g){return g&&g.slice(0,ar(g)+1).replace(pi,"")}function re(g){return function(V){return g(V)}}function be(g,V){return w(V,function(l){return g[l]})}function ye(g,V){return g.has(V)}function De(g,V){for(var l=-1,U=g.length;++l<U&&S(V,g[l],0)>-1;);return l}function Ve(g,V){for(var l=g.length;l--&&S(V,g[l],0)>-1;);return l}function Ee(g,V){for(var l=g.length,U=0;l--;)g[l]===V&&++U;return U}function nt(g){return"\\"+kc[g]}function Ke(g,V){return g==null?m:g[V]}function Te(g){return Cc.test(g)}function Dt(g){return Ac.test(g)}function G(g){for(var V,l=[];!(V=g.next()).done;)l.push(V.value);return l}function D(g){var V=-1,l=Array(g.size);return g.forEach(function(U,X){l[++V]=[X,U]}),l}function Z(g,V){return function(l){return g(V(l))}}function F(g,V){for(var l=-1,U=g.length,X=0,j=[];++l<U;){var ct=g[l];ct!==V&&ct!==Nr||(g[l]=Nr,j[X++]=l)}return j}function ae(g){var V=-1,l=Array(g.size);return g.forEach(function(U){l[++V]=U}),l}function We(g){var V=-1,l=Array(g.size);return g.forEach(function(U){l[++V]=[U,U]}),l}function Ze(g,V,l){for(var U=l-1,X=g.length;++U<X;)if(g[U]===V)return U;return-1}function ze(g,V,l){for(var U=l+1;U--;)if(g[U]===V)return U;return U}function He(g){return Te(g)?qr(g):Nc(g)}function Je(g){return Te(g)?Dn(g):B(g)}function ar(g){for(var V=g.length;V--&&Z1.test(g.charAt(V)););return V}function qr(g){for(var V=gi.lastIndex=0;gi.test(g);)++V;return V}function Dn(g){return g.match(gi)||[]}function $a(g){return g.match(wc)||[]}var m,Ga="4.17.21",on=200,Pa="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",qe="Expected a function",Rr="Invalid `variable` option passed into `_.template`",gr="__lodash_hash_undefined__",Mn=500,Nr="__lodash_placeholder__",$e=1,Dr=2,Mt=4,Ot=1,ir=2,at=1,Zt=2,On=4,_t=8,ur=16,bt=32,or=64,Et=128,it=256,kt=512,Ya=30,Xa="...",Ka=800,Mr=16,Wt=1,Ja=2,_r=3,jt=1/0,Ht=9007199254740991,ei=17976931348623157e292,Or=NaN,Qt=4294967295,ti=Qt-1,ri=Qt>>>1,de=[["ary",Et],["bind",at],["bindKey",Zt],["curry",_t],["curryRight",ur],["flip",kt],["partial",bt],["partialRight",or],["rearg",it]],Ce="[object Arguments]",Ft="[object Array]",br="[object AsyncFunction]",zt="[object Boolean]",ln="[object Date]",L1="[object DOMException]",Wn="[object Error]",Hn="[object Function]",Pu="[object GeneratorFunction]",Tt="[object Map]",sn="[object Number]",I1="[object Null]",$t="[object Object]",Yu="[object Promise]",E1="[object Proxy]",cn="[object RegExp]",qt="[object Set]",fn="[object String]",Bn="[object Symbol]",k1="[object Undefined]",dn="[object WeakMap]",T1="[object WeakSet]",pn="[object ArrayBuffer]",Wr="[object DataView]",ni="[object Float32Array]",ai="[object Float64Array]",ii="[object Int8Array]",ui="[object Int16Array]",oi="[object Int32Array]",li="[object Uint8Array]",si="[object Uint8ClampedArray]",ci="[object Uint16Array]",fi="[object Uint32Array]",q1=/\b__p \+= '';/g,R1=/\b(__p \+=) '' \+/g,N1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xu=/&(?:amp|lt|gt|quot|#39);/g,Ku=/[&<>"']/g,D1=RegExp(Xu.source),M1=RegExp(Ku.source),O1=/<%-([\s\S]+?)%>/g,W1=/<%([\s\S]+?)%>/g,Ju=/<%=([\s\S]+?)%>/g,H1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,B1=/^\w*$/,S1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,di=/[\\^$.*+?()[\]{}|]/g,U1=RegExp(di.source),pi=/^\s+/,Z1=/\s/,j1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,F1=/\{\n\/\* \[wrapped with (.+)\] \*/,z1=/,? & /,$1=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,G1=/[()=,{}\[\]\/\s]/,P1=/\\(\\)?/g,Y1=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eo=/\w*$/,X1=/^[-+]0x[0-9a-f]+$/i,K1=/^0b[01]+$/i,J1=/^\[object .+?Constructor\]$/,ec=/^0o[0-7]+$/i,tc=/^(?:0|[1-9]\d*)$/,rc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Sn=/($^)/,nc=/['\n\r\u2028\u2029\\]/g,Un="\\ud800-\\udfff",ac="\\u0300-\\u036f",ic="\\ufe20-\\ufe2f",uc="\\u20d0-\\u20ff",to=ac+ic+uc,ro="\\u2700-\\u27bf",no="a-z\\xdf-\\xf6\\xf8-\\xff",oc="\\xac\\xb1\\xd7\\xf7",lc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sc="\\u2000-\\u206f",cc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ao="A-Z\\xc0-\\xd6\\xd8-\\xde",io="\\ufe0e\\ufe0f",uo=oc+lc+sc+cc,hi="['’]",fc="["+Un+"]",oo="["+uo+"]",Zn="["+to+"]",lo="\\d+",dc="["+ro+"]",so="["+no+"]",co="[^"+Un+uo+lo+ro+no+ao+"]",mi="\\ud83c[\\udffb-\\udfff]",pc="(?:"+Zn+"|"+mi+")",fo="[^"+Un+"]",yi="(?:\\ud83c[\\udde6-\\uddff]){2}",vi="[\\ud800-\\udbff][\\udc00-\\udfff]",Hr="["+ao+"]",po="\\u200d",ho="(?:"+so+"|"+co+")",hc="(?:"+Hr+"|"+co+")",mo="(?:"+hi+"(?:d|ll|m|re|s|t|ve))?",yo="(?:"+hi+"(?:D|LL|M|RE|S|T|VE))?",vo=pc+"?",go="["+io+"]?",mc="(?:"+po+"(?:"+[fo,yi,vi].join("|")+")"+go+vo+")*",yc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_o=go+vo+mc,gc="(?:"+[dc,yi,vi].join("|")+")"+_o,_c="(?:"+[fo+Zn+"?",Zn,yi,vi,fc].join("|")+")",bc=RegExp(hi,"g"),Qc=RegExp(Zn,"g"),gi=RegExp(mi+"(?="+mi+")|"+_c+_o,"g"),wc=RegExp([Hr+"?"+so+"+"+mo+"(?="+[oo,Hr,"$"].join("|")+")",hc+"+"+yo+"(?="+[oo,Hr+ho,"$"].join("|")+")",Hr+"?"+ho+"+"+mo,Hr+"+"+yo,vc,yc,lo,gc].join("|"),"g"),Cc=RegExp("["+po+Un+to+io+"]"),Ac=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xc=-1,xe={};xe[ni]=xe[ai]=xe[ii]=xe[ui]=xe[oi]=xe[li]=xe[si]=xe[ci]=xe[fi]=!0,xe[Ce]=xe[Ft]=xe[pn]=xe[zt]=xe[Wr]=xe[ln]=xe[Wn]=xe[Hn]=xe[Tt]=xe[sn]=xe[$t]=xe[cn]=xe[qt]=xe[fn]=xe[dn]=!1;var Ae={};Ae[Ce]=Ae[Ft]=Ae[pn]=Ae[Wr]=Ae[zt]=Ae[ln]=Ae[ni]=Ae[ai]=Ae[ii]=Ae[ui]=Ae[oi]=Ae[Tt]=Ae[sn]=Ae[$t]=Ae[cn]=Ae[qt]=Ae[fn]=Ae[Bn]=Ae[li]=Ae[si]=Ae[ci]=Ae[fi]=!0,Ae[Wn]=Ae[Hn]=Ae[dn]=!1;var Lc={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ic={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ec={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},kc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Tc=parseFloat,qc=parseInt,bo=typeof En=="object"&&En&&En.Object===Object&&En,Rc=typeof self=="object"&&self&&self.Object===Object&&self,Ge=bo||Rc||Function("return this")(),_i=a&&!a.nodeType&&a,Qr=_i&&!0&&n&&!n.nodeType&&n,Qo=Qr&&Qr.exports===_i,bi=Qo&&bo.process,wt=function(){try{var g=Qr&&Qr.require&&Qr.require("util").types;return g||bi&&bi.binding&&bi.binding("util")}catch{}}(),wo=wt&&wt.isArrayBuffer,Co=wt&&wt.isDate,Ao=wt&&wt.isMap,Vo=wt&&wt.isRegExp,xo=wt&&wt.isSet,Lo=wt&&wt.isTypedArray,Nc=we("length"),Dc=ge(Lc),Mc=ge(Ic),Oc=ge(Ec),Wc=function g(V){function l(e){if(Re(e)&&!ne(e)&&!(e instanceof j)){if(e instanceof X)return e;if(Qe.call(e,"__wrapped__"))return Ql(e)}return new X(e)}function U(){}function X(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=m}function j(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Qt,this.__views__=[]}function ct(){var e=new j(this.__wrapped__);return e.__actions__=ft(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ft(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ft(this.__views__),e}function Qi(){if(this.__filtered__){var e=new j(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Hc(){var e=this.__wrapped__.value(),t=this.__dir__,r=ne(e),u=t<0,s=r?e.length:0,h=Pf(0,s,this.__views__),y=h.start,v=h.end,Q=v-y,L=u?v:y-1,x=this.__iteratees__,T=x.length,O=0,z=et(Q,this.__takeCount__);if(!r||!u&&s==Q&&z==Q)return Go(e,this.__actions__);var P=[];e:for(;Q--&&O<z;){L+=t;for(var ie=-1,Y=e[L];++ie<T;){var se=x[ie],ce=se.iteratee,rt=se.type,mt=ce(Y);if(rt==Ja)Y=mt;else if(!mt){if(rt==Wt)continue e;break e}}P[O++]=Y}return P}function wr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var u=e[t];this.set(u[0],u[1])}}function Bc(){this.__data__=Vn?Vn(null):{},this.size=0}function Sc(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Uc(e){var t=this.__data__;if(Vn){var r=t[e];return r===gr?m:r}return Qe.call(t,e)?t[e]:m}function Zc(e){var t=this.__data__;return Vn?t[e]!==m:Qe.call(t,e)}function jc(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Vn&&t===m?gr:t,this}function Gt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var u=e[t];this.set(u[0],u[1])}}function Fc(){this.__data__=[],this.size=0}function zc(e){var t=this.__data__,r=jn(t,e);return!(r<0)&&(r==t.length-1?t.pop():ga.call(t,r,1),--this.size,!0)}function $c(e){var t=this.__data__,r=jn(t,e);return r<0?m:t[r][1]}function Gc(e){return jn(this.__data__,e)>-1}function Pc(e,t){var r=this.__data__,u=jn(r,e);return u<0?(++this.size,r.push([e,t])):r[u][1]=t,this}function Pt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var u=e[t];this.set(u[0],u[1])}}function Yc(){this.size=0,this.__data__={hash:new wr,map:new(Cn||Gt),string:new wr}}function Xc(e){var t=ra(this,e).delete(e);return this.size-=t?1:0,t}function Kc(e){return ra(this,e).get(e)}function Jc(e){return ra(this,e).has(e)}function ef(e,t){var r=ra(this,e),u=r.size;return r.set(e,t),this.size+=r.size==u?0:1,this}function Cr(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Pt;++t<r;)this.add(e[t])}function tf(e){return this.__data__.set(e,gr),this}function rf(e){return this.__data__.has(e)}function Rt(e){this.size=(this.__data__=new Gt(e)).size}function nf(){this.__data__=new Gt,this.size=0}function af(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function uf(e){return this.__data__.get(e)}function of(e){return this.__data__.has(e)}function lf(e,t){var r=this.__data__;if(r instanceof Gt){var u=r.__data__;if(!Cn||u.length<on-1)return u.push([e,t]),this.size=++r.size,this;r=this.__data__=new Pt(u)}return r.set(e,t),this.size=r.size,this}function Io(e,t){var r=ne(e),u=!r&&Er(e),s=!r&&!u&&pr(e),h=!r&&!u&&!s&&Yr(e),y=r||u||s||h,v=y?oe(e.length,a3):[],Q=v.length;for(var L in e)!t&&!Qe.call(e,L)||y&&(L=="length"||s&&(L=="offset"||L=="parent")||h&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||Jt(L,Q))||v.push(L);return v}function Eo(e){var t=e.length;return t?e[Ti(0,t-1)]:m}function sf(e,t){return na(ft(e),Ar(t,0,e.length))}function cf(e){return na(ft(e))}function wi(e,t,r){(r===m||Nt(e[t],r))&&(r!==m||t in e)||Yt(e,t,r)}function hn(e,t,r){var u=e[t];Qe.call(e,t)&&Nt(u,r)&&(r!==m||t in e)||Yt(e,t,r)}function jn(e,t){for(var r=e.length;r--;)if(Nt(e[r][0],t))return r;return-1}function ff(e,t,r,u){return dr(e,function(s,h,y){t(u,s,r(s),y)}),u}function ko(e,t){return e&&St(t,je(t),e)}function df(e,t){return e&&St(t,pt(t),e)}function Yt(e,t,r){t=="__proto__"&&_a?_a(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Ci(e,t){for(var r=-1,u=t.length,s=Be(u),h=e==null;++r<u;)s[r]=h?m:Yi(e,t[r]);return s}function Ar(e,t,r){return e===e&&(r!==m&&(e=e<=r?e:r),t!==m&&(e=e>=t?e:t)),e}function Ct(e,t,r,u,s,h){var y,v=t&$e,Q=t&Dr,L=t&Mt;if(r&&(y=s?r(e,u,s,h):r(e)),y!==m)return y;if(!ke(e))return e;var x=ne(e);if(x){if(y=Xf(e),!v)return ft(e,y)}else{var T=tt(e),O=T==Hn||T==Pu;if(pr(e))return Yo(e,v);if(T==$t||T==Ce||O&&!s){if(y=Q||O?{}:hl(e),!v)return Q?Sf(e,df(y,e)):Bf(e,ko(y,e))}else{if(!Ae[T])return s?e:{};y=Kf(e,T,v)}}h||(h=new Rt);var z=h.get(e);if(z)return z;h.set(e,y),fs(e)?e.forEach(function(Y){y.add(Ct(Y,t,r,Y,e,h))}):cs(e)&&e.forEach(function(Y,se){y.set(se,Ct(Y,t,r,se,e,h))});var P=L?Q?Ui:Si:Q?pt:je,ie=x?m:P(e);return c(ie||e,function(Y,se){ie&&(se=Y,Y=e[se]),hn(y,se,Ct(Y,t,r,se,e,h))}),y}function pf(e){var t=je(e);return function(r){return To(r,e,t)}}function To(e,t,r){var u=r.length;if(e==null)return!u;for(e=Le(e);u--;){var s=r[u],h=t[s],y=e[s];if(y===m&&!(s in e)||!h(y))return!1}return!0}function qo(e,t,r){if(typeof e!="function")throw new Lt(qe);return Ln(function(){e.apply(m,r)},t)}function mn(e,t,r,u){var s=-1,h=_,y=!0,v=e.length,Q=[],L=t.length;if(!v)return Q;r&&(t=w(t,re(r))),u?(h=b,y=!1):t.length>=on&&(h=ye,y=!1,t=new Cr(t));e:for(;++s<v;){var x=e[s],T=r==null?x:r(x);if(x=u||x!==0?x:0,y&&T===T){for(var O=L;O--;)if(t[O]===T)continue e;Q.push(x)}else h(t,T,u)||Q.push(x)}return Q}function hf(e,t){var r=!0;return dr(e,function(u,s,h){return r=!!t(u,s,h)}),r}function Fn(e,t,r){for(var u=-1,s=e.length;++u<s;){var h=e[u],y=t(h);if(y!=null&&(v===m?y===y&&!gt(y):r(y,v)))var v=y,Q=h}return Q}function mf(e,t,r,u){var s=e.length;for(r=ue(r),r<0&&(r=-r>s?0:s+r),u=u===m||u>s?s:ue(u),u<0&&(u+=s),u=r>u?0:Hl(u);r<u;)e[r++]=t;return e}function Ro(e,t){var r=[];return dr(e,function(u,s,h){t(u,s,h)&&r.push(u)}),r}function Pe(e,t,r,u,s){var h=-1,y=e.length;for(r||(r=ed),s||(s=[]);++h<y;){var v=e[h];t>0&&r(v)?t>1?Pe(v,t-1,r,u,s):E(s,v):u||(s[s.length]=v)}return s}function Bt(e,t){return e&&su(e,t,je)}function Ai(e,t){return e&&rs(e,t,je)}function zn(e,t){return p(t,function(r){return er(e[r])})}function Vr(e,t){t=sr(t,e);for(var r=0,u=t.length;e!=null&&r<u;)e=e[Ut(t[r++])];return r&&r==u?e:m}function No(e,t,r){var u=t(e);return ne(e)?u:E(u,r(e))}function ut(e){return e==null?e===m?k1:I1:Ir&&Ir in Le(e)?Gf(e):ud(e)}function Vi(e,t){return e>t}function yf(e,t){return e!=null&&Qe.call(e,t)}function vf(e,t){return e!=null&&t in Le(e)}function gf(e,t,r){return e>=et(t,r)&&e<Se(t,r)}function xi(e,t,r){for(var u=r?b:_,s=e[0].length,h=e.length,y=h,v=Be(h),Q=1/0,L=[];y--;){var x=e[y];y&&t&&(x=w(x,re(t))),Q=et(x.length,Q),v[y]=!r&&(t||s>=120&&x.length>=120)?new Cr(y&&x):m}x=e[0];var T=-1,O=v[0];e:for(;++T<s&&L.length<Q;){var z=x[T],P=t?t(z):z;if(z=r||z!==0?z:0,!(O?ye(O,P):u(L,P,r))){for(y=h;--y;){var ie=v[y];if(!(ie?ye(ie,P):u(e[y],P,r)))continue e}O&&O.push(P),L.push(z)}}return L}function _f(e,t,r,u){return Bt(e,function(s,h,y){t(u,r(s),h,y)}),u}function yn(e,t,r){t=sr(t,e),e=gl(e,t);var u=e==null?e:e[Ut(Vt(t))];return u==null?m:i(u,e,r)}function Do(e){return Re(e)&&ut(e)==Ce}function bf(e){return Re(e)&&ut(e)==pn}function Qf(e){return Re(e)&&ut(e)==ln}function vn(e,t,r,u,s){return e===t||(e==null||t==null||!Re(e)&&!Re(t)?e!==e&&t!==t:wf(e,t,r,u,vn,s))}function wf(e,t,r,u,s,h){var y=ne(e),v=ne(t),Q=y?Ft:tt(e),L=v?Ft:tt(t);Q=Q==Ce?$t:Q,L=L==Ce?$t:L;var x=Q==$t,T=L==$t,O=Q==L;if(O&&pr(e)){if(!pr(t))return!1;y=!0,x=!1}if(O&&!x)return h||(h=new Rt),y||Yr(e)?dl(e,t,r,u,s,h):zf(e,t,Q,r,u,s,h);if(!(r&Ot)){var z=x&&Qe.call(e,"__wrapped__"),P=T&&Qe.call(t,"__wrapped__");if(z||P){var ie=z?e.value():e,Y=P?t.value():t;return h||(h=new Rt),s(ie,Y,r,u,h)}}return!!O&&(h||(h=new Rt),$f(e,t,r,u,s,h))}function Cf(e){return Re(e)&&tt(e)==Tt}function Li(e,t,r,u){var s=r.length,h=s,y=!u;if(e==null)return!h;for(e=Le(e);s--;){var v=r[s];if(y&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++s<h;){v=r[s];var Q=v[0],L=e[Q],x=v[1];if(y&&v[2]){if(L===m&&!(Q in e))return!1}else{var T=new Rt;if(u)var O=u(L,x,Q,e,t,T);if(!(O===m?vn(x,L,Ot|ir,u,T):O))return!1}}return!0}function Mo(e){return!(!ke(e)||rd(e))&&(er(e)?s3:J1).test(Lr(e))}function Af(e){return Re(e)&&ut(e)==cn}function Vf(e){return Re(e)&&tt(e)==qt}function xf(e){return Re(e)&&la(e.length)&&!!xe[ut(e)]}function Oo(e){return typeof e=="function"?e:e==null?ht:typeof e=="object"?ne(e)?Bo(e[0],e[1]):Ho(e):Fl(e)}function Ii(e){if(!bn(e))return m3(e);var t=[];for(var r in Le(e))Qe.call(e,r)&&r!="constructor"&&t.push(r);return t}function Lf(e){if(!ke(e))return id(e);var t=bn(e),r=[];for(var u in e)(u!="constructor"||!t&&Qe.call(e,u))&&r.push(u);return r}function Ei(e,t){return e<t}function Wo(e,t){var r=-1,u=dt(e)?Be(e.length):[];return dr(e,function(s,h,y){u[++r]=t(s,h,y)}),u}function Ho(e){var t=Zi(e);return t.length==1&&t[0][2]?yl(t[0][0],t[0][1]):function(r){return r===e||Li(r,e,t)}}function Bo(e,t){return ji(e)&&ml(t)?yl(Ut(e),t):function(r){var u=Yi(r,e);return u===m&&u===t?Xi(r,e):vn(t,u,Ot|ir)}}function $n(e,t,r,u,s){e!==t&&su(t,function(h,y){if(s||(s=new Rt),ke(h))If(e,t,y,r,$n,u,s);else{var v=u?u(zi(e,y),h,y+"",e,t,s):m;v===m&&(v=h),wi(e,y,v)}},pt)}function If(e,t,r,u,s,h,y){var v=zi(e,r),Q=zi(t,r),L=y.get(Q);if(L)return wi(e,r,L),m;var x=h?h(v,Q,r+"",e,t,y):m,T=x===m;if(T){var O=ne(Q),z=!O&&pr(Q),P=!O&&!z&&Yr(Q);x=Q,O||z||P?ne(v)?x=v:Me(v)?x=ft(v):z?(T=!1,x=Yo(Q,!0)):P?(T=!1,x=Xo(Q,!0)):x=[]:Qn(Q)||Er(Q)?(x=v,Er(v)?x=Bl(v):ke(v)&&!er(v)||(x=hl(Q))):T=!1}T&&(y.set(Q,x),s(x,Q,u,h,y),y.delete(Q)),wi(e,r,x)}function So(e,t){var r=e.length;if(r)return t+=t<0?r:0,Jt(t,r)?e[t]:m}function Uo(e,t,r){t=t.length?w(t,function(s){return ne(s)?function(h){return Vr(h,s.length===1?s[0]:s)}:s}):[ht];var u=-1;return t=w(t,re(J())),$(Wo(e,function(s,h,y){return{criteria:w(t,function(v){return v(s)}),index:++u,value:s}}),function(s,h){return Hf(s,h,r)})}function Ef(e,t){return Zo(e,t,function(r,u){return Xi(e,u)})}function Zo(e,t,r){for(var u=-1,s=t.length,h={};++u<s;){var y=t[u],v=Vr(e,y);r(v,y)&&gn(h,sr(y,e),v)}return h}function kf(e){return function(t){return Vr(t,e)}}function ki(e,t,r,u){var s=u?te:S,h=-1,y=t.length,v=e;for(e===t&&(t=ft(t)),r&&(v=w(e,re(r)));++h<y;)for(var Q=0,L=t[h],x=r?r(L):L;(Q=s(v,x,Q,u))>-1;)v!==e&&ga.call(v,Q,1),ga.call(e,Q,1);return e}function jo(e,t){for(var r=e?t.length:0,u=r-1;r--;){var s=t[r];if(r==u||s!==h){var h=s;Jt(s)?ga.call(e,s,1):Ni(e,s)}}return e}function Ti(e,t){return e+Qa(Jl()*(t-e+1))}function Tf(e,t,r,u){for(var s=-1,h=Se(ba((t-e)/(r||1)),0),y=Be(h);h--;)y[u?h:++s]=e,e+=r;return y}function qi(e,t){var r="";if(!e||t<1||t>Ht)return r;do t%2&&(r+=e),t=Qa(t/2),t&&(e+=e);while(t);return r}function le(e,t){return du(vl(e,t,ht),e+"")}function qf(e){return Eo(jr(e))}function Rf(e,t){var r=jr(e);return na(r,Ar(t,0,r.length))}function gn(e,t,r,u){if(!ke(e))return e;t=sr(t,e);for(var s=-1,h=t.length,y=h-1,v=e;v!=null&&++s<h;){var Q=Ut(t[s]),L=r;if(Q==="__proto__"||Q==="constructor"||Q==="prototype")return e;if(s!=y){var x=v[Q];L=u?u(x,Q,v):m,L===m&&(L=ke(x)?x:Jt(t[s+1])?[]:{})}hn(v,Q,L),v=v[Q]}return e}function Nf(e){return na(jr(e))}function At(e,t,r){var u=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var h=Be(s);++u<s;)h[u]=e[u+t];return h}function Df(e,t){var r;return dr(e,function(u,s,h){return r=t(u,s,h),!r}),!!r}function Gn(e,t,r){var u=0,s=e==null?u:e.length;if(typeof t=="number"&&t===t&&s<=ri){for(;u<s;){var h=u+s>>>1,y=e[h];y!==null&&!gt(y)&&(r?y<=t:y<t)?u=h+1:s=h}return s}return Ri(e,t,ht,r)}function Ri(e,t,r,u){var s=0,h=e==null?0:e.length;if(h===0)return 0;t=r(t);for(var y=t!==t,v=t===null,Q=gt(t),L=t===m;s<h;){var x=Qa((s+h)/2),T=r(e[x]),O=T!==m,z=T===null,P=T===T,ie=gt(T);if(y)var Y=u||P;else Y=L?P&&(u||O):v?P&&O&&(u||!z):Q?P&&O&&!z&&(u||!ie):!z&&!ie&&(u?T<=t:T<t);Y?s=x+1:h=x}return et(h,ti)}function Fo(e,t){for(var r=-1,u=e.length,s=0,h=[];++r<u;){var y=e[r],v=t?t(y):y;if(!r||!Nt(v,Q)){var Q=v;h[s++]=y===0?0:y}}return h}function zo(e){return typeof e=="number"?e:gt(e)?Or:+e}function vt(e){if(typeof e=="string")return e;if(ne(e))return w(e,vt)+"";if(gt(e))return es?es.call(e):"";var t=e+"";return t=="0"&&1/e==-jt?"-0":t}function lr(e,t,r){var u=-1,s=_,h=e.length,y=!0,v=[],Q=v;if(r)y=!1,s=b;else if(h>=on){var L=t?null:x3(e);if(L)return ae(L);y=!1,s=ye,Q=new Cr}else Q=t?[]:v;e:for(;++u<h;){var x=e[u],T=t?t(x):x;if(x=r||x!==0?x:0,y&&T===T){for(var O=Q.length;O--;)if(Q[O]===T)continue e;t&&Q.push(T),v.push(x)}else s(Q,T,r)||(Q!==v&&Q.push(T),v.push(x))}return v}function Ni(e,t){return t=sr(t,e),e=gl(e,t),e==null||delete e[Ut(Vt(t))]}function $o(e,t,r,u){return gn(e,t,r(Vr(e,t)),u)}function Pn(e,t,r,u){for(var s=e.length,h=u?s:-1;(u?h--:++h<s)&&t(e[h],h,e););return r?At(e,u?0:h,u?h+1:s):At(e,u?h+1:0,u?s:h)}function Go(e,t){var r=e;return r instanceof j&&(r=r.value()),R(t,function(u,s){return s.func.apply(s.thisArg,E([u],s.args))},r)}function Di(e,t,r){var u=e.length;if(u<2)return u?lr(e[0]):[];for(var s=-1,h=Be(u);++s<u;)for(var y=e[s],v=-1;++v<u;)v!=s&&(h[s]=mn(h[s]||y,e[v],t,r));return lr(Pe(h,1),t,r)}function Po(e,t,r){for(var u=-1,s=e.length,h=t.length,y={};++u<s;)r(y,e[u],u<h?t[u]:m);return y}function Mi(e){return Me(e)?e:[]}function Oi(e){return typeof e=="function"?e:ht}function sr(e,t){return ne(e)?e:ji(e,t)?[e]:os(_e(e))}function cr(e,t,r){var u=e.length;return r=r===m?u:r,!t&&r>=u?e:At(e,t,r)}function Yo(e,t){if(t)return e.slice();var r=e.length,u=Gl?Gl(r):new e.constructor(r);return e.copy(u),u}function Wi(e){var t=new e.constructor(e.byteLength);return new ya(t).set(new ya(e)),t}function Mf(e,t){return new e.constructor(t?Wi(e.buffer):e.buffer,e.byteOffset,e.byteLength)}function Of(e){var t=new e.constructor(e.source,eo.exec(e));return t.lastIndex=e.lastIndex,t}function Wf(e){return xn?Le(xn.call(e)):{}}function Xo(e,t){return new e.constructor(t?Wi(e.buffer):e.buffer,e.byteOffset,e.length)}function Ko(e,t){if(e!==t){var r=e!==m,u=e===null,s=e===e,h=gt(e),y=t!==m,v=t===null,Q=t===t,L=gt(t);if(!v&&!L&&!h&&e>t||h&&y&&Q&&!v&&!L||u&&y&&Q||!r&&Q||!s)return 1;if(!u&&!h&&!L&&e<t||L&&r&&s&&!u&&!h||v&&r&&s||!y&&s||!Q)return-1}return 0}function Hf(e,t,r){for(var u=-1,s=e.criteria,h=t.criteria,y=s.length,v=r.length;++u<y;){var Q=Ko(s[u],h[u]);if(Q)return u>=v?Q:Q*(r[u]=="desc"?-1:1)}return e.index-t.index}function Jo(e,t,r,u){for(var s=-1,h=e.length,y=r.length,v=-1,Q=t.length,L=Se(h-y,0),x=Be(Q+L),T=!u;++v<Q;)x[v]=t[v];for(;++s<y;)(T||s<h)&&(x[r[s]]=e[s]);for(;L--;)x[v++]=e[s++];return x}function el(e,t,r,u){for(var s=-1,h=e.length,y=-1,v=r.length,Q=-1,L=t.length,x=Se(h-v,0),T=Be(x+L),O=!u;++s<x;)T[s]=e[s];for(var z=s;++Q<L;)T[z+Q]=t[Q];for(;++y<v;)(O||s<h)&&(T[z+r[y]]=e[s++]);return T}function ft(e,t){var r=-1,u=e.length;for(t||(t=Be(u));++r<u;)t[r]=e[r];return t}function St(e,t,r,u){var s=!r;r||(r={});for(var h=-1,y=t.length;++h<y;){var v=t[h],Q=u?u(r[v],e[v],v,r,e):m;Q===m&&(Q=e[v]),s?Yt(r,v,Q):hn(r,v,Q)}return r}function Bf(e,t){return St(e,fu(e),t)}function Sf(e,t){return St(e,is(e),t)}function Yn(e,t){return function(r,u){var s=ne(r)?o:ff,h=t?t():{};return s(r,e,J(u,2),h)}}function Sr(e){return le(function(t,r){var u=-1,s=r.length,h=s>1?r[s-1]:m,y=s>2?r[2]:m;for(h=e.length>3&&typeof h=="function"?(s--,h):m,y&&ot(r[0],r[1],y)&&(h=s<3?m:h,s=1),t=Le(t);++u<s;){var v=r[u];v&&e(t,v,u,h)}return t})}function tl(e,t){return function(r,u){if(r==null)return r;if(!dt(r))return e(r,u);for(var s=r.length,h=t?s:-1,y=Le(r);(t?h--:++h<s)&&u(y[h],h,y)!==!1;);return r}}function rl(e){return function(t,r,u){for(var s=-1,h=Le(t),y=u(t),v=y.length;v--;){var Q=y[e?v:++s];if(r(h[Q],Q,h)===!1)break}return t}}function Uf(e,t,r){function u(){return(this&&this!==Ge&&this instanceof u?h:e).apply(s?r:this,arguments)}var s=t&at,h=_n(e);return u}function nl(e){return function(t){t=_e(t);var r=Te(t)?Je(t):m,u=r?r[0]:t.charAt(0),s=r?cr(r,1).join(""):t.slice(1);return u[e]()+s}}function Ur(e){return function(t){return R(jl(Zl(t).replace(bc,"")),e,"")}}function _n(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Pr(e.prototype),u=e.apply(r,t);return ke(u)?u:r}}function Zf(e,t,r){function u(){for(var h=arguments.length,y=Be(h),v=h,Q=Zr(u);v--;)y[v]=arguments[v];var L=h<3&&y[0]!==Q&&y[h-1]!==Q?[]:F(y,Q);return h-=L.length,h<r?ll(e,t,Xn,u.placeholder,m,y,L,m,m,r-h):i(this&&this!==Ge&&this instanceof u?s:e,this,y)}var s=_n(e);return u}function al(e){return function(t,r,u){var s=Le(t);if(!dt(t)){var h=J(r,3);t=je(t),r=function(v){return h(s[v],v,s)}}var y=e(t,r,u);return y>-1?s[h?t[y]:y]:m}}function il(e){return Kt(function(t){var r=t.length,u=r,s=X.prototype.thru;for(e&&t.reverse();u--;){var h=t[u];if(typeof h!="function")throw new Lt(qe);if(s&&!y&&ta(h)=="wrapper")var y=new X([],!0)}for(u=y?u:r;++u<r;){h=t[u];var v=ta(h),Q=v=="wrapper"?cu(h):m;y=Q&&Fi(Q[0])&&Q[1]==(Et|_t|bt|it)&&!Q[4].length&&Q[9]==1?y[ta(Q[0])].apply(y,Q[3]):h.length==1&&Fi(h)?y[v]():y.thru(h)}return function(){var L=arguments,x=L[0];if(y&&L.length==1&&ne(x))return y.plant(x).value();for(var T=0,O=r?t[T].apply(this,L):x;++T<r;)O=t[T].call(this,O);return O}})}function Xn(e,t,r,u,s,h,y,v,Q,L){function x(){for(var se=arguments.length,ce=Be(se),rt=se;rt--;)ce[rt]=arguments[rt];if(P)var mt=Zr(x),hr=Ee(ce,mt);if(u&&(ce=Jo(ce,u,s,P)),h&&(ce=el(ce,h,y,P)),se-=hr,P&&se<L)return ll(e,t,Xn,x.placeholder,r,ce,F(ce,mt),v,Q,L-se);var Ne=O?r:this,It=z?Ne[e]:e;return se=ce.length,v?ce=od(ce,v):ie&&se>1&&ce.reverse(),T&&Q<se&&(ce.length=Q),this&&this!==Ge&&this instanceof x&&(It=Y||_n(It)),It.apply(Ne,ce)}var T=t&Et,O=t&at,z=t&Zt,P=t&(_t|ur),ie=t&kt,Y=z?m:_n(e);return x}function ul(e,t){return function(r,u){return _f(r,e,t(u),{})}}function Kn(e,t){return function(r,u){var s;if(r===m&&u===m)return t;if(r!==m&&(s=r),u!==m){if(s===m)return u;typeof r=="string"||typeof u=="string"?(r=vt(r),u=vt(u)):(r=zo(r),u=zo(u)),s=e(r,u)}return s}}function Hi(e){return Kt(function(t){return t=w(t,re(J())),le(function(r){var u=this;return e(t,function(s){return i(s,u,r)})})})}function Jn(e,t){t=t===m?" ":vt(t);var r=t.length;if(r<2)return r?qi(t,e):t;var u=qi(t,ba(e/He(t)));return Te(t)?cr(Je(u),0,e).join(""):u.slice(0,e)}function jf(e,t,r,u){function s(){for(var v=-1,Q=arguments.length,L=-1,x=u.length,T=Be(x+Q),O=this&&this!==Ge&&this instanceof s?y:e;++L<x;)T[L]=u[L];for(;Q--;)T[L++]=arguments[++v];return i(O,h?r:this,T)}var h=t&at,y=_n(e);return s}function ol(e){return function(t,r,u){return u&&typeof u!="number"&&ot(t,r,u)&&(r=u=m),t=tr(t),r===m?(r=t,t=0):r=tr(r),u=u===m?t<r?1:-1:tr(u),Tf(t,r,u,e)}}function ea(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=xt(t),r=xt(r)),e(t,r)}}function ll(e,t,r,u,s,h,y,v,Q,L){var x=t&_t,T=x?y:m,O=x?m:y,z=x?h:m,P=x?m:h;t|=x?bt:or,t&=~(x?or:bt),t&On||(t&=~(at|Zt));var ie=[e,t,s,z,T,P,O,v,Q,L],Y=r.apply(m,ie);return Fi(e)&&us(Y,ie),Y.placeholder=u,_l(Y,e,t)}function Bi(e){var t=Fr[e];return function(r,u){if(r=xt(r),u=u==null?0:et(ue(u),292),u&&Kl(r)){var s=(_e(r)+"e").split("e");return s=(_e(t(s[0]+"e"+(+s[1]+u)))+"e").split("e"),+(s[0]+"e"+(+s[1]-u))}return t(r)}}function sl(e){return function(t){var r=tt(t);return r==Tt?D(t):r==qt?We(t):ee(t,e(t))}}function Xt(e,t,r,u,s,h,y,v){var Q=t&Zt;if(!Q&&typeof e!="function")throw new Lt(qe);var L=u?u.length:0;if(L||(t&=~(bt|or),u=s=m),y=y===m?y:Se(ue(y),0),v=v===m?v:ue(v),L-=s?s.length:0,t&or){var x=u,T=s;u=s=m}var O=Q?m:cu(e),z=[e,t,r,u,s,x,T,h,y,v];if(O&&ad(z,O),e=z[0],t=z[1],r=z[2],u=z[3],s=z[4],v=z[9]=z[9]===m?Q?0:e.length:Se(z[9]-L,0),!v&&t&(_t|ur)&&(t&=~(_t|ur)),t&&t!=at)P=t==_t||t==ur?Zf(e,t,v):t!=bt&&t!=(at|bt)||s.length?Xn.apply(m,z):jf(e,t,r,u);else var P=Uf(e,t,r);return _l((O?ns:us)(P,z),e,t)}function cl(e,t,r,u){return e===m||Nt(e,zr[r])&&!Qe.call(u,r)?t:e}function fl(e,t,r,u,s,h){return ke(e)&&ke(t)&&(h.set(t,e),$n(e,t,m,fl,h),h.delete(t)),e}function Ff(e){return Qn(e)?m:e}function dl(e,t,r,u,s,h){var y=r&Ot,v=e.length,Q=t.length;if(v!=Q&&!(y&&Q>v))return!1;var L=h.get(e),x=h.get(t);if(L&&x)return L==t&&x==e;var T=-1,O=!0,z=r&ir?new Cr:m;for(h.set(e,t),h.set(t,e);++T<v;){var P=e[T],ie=t[T];if(u)var Y=y?u(ie,P,T,t,e,h):u(P,ie,T,e,t,h);if(Y!==m){if(Y)continue;O=!1;break}if(z){if(!q(t,function(se,ce){if(!ye(z,ce)&&(P===se||s(P,se,r,u,h)))return z.push(ce)})){O=!1;break}}else if(P!==ie&&!s(P,ie,r,u,h)){O=!1;break}}return h.delete(e),h.delete(t),O}function zf(e,t,r,u,s,h,y){switch(r){case Wr:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pn:return!(e.byteLength!=t.byteLength||!h(new ya(e),new ya(t)));case zt:case ln:case sn:return Nt(+e,+t);case Wn:return e.name==t.name&&e.message==t.message;case cn:case fn:return e==t+"";case Tt:var v=D;case qt:var Q=u&Ot;if(v||(v=ae),e.size!=t.size&&!Q)return!1;var L=y.get(e);if(L)return L==t;u|=ir,y.set(e,t);var x=dl(v(e),v(t),u,s,h,y);return y.delete(e),x;case Bn:if(xn)return xn.call(e)==xn.call(t)}return!1}function $f(e,t,r,u,s,h){var y=r&Ot,v=Si(e),Q=v.length;if(Q!=Si(t).length&&!y)return!1;for(var L=Q;L--;){var x=v[L];if(!(y?x in t:Qe.call(t,x)))return!1}var T=h.get(e),O=h.get(t);if(T&&O)return T==t&&O==e;var z=!0;h.set(e,t),h.set(t,e);for(var P=y;++L<Q;){x=v[L];var ie=e[x],Y=t[x];if(u)var se=y?u(Y,ie,x,t,e,h):u(ie,Y,x,e,t,h);if(!(se===m?ie===Y||s(ie,Y,r,u,h):se)){z=!1;break}P||(P=x=="constructor")}if(z&&!P){var ce=e.constructor,rt=t.constructor;ce!=rt&&"constructor"in e&&"constructor"in t&&!(typeof ce=="function"&&ce instanceof ce&&typeof rt=="function"&&rt instanceof rt)&&(z=!1)}return h.delete(e),h.delete(t),z}function Kt(e){return du(vl(e,m,Al),e+"")}function Si(e){return No(e,je,fu)}function Ui(e){return No(e,pt,is)}function ta(e){for(var t=e.name+"",r=Gr[t],u=Qe.call(Gr,t)?r.length:0;u--;){var s=r[u],h=s.func;if(h==null||h==e)return s.name}return t}function Zr(e){return(Qe.call(l,"placeholder")?l:e).placeholder}function J(){var e=l.iteratee||Ji;return e=e===Ji?Oo:e,arguments.length?e(arguments[0],arguments[1]):e}function ra(e,t){var r=e.__data__;return td(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Zi(e){for(var t=je(e),r=t.length;r--;){var u=t[r],s=e[u];t[r]=[u,s,ml(s)]}return t}function xr(e,t){var r=Ke(e,t);return Mo(r)?r:m}function Gf(e){var t=Qe.call(e,Ir),r=e[Ir];try{e[Ir]=m;var u=!0}catch{}var s=ha.call(e);return u&&(t?e[Ir]=r:delete e[Ir]),s}function Pf(e,t,r){for(var u=-1,s=r.length;++u<s;){var h=r[u],y=h.size;switch(h.type){case"drop":e+=y;break;case"dropRight":t-=y;break;case"take":t=et(t,e+y);break;case"takeRight":e=Se(e,t-y)}}return{start:e,end:t}}function Yf(e){var t=e.match(F1);return t?t[1].split(z1):[]}function pl(e,t,r){t=sr(t,e);for(var u=-1,s=t.length,h=!1;++u<s;){var y=Ut(t[u]);if(!(h=e!=null&&r(e,y)))break;e=e[y]}return h||++u!=s?h:(s=e==null?0:e.length,!!s&&la(s)&&Jt(y,s)&&(ne(e)||Er(e)))}function Xf(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Qe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function hl(e){return typeof e.constructor!="function"||bn(e)?{}:Pr(va(e))}function Kf(e,t,r){var u=e.constructor;switch(t){case pn:return Wi(e);case zt:case ln:return new u(+e);case Wr:return Mf(e,r);case ni:case ai:case ii:case ui:case oi:case li:case si:case ci:case fi:return Xo(e,r);case Tt:return new u;case sn:case fn:return new u(e);case cn:return Of(e);case qt:return new u;case Bn:return Wf(e)}}function Jf(e,t){var r=t.length;if(!r)return e;var u=r-1;return t[u]=(r>1?"& ":"")+t[u],t=t.join(r>2?", ":" "),e.replace(j1,`{
/* [wrapped with `+t+`] */
`)}function ed(e){return ne(e)||Er(e)||!!(Xl&&e&&e[Xl])}function Jt(e,t){var r=typeof e;return t=t??Ht,!!t&&(r=="number"||r!="symbol"&&tc.test(e))&&e>-1&&e%1==0&&e<t}function ot(e,t,r){if(!ke(r))return!1;var u=typeof t;return!!(u=="number"?dt(r)&&Jt(t,r.length):u=="string"&&t in r)&&Nt(r[t],e)}function ji(e,t){if(ne(e))return!1;var r=typeof e;return!(r!="number"&&r!="symbol"&&r!="boolean"&&e!=null&&!gt(e))||B1.test(e)||!H1.test(e)||t!=null&&e in Le(t)}function td(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Fi(e){var t=ta(e),r=l[t];if(typeof r!="function"||!(t in j.prototype))return!1;if(e===r)return!0;var u=cu(r);return!!u&&e===u[0]}function rd(e){return!!$l&&$l in e}function bn(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||zr)}function ml(e){return e===e&&!ke(e)}function yl(e,t){return function(r){return r!=null&&r[e]===t&&(t!==m||e in Le(r))}}function nd(e){var t=ua(e,function(u){return r.size===Mn&&r.clear(),u}),r=t.cache;return t}function ad(e,t){var r=e[1],u=t[1],s=r|u,h=s<(at|Zt|Et),y=u==Et&&r==_t||u==Et&&r==it&&e[7].length<=t[8]||u==(Et|it)&&t[7].length<=t[8]&&r==_t;if(!h&&!y)return e;u&at&&(e[2]=t[2],s|=r&at?0:On);var v=t[3];if(v){var Q=e[3];e[3]=Q?Jo(Q,v,t[4]):v,e[4]=Q?F(e[3],Nr):t[4]}return v=t[5],v&&(Q=e[5],e[5]=Q?el(Q,v,t[6]):v,e[6]=Q?F(e[5],Nr):t[6]),v=t[7],v&&(e[7]=v),u&Et&&(e[8]=e[8]==null?t[8]:et(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=s,e}function id(e){var t=[];if(e!=null)for(var r in Le(e))t.push(r);return t}function ud(e){return ha.call(e)}function vl(e,t,r){return t=Se(t===m?e.length-1:t,0),function(){for(var u=arguments,s=-1,h=Se(u.length-t,0),y=Be(h);++s<h;)y[s]=u[t+s];s=-1;for(var v=Be(t+1);++s<t;)v[s]=u[s];return v[t]=r(y),i(e,this,v)}}function gl(e,t){return t.length<2?e:Vr(e,At(t,0,-1))}function od(e,t){for(var r=e.length,u=et(t.length,r),s=ft(e);u--;){var h=t[u];e[u]=Jt(h,r)?s[h]:m}return e}function zi(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]}function _l(e,t,r){var u=t+"";return du(e,Jf(u,ld(Yf(u),r)))}function bl(e){var t=0,r=0;return function(){var u=y3(),s=Mr-(u-r);if(r=u,s>0){if(++t>=Ka)return arguments[0]}else t=0;return e.apply(m,arguments)}}function na(e,t){var r=-1,u=e.length,s=u-1;for(t=t===m?u:t;++r<t;){var h=Ti(r,s),y=e[h];e[h]=e[r],e[r]=y}return e.length=t,e}function Ut(e){if(typeof e=="string"||gt(e))return e;var t=e+"";return t=="0"&&1/e==-jt?"-0":t}function Lr(e){if(e!=null){try{return pa.call(e)}catch{}try{return e+""}catch{}}return""}function ld(e,t){return c(de,function(r){var u="_."+r[0];t&r[1]&&!_(e,u)&&e.push(u)}),e.sort()}function Ql(e){if(e instanceof j)return e.clone();var t=new X(e.__wrapped__,e.__chain__);return t.__actions__=ft(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function sd(e,t,r){t=(r?ot(e,t,r):t===m)?1:Se(ue(t),0);var u=e==null?0:e.length;if(!u||t<1)return[];for(var s=0,h=0,y=Be(ba(u/t));s<u;)y[h++]=At(e,s,s+=t);return y}function cd(e){for(var t=-1,r=e==null?0:e.length,u=0,s=[];++t<r;){var h=e[t];h&&(s[u++]=h)}return s}function fd(){var e=arguments.length;if(!e)return[];for(var t=Be(e-1),r=arguments[0],u=e;u--;)t[u-1]=arguments[u];return E(ne(r)?ft(r):[r],Pe(t,1))}function dd(e,t,r){var u=e==null?0:e.length;return u?(t=r||t===m?1:ue(t),At(e,t<0?0:t,u)):[]}function pd(e,t,r){var u=e==null?0:e.length;return u?(t=r||t===m?1:ue(t),t=u-t,At(e,0,t<0?0:t)):[]}function hd(e,t){return e&&e.length?Pn(e,J(t,3),!0,!0):[]}function md(e,t){return e&&e.length?Pn(e,J(t,3),!0):[]}function yd(e,t,r,u){var s=e==null?0:e.length;return s?(r&&typeof r!="number"&&ot(e,t,r)&&(r=0,u=s),mf(e,t,r,u)):[]}function wl(e,t,r){var u=e==null?0:e.length;if(!u)return-1;var s=r==null?0:ue(r);return s<0&&(s=Se(u+s,0)),K(e,J(t,3),s)}function Cl(e,t,r){var u=e==null?0:e.length;if(!u)return-1;var s=u-1;return r!==m&&(s=ue(r),s=r<0?Se(u+s,0):et(s,u-1)),K(e,J(t,3),s,!0)}function Al(e){return e!=null&&e.length?Pe(e,1):[]}function vd(e){return e!=null&&e.length?Pe(e,jt):[]}function gd(e,t){return e!=null&&e.length?(t=t===m?1:ue(t),Pe(e,t)):[]}function _d(e){for(var t=-1,r=e==null?0:e.length,u={};++t<r;){var s=e[t];u[s[0]]=s[1]}return u}function Vl(e){return e&&e.length?e[0]:m}function bd(e,t,r){var u=e==null?0:e.length;if(!u)return-1;var s=r==null?0:ue(r);return s<0&&(s=Se(u+s,0)),S(e,t,s)}function Qd(e){return e!=null&&e.length?At(e,0,-1):[]}function wd(e,t){return e==null?"":h3.call(e,t)}function Vt(e){var t=e==null?0:e.length;return t?e[t-1]:m}function Cd(e,t,r){var u=e==null?0:e.length;if(!u)return-1;var s=u;return r!==m&&(s=ue(r),s=s<0?Se(u+s,0):et(s,u-1)),t===t?ze(e,t,s):K(e,pe,s,!0)}function Ad(e,t){return e&&e.length?So(e,ue(t)):m}function xl(e,t){return e&&e.length&&t&&t.length?ki(e,t):e}function Vd(e,t,r){return e&&e.length&&t&&t.length?ki(e,t,J(r,2)):e}function xd(e,t,r){return e&&e.length&&t&&t.length?ki(e,t,m,r):e}function Ld(e,t){var r=[];if(!e||!e.length)return r;var u=-1,s=[],h=e.length;for(t=J(t,3);++u<h;){var y=e[u];t(y,u,e)&&(r.push(y),s.push(u))}return jo(e,s),r}function $i(e){return e==null?e:g3.call(e)}function Id(e,t,r){var u=e==null?0:e.length;return u?(r&&typeof r!="number"&&ot(e,t,r)?(t=0,r=u):(t=t==null?0:ue(t),r=r===m?u:ue(r)),At(e,t,r)):[]}function Ed(e,t){return Gn(e,t)}function kd(e,t,r){return Ri(e,t,J(r,2))}function Td(e,t){var r=e==null?0:e.length;if(r){var u=Gn(e,t);if(u<r&&Nt(e[u],t))return u}return-1}function qd(e,t){return Gn(e,t,!0)}function Rd(e,t,r){return Ri(e,t,J(r,2),!0)}function Nd(e,t){if(e!=null&&e.length){var r=Gn(e,t,!0)-1;if(Nt(e[r],t))return r}return-1}function Dd(e){return e&&e.length?Fo(e):[]}function Md(e,t){return e&&e.length?Fo(e,J(t,2)):[]}function Od(e){var t=e==null?0:e.length;return t?At(e,1,t):[]}function Wd(e,t,r){return e&&e.length?(t=r||t===m?1:ue(t),At(e,0,t<0?0:t)):[]}function Hd(e,t,r){var u=e==null?0:e.length;return u?(t=r||t===m?1:ue(t),t=u-t,At(e,t<0?0:t,u)):[]}function Bd(e,t){return e&&e.length?Pn(e,J(t,3),!1,!0):[]}function Sd(e,t){return e&&e.length?Pn(e,J(t,3)):[]}function Ud(e){return e&&e.length?lr(e):[]}function Zd(e,t){return e&&e.length?lr(e,J(t,2)):[]}function jd(e,t){return t=typeof t=="function"?t:m,e&&e.length?lr(e,m,t):[]}function Gi(e){if(!e||!e.length)return[];var t=0;return e=p(e,function(r){if(Me(r))return t=Se(r.length,t),!0}),oe(t,function(r){return w(e,we(r))})}function Ll(e,t){if(!e||!e.length)return[];var r=Gi(e);return t==null?r:w(r,function(u){return i(t,m,u)})}function Fd(e,t){return Po(e||[],t||[],hn)}function zd(e,t){return Po(e||[],t||[],gn)}function Il(e){var t=l(e);return t.__chain__=!0,t}function $d(e,t){return t(e),e}function aa(e,t){return t(e)}function Gd(){return Il(this)}function Pd(){return new X(this.value(),this.__chain__)}function Yd(){this.__values__===m&&(this.__values__=Wl(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?m:this.__values__[this.__index__++]}}function Xd(){return this}function Kd(e){for(var t,r=this;r instanceof U;){var u=Ql(r);u.__index__=0,u.__values__=m,t?s.__wrapped__=u:t=u;var s=u;r=r.__wrapped__}return s.__wrapped__=e,t}function Jd(){var e=this.__wrapped__;if(e instanceof j){var t=e;return this.__actions__.length&&(t=new j(this)),t=t.reverse(),t.__actions__.push({func:aa,args:[$i],thisArg:m}),new X(t,this.__chain__)}return this.thru($i)}function ep(){return Go(this.__wrapped__,this.__actions__)}function tp(e,t,r){var u=ne(e)?d:hf;return r&&ot(e,t,r)&&(t=m),u(e,J(t,3))}function rp(e,t){return(ne(e)?p:Ro)(e,J(t,3))}function np(e,t){return Pe(ia(e,t),1)}function ap(e,t){return Pe(ia(e,t),jt)}function ip(e,t,r){return r=r===m?1:ue(r),Pe(ia(e,t),r)}function El(e,t){return(ne(e)?c:dr)(e,J(t,3))}function kl(e,t){return(ne(e)?f:ts)(e,J(t,3))}function up(e,t,r,u){e=dt(e)?e:jr(e),r=r&&!u?ue(r):0;var s=e.length;return r<0&&(r=Se(s+r,0)),sa(e)?r<=s&&e.indexOf(t,r)>-1:!!s&&S(e,t,r)>-1}function ia(e,t){return(ne(e)?w:Wo)(e,J(t,3))}function op(e,t,r,u){return e==null?[]:(ne(t)||(t=t==null?[]:[t]),r=u?m:r,ne(r)||(r=r==null?[]:[r]),Uo(e,t,r))}function lp(e,t,r){var u=ne(e)?R:H,s=arguments.length<3;return u(e,J(t,4),r,s,dr)}function sp(e,t,r){var u=ne(e)?N:H,s=arguments.length<3;return u(e,J(t,4),r,s,ts)}function cp(e,t){return(ne(e)?p:Ro)(e,oa(J(t,3)))}function fp(e){return(ne(e)?Eo:qf)(e)}function dp(e,t,r){return t=(r?ot(e,t,r):t===m)?1:ue(t),(ne(e)?sf:Rf)(e,t)}function pp(e){return(ne(e)?cf:Nf)(e)}function hp(e){if(e==null)return 0;if(dt(e))return sa(e)?He(e):e.length;var t=tt(e);return t==Tt||t==qt?e.size:Ii(e).length}function mp(e,t,r){var u=ne(e)?q:Df;return r&&ot(e,t,r)&&(t=m),u(e,J(t,3))}function yp(e,t){if(typeof t!="function")throw new Lt(qe);return e=ue(e),function(){if(--e<1)return t.apply(this,arguments)}}function Tl(e,t,r){return t=r?m:t,t=e&&t==null?e.length:t,Xt(e,Et,m,m,m,m,t)}function ql(e,t){var r;if(typeof t!="function")throw new Lt(qe);return e=ue(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=m),r}}function Rl(e,t,r){t=r?m:t;var u=Xt(e,_t,m,m,m,m,m,t);return u.placeholder=Rl.placeholder,u}function Nl(e,t,r){t=r?m:t;var u=Xt(e,ur,m,m,m,m,m,t);return u.placeholder=Nl.placeholder,u}function Dl(e,t,r){function u(Ne){var It=O,In=z;return O=z=m,ce=Ne,ie=e.apply(In,It)}function s(Ne){return ce=Ne,Y=Ln(v,t),rt?u(Ne):ie}function h(Ne){var It=Ne-se,In=Ne-ce,vs=t-It;return mt?et(vs,P-In):vs}function y(Ne){var It=Ne-se,In=Ne-ce;return se===m||It>=t||It<0||mt&&In>=P}function v(){var Ne=Aa();return y(Ne)?Q(Ne):(Y=Ln(v,h(Ne)),m)}function Q(Ne){return Y=m,hr&&O?u(Ne):(O=z=m,ie)}function L(){Y!==m&&as(Y),ce=0,O=se=z=Y=m}function x(){return Y===m?ie:Q(Aa())}function T(){var Ne=Aa(),It=y(Ne);if(O=arguments,z=this,se=Ne,It){if(Y===m)return s(se);if(mt)return as(Y),Y=Ln(v,t),u(se)}return Y===m&&(Y=Ln(v,t)),ie}var O,z,P,ie,Y,se,ce=0,rt=!1,mt=!1,hr=!0;if(typeof e!="function")throw new Lt(qe);return t=xt(t)||0,ke(r)&&(rt=!!r.leading,mt="maxWait"in r,P=mt?Se(xt(r.maxWait)||0,t):P,hr="trailing"in r?!!r.trailing:hr),T.cancel=L,T.flush=x,T}function vp(e){return Xt(e,kt)}function ua(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Lt(qe);var r=function(){var u=arguments,s=t?t.apply(this,u):u[0],h=r.cache;if(h.has(s))return h.get(s);var y=e.apply(this,u);return r.cache=h.set(s,y)||h,y};return r.cache=new(ua.Cache||Pt),r}function oa(e){if(typeof e!="function")throw new Lt(qe);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function gp(e){return ql(2,e)}function _p(e,t){if(typeof e!="function")throw new Lt(qe);return t=t===m?t:ue(t),le(e,t)}function bp(e,t){if(typeof e!="function")throw new Lt(qe);return t=t==null?0:Se(ue(t),0),le(function(r){var u=r[t],s=cr(r,0,t);return u&&E(s,u),i(e,this,s)})}function Qp(e,t,r){var u=!0,s=!0;if(typeof e!="function")throw new Lt(qe);return ke(r)&&(u="leading"in r?!!r.leading:u,s="trailing"in r?!!r.trailing:s),Dl(e,t,{leading:u,maxWait:t,trailing:s})}function wp(e){return Tl(e,1)}function Cp(e,t){return hu(Oi(t),e)}function Ap(){if(!arguments.length)return[];var e=arguments[0];return ne(e)?e:[e]}function Vp(e){return Ct(e,Mt)}function xp(e,t){return t=typeof t=="function"?t:m,Ct(e,Mt,t)}function Lp(e){return Ct(e,$e|Mt)}function Ip(e,t){return t=typeof t=="function"?t:m,Ct(e,$e|Mt,t)}function Ep(e,t){return t==null||To(e,t,je(t))}function Nt(e,t){return e===t||e!==e&&t!==t}function dt(e){return e!=null&&la(e.length)&&!er(e)}function Me(e){return Re(e)&&dt(e)}function kp(e){return e===!0||e===!1||Re(e)&&ut(e)==zt}function Tp(e){return Re(e)&&e.nodeType===1&&!Qn(e)}function qp(e){if(e==null)return!0;if(dt(e)&&(ne(e)||typeof e=="string"||typeof e.splice=="function"||pr(e)||Yr(e)||Er(e)))return!e.length;var t=tt(e);if(t==Tt||t==qt)return!e.size;if(bn(e))return!Ii(e).length;for(var r in e)if(Qe.call(e,r))return!1;return!0}function Rp(e,t){return vn(e,t)}function Np(e,t,r){r=typeof r=="function"?r:m;var u=r?r(e,t):m;return u===m?vn(e,t,m,r):!!u}function Pi(e){if(!Re(e))return!1;var t=ut(e);return t==Wn||t==L1||typeof e.message=="string"&&typeof e.name=="string"&&!Qn(e)}function Dp(e){return typeof e=="number"&&Kl(e)}function er(e){if(!ke(e))return!1;var t=ut(e);return t==Hn||t==Pu||t==br||t==E1}function Ml(e){return typeof e=="number"&&e==ue(e)}function la(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ht}function ke(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Re(e){return e!=null&&typeof e=="object"}function Mp(e,t){return e===t||Li(e,t,Zi(t))}function Op(e,t,r){return r=typeof r=="function"?r:m,Li(e,t,Zi(t),r)}function Wp(e){return Ol(e)&&e!=+e}function Hp(e){if(L3(e))throw new au(Pa);return Mo(e)}function Bp(e){return e===null}function Sp(e){return e==null}function Ol(e){return typeof e=="number"||Re(e)&&ut(e)==sn}function Qn(e){if(!Re(e)||ut(e)!=$t)return!1;var t=va(e);if(t===null)return!0;var r=Qe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&pa.call(r)==o3}function Up(e){return Ml(e)&&e>=-Ht&&e<=Ht}function sa(e){return typeof e=="string"||!ne(e)&&Re(e)&&ut(e)==fn}function gt(e){return typeof e=="symbol"||Re(e)&&ut(e)==Bn}function Zp(e){return e===m}function jp(e){return Re(e)&&tt(e)==dn}function Fp(e){return Re(e)&&ut(e)==T1}function Wl(e){if(!e)return[];if(dt(e))return sa(e)?Je(e):ft(e);if(wn&&e[wn])return G(e[wn]());var t=tt(e);return(t==Tt?D:t==qt?ae:jr)(e)}function tr(e){return e?(e=xt(e),e===jt||e===-jt?(e<0?-1:1)*ei:e===e?e:0):e===0?e:0}function ue(e){var t=tr(e),r=t%1;return t===t?r?t-r:t:0}function Hl(e){return e?Ar(ue(e),0,Qt):0}function xt(e){if(typeof e=="number")return e;if(gt(e))return Or;if(ke(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ke(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=he(e);var r=K1.test(e);return r||ec.test(e)?qc(e.slice(2),r?2:8):X1.test(e)?Or:+e}function Bl(e){return St(e,pt(e))}function zp(e){return e?Ar(ue(e),-Ht,Ht):e===0?e:0}function _e(e){return e==null?"":vt(e)}function $p(e,t){var r=Pr(e);return t==null?r:ko(r,t)}function Gp(e,t){return M(e,J(t,3),Bt)}function Pp(e,t){return M(e,J(t,3),Ai)}function Yp(e,t){return e==null?e:su(e,J(t,3),pt)}function Xp(e,t){return e==null?e:rs(e,J(t,3),pt)}function Kp(e,t){return e&&Bt(e,J(t,3))}function Jp(e,t){return e&&Ai(e,J(t,3))}function e0(e){return e==null?[]:zn(e,je(e))}function t0(e){return e==null?[]:zn(e,pt(e))}function Yi(e,t,r){var u=e==null?m:Vr(e,t);return u===m?r:u}function r0(e,t){return e!=null&&pl(e,t,yf)}function Xi(e,t){return e!=null&&pl(e,t,vf)}function je(e){return dt(e)?Io(e):Ii(e)}function pt(e){return dt(e)?Io(e,!0):Lf(e)}function n0(e,t){var r={};return t=J(t,3),Bt(e,function(u,s,h){Yt(r,t(u,s,h),u)}),r}function a0(e,t){var r={};return t=J(t,3),Bt(e,function(u,s,h){Yt(r,s,t(u,s,h))}),r}function i0(e,t){return Sl(e,oa(J(t)))}function Sl(e,t){if(e==null)return{};var r=w(Ui(e),function(u){return[u]});return t=J(t),Zo(e,r,function(u,s){return t(u,s[0])})}function u0(e,t,r){t=sr(t,e);var u=-1,s=t.length;for(s||(s=1,e=m);++u<s;){var h=e==null?m:e[Ut(t[u])];h===m&&(u=s,h=r),e=er(h)?h.call(e):h}return e}function o0(e,t,r){return e==null?e:gn(e,t,r)}function l0(e,t,r,u){return u=typeof u=="function"?u:m,e==null?e:gn(e,t,r,u)}function s0(e,t,r){var u=ne(e),s=u||pr(e)||Yr(e);if(t=J(t,4),r==null){var h=e&&e.constructor;r=s?u?new h:[]:ke(e)&&er(h)?Pr(va(e)):{}}return(s?c:Bt)(e,function(y,v,Q){return t(r,y,v,Q)}),r}function c0(e,t){return e==null||Ni(e,t)}function f0(e,t,r){return e==null?e:$o(e,t,Oi(r))}function d0(e,t,r,u){return u=typeof u=="function"?u:m,e==null?e:$o(e,t,Oi(r),u)}function jr(e){return e==null?[]:be(e,je(e))}function p0(e){return e==null?[]:be(e,pt(e))}function h0(e,t,r){return r===m&&(r=t,t=m),r!==m&&(r=xt(r),r=r===r?r:0),t!==m&&(t=xt(t),t=t===t?t:0),Ar(xt(e),t,r)}function m0(e,t,r){return t=tr(t),r===m?(r=t,t=0):r=tr(r),e=xt(e),gf(e,t,r)}function y0(e,t,r){if(r&&typeof r!="boolean"&&ot(e,t,r)&&(t=r=m),r===m&&(typeof t=="boolean"?(r=t,t=m):typeof e=="boolean"&&(r=e,e=m)),e===m&&t===m?(e=0,t=1):(e=tr(e),t===m?(t=e,e=0):t=tr(t)),e>t){var u=e;e=t,t=u}if(r||e%1||t%1){var s=Jl();return et(e+s*(t-e+Tc("1e-"+((s+"").length-1))),t)}return Ti(e,t)}function Ul(e){return yu(_e(e).toLowerCase())}function Zl(e){return e=_e(e),e&&e.replace(rc,Dc).replace(Qc,"")}function v0(e,t,r){e=_e(e),t=vt(t);var u=e.length;r=r===m?u:Ar(ue(r),0,u);var s=r;return r-=t.length,r>=0&&e.slice(r,s)==t}function g0(e){return e=_e(e),e&&M1.test(e)?e.replace(Ku,Mc):e}function _0(e){return e=_e(e),e&&U1.test(e)?e.replace(di,"\\$&"):e}function b0(e,t,r){e=_e(e),t=ue(t);var u=t?He(e):0;if(!t||u>=t)return e;var s=(t-u)/2;return Jn(Qa(s),r)+e+Jn(ba(s),r)}function Q0(e,t,r){e=_e(e),t=ue(t);var u=t?He(e):0;return t&&u<t?e+Jn(t-u,r):e}function w0(e,t,r){e=_e(e),t=ue(t);var u=t?He(e):0;return t&&u<t?Jn(t-u,r)+e:e}function C0(e,t,r){return r||t==null?t=0:t&&(t=+t),v3(_e(e).replace(pi,""),t||0)}function A0(e,t,r){return t=(r?ot(e,t,r):t===m)?1:ue(t),qi(_e(e),t)}function V0(){var e=arguments,t=_e(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function x0(e,t,r){return r&&typeof r!="number"&&ot(e,t,r)&&(t=r=m),(r=r===m?Qt:r>>>0)?(e=_e(e),e&&(typeof t=="string"||t!=null&&!mu(t))&&(t=vt(t),!t&&Te(e))?cr(Je(e),0,r):e.split(t,r)):[]}function L0(e,t,r){return e=_e(e),r=r==null?0:Ar(ue(r),0,e.length),t=vt(t),e.slice(r,r+t.length)==t}function I0(e,t,r){var u=l.templateSettings;r&&ot(e,t,r)&&(t=m),e=_e(e),t=Va({},t,u,cl);var s,h,y=Va({},t.imports,u.imports,cl),v=je(y),Q=be(y,v),L=0,x=t.interpolate||Sn,T="__p += '",O=iu((t.escape||Sn).source+"|"+x.source+"|"+(x===Ju?Y1:Sn).source+"|"+(t.evaluate||Sn).source+"|$","g"),z="//# sourceURL="+(Qe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xc+"]")+`
`;e.replace(O,function(Y,se,ce,rt,mt,hr){return ce||(ce=rt),T+=e.slice(L,hr).replace(nc,nt),se&&(s=!0,T+=`' +
__e(`+se+`) +
'`),mt&&(h=!0,T+=`';
`+mt+`;
__p += '`),ce&&(T+=`' +
((__t = (`+ce+`)) == null ? '' : __t) +
'`),L=hr+Y.length,Y}),T+=`';
`;var P=Qe.call(t,"variable")&&t.variable;if(P){if(G1.test(P))throw new au(Rr)}else T=`with (obj) {
`+T+`
}
`;T=(h?T.replace(q1,""):T).replace(R1,"$1").replace(N1,"$1;"),T="function("+(P||"obj")+`) {
`+(P?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(s?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+T+`return __p
}`;var ie=ys(function(){return zl(v,z+"return "+T).apply(m,Q)});if(ie.source=T,Pi(ie))throw ie;return ie}function E0(e){return _e(e).toLowerCase()}function k0(e){return _e(e).toUpperCase()}function T0(e,t,r){if(e=_e(e),e&&(r||t===m))return he(e);if(!e||!(t=vt(t)))return e;var u=Je(e),s=Je(t);return cr(u,De(u,s),Ve(u,s)+1).join("")}function q0(e,t,r){if(e=_e(e),e&&(r||t===m))return e.slice(0,ar(e)+1);if(!e||!(t=vt(t)))return e;var u=Je(e);return cr(u,0,Ve(u,Je(t))+1).join("")}function R0(e,t,r){if(e=_e(e),e&&(r||t===m))return e.replace(pi,"");if(!e||!(t=vt(t)))return e;var u=Je(e);return cr(u,De(u,Je(t))).join("")}function N0(e,t){var r=Ya,u=Xa;if(ke(t)){var s="separator"in t?t.separator:s;r="length"in t?ue(t.length):r,u="omission"in t?vt(t.omission):u}e=_e(e);var h=e.length;if(Te(e)){var y=Je(e);h=y.length}if(r>=h)return e;var v=r-He(u);if(v<1)return u;var Q=y?cr(y,0,v).join(""):e.slice(0,v);if(s===m)return Q+u;if(y&&(v+=Q.length-v),mu(s)){if(e.slice(v).search(s)){var L,x=Q;for(s.global||(s=iu(s.source,_e(eo.exec(s))+"g")),s.lastIndex=0;L=s.exec(x);)var T=L.index;Q=Q.slice(0,T===m?v:T)}}else if(e.indexOf(vt(s),v)!=v){var O=Q.lastIndexOf(s);O>-1&&(Q=Q.slice(0,O))}return Q+u}function D0(e){return e=_e(e),e&&D1.test(e)?e.replace(Xu,Oc):e}function jl(e,t,r){return e=_e(e),t=r?m:t,t===m?Dt(e)?$a(e):k(e):e.match(t)||[]}function M0(e){var t=e==null?0:e.length,r=J();return e=t?w(e,function(u){if(typeof u[1]!="function")throw new Lt(qe);return[r(u[0]),u[1]]}):[],le(function(u){for(var s=-1;++s<t;){var h=e[s];if(i(h[0],this,u))return i(h[1],this,u)}})}function O0(e){return pf(Ct(e,$e))}function Ki(e){return function(){return e}}function W0(e,t){return e==null||e!==e?t:e}function ht(e){return e}function Ji(e){return Oo(typeof e=="function"?e:Ct(e,$e))}function H0(e){return Ho(Ct(e,$e))}function B0(e,t){return Bo(e,Ct(t,$e))}function eu(e,t,r){var u=je(t),s=zn(t,u);r!=null||ke(t)&&(s.length||!u.length)||(r=t,t=e,e=this,s=zn(t,je(t)));var h=!(ke(r)&&"chain"in r&&!r.chain),y=er(e);return c(s,function(v){var Q=t[v];e[v]=Q,y&&(e.prototype[v]=function(){var L=this.__chain__;if(h||L){var x=e(this.__wrapped__);return(x.__actions__=ft(this.__actions__)).push({func:Q,args:arguments,thisArg:e}),x.__chain__=L,x}return Q.apply(e,E([this.value()],arguments))})}),e}function S0(){return Ge._===this&&(Ge._=l3),this}function tu(){}function U0(e){return e=ue(e),le(function(t){return So(t,e)})}function Fl(e){return ji(e)?we(Ut(e)):kf(e)}function Z0(e){return function(t){return e==null?m:Vr(e,t)}}function ru(){return[]}function nu(){return!1}function j0(){return{}}function F0(){return""}function z0(){return!0}function $0(e,t){if(e=ue(e),e<1||e>Ht)return[];var r=Qt,u=et(e,Qt);t=J(t),e-=Qt;for(var s=oe(u,t);++r<e;)t(r);return s}function G0(e){return ne(e)?w(e,Ut):gt(e)?[e]:ft(os(_e(e)))}function P0(e){var t=++u3;return _e(e)+t}function Y0(e){return e&&e.length?Fn(e,ht,Vi):m}function X0(e,t){return e&&e.length?Fn(e,J(t,2),Vi):m}function K0(e){return ve(e,ht)}function J0(e,t){return ve(e,J(t,2))}function e3(e){return e&&e.length?Fn(e,ht,Ei):m}function t3(e,t){return e&&e.length?Fn(e,J(t,2),Ei):m}function r3(e){return e&&e.length?W(e,ht):0}function n3(e,t){return e&&e.length?W(e,J(t,2)):0}V=V==null?Ge:Br.defaults(Ge.Object(),V,Br.pick(Ge,Vc));var Be=V.Array,ca=V.Date,au=V.Error,zl=V.Function,Fr=V.Math,Le=V.Object,iu=V.RegExp,a3=V.String,Lt=V.TypeError,fa=Be.prototype,i3=zl.prototype,zr=Le.prototype,da=V["__core-js_shared__"],pa=i3.toString,Qe=zr.hasOwnProperty,u3=0,$l=function(){var e=/[^.]+$/.exec(da&&da.keys&&da.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ha=zr.toString,o3=pa.call(Le),l3=Ge._,s3=iu("^"+pa.call(Qe).replace(di,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ma=Qo?V.Buffer:m,fr=V.Symbol,ya=V.Uint8Array,Gl=ma?ma.allocUnsafe:m,va=Z(Le.getPrototypeOf,Le),Pl=Le.create,Yl=zr.propertyIsEnumerable,ga=fa.splice,Xl=fr?fr.isConcatSpreadable:m,wn=fr?fr.iterator:m,Ir=fr?fr.toStringTag:m,_a=function(){try{var e=xr(Le,"defineProperty");return e({},"",{}),e}catch{}}(),c3=V.clearTimeout!==Ge.clearTimeout&&V.clearTimeout,f3=ca&&ca.now!==Ge.Date.now&&ca.now,d3=V.setTimeout!==Ge.setTimeout&&V.setTimeout,ba=Fr.ceil,Qa=Fr.floor,uu=Le.getOwnPropertySymbols,p3=ma?ma.isBuffer:m,Kl=V.isFinite,h3=fa.join,m3=Z(Le.keys,Le),Se=Fr.max,et=Fr.min,y3=ca.now,v3=V.parseInt,Jl=Fr.random,g3=fa.reverse,ou=xr(V,"DataView"),Cn=xr(V,"Map"),lu=xr(V,"Promise"),$r=xr(V,"Set"),An=xr(V,"WeakMap"),Vn=xr(Le,"create"),wa=An&&new An,Gr={},_3=Lr(ou),b3=Lr(Cn),Q3=Lr(lu),w3=Lr($r),C3=Lr(An),Ca=fr?fr.prototype:m,xn=Ca?Ca.valueOf:m,es=Ca?Ca.toString:m,Pr=function(){function e(){}return function(t){if(!ke(t))return{};if(Pl)return Pl(t);e.prototype=t;var r=new e;return e.prototype=m,r}}();l.templateSettings={escape:O1,evaluate:W1,interpolate:Ju,variable:"",imports:{_:l}},l.prototype=U.prototype,l.prototype.constructor=l,X.prototype=Pr(U.prototype),X.prototype.constructor=X,j.prototype=Pr(U.prototype),j.prototype.constructor=j,wr.prototype.clear=Bc,wr.prototype.delete=Sc,wr.prototype.get=Uc,wr.prototype.has=Zc,wr.prototype.set=jc,Gt.prototype.clear=Fc,Gt.prototype.delete=zc,Gt.prototype.get=$c,Gt.prototype.has=Gc,Gt.prototype.set=Pc,Pt.prototype.clear=Yc,Pt.prototype.delete=Xc,Pt.prototype.get=Kc,Pt.prototype.has=Jc,Pt.prototype.set=ef,Cr.prototype.add=Cr.prototype.push=tf,Cr.prototype.has=rf,Rt.prototype.clear=nf,Rt.prototype.delete=af,Rt.prototype.get=uf,Rt.prototype.has=of,Rt.prototype.set=lf;var dr=tl(Bt),ts=tl(Ai,!0),su=rl(),rs=rl(!0),ns=wa?function(e,t){return wa.set(e,t),e}:ht,A3=_a?function(e,t){return _a(e,"toString",{configurable:!0,enumerable:!1,value:Ki(t),writable:!0})}:ht,V3=le,as=c3||function(e){return Ge.clearTimeout(e)},x3=$r&&1/ae(new $r([,-0]))[1]==jt?function(e){return new $r(e)}:tu,cu=wa?function(e){return wa.get(e)}:tu,fu=uu?function(e){return e==null?[]:(e=Le(e),p(uu(e),function(t){return Yl.call(e,t)}))}:ru,is=uu?function(e){for(var t=[];e;)E(t,fu(e)),e=va(e);return t}:ru,tt=ut;(ou&&tt(new ou(new ArrayBuffer(1)))!=Wr||Cn&&tt(new Cn)!=Tt||lu&&tt(lu.resolve())!=Yu||$r&&tt(new $r)!=qt||An&&tt(new An)!=dn)&&(tt=function(e){var t=ut(e),r=t==$t?e.constructor:m,u=r?Lr(r):"";if(u)switch(u){case _3:return Wr;case b3:return Tt;case Q3:return Yu;case w3:return qt;case C3:return dn}return t});var L3=da?er:nu,us=bl(ns),Ln=d3||function(e,t){return Ge.setTimeout(e,t)},du=bl(A3),os=nd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(S1,function(r,u,s,h){t.push(s?h.replace(P1,"$1"):u||r)}),t}),I3=le(function(e,t){return Me(e)?mn(e,Pe(t,1,Me,!0)):[]}),E3=le(function(e,t){var r=Vt(t);return Me(r)&&(r=m),Me(e)?mn(e,Pe(t,1,Me,!0),J(r,2)):[]}),k3=le(function(e,t){var r=Vt(t);return Me(r)&&(r=m),Me(e)?mn(e,Pe(t,1,Me,!0),m,r):[]}),T3=le(function(e){var t=w(e,Mi);return t.length&&t[0]===e[0]?xi(t):[]}),q3=le(function(e){var t=Vt(e),r=w(e,Mi);return t===Vt(r)?t=m:r.pop(),r.length&&r[0]===e[0]?xi(r,J(t,2)):[]}),R3=le(function(e){var t=Vt(e),r=w(e,Mi);return t=typeof t=="function"?t:m,t&&r.pop(),r.length&&r[0]===e[0]?xi(r,m,t):[]}),N3=le(xl),D3=Kt(function(e,t){var r=e==null?0:e.length,u=Ci(e,t);return jo(e,w(t,function(s){return Jt(s,r)?+s:s}).sort(Ko)),u}),M3=le(function(e){return lr(Pe(e,1,Me,!0))}),O3=le(function(e){var t=Vt(e);return Me(t)&&(t=m),lr(Pe(e,1,Me,!0),J(t,2))}),W3=le(function(e){var t=Vt(e);return t=typeof t=="function"?t:m,lr(Pe(e,1,Me,!0),m,t)}),H3=le(function(e,t){return Me(e)?mn(e,t):[]}),B3=le(function(e){return Di(p(e,Me))}),S3=le(function(e){var t=Vt(e);return Me(t)&&(t=m),Di(p(e,Me),J(t,2))}),U3=le(function(e){var t=Vt(e);return t=typeof t=="function"?t:m,Di(p(e,Me),m,t)}),Z3=le(Gi),j3=le(function(e){var t=e.length,r=t>1?e[t-1]:m;return r=typeof r=="function"?(e.pop(),r):m,Ll(e,r)}),F3=Kt(function(e){var t=e.length,r=t?e[0]:0,u=this.__wrapped__,s=function(h){return Ci(h,e)};return!(t>1||this.__actions__.length)&&u instanceof j&&Jt(r)?(u=u.slice(r,+r+(t?1:0)),u.__actions__.push({func:aa,args:[s],thisArg:m}),new X(u,this.__chain__).thru(function(h){return t&&!h.length&&h.push(m),h})):this.thru(s)}),z3=Yn(function(e,t,r){Qe.call(e,r)?++e[r]:Yt(e,r,1)}),$3=al(wl),G3=al(Cl),P3=Yn(function(e,t,r){Qe.call(e,r)?e[r].push(t):Yt(e,r,[t])}),Y3=le(function(e,t,r){var u=-1,s=typeof t=="function",h=dt(e)?Be(e.length):[];return dr(e,function(y){h[++u]=s?i(t,y,r):yn(y,t,r)}),h}),X3=Yn(function(e,t,r){Yt(e,r,t)}),K3=Yn(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),J3=le(function(e,t){if(e==null)return[];var r=t.length;return r>1&&ot(e,t[0],t[1])?t=[]:r>2&&ot(t[0],t[1],t[2])&&(t=[t[0]]),Uo(e,Pe(t,1),[])}),Aa=f3||function(){return Ge.Date.now()},pu=le(function(e,t,r){var u=at;if(r.length){var s=F(r,Zr(pu));u|=bt}return Xt(e,u,t,r,s)}),ls=le(function(e,t,r){var u=at|Zt;if(r.length){var s=F(r,Zr(ls));u|=bt}return Xt(t,u,e,r,s)}),eh=le(function(e,t){return qo(e,1,t)}),th=le(function(e,t,r){return qo(e,xt(t)||0,r)});ua.Cache=Pt;var rh=V3(function(e,t){t=t.length==1&&ne(t[0])?w(t[0],re(J())):w(Pe(t,1),re(J()));var r=t.length;return le(function(u){for(var s=-1,h=et(u.length,r);++s<h;)u[s]=t[s].call(this,u[s]);return i(e,this,u)})}),hu=le(function(e,t){return Xt(e,bt,m,t,F(t,Zr(hu)))}),ss=le(function(e,t){return Xt(e,or,m,t,F(t,Zr(ss)))}),nh=Kt(function(e,t){return Xt(e,it,m,m,m,t)}),ah=ea(Vi),ih=ea(function(e,t){return e>=t}),Er=Do(function(){return arguments}())?Do:function(e){return Re(e)&&Qe.call(e,"callee")&&!Yl.call(e,"callee")},ne=Be.isArray,uh=wo?re(wo):bf,pr=p3||nu,oh=Co?re(Co):Qf,cs=Ao?re(Ao):Cf,mu=Vo?re(Vo):Af,fs=xo?re(xo):Vf,Yr=Lo?re(Lo):xf,lh=ea(Ei),sh=ea(function(e,t){return e<=t}),ch=Sr(function(e,t){if(bn(t)||dt(t))return St(t,je(t),e),m;for(var r in t)Qe.call(t,r)&&hn(e,r,t[r])}),ds=Sr(function(e,t){St(t,pt(t),e)}),Va=Sr(function(e,t,r,u){St(t,pt(t),e,u)}),fh=Sr(function(e,t,r,u){St(t,je(t),e,u)}),dh=Kt(Ci),ph=le(function(e,t){e=Le(e);var r=-1,u=t.length,s=u>2?t[2]:m;for(s&&ot(t[0],t[1],s)&&(u=1);++r<u;)for(var h=t[r],y=pt(h),v=-1,Q=y.length;++v<Q;){var L=y[v],x=e[L];(x===m||Nt(x,zr[L])&&!Qe.call(e,L))&&(e[L]=h[L])}return e}),hh=le(function(e){return e.push(m,fl),i(ps,m,e)}),mh=ul(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ha.call(t)),e[t]=r},Ki(ht)),yh=ul(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ha.call(t)),Qe.call(e,t)?e[t].push(r):e[t]=[r]},J),vh=le(yn),gh=Sr(function(e,t,r){$n(e,t,r)}),ps=Sr(function(e,t,r,u){$n(e,t,r,u)}),_h=Kt(function(e,t){var r={};if(e==null)return r;var u=!1;t=w(t,function(h){return h=sr(h,e),u||(u=h.length>1),h}),St(e,Ui(e),r),u&&(r=Ct(r,$e|Dr|Mt,Ff));for(var s=t.length;s--;)Ni(r,t[s]);return r}),bh=Kt(function(e,t){return e==null?{}:Ef(e,t)}),hs=sl(je),ms=sl(pt),Qh=Ur(function(e,t,r){return t=t.toLowerCase(),e+(r?Ul(t):t)}),wh=Ur(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Ch=Ur(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Ah=nl("toLowerCase"),Vh=Ur(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),xh=Ur(function(e,t,r){return e+(r?" ":"")+yu(t)}),Lh=Ur(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),yu=nl("toUpperCase"),ys=le(function(e,t){try{return i(e,m,t)}catch(r){return Pi(r)?r:new au(r)}}),Ih=Kt(function(e,t){return c(t,function(r){r=Ut(r),Yt(e,r,pu(e[r],e))}),e}),Eh=il(),kh=il(!0),Th=le(function(e,t){return function(r){return yn(r,e,t)}}),qh=le(function(e,t){return function(r){return yn(e,r,t)}}),Rh=Hi(w),Nh=Hi(d),Dh=Hi(q),Mh=ol(),Oh=ol(!0),Wh=Kn(function(e,t){return e+t},0),Hh=Bi("ceil"),Bh=Kn(function(e,t){return e/t},1),Sh=Bi("floor"),Uh=Kn(function(e,t){return e*t},1),Zh=Bi("round"),jh=Kn(function(e,t){return e-t},0);return l.after=yp,l.ary=Tl,l.assign=ch,l.assignIn=ds,l.assignInWith=Va,l.assignWith=fh,l.at=dh,l.before=ql,l.bind=pu,l.bindAll=Ih,l.bindKey=ls,l.castArray=Ap,l.chain=Il,l.chunk=sd,l.compact=cd,l.concat=fd,l.cond=M0,l.conforms=O0,l.constant=Ki,l.countBy=z3,l.create=$p,l.curry=Rl,l.curryRight=Nl,l.debounce=Dl,l.defaults=ph,l.defaultsDeep=hh,l.defer=eh,l.delay=th,l.difference=I3,l.differenceBy=E3,l.differenceWith=k3,l.drop=dd,l.dropRight=pd,l.dropRightWhile=hd,l.dropWhile=md,l.fill=yd,l.filter=rp,l.flatMap=np,l.flatMapDeep=ap,l.flatMapDepth=ip,l.flatten=Al,l.flattenDeep=vd,l.flattenDepth=gd,l.flip=vp,l.flow=Eh,l.flowRight=kh,l.fromPairs=_d,l.functions=e0,l.functionsIn=t0,l.groupBy=P3,l.initial=Qd,l.intersection=T3,l.intersectionBy=q3,l.intersectionWith=R3,l.invert=mh,l.invertBy=yh,l.invokeMap=Y3,l.iteratee=Ji,l.keyBy=X3,l.keys=je,l.keysIn=pt,l.map=ia,l.mapKeys=n0,l.mapValues=a0,l.matches=H0,l.matchesProperty=B0,l.memoize=ua,l.merge=gh,l.mergeWith=ps,l.method=Th,l.methodOf=qh,l.mixin=eu,l.negate=oa,l.nthArg=U0,l.omit=_h,l.omitBy=i0,l.once=gp,l.orderBy=op,l.over=Rh,l.overArgs=rh,l.overEvery=Nh,l.overSome=Dh,l.partial=hu,l.partialRight=ss,l.partition=K3,l.pick=bh,l.pickBy=Sl,l.property=Fl,l.propertyOf=Z0,l.pull=N3,l.pullAll=xl,l.pullAllBy=Vd,l.pullAllWith=xd,l.pullAt=D3,l.range=Mh,l.rangeRight=Oh,l.rearg=nh,l.reject=cp,l.remove=Ld,l.rest=_p,l.reverse=$i,l.sampleSize=dp,l.set=o0,l.setWith=l0,l.shuffle=pp,l.slice=Id,l.sortBy=J3,l.sortedUniq=Dd,l.sortedUniqBy=Md,l.split=x0,l.spread=bp,l.tail=Od,l.take=Wd,l.takeRight=Hd,l.takeRightWhile=Bd,l.takeWhile=Sd,l.tap=$d,l.throttle=Qp,l.thru=aa,l.toArray=Wl,l.toPairs=hs,l.toPairsIn=ms,l.toPath=G0,l.toPlainObject=Bl,l.transform=s0,l.unary=wp,l.union=M3,l.unionBy=O3,l.unionWith=W3,l.uniq=Ud,l.uniqBy=Zd,l.uniqWith=jd,l.unset=c0,l.unzip=Gi,l.unzipWith=Ll,l.update=f0,l.updateWith=d0,l.values=jr,l.valuesIn=p0,l.without=H3,l.words=jl,l.wrap=Cp,l.xor=B3,l.xorBy=S3,l.xorWith=U3,l.zip=Z3,l.zipObject=Fd,l.zipObjectDeep=zd,l.zipWith=j3,l.entries=hs,l.entriesIn=ms,l.extend=ds,l.extendWith=Va,eu(l,l),l.add=Wh,l.attempt=ys,l.camelCase=Qh,l.capitalize=Ul,l.ceil=Hh,l.clamp=h0,l.clone=Vp,l.cloneDeep=Lp,l.cloneDeepWith=Ip,l.cloneWith=xp,l.conformsTo=Ep,l.deburr=Zl,l.defaultTo=W0,l.divide=Bh,l.endsWith=v0,l.eq=Nt,l.escape=g0,l.escapeRegExp=_0,l.every=tp,l.find=$3,l.findIndex=wl,l.findKey=Gp,l.findLast=G3,l.findLastIndex=Cl,l.findLastKey=Pp,l.floor=Sh,l.forEach=El,l.forEachRight=kl,l.forIn=Yp,l.forInRight=Xp,l.forOwn=Kp,l.forOwnRight=Jp,l.get=Yi,l.gt=ah,l.gte=ih,l.has=r0,l.hasIn=Xi,l.head=Vl,l.identity=ht,l.includes=up,l.indexOf=bd,l.inRange=m0,l.invoke=vh,l.isArguments=Er,l.isArray=ne,l.isArrayBuffer=uh,l.isArrayLike=dt,l.isArrayLikeObject=Me,l.isBoolean=kp,l.isBuffer=pr,l.isDate=oh,l.isElement=Tp,l.isEmpty=qp,l.isEqual=Rp,l.isEqualWith=Np,l.isError=Pi,l.isFinite=Dp,l.isFunction=er,l.isInteger=Ml,l.isLength=la,l.isMap=cs,l.isMatch=Mp,l.isMatchWith=Op,l.isNaN=Wp,l.isNative=Hp,l.isNil=Sp,l.isNull=Bp,l.isNumber=Ol,l.isObject=ke,l.isObjectLike=Re,l.isPlainObject=Qn,l.isRegExp=mu,l.isSafeInteger=Up,l.isSet=fs,l.isString=sa,l.isSymbol=gt,l.isTypedArray=Yr,l.isUndefined=Zp,l.isWeakMap=jp,l.isWeakSet=Fp,l.join=wd,l.kebabCase=wh,l.last=Vt,l.lastIndexOf=Cd,l.lowerCase=Ch,l.lowerFirst=Ah,l.lt=lh,l.lte=sh,l.max=Y0,l.maxBy=X0,l.mean=K0,l.meanBy=J0,l.min=e3,l.minBy=t3,l.stubArray=ru,l.stubFalse=nu,l.stubObject=j0,l.stubString=F0,l.stubTrue=z0,l.multiply=Uh,l.nth=Ad,l.noConflict=S0,l.noop=tu,l.now=Aa,l.pad=b0,l.padEnd=Q0,l.padStart=w0,l.parseInt=C0,l.random=y0,l.reduce=lp,l.reduceRight=sp,l.repeat=A0,l.replace=V0,l.result=u0,l.round=Zh,l.runInContext=g,l.sample=fp,l.size=hp,l.snakeCase=Vh,l.some=mp,l.sortedIndex=Ed,l.sortedIndexBy=kd,l.sortedIndexOf=Td,l.sortedLastIndex=qd,l.sortedLastIndexBy=Rd,l.sortedLastIndexOf=Nd,l.startCase=xh,l.startsWith=L0,l.subtract=jh,l.sum=r3,l.sumBy=n3,l.template=I0,l.times=$0,l.toFinite=tr,l.toInteger=ue,l.toLength=Hl,l.toLower=E0,l.toNumber=xt,l.toSafeInteger=zp,l.toString=_e,l.toUpper=k0,l.trim=T0,l.trimEnd=q0,l.trimStart=R0,l.truncate=N0,l.unescape=D0,l.uniqueId=P0,l.upperCase=Lh,l.upperFirst=yu,l.each=El,l.eachRight=kl,l.first=Vl,eu(l,function(){var e={};return Bt(l,function(t,r){Qe.call(l.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),l.VERSION=Ga,c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){l[e].placeholder=l}),c(["drop","take"],function(e,t){j.prototype[e]=function(r){r=r===m?1:Se(ue(r),0);var u=this.__filtered__&&!t?new j(this):this.clone();return u.__filtered__?u.__takeCount__=et(r,u.__takeCount__):u.__views__.push({size:et(r,Qt),type:e+(u.__dir__<0?"Right":"")}),u},j.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),c(["filter","map","takeWhile"],function(e,t){var r=t+1,u=r==Wt||r==_r;j.prototype[e]=function(s){var h=this.clone();return h.__iteratees__.push({iteratee:J(s,3),type:r}),h.__filtered__=h.__filtered__||u,h}}),c(["head","last"],function(e,t){var r="take"+(t?"Right":"");j.prototype[e]=function(){return this[r](1).value()[0]}}),c(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");j.prototype[e]=function(){return this.__filtered__?new j(this):this[r](1)}}),j.prototype.compact=function(){return this.filter(ht)},j.prototype.find=function(e){return this.filter(e).head()},j.prototype.findLast=function(e){return this.reverse().find(e)},j.prototype.invokeMap=le(function(e,t){return typeof e=="function"?new j(this):this.map(function(r){return yn(r,e,t)})}),j.prototype.reject=function(e){return this.filter(oa(J(e)))},j.prototype.slice=function(e,t){e=ue(e);var r=this;return r.__filtered__&&(e>0||t<0)?new j(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==m&&(t=ue(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},j.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},j.prototype.toArray=function(){return this.take(Qt)},Bt(j.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),u=/^(?:head|last)$/.test(t),s=l[u?"take"+(t=="last"?"Right":""):t],h=u||/^find/.test(t);s&&(l.prototype[t]=function(){var y=this.__wrapped__,v=u?[1]:arguments,Q=y instanceof j,L=v[0],x=Q||ne(y),T=function(se){var ce=s.apply(l,E([se],v));return u&&O?ce[0]:ce};x&&r&&typeof L=="function"&&L.length!=1&&(Q=x=!1);var O=this.__chain__,z=!!this.__actions__.length,P=h&&!O,ie=Q&&!z;if(!h&&x){y=ie?y:new j(this);var Y=e.apply(y,v);return Y.__actions__.push({func:aa,args:[T],thisArg:m}),new X(Y,O)}return P&&ie?e.apply(this,v):(Y=this.thru(T),P?u?Y.value()[0]:Y.value():Y)})}),c(["pop","push","shift","sort","splice","unshift"],function(e){var t=fa[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);l.prototype[e]=function(){var s=arguments;if(u&&!this.__chain__){var h=this.value();return t.apply(ne(h)?h:[],s)}return this[r](function(y){return t.apply(ne(y)?y:[],s)})}}),Bt(j.prototype,function(e,t){var r=l[t];if(r){var u=r.name+"";Qe.call(Gr,u)||(Gr[u]=[]),Gr[u].push({name:t,func:r})}}),Gr[Xn(m,Zt).name]=[{name:"wrapper",func:m}],j.prototype.clone=ct,j.prototype.reverse=Qi,j.prototype.value=Hc,l.prototype.at=F3,l.prototype.chain=Gd,l.prototype.commit=Pd,l.prototype.next=Yd,l.prototype.plant=Kd,l.prototype.reverse=Jd,l.prototype.toJSON=l.prototype.valueOf=l.prototype.value=ep,l.prototype.first=l.prototype.head,wn&&(l.prototype[wn]=Xd),l},Br=Wc();Qr?((Qr.exports=Br)._=Br,_i._=Br):Ge._=Br}).call(En)})(Ia,Ia.exports);var Yh=Ia.exports,r1={};(function(n){n.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},n.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},n.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},n.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},n.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},n.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},n.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},n.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},n.realToAlias=function(){var a=Object.prototype.hasOwnProperty,i=n.aliasToReal,o={};for(var c in i){var f=i[c];a.call(o,f)?o[f].push(c):o[f]=[c]}return o}(),n.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},n.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},n.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}})(r1);var Xh={},Ue=r1,Kh=Xh,_s=Array.prototype.push;function Jh(n,a){return a==2?function(i,o){return n.apply(void 0,arguments)}:function(i){return n.apply(void 0,arguments)}}function gu(n,a){return a==2?function(i,o){return n(i,o)}:function(i){return n(i)}}function bs(n){for(var a=n?n.length:0,i=Array(a);a--;)i[a]=n[a];return i}function e2(n){return function(a){return n({},a)}}function t2(n,a){return function(){for(var i=arguments.length,o=i-1,c=Array(i);i--;)c[i]=arguments[i];var f=c[a],d=c.slice(0,a);return f&&_s.apply(d,f),a!=o&&_s.apply(d,c.slice(a+1)),n.apply(this,d)}}function _u(n,a){return function(){var i=arguments.length;if(i){for(var o=Array(i);i--;)o[i]=arguments[i];var c=o[0]=a.apply(void 0,o);return n.apply(void 0,o),c}}}function xu(n,a,i,o){var c=typeof a=="function",f=a===Object(a);if(f&&(o=i,i=a,a=void 0),i==null)throw new TypeError;o||(o={});var d={cap:"cap"in o?o.cap:!0,curry:"curry"in o?o.curry:!0,fixed:"fixed"in o?o.fixed:!0,immutable:"immutable"in o?o.immutable:!0,rearg:"rearg"in o?o.rearg:!0},p=c?i:Kh,_="curry"in o&&o.curry,b="fixed"in o&&o.fixed,w="rearg"in o&&o.rearg,E=c?i.runInContext():void 0,R=c?i:{ary:n.ary,assign:n.assign,clone:n.clone,curry:n.curry,forEach:n.forEach,isArray:n.isArray,isError:n.isError,isFunction:n.isFunction,isWeakMap:n.isWeakMap,iteratee:n.iteratee,keys:n.keys,rearg:n.rearg,toInteger:n.toInteger,toPath:n.toPath},N=R.ary,q=R.assign,B=R.clone,k=R.curry,M=R.forEach,K=R.isArray,S=R.isError,te=R.isFunction,pe=R.isWeakMap,ve=R.keys,we=R.rearg,ge=R.toInteger,H=R.toPath,$=ve(Ue.aryMethod),W={castArray:function(G){return function(){var D=arguments[0];return K(D)?G(bs(D)):G.apply(void 0,arguments)}},iteratee:function(G){return function(){var D=arguments[0],Z=arguments[1],F=G(D,Z),ae=F.length;return d.cap&&typeof Z=="number"?(Z=Z>2?Z-2:1,ae&&ae<=Z?F:gu(F,Z)):F}},mixin:function(G){return function(D){var Z=this;if(!te(Z))return G(Z,Object(D));var F=[];return M(ve(D),function(ae){te(D[ae])&&F.push([ae,Z.prototype[ae]])}),G(Z,Object(D)),M(F,function(ae){var We=ae[1];te(We)?Z.prototype[ae[0]]=We:delete Z.prototype[ae[0]]}),Z}},nthArg:function(G){return function(D){var Z=D<0?1:ge(D)+1;return k(G(D),Z)}},rearg:function(G){return function(D,Z){var F=Z?Z.length:0;return k(G(D,Z),F)}},runInContext:function(G){return function(D){return xu(n,G(D),o)}}};function oe(G,D){if(d.cap){var Z=Ue.iterateeRearg[G];if(Z)return Ee(D,Z);var F=!c&&Ue.iterateeAry[G];if(F)return Ve(D,F)}return D}function ee(G,D,Z){return _||d.curry&&Z>1?k(D,Z):D}function he(G,D,Z){if(d.fixed&&(b||!Ue.skipFixed[G])){var F=Ue.methodSpread[G],ae=F&&F.start;return ae===void 0?N(D,Z):t2(D,ae)}return D}function re(G,D,Z){return d.rearg&&Z>1&&(w||!Ue.skipRearg[G])?we(D,Ue.methodRearg[G]||Ue.aryRearg[Z]):D}function be(G,D){D=H(D);for(var Z=-1,F=D.length,ae=F-1,We=B(Object(G)),Ze=We;Ze!=null&&++Z<F;){var ze=D[Z],He=Ze[ze];He!=null&&!(te(He)||S(He)||pe(He))&&(Ze[ze]=B(Z==ae?He:Object(He))),Ze=Ze[ze]}return We}function ye(G){return Te.runInContext.convert(G)(void 0)}function De(G,D){var Z=Ue.aliasToReal[G]||G,F=Ue.remap[Z]||Z,ae=o;return function(We){var Ze=c?E:R,ze=c?E[F]:D,He=q(q({},ae),We);return xu(Ze,Z,ze,He)}}function Ve(G,D){return nt(G,function(Z){return typeof Z=="function"?gu(Z,D):Z})}function Ee(G,D){return nt(G,function(Z){var F=D.length;return Jh(we(gu(Z,F),D),F)})}function nt(G,D){return function(){var Z=arguments.length;if(!Z)return G();for(var F=Array(Z);Z--;)F[Z]=arguments[Z];var ae=d.rearg?0:Z-1;return F[ae]=D(F[ae]),G.apply(void 0,F)}}function Ke(G,D,Z){var F,ae=Ue.aliasToReal[G]||G,We=D,Ze=W[ae];return Ze?We=Ze(D):d.immutable&&(Ue.mutate.array[ae]?We=_u(D,bs):Ue.mutate.object[ae]?We=_u(D,e2(D)):Ue.mutate.set[ae]&&(We=_u(D,be))),M($,function(ze){return M(Ue.aryMethod[ze],function(He){if(ae==He){var Je=Ue.methodSpread[ae],ar=Je&&Je.afterRearg;return F=ar?he(ae,re(ae,We,ze),ze):re(ae,he(ae,We,ze),ze),F=oe(ae,F),F=ee(ae,F,ze),!1}}),!F}),F||(F=We),F==D&&(F=_?k(F,1):function(){return D.apply(this,arguments)}),F.convert=De(ae,D),F.placeholder=D.placeholder=Z,F}if(!f)return Ke(a,i,p);var Te=i,Dt=[];return M($,function(G){M(Ue.aryMethod[G],function(D){var Z=Te[Ue.remap[D]||D];Z&&Dt.push([D,Ke(D,Z,Te)])})}),M(ve(Te),function(G){var D=Te[G];if(typeof D=="function"){for(var Z=Dt.length;Z--;)if(Dt[Z][0]==G)return;D.convert=De(G,D),Dt.push([G,D])}}),M(Dt,function(G){Te[G[0]]=G[1]}),Te.convert=ye,Te.placeholder=Te,M(ve(Te),function(G){M(Ue.realToAlias[G]||[],function(D){Te[D]=Te[G]})}),Te}var r2=xu,Qs=Yh.runInContext(),n2=r2(Qs,Qs);const A=Fh(n2),a2=/(<([^>]+)>)/gi,i2=/<(\/)?div(\/?\s?)>/gi,u2=n=>n.map(a=>`<div>${a===""?"<br/>":a}</div>`).join(""),o2=n=>{const a=document.createElement("textarea");return a.innerHTML=n,a.value},l2=n=>A.flow(a=>o2(a),a=>a.split("<div>"),A.flatMap(a=>{const i=a.replaceAll(i2,"");return i===""?void 0:i.replaceAll(a2,"")}),A.reject(A.isUndefined))(n),Lu=n=>n*180/Math.PI,xa=(n,a)=>a[0]>=n.x&&a[0]<=n.x+n.width&&a[1]>=n.y&&a[1]<=n.y+n.height,nr=({origin:n=[0,0],point:a,rotation:i})=>{const o=[a[0]-n[0],a[1]-n[1]],c=o[1]*Math.cos(i)-o[0]*Math.sin(i);return[o[1]*Math.sin(i)+o[0]*Math.cos(i)+n[0],c+n[1]]},ws=n=>(n+2*Math.PI)%(2*Math.PI),Cs=({targetVector:[n,a],radian:i=!0,originVector:o})=>{const c=ws(Math.atan2(a[1]-n[1],a[0]-n[0]));if(o){const[f,d]=o,p=Math.atan2(d[1]-f[1],d[0]-f[0]),_=ws(c-p);return i?_:Lu(_)}return i?c:Lu(c)},Ea=n=>{const a=new Path2D;return a.rect(n.x,n.y,n.width,n.height),a},ka=n=>{const a=new Path2D;return a.arc(n.x,n.y,n.radius,0,2*Math.PI),a},s2=n=>{const a=new Path2D;return a.ellipse(n.x,n.y,n.radiusX,n.radiusY,0,0,2*Math.PI),a},n1=n=>{const a=new Path2D;return a.moveTo(...n.points[0]),a.lineTo(...n.points[1]),a},c2=n=>{if(n.points.length<3)return;const a=new Path2D;a.moveTo(...n.points[0]);for(let i=1;i<n.points.length-1;i++)a.quadraticCurveTo(...n.points[i],n.points.length-2===i?n.points[i+1][0]:(n.points[i+1][0]-n.points[i][0])/2+n.points[i][0],n.points.length-2===i?n.points[i+1][1]:(n.points[i+1][1]-n.points[i][1])/2+n.points[i][1]);return a},f2=n=>{if(n.points.length<1)return;const a=new Path2D;return a.moveTo(...n.points[0]),n.points.slice(1).forEach(i=>{a.lineTo(...i)}),a.lineTo(...n.points[0]),a},d2=n=>{const a=new Path2D;return a.moveTo(...n.points[0]),a.lineTo(...n.points[1]),a.lineTo(...n.points[2]),a.lineTo(...n.points[0]),a},an=(n,a,i)=>{const{borders:o}=Xe(n,i);return{border:Ea(o),line:n1({points:[[o.x+o.width/2,o.y],[o.x+o.width/2,o.y-Oe/2-Vu/a]]}),anchors:[ka({x:o.x+o.width/2,y:o.y-Oe/2-Vu/a,radius:Oe/2/a}),...Ks.map(c=>ka({x:o.x+o.width*c[0],y:o.y+o.height*c[1],radius:Oe/2/a}))]}},p2=(n,a,i,o,c,f)=>{if(a.selection&&(rn(n,{fillColor:"transparent",strokeColor:i,lineWidth:o/c}),n.stroke(a.selection.border),!(!f||a.locked))){n.stroke(a.selection.line),rn(n,{fillColor:"rgb(255,255,255)",strokeColor:"rgb(150,150,150)",lineWidth:2/c});for(const d of a.selection.anchors)n.fill(d),n.stroke(d)}},As=({borderStart:n,borderSize:a,vector:i,selectionPadding:o,invertedAxe:c,anchor:f})=>{switch(f){case 0:if(c){const d=a-2*o;return[n+d,i-d]}else{const d=Math.max(2*o,a-i);return[n+a-d,d]}case .5:return[n,a];case 1:if(c){const d=a+i;return[n+d,2*o-d]}else return[n,Math.max(2*o,a+i)];default:return[0,0]}},h2=(n,a,i,o,c,f,d,p,_,b)=>{const w=(a.width-b*2||1)/(a.height-b*2||1),E=(c-b*2)/(d-b*2);let R,N,q,B;return _.anchor[0]!==.5&&_.anchor[1]!==.5?E<w?(N=f,B=d,q=(d-b*2)*w+2*b,_.anchor[0]===0?R=a.width-n[0]>b?a.x+(a.width-q):a.x+a.width-2*b:R=a.width+n[0]>b?a.x:a.x-q+2*b):(R=o,q=c,B=(c-b*2)/w+2*b,_.anchor[1]===0?N=a.height-n[1]>b?a.y+(a.height-B):a.y+a.height-2*b:N=a.height+n[1]>b?a.y:a.y-B+2*b):_.anchor[0]!==.5?(R=o,q=c,B=(c-b*2)/w+2*b,N=a.y+(a.height-B)/2):(N=f,B=d,q=(d-b*2)*w+2*b,R=a.x+(a.width-q)/2),{borderX:R,borderWidth:q,borderY:N,borderHeight:B,center:i,originalShape:p}},Vs=({borderX:n,borderWidth:a,borderY:i,borderHeight:o,center:c,originalShape:f})=>{const d=[n+a/2-c[0],i+o/2-c[1]],[p,_]=nr({point:d,rotation:-f.rotation});return{borderX:n+p-d[0],borderHeight:o,borderY:i+_-d[1],borderWidth:a}},Ba=(n,a,i,o,c,f=!1)=>{const{center:d,borders:p}=Xe(a,c),_=nr({origin:d,point:n,rotation:a.rotation}),b=i.anchor[0]===0&&_[0]>=p.x+p.width||i.anchor[0]===1&&_[0]<=p.x,w=i.anchor[1]===0&&_[1]>=p.y+p.height||i.anchor[1]===1&&_[1]<=p.y,E=[me(_[0],o,i.anchor[0]===0&&!b||i.anchor[0]===1&&b?c:-c),me(_[1],o,i.anchor[1]===0&&!w||i.anchor[1]===1&&w?c:-c)],R=o?[i.anchor[0]===0?p.x:i.anchor[0]===.5?p.x+p.width/2:p.x+p.width,i.anchor[1]===0?p.y:i.anchor[1]===.5?p.y+p.height/2:p.y+p.height]:nr({origin:d,point:i.cursorStartPosition,rotation:a.rotation}),N=[E[0]-R[0],E[1]-R[1]],[q,B]=As({borderStart:p.x,borderSize:p.width,vector:N[0],selectionPadding:c,invertedAxe:b,anchor:i.anchor[0]}),[k,M]=As({borderStart:p.y,borderSize:p.height,vector:N[1],selectionPadding:c,invertedAxe:w,anchor:i.anchor[1]});if(f){const K=h2(N,p,d,q,B,k,M,a,i,c);return Vs(K)}return Vs({borderX:q,borderWidth:B,borderY:k,borderHeight:M,center:d,originalShape:a})},m2=n=>{var i;if(n.points.length<1||((i=n.style)==null?void 0:i.strokeColor)==="transparent")return;const a=new Path2D;return n.points.forEach(o=>{o.length===1?a.rect(o[0][0],o[0][1],1,1):(a.moveTo(...o[0]),o.slice(1).forEach(c=>{a.lineTo(...c)}))}),a},un=(n,a,i)=>({...n,path:m2(n),selection:an(n,a,i)}),y2=un,v2=(n,a,i,o)=>un({toolId:n.id,type:n.type,id:A.uniqueId(`${n.type}_`),points:[[a]],rotation:0,style:{globalAlpha:n.settings.opacity.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default}},i,o),g2=(n,a)=>{var i;a.points.length<1||!a.path||n.globalAlpha!==0&&(((i=a.style)==null?void 0:i.strokeColor)==="transparent"||n.globalAlpha===0||n.stroke(a.path))},_2=(n,a)=>{const i=A.flatMap(p=>p,n.points),o=A.flow(A.map(p=>p[0]),A.min,A.add(-a))(i),c=A.flow(A.map(p=>p[0]),A.max,A.add(a))(i),f=A.flow(A.map(p=>p[1]),A.min,A.add(-a))(i),d=A.flow(A.map(p=>p[1]),A.max,A.add(a))(i);return{x:o,width:c-o,y:f,height:d-f}},b2=(n,a,i,o,c,f)=>{const{borders:d}=Xe(a,f),p=o?me(d.x+n[0]-i[0],o)-d.x:n[0]-i[0],_=o?me(d.y+n[1]-i[1],o)-d.y:n[1]-i[1];return un({...a,points:a.points.map(b=>b.map(([w,E])=>[w+p,E+_]))},c,f)},Q2=(n,a,i,o,c,f,d)=>{const{borders:p}=Xe(a,c),{borderX:_,borderHeight:b,borderY:w,borderWidth:E}=Ba(n,a,i,o,c,d),R=Math.max(0,p.width-2*c),N=Math.max(0,p.height-2*c),q=Math.max(0,E-2*c),B=Math.max(0,b-2*c);return un({...a,points:a.points.map(k=>k.map(([M,K])=>[_+c+(M-p.x-c)/R*q,w+c+(K-p.y-c)/N*B]))},f,c)},w2=(n,a,i,o)=>{const c={...n,points:A.set(n.points.length-1,[...n.points[n.points.length-1],[Math.round(a[0]),Math.round(a[1])]],n.points)};return un(c,i,o)},C2=(n,a,i,o)=>{const c={...n,points:A.set(n.points.length,[[Math.round(a[0]),Math.round(a[1])]],n.points)};return un(c,i,o)},mr=300,me=(n,a,i=0)=>{if(!a)return Math.round(n);const o=n+i,c=o>=0?kr[a-1]:-kr[a-1];return o+c/2-(o+c/2)%c-i},A2=(n,a,i,o,c,f,d,p,_)=>{switch(f.mode){case"brush":return w2(a,i,_,d);case"translate":return Gu(i,f.originalShape,f.cursorStartPosition,o,_,d);case"rotate":return dm(a,i,f.originalShape,f.cursorStartPosition,f.center,o);case"resize":return pm(n,a,i,c,f.originalShape,f,o,d,p,_);default:return a}},V2=(n,a,i,o,c=!1)=>{if(!n||!a||!o||!i)return[mr,mr];const f=n/a,d=i/o;if(f>d){const p=c?i:Math.min(n,i);return[p,p/f]}else{const p=c?o:Math.min(a,o);return[p*f,p]}},Ta=(n,a,i,o,c=1)=>{const{clientX:f=0,clientY:d=0}="touches"in n&&n.touches[0]?n.touches[0]:"changedTouches"in n&&n.changedTouches[0]?n.changedTouches[0]:"clientX"in n?n:{},p=(a==null?void 0:a.getBoundingClientRect())??{left:0,top:0,width:i,height:o};return[(f-p.left)*(i/p.width)/c,(d-p.top)*(o/p.height)/c]},Sa=(n,a,[i,o],[c,f])=>nr({origin:[i-c,o-f],point:n,rotation:a}),x2=(n,a,[i,o],[c,f])=>nr({origin:[i-c,o-f],point:n,rotation:-a}),qa=(n,a,i,o,c=1,f=!1)=>{if(n.locked)return!1;const d=Math.min(1,c),{borders:p,center:_}=Xe(n,o),b=Sa(a,n.rotation,_,i);if(f)if(n.type==="line"||n.type==="polygon"||n.type==="curve"){for(let w=0;w<n.points.length;w++)if(xa({x:n.points[w][0]-Oe/2/d,y:n.points[w][1]-Oe/2/d,width:Oe/d,height:Oe/d},b))return{mode:"resize",anchor:w}}else{if(xa({x:p.x+p.width/2-Oe/2/d,y:p.y-Oe/d-Vu/d,width:Oe/d,height:Oe/d},b))return{mode:"rotate"};for(const w of Ks)if(xa({x:p.x+p.width*w[0]-Oe/2/d,y:p.y+p.height*w[1]-Oe/2/d,width:Oe/d,height:Oe/d},b))return{mode:"resize",anchor:w}}return xa(p,b)?{mode:"translate"}:!1},L2=n=>({...n,path:d2(n)}),xs=n=>{const a={...n,type:"triangle"};return L2(a)},I2=(n,a)=>{var i,o;n.globalAlpha!==0&&a.path&&(((i=a.style)==null?void 0:i.fillColor)!=="transparent"&&n.fill(a.path),((o=a.style)==null?void 0:o.strokeColor)!=="transparent"&&n.stroke(a.path))},Bu=(n,a,i,o=!1)=>{const{borders:c}=Xe(n,i);return{border:Ea(c),anchors:[...n.points.map((f,d)=>o&&d>0&&d<n.points.length-1?Ea({x:f[0]-Oe/2,y:f[1]-Oe/2,width:Oe/a,height:Oe/a}):ka({x:f[0],y:f[1],radius:Oe/2/a}))]}},E2=({ctx:n,shape:a,withAnchors:i,selectionWidth:o,selectionColor:c,currentScale:f=1})=>{if(a.selection&&(rn(n,{fillColor:"transparent",strokeColor:c,lineWidth:o/f}),n.stroke(a.selection.border),!(!i||a.locked))){rn(n,{fillColor:"rgb(255,255,255)",strokeColor:"rgb(150,150,150)",lineWidth:2/f});for(const d of a.selection.anchors)n.fill(d),n.stroke(d)}},Ua=(n,a,i)=>{const o=A.flow(c=>{var f,d;if(((f=n.style)==null?void 0:f.lineArrow)===1||((d=n.style)==null?void 0:d.lineArrow)===3){const p=Math.PI/2-Cs({targetVector:[n.points[0],n.points[1]]});return[...c,xs(Ls(n.points[0],p,n.style))]}return c},c=>{var f,d;if(((f=n.style)==null?void 0:f.lineArrow)===2||((d=n.style)==null?void 0:d.lineArrow)===3){const p=Math.PI/2-Cs({targetVector:[n.points[1],n.points[0]]});return[...c,xs(Ls(n.points[1],p,n.style))]}return c})([]);return{...n,path:n1(n),selection:Bu(n,a,i),arrows:o}},k2=Ua,T2=(n,a,i,o)=>{const c={toolId:n.id,type:n.type,id:A.uniqueId(`${n.type}_`),points:[a,a],rotation:0,style:{globalAlpha:n.settings.opacity.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default,lineArrow:n.settings.lineArrow.default}};return Ua(c,i,o)},Ls=(n,a,i)=>{const o=[nr({point:[0,-(10+(i.lineWidth??0)*1)],rotation:a}),nr({point:[-(5+(i.lineWidth??0)*1),5+(i.lineWidth??0)*2],rotation:a}),nr({point:[5+(i.lineWidth??0)*1,5+(i.lineWidth??0)*2],rotation:a})];return{points:[[n[0]+o[0][0],n[1]+o[0][1]],[n[0]+o[1][0],n[1]+o[1][1]],[n[0]+o[2][0],n[1]+o[2][1]]],style:{...i,fillColor:i.strokeColor,strokeColor:"transparent"}}},q2=(n,a)=>{var i,o;if(!(n.globalAlpha===0||!a.path)){((i=a.style)==null?void 0:i.fillColor)!=="transparent"&&n.fill(a.path),((o=a.style)==null?void 0:o.strokeColor)!=="transparent"&&n.stroke(a.path);for(const c of a.arrows??[])rn(n,c.style),I2(n,c)}},R2=(n,a)=>{const i=Math.min(n.points[0][0],n.points[1][0])-a,o=Math.abs(n.points[0][0]-n.points[1][0])+a*2,c=Math.min(n.points[0][1],n.points[1][1])-a,f=Math.abs(n.points[0][1]-n.points[1][1])+a*2;return{x:i,width:o,y:c,height:f}},N2=(n,a,i,o,c,f)=>Ua({...a,points:a.points.map(([d,p])=>[me(d+n[0]-i[0],o),me(p+n[1]-i[1],o)])},c,f),D2=(n,a,i,o,c,f,d)=>{const p=[me(n[0],c),me(n[1],c)],{center:_}=Xe(i,f),b=Sa(p,i.rotation,_,a),w=A.set(["points",o.anchor],b,i);return Ua(w,d,f)},nn=(n,a,i)=>({...n,path:f2(n),selection:Bu(n,a,i)}),M2=nn,O2=(n,a,i,o)=>nn({toolId:n.id,type:n.type,id:A.uniqueId(`${n.type}_`),points:A.flow(A.range(0),A.map(()=>a))(n.settings.pointsCount.default),rotation:0,style:{globalAlpha:n.settings.opacity.default,fillColor:n.settings.fillColor.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default,pointsCount:n.settings.pointsCount.default}},i,o),W2=(n,a)=>{var i,o;a.path&&n.globalAlpha!==0&&(((i=a.style)==null?void 0:i.fillColor)!=="transparent"&&n.fill(a.path),((o=a.style)==null?void 0:o.strokeColor)!=="transparent"&&n.stroke(a.path))},a1=(n,a)=>{const i=A.flow(A.map(d=>d[0]),A.min,A.add(-a))(n.points),o=A.flow(A.map(d=>d[0]),A.max,A.add(a))(n.points),c=A.flow(A.map(d=>d[1]),A.min,A.add(-a))(n.points),f=A.flow(A.map(d=>d[1]),A.max,A.add(a))(n.points);return{x:i,width:o-i,y:c,height:f-c}},H2=(n,a,i,o,c,f)=>{if(o){const{borders:d}=Xe(a,f),p=me(d.x+n[0]-i[0],o)-d.x,_=me(d.y+n[1]-i[1],o)-d.y;return{...a,points:a.points.map(([b,w])=>[b+p,w+_])}}else return nn({...a,points:a.points.map(([d,p])=>[me(d+n[0]-i[0],o),me(p+n[1]-i[1],o)])},c,f)},B2=(n,a,i,o,c,f,d)=>{const p=[me(n[0],c),me(n[1],c)],{center:_}=Xe(i,f),b=Sa(p,i.rotation,_,a),w=A.set(["points",o.anchor],b,i);return nn(w,d,f)},S2=(n,a,i,o)=>{const c=n.points.length;if(c===a)return n;if(c>a){const f=n.points.slice(0,a);return nn({...n,points:f,style:{...n.style,pointsCount:f.length}},i,o)}else{const f=a-c,d=A.flow(A.range(0),A.map(_=>[n.points[0][0]+(n.points[1][0]-n.points[0][0])*(_+1)/(f+1),n.points[0][1]+(n.points[1][1]-n.points[0][1])*(_+1)/(f+1)]))(f),p=[n.points[0],...d,...n.points.slice(1,n.points.length)];return nn({...n,points:p,style:{...n.style,pointsCount:p.length}},i,o)}},Za=(n,a,i)=>({...n,path:c2(n),selection:Bu(n,a,i,!0)}),U2=Za,Z2=(n,a,i,o)=>Za({toolId:n.id,type:n.type,id:A.uniqueId(`${n.type}_`),points:A.flow(A.range(0),A.map(()=>a))(n.settings.pointsCount.default),rotation:0,style:{globalAlpha:n.settings.opacity.default,fillColor:n.settings.fillColor.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default,pointsCount:n.settings.pointsCount.default}},i,o),j2=(n,a,i,o,c,f,d)=>{const p=[me(n[0],c),me(n[1],c)],{center:_}=Xe(i,f),b=Sa(p,i.rotation,_,a),w=A.set(["points",o.anchor],b,i);return Za(w,d,f)},F2=(n,a)=>{var i,o;a.path&&n.globalAlpha!==0&&(((i=a.style)==null?void 0:i.fillColor)!=="transparent"&&n.fill(a.path),((o=a.style)==null?void 0:o.strokeColor)!=="transparent"&&n.stroke(a.path))},z2=a1,$2=(n,a,i,o,c,f)=>{const{borders:d}=Xe(a,f);return Za({...a,points:a.points.map(([p,_])=>o?[p+me(d.x+n[0]-i[0],o)-d.x,_+me(d.y+n[1]-i[1],o)-d.y]:[me(p+n[0]-i[0],o),me(_+n[1]-i[1],o)])},c,f)},ja=(n,a,i)=>({...n,path:Ea(n),selection:an(n,a,i)}),G2=ja,P2=(n,a,i,o)=>{const c={toolId:n.id,type:n.type,id:A.uniqueId(`${n.type}_`),x:a[0],y:a[1],width:0,height:0,rotation:0,style:{globalAlpha:n.settings.opacity.default,fillColor:n.settings.fillColor.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default}};return ja(c,i,o)},Is=(n,a)=>{var i,o;n.globalAlpha===0||!a.path||(((i=a.style)==null?void 0:i.fillColor)!=="transparent"&&n.fill(a.path),((o=a.style)==null?void 0:o.strokeColor)!=="transparent"&&n.stroke(a.path))},i1=(n,a)=>({x:n.x-a,width:n.width+a*2,y:n.y-a,height:n.height+a*2}),Es=(n,a,i,o,[c,f]=[!1,!1])=>{const d=n[0]===.5?i.x+i.width/2:n[0]===0?i.x+(c?0:i.width):i.x+(c?i.width:0),p=n[1]===.5?i.y+i.height/2:n[1]===0?i.y+(f?0:i.height):i.y+(f?i.height:0);return x2([d,p],i.rotation,a,o)},Y2=(n,a,i,o,c,f)=>ja({...a,x:me(a.x+n[0]-i[0],o),y:me(a.y+n[1]-i[1],o)},c,f),Su=(n,a,i,o,c,f,d=!1)=>{const{borderX:p,borderHeight:_,borderY:b,borderWidth:w}=Ba(n,a,i,o,c,d);return ja({...a,width:Math.max(0,w-2*c),height:Math.max(0,_-2*c),x:p+c,y:b+c},f,c)},bu=["Texte"],Uu=(n,a,i)=>({...n,selection:an(n,a,i)}),X2=Uu,Zu=(n,a,i,o,c,f=Rn)=>{n.font=`${c?"italic":""} ${o?"bold":""} 1px ${f}`;const d=a.map(p=>i/n.measureText(p).width);return Math.min(...d)||Ph},K2=(n,a,i,o,c)=>{var d,p;const f=Zu(n,bu,50,((d=a.settings)==null?void 0:d.fontBold.default)??!1,((p=a.settings)==null?void 0:p.fontItalic.default)??!1,a.settings.fontFamily.default);return Uu({toolId:a.id,type:a.type,id:A.uniqueId(`${a.type}_`),x:i[0],y:i[1],value:bu,fontSize:f,width:50,height:f*(bu.length||1),rotation:0,style:{globalAlpha:a.settings.opacity.default,strokeColor:a.settings.strokeColor.default,fontFamily:a.settings.fontFamily.default}},o,c)},J2=(n,a)=>{var i,o,c,f;if(!(n.globalAlpha===0||!((i=a.style)!=null&&i.strokeColor)||a.style.strokeColor==="transparent")){n.font=`${(o=a.style)!=null&&o.fontItalic?"italic":""} ${(c=a.style)!=null&&c.fontBold?"bold":""} ${a.fontSize}px ${((f=a.style)==null?void 0:f.fontFamily)??Rn}`,n.textBaseline="top",n.fillStyle=a.style.strokeColor;for(let d=0;d<a.value.length;d++)n.fillText(a.value[d],a.x,a.y+d*a.fontSize,a.width)}},e5=(n,a)=>({x:n.x-a,width:n.width+a*2,y:n.y-a,height:n.height+a*2}),t5=(n,a,i,o,c,f)=>Uu({...a,x:me(a.x+n[0]-i[0],o),y:me(a.y+n[1]-i[1],o)},c,f),r5=(n,a,i,o,c,f,d)=>{var _,b,w;const p=Su(a,i,o,c,f,d,!0);return{...p,fontSize:Zu(n,p.value,p.width,((_=p.style)==null?void 0:_.fontBold)??!1,((b=p.style)==null?void 0:b.fontItalic)??!1,(w=p.style)==null?void 0:w.fontFamily)}},n5=(n,a,i,o,c,f=Rn)=>{n.font=`${c?"italic":""} ${o?"bold":""} ${i}px ${f}`;const d=a.map(p=>n.measureText(p).width);return Math.max(...d)||20},a5=(n,a,i,o,c)=>{var B,k,M;const f={...a,value:i},d=n5(n,f.value,f.fontSize,((B=f.style)==null?void 0:B.fontBold)??!1,((k=f.style)==null?void 0:k.fontItalic)??!1,(M=f.style)==null?void 0:M.fontFamily),p=f.fontSize*f.value.length,_={...f,width:d,height:p},{center:b}=Xe(a,o),{center:w}=Xe(_,o),[E,R]=Es([1,1],b,a,c),[N,q]=Es([1,1],w,_,c,[!1,!1]);return{..._,x:_.x-(N-E),y:_.y-(q-R)}},Fa=(n,a,i)=>({...n,path:s2(n),selection:an(n,a,i)}),i5=Fa,u5=(n,a,i,o)=>Fa({toolId:n.id,type:n.type,id:A.uniqueId(`${n.type}_`),x:a[0],y:a[1],radiusX:0,radiusY:0,rotation:0,style:{globalAlpha:n.settings.opacity.default,fillColor:n.settings.fillColor.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default}},i,o),o5=(n,a)=>{var i,o;n.globalAlpha===0||!a.path||(((i=a.style)==null?void 0:i.fillColor)!=="transparent"&&n.fill(a.path),((o=a.style)==null?void 0:o.strokeColor)!=="transparent"&&n.stroke(a.path))},l5=(n,a)=>({x:n.x-n.radiusX-a,width:(n.radiusX+a)*2,y:n.y-n.radiusY-a,height:(n.radiusY+a)*2}),s5=(n,a,i,o,c,f)=>Fa({...a,x:me(a.x+n[0]-i[0],o),y:me(a.y+n[1]-i[1],o)},c,f),c5=(n,a,i,o,c,f,d=!1)=>{const{borderX:p,borderHeight:_,borderY:b,borderWidth:w}=Ba(n,a,i,o,c,d);return Fa({...a,radiusX:Math.max(0,w/2-c),radiusY:Math.max(0,_/2-c),x:p+w/2,y:b+_/2},f,c)},za=(n,a,i)=>({...n,path:ka(n),selection:an(n,a,i)}),f5=za,d5=(n,a,i,o)=>za({toolId:n.id,type:n.type,id:A.uniqueId(`${n.type}_`),x:a[0],y:a[1],radius:0,rotation:0,style:{globalAlpha:n.settings.opacity.default,fillColor:n.settings.fillColor.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default}},i,o),p5=(n,a)=>{var i,o;n.globalAlpha===0||!a.path||(((i=a.style)==null?void 0:i.fillColor)!=="transparent"&&n.fill(a.path),((o=a.style)==null?void 0:o.strokeColor)!=="transparent"&&n.stroke(a.path))},h5=(n,a)=>({x:n.x-n.radius-a,width:(n.radius+a)*2,y:n.y-n.radius-a,height:(n.radius+a)*2}),m5=(n,a,i,o,c,f)=>za({...a,x:me(a.x+n[0]-i[0],o),y:me(a.y+n[1]-i[1],o)},c,f),y5=(n,a,i,o,c,f)=>{const{borderX:d,borderHeight:p,borderY:_,borderWidth:b}=Ba(n,a,i,o,c,!0);return za({...a,radius:Math.max(0,b/2-c),x:d+b/2,y:_+p/2},f,c)},v5=n=>{const a=["img","id","selection","path"];return n.map(i=>i.type==="picture"&&!i.src.startsWith("http")?A.omit(a,{...i,src:_5(i.img)}):A.omit(a,i))},u1=(n,a,i)=>({shapes:v5(n),config:{width:a,height:i}}),ks=(n,a,i)=>kn({...n,id:A.uniqueId(`${n.type}_`)},a,i),g5=n=>n==null?void 0:n.map(a=>{if(!a.translation)return a;const i=a.translation;switch(a.type){case"rect":case"square":case"ellipse":case"circle":case"picture":return{...A.omit(["translation"],a),x:a.x+i[0],y:a.y+i[1]};case"line":return{...A.omit(["translation"],a),points:a.points.map(([o,c])=>[o+i[0],c+i[1]])};case"polygon":case"curve":return{...A.omit(["translation"],a),points:a.points.map(([o,c])=>[o+i[0],c+i[1]])};case"brush":return{...A.omit(["translation"],a),points:a.points.map(o=>o.map(([c,f])=>[c+i[0],f+i[1]]))}}}),o1=n=>{const o=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("svg")[0],c=o.getAttribute("width"),f=o.getAttribute("height");let d;if(c||f)d=n;else{const _=o.getAttribute("viewBox")??`0 0 ${mr} ${mr}`,[,,b,w]=_.split(" ");o.setAttribute("width",b??mr),o.setAttribute("height",w??mr),d=new XMLSerializer().serializeToString(o)}const p=new Blob([d],{type:"image/svg+xml"});return URL.createObjectURL(p)},l1=n=>(n instanceof File?n.name:n).includes(".svg"),s1=n=>l1(n)?fetch(n).then(a=>a.text()).then(a=>o1(a)):fetch(n).then(a=>a.blob()).then(a=>URL.createObjectURL(a)),Ts=(n,a)=>{const i=document.createElement("a");i.href=n,i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i)},_5=n=>{const a=document.createElement("canvas");a.width=n.width,a.height=n.height;const i=a.getContext("2d");return i?(i.drawImage(n,0,0),a.toDataURL("image/png")):""},b5=n=>"data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(n)),qs=(n,a,i,o,c)=>{const f=document.createElement("canvas");f.width=i,f.height=o;const d=f.getContext("2d");if(!d)return"";d.clearRect(0,0,i,o),e1(d);for(let p=n.length-1;p>=0;p--)V1(d,n[p],1,a,c);return f.toDataURL("image/png")},Q5=(n,a,i)=>{const o=u1(n,a,i);return b5(o)},w5=async n=>new Promise((a,i)=>{const o=new FileReader;o.onload=c=>{var p;const f=(p=c.target)==null?void 0:p.result;if(!f)return i("Impossible de récupérer les données du fichier");const d=JSON.parse(f);a(d)},o.readAsText(n)}),C5=async(n,a,i)=>{const o=[],c=n.shapes,f=A.flow(d=>g5(d),A.map(d=>{if(!Js.includes(d.type))return null;if(d.type==="picture"){const p=new Image,_=new Promise((b,w)=>{p.onload=()=>{URL.revokeObjectURL(p.src),b()},p.onerror=()=>{w(new Error("Some images could not be loaded"))}});return o.push(_),d.src.startsWith("http")?s1(d.src).then(b=>{p.src=b}).catch(()=>{p.src=""}):p.src=d.src,ks({...d,img:p},a,i)}return ks(d,a,i)}),A.compact)(c);return await Promise.all(o),f},c1='<svg><path d="M5.146 17.5Q4.146 17.5 3.208 17Q2.271 16.5 1.667 15.708Q2.208 15.75 2.802 15.344Q3.396 14.938 3.396 14.104Q3.396 13.042 4.135 12.292Q4.875 11.542 5.958 11.542Q7.021 11.542 7.76 12.292Q8.5 13.042 8.5 14.104Q8.5 15.5 7.51 16.5Q6.521 17.5 5.146 17.5ZM9.917 12.5 7.562 10.146 14.917 2.729Q15.146 2.5 15.469 2.5Q15.792 2.5 16.021 2.729L17.271 3.958Q17.5 4.188 17.5 4.531Q17.5 4.875 17.271 5.125Z"/></svg>',Ra='<svg><path d="M2.5 17.5V2.5H17.5V17.5ZM4.25 15.75H15.75V4.25H4.25ZM4.25 15.75V4.25V15.75Z"/></svg>',A5='<svg><path d="M5.333 9.292 10.021 1.646 14.708 9.292ZM14.562 18.333Q13 18.333 11.896 17.229Q10.792 16.125 10.792 14.562Q10.792 13 11.896 11.896Q13 10.792 14.562 10.792Q16.125 10.792 17.229 11.896Q18.333 13 18.333 14.562Q18.333 16.125 17.229 17.229Q16.125 18.333 14.562 18.333ZM2.5 17.917V11.188H9.229V17.917ZM14.562 16.583Q15.438 16.583 16.01 16.01Q16.583 15.438 16.583 14.562Q16.583 13.688 16.01 13.115Q15.438 12.542 14.562 12.542Q13.688 12.542 13.115 13.115Q12.542 13.688 12.542 14.562Q12.542 15.438 13.115 16.01Q13.688 16.583 14.562 16.583ZM4.25 16.167H7.479V12.938H4.25ZM8.458 7.542H11.583L10.021 5ZM10.021 7.542ZM7.479 12.938ZM14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Z"/></svg>',Na='<svg><path d="M10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333ZM10 16.583Q12.75 16.583 14.667 14.667Q16.583 12.75 16.583 10Q16.583 7.25 14.667 5.333Q12.75 3.417 10 3.417Q7.25 3.417 5.333 5.333Q3.417 7.25 3.417 10Q3.417 12.75 5.333 14.667Q7.25 16.583 10 16.583ZM10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Z"/></svg>',ju='<svg><path d="M12.25 18.333V16.167L6.833 13.458H2.5V8.208H6.25L8.25 5.917V1.667H13.5V6.917H9.708L7.75 9.146V11.958L12.25 14.208V13.083H17.5V18.333Z"/></svg>',f1='<svg><path d="M4.125 5.083V3.333H7.062L7.896 2.5H12.104L12.938 3.333H15.875V5.083ZM6.75 17.5Q6.021 17.5 5.51 16.99Q5 16.479 5 15.75V5.958H15V15.75Q15 16.479 14.49 16.99Q13.979 17.5 13.25 17.5Z"/></svg>',Rs='<svg><path d="M10 17.5Q7.208 17.5 5.271 15.594Q3.333 13.688 3.333 10.958Q3.333 9.583 3.854 8.396Q4.375 7.208 5.292 6.292L10 1.667L14.688 6.292Q15.604 7.208 16.135 8.396Q16.667 9.583 16.667 10.958Q16.667 13.688 14.719 15.594Q12.771 17.5 10 17.5ZM5.146 11.667H14.854Q15.083 10.188 14.552 9.146Q14.021 8.104 13.479 7.562L10 4.125L6.521 7.562Q5.979 8.104 5.448 9.146Q4.917 10.188 5.146 11.667Z"/></svg>',V5='<svg><path d="M11.708 15.833H5.854V14.083H11.708Q13 14.083 13.958 13.292Q14.917 12.5 14.917 11.271Q14.917 10.042 13.958 9.24Q13 8.438 11.708 8.438H6.667L8.792 10.562L7.562 11.792L3.333 7.562L7.562 3.333L8.792 4.562L6.667 6.688H11.708Q13.729 6.688 15.198 7.99Q16.667 9.292 16.667 11.25Q16.667 13.208 15.198 14.521Q13.729 15.833 11.708 15.833Z"/></svg>',x5='<svg><path d="M8.292 15.833Q6.271 15.833 4.802 14.521Q3.333 13.208 3.333 11.25Q3.333 9.292 4.802 7.99Q6.271 6.688 8.292 6.688H13.333L11.208 4.562L12.438 3.333L16.667 7.562L12.438 11.792L11.208 10.562L13.333 8.438H8.292Q7 8.438 6.042 9.229Q5.083 10.021 5.083 11.25Q5.083 12.5 6.042 13.292Q7 14.083 8.292 14.083H14.146V15.833Z"/></svg>',L5='<svg><path d="M10 17.646 2.438 11.75 3.875 10.646 10 15.396 16.125 10.646 17.562 11.75ZM10 13.188 2.5 7.354 10 1.521 17.5 7.354Z"/></svg>',I5='<svg><path d="M7.854 13.812 10 11.688 12.125 13.812 13.354 12.604 11.208 10.458 13.354 8.312 12.125 7.104 10 9.229 7.854 7.104 6.625 8.312 8.771 10.458 6.625 12.604ZM5.896 17.5Q5.167 17.5 4.656 16.99Q4.146 16.479 4.146 15.75V5.125H3.333V3.375H7.542V2.5H12.458V3.375H16.667V5.125H15.833V15.75Q15.833 16.479 15.323 16.99Q14.812 17.5 14.083 17.5Z"/></svg>',E5='<svg><path d="M17.5 5.833V15.75Q17.5 16.479 16.99 16.99Q16.479 17.5 15.75 17.5H4.25Q3.521 17.5 3.01 16.99Q2.5 16.479 2.5 15.75V4.25Q2.5 3.521 3.01 3.01Q3.521 2.5 4.25 2.5H14.167ZM10 14.917Q11.062 14.917 11.823 14.156Q12.583 13.396 12.583 12.333Q12.583 11.271 11.823 10.51Q11.062 9.75 10 9.75Q8.938 9.75 8.177 10.51Q7.417 11.271 7.417 12.333Q7.417 13.396 8.177 14.156Q8.938 14.917 10 14.917ZM5.021 8.396H12.521V5.021H5.021Z"/></svg>',k5='<svg><path d="M10 13.271 5.708 8.979 6.958 7.729 9.125 9.896V3.333H10.875V9.896L13.042 7.729L14.292 8.979ZM5.083 16.667Q4.354 16.667 3.844 16.156Q3.333 15.646 3.333 14.917V12.5H5.083V14.917Q5.083 14.917 5.083 14.917Q5.083 14.917 5.083 14.917H14.917Q14.917 14.917 14.917 14.917Q14.917 14.917 14.917 14.917V12.5H16.667V14.917Q16.667 15.646 16.156 16.156Q15.646 16.667 14.917 16.667Z"/></svg>',T5='<svg><path d="M3.417 16.667Q2.729 16.667 2.198 16.135Q1.667 15.604 1.667 14.917V5.083Q1.667 4.396 2.198 3.865Q2.729 3.333 3.417 3.333H8.25L9.917 5H16.667Q17.354 5 17.844 5.531Q18.333 6.062 18.333 6.75H3.417V14.917Q3.417 14.917 3.417 14.917Q3.417 14.917 3.417 14.917L5.438 8.5H19.583L17.396 15.479Q17.229 16.021 16.802 16.344Q16.375 16.667 15.833 16.667Z"/></svg>',Fu='<svg><path d="M4.792 15.083 8.333 11.542 9.833 13.021 11.667 10.708 15.167 15.083ZM6.667 8.417Q5.938 8.417 5.427 7.906Q4.917 7.396 4.917 6.667Q4.917 5.938 5.427 5.427Q5.938 4.917 6.667 4.917Q7.396 4.917 7.906 5.427Q8.417 5.938 8.417 6.667Q8.417 7.396 7.906 7.906Q7.396 8.417 6.667 8.417ZM4.167 18.333Q3.125 18.333 2.396 17.604Q1.667 16.875 1.667 15.833V4.167Q1.667 3.125 2.396 2.396Q3.125 1.667 4.167 1.667H15.833Q16.875 1.667 17.604 2.396Q18.333 3.125 18.333 4.167V15.833Q18.333 16.875 17.604 17.604Q16.875 18.333 15.833 18.333ZM4.167 16.583H15.833Q16.146 16.583 16.365 16.365Q16.583 16.146 16.583 15.833V4.167Q16.583 3.854 16.365 3.635Q16.146 3.417 15.833 3.417H4.167Q3.854 3.417 3.635 3.635Q3.417 3.854 3.417 4.167V15.833Q3.417 16.146 3.635 16.365Q3.854 16.583 4.167 16.583Z"/></svg>',d1='<svg><path d="M8.708 16.667V5.917H4.167V3.333H15.833V5.917H11.292V16.667Z"/></svg>',p1='<svg><path d="M7.5 15.833V14.083H12.833L3.333 4.583L4.583 3.333L14.083 12.833V7.5H15.833V15.833Z"/></svg>',q5='<svg><path d="M8.0145 11.1707C8.38484 10.9914 8.82183 11.1558 8.99959 11.5295L10.7031 15.2591L12.0363 14.6238L10.3254 10.9017C10.1476 10.528 10.3106 10.0795 10.6809 9.90761L10.8883 9.84782L12.5918 9.51148L6.48133 4.33192V12.389L7.82934 11.2903L8.0145 11.1707ZM10.6587 16.9258C10.2883 17.1052 9.84395 16.9482 9.67359 16.5745L8.05894 13.0318L6.19988 14.5416C6.07396 14.6462 5.91842 14.706 5.74066 14.706C5.54423 14.706 5.35584 14.6272 5.21694 14.4871C5.07803 14.3469 5 14.1568 5 13.9586V2.74741C5 2.54919 5.07803 2.35908 5.21694 2.21891C5.35584 2.07874 5.54423 2 5.74066 2C5.91842 2 6.08878 2.06727 6.21469 2.1719L6.2221 2.16443L14.7323 9.36947C15.0508 9.63854 15.0879 10.1094 14.8286 10.4233C14.7175 10.5579 14.562 10.6475 14.4064 10.6774L12.0659 11.1408L13.6954 14.6761C13.888 15.0498 13.7102 15.4908 13.3399 15.6627L10.6587 16.9258Z"/></svg>',R5='<svg><path d="M2.5 15V13.25H17.5V15ZM2.5 10.875V9.125H17.5V10.875ZM2.5 6.75V5H17.5V6.75Z"/></svg>',N5='<svg><path d="M10 13.354Q11.583 13.354 12.688 12.25Q13.792 11.146 13.792 9.562Q13.792 7.979 12.688 6.875Q11.583 5.771 10 5.771Q8.417 5.771 7.312 6.875Q6.208 7.979 6.208 9.562Q6.208 11.146 7.312 12.25Q8.417 13.354 10 13.354ZM10 11.812Q9.062 11.812 8.406 11.156Q7.75 10.5 7.75 9.562Q7.75 8.625 8.406 7.969Q9.062 7.312 10 7.312Q10.938 7.312 11.594 7.969Q12.25 8.625 12.25 9.562Q12.25 10.5 11.594 11.156Q10.938 11.812 10 11.812ZM10 15.833Q6.938 15.833 4.448 14.125Q1.958 12.417 0.833 9.562Q1.958 6.708 4.458 5.021Q6.958 3.333 10 3.333Q13.042 3.333 15.542 5.021Q18.042 6.708 19.167 9.562Q18.042 12.417 15.552 14.125Q13.062 15.833 10 15.833ZM10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562ZM10 14.083Q12.333 14.083 14.281 12.865Q16.229 11.646 17.25 9.562Q16.229 7.479 14.281 6.281Q12.333 5.083 10 5.083Q7.667 5.083 5.708 6.281Q3.75 7.479 2.729 9.562Q3.75 11.646 5.708 12.865Q7.667 14.083 10 14.083Z"/></svg>',D5='<svg><path d="M13.521 11.021 12.25 9.75Q12.333 8.75 11.604 7.979Q10.875 7.208 9.812 7.312L8.542 6.042Q8.896 5.896 9.26 5.833Q9.625 5.771 10 5.771Q11.583 5.771 12.688 6.875Q13.792 7.979 13.792 9.562Q13.792 9.979 13.719 10.354Q13.646 10.729 13.521 11.021ZM16.167 13.646 14.917 12.417Q15.667 11.833 16.25 11.146Q16.833 10.458 17.25 9.562Q16.229 7.479 14.292 6.281Q12.354 5.083 10 5.083Q9.396 5.083 8.885 5.156Q8.375 5.229 7.875 5.375L6.5 4Q7.354 3.646 8.208 3.49Q9.062 3.333 10 3.333Q13.146 3.333 15.615 5.052Q18.083 6.771 19.167 9.562Q18.688 10.792 17.917 11.823Q17.146 12.854 16.167 13.646ZM16.396 18.854 12.938 15.396Q12.208 15.625 11.479 15.729Q10.75 15.833 10 15.833Q6.833 15.833 4.375 14.094Q1.917 12.354 0.833 9.562Q1.25 8.479 1.917 7.552Q2.583 6.625 3.417 5.875L1.125 3.562L2.375 2.354L17.625 17.625ZM4.604 7.062Q4.021 7.604 3.542 8.219Q3.062 8.833 2.729 9.562Q3.75 11.646 5.688 12.865Q7.625 14.083 10 14.083Q10.354 14.083 10.74 14.052Q11.125 14.021 11.479 13.938L10.812 13.271Q10.625 13.312 10.417 13.333Q10.208 13.354 10 13.354Q8.417 13.354 7.312 12.25Q6.208 11.146 6.208 9.562Q6.208 9.354 6.24 9.167Q6.271 8.979 6.312 8.771ZM11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875ZM8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Z"/></svg>',M5='<svg><path d="M9.958 18.333Q8.25 18.333 6.74 17.677Q5.229 17.021 4.104 15.885Q2.979 14.75 2.323 13.229Q1.667 11.708 1.667 10Q1.667 8.271 2.333 6.75Q3 5.229 4.156 4.104Q5.312 2.979 6.854 2.323Q8.396 1.667 10.125 1.667Q11.771 1.667 13.26 2.25Q14.75 2.833 15.875 3.854Q17 4.875 17.667 6.26Q18.333 7.646 18.333 9.25Q18.333 11.688 16.792 12.948Q15.25 14.208 13.188 14.208H11.75Q11.625 14.208 11.562 14.281Q11.5 14.354 11.5 14.458Q11.5 14.688 11.812 15.219Q12.125 15.75 12.125 16.458Q12.125 17.458 11.51 17.896Q10.896 18.333 9.958 18.333ZM5.458 10.875Q6 10.875 6.375 10.5Q6.75 10.125 6.75 9.583Q6.75 9.042 6.375 8.667Q6 8.292 5.458 8.292Q4.917 8.292 4.542 8.667Q4.167 9.042 4.167 9.583Q4.167 10.125 4.542 10.5Q4.917 10.875 5.458 10.875ZM7.917 7.583Q8.458 7.583 8.833 7.208Q9.208 6.833 9.208 6.292Q9.208 5.75 8.833 5.375Q8.458 5 7.917 5Q7.375 5 7 5.375Q6.625 5.75 6.625 6.292Q6.625 6.833 7 7.208Q7.375 7.583 7.917 7.583ZM12.021 7.583Q12.562 7.583 12.938 7.208Q13.312 6.833 13.312 6.292Q13.312 5.75 12.938 5.375Q12.562 5 12.021 5Q11.479 5 11.104 5.375Q10.729 5.75 10.729 6.292Q10.729 6.833 11.104 7.208Q11.479 7.583 12.021 7.583ZM14.479 10.875Q15.021 10.875 15.396 10.5Q15.771 10.125 15.771 9.583Q15.771 9.042 15.396 8.667Q15.021 8.292 14.479 8.292Q13.938 8.292 13.562 8.667Q13.188 9.042 13.188 9.583Q13.188 10.125 13.562 10.5Q13.938 10.875 14.479 10.875Z"/></svg>',O5='<svg><path d="M9.188 16.542V14.938Q8.5 14.938 8.021 14.458Q7.542 13.979 7.542 13.292V12.458L3.583 8.5Q3.5 8.875 3.458 9.25Q3.417 9.625 3.417 10Q3.417 12.5 5.062 14.365Q6.708 16.229 9.188 16.542ZM14.854 14.438Q15.708 13.521 16.146 12.385Q16.583 11.25 16.583 10Q16.583 7.979 15.469 6.313Q14.354 4.646 12.479 3.917V4.229Q12.479 4.917 12 5.396Q11.521 5.875 10.833 5.875H9.188V7.521Q9.188 7.875 8.948 8.115Q8.708 8.354 8.354 8.354H6.708V10H11.646Q12 10 12.24 10.229Q12.479 10.458 12.479 10.812V13.292H13.292Q13.833 13.292 14.26 13.604Q14.688 13.917 14.854 14.438ZM10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333Z"/></svg>',W5='<svg><path d="M10 0.833Q11.771 0.833 12.99 2.052Q14.208 3.271 14.208 5.042V6.667H14.917Q15.646 6.667 16.156 7.177Q16.667 7.688 16.667 8.417V16.562Q16.667 17.292 16.156 17.812Q15.646 18.333 14.917 18.333H5.083Q4.354 18.333 3.844 17.812Q3.333 17.292 3.333 16.562V8.417Q3.333 7.688 3.844 7.177Q4.354 6.667 5.083 6.667H5.792V5.042Q5.792 3.271 7.01 2.052Q8.229 0.833 10 0.833ZM10 2.583Q8.979 2.583 8.26 3.302Q7.542 4.021 7.542 5.042V6.667H12.458V5.042Q12.458 4.021 11.74 3.302Q11.021 2.583 10 2.583ZM5.083 16.583H14.917Q14.917 16.583 14.917 16.583Q14.917 16.583 14.917 16.583V8.417Q14.917 8.417 14.917 8.417Q14.917 8.417 14.917 8.417H5.083Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583ZM10 10.812Q9.292 10.812 8.802 11.302Q8.312 11.792 8.312 12.5Q8.312 13.208 8.802 13.698Q9.292 14.188 10 14.188Q10.708 14.188 11.198 13.698Q11.688 13.208 11.688 12.5Q11.688 11.792 11.198 11.302Q10.708 10.812 10 10.812ZM5.083 8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583V8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417Z"/></svg>',H5='<svg><path d="M5.792 5.042Q5.792 3.271 7.01 2.052Q8.229 0.833 10 0.833Q11.771 0.833 12.99 2.052Q14.208 3.271 14.208 5.042V6.667H14.917Q15.646 6.667 16.156 7.177Q16.667 7.688 16.667 8.417V16.562Q16.667 17.292 16.156 17.812Q15.646 18.333 14.917 18.333H5.083Q4.354 18.333 3.844 17.812Q3.333 17.292 3.333 16.562V8.417Q3.333 7.688 3.844 7.177Q4.354 6.667 5.083 6.667H12.458V5.042Q12.458 4.021 11.74 3.302Q11.021 2.583 10 2.583Q8.979 2.583 8.26 3.302Q7.542 4.021 7.542 5.042ZM5.083 16.583H14.917Q14.917 16.583 14.917 16.583Q14.917 16.583 14.917 16.583V8.417Q14.917 8.417 14.917 8.417Q14.917 8.417 14.917 8.417H5.083Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583ZM10 10.812Q9.292 10.812 8.802 11.302Q8.312 11.792 8.312 12.5Q8.312 13.208 8.802 13.698Q9.292 14.188 10 14.188Q10.708 14.188 11.198 13.698Q11.688 13.208 11.688 12.5Q11.688 11.792 11.198 11.302Q10.708 10.812 10 10.812ZM5.083 8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583V8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417Z"/></svg>',B5='<svg><path d="M18.333 15.854 16.583 14.104V13.354H15.833L14.083 11.604H16.583V8.375H13.375V10.896L11.625 9.146V8.375H10.875L9.125 6.625H11.625V3.417H8.396V5.896L6.646 4.146V3.417H5.896L4.146 1.667H16.583Q17.312 1.667 17.823 2.177Q18.333 2.688 18.333 3.417ZM13.375 6.625H16.583V3.417Q16.583 3.417 16.583 3.417Q16.583 3.417 16.583 3.417H13.375ZM16.771 19.229 15.854 18.333H3.417Q2.688 18.333 2.177 17.823Q1.667 17.312 1.667 16.583V4.125L0.812 3.271L2.042 2.021L18 18ZM13.375 16.583H14.104L13.375 15.833ZM8.396 11.604H9.125L8.396 10.854ZM8.396 16.583H11.625V14.083L10.875 13.354H8.396ZM3.417 6.625H4.167L3.417 5.875ZM3.417 11.604H6.646V9.104L5.917 8.375H3.417ZM6.646 16.583V13.354H3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Z"/></svg>',h1='<svg><path d="M7.521 17.5Q6.125 17.5 5.146 16.51Q4.167 15.521 4.167 14.125V7.417Q3.438 7.125 2.969 6.49Q2.5 5.854 2.5 5.042Q2.5 3.979 3.24 3.24Q3.979 2.5 5.042 2.5Q6.104 2.5 6.844 3.24Q7.583 3.979 7.583 5.042Q7.583 5.854 7.115 6.49Q6.646 7.125 5.917 7.417V14.125Q5.917 14.792 6.385 15.271Q6.854 15.75 7.521 15.75Q8.188 15.75 8.656 15.271Q9.125 14.792 9.125 14.125V5.875Q9.125 4.479 10.104 3.49Q11.083 2.5 12.479 2.5Q13.875 2.5 14.854 3.49Q15.833 4.479 15.833 5.875V12.583Q16.562 12.875 17.031 13.51Q17.5 14.146 17.5 14.958Q17.5 16.021 16.76 16.76Q16.021 17.5 14.958 17.5Q13.896 17.5 13.156 16.76Q12.417 16.021 12.417 14.958Q12.417 14.146 12.885 13.5Q13.354 12.854 14.083 12.583V5.875Q14.083 5.208 13.615 4.729Q13.146 4.25 12.479 4.25Q11.812 4.25 11.344 4.729Q10.875 5.208 10.875 5.875V14.125Q10.875 15.521 9.896 16.51Q8.917 17.5 7.521 17.5Z"/></svg>',Ns='<svg><path d="M5.833 15V3.333H10.375Q11.812 3.333 12.885 4.156Q13.958 4.979 13.958 6.375Q13.958 7.375 13.49 7.969Q13.021 8.562 12.396 8.875V9.042Q13.312 9.354 13.844 10.021Q14.375 10.688 14.375 11.75Q14.375 13.312 13.229 14.156Q12.083 15 10.5 15ZM8.125 8.042H10.188Q10.854 8.042 11.302 7.656Q11.75 7.271 11.75 6.708Q11.75 6.167 11.302 5.771Q10.854 5.375 10.188 5.375H8.125ZM8.125 12.917H10.354Q11.167 12.917 11.625 12.51Q12.083 12.104 12.083 11.458Q12.083 10.812 11.625 10.406Q11.167 10 10.354 10H8.125Z"/></svg>',Ds='<svg><path d="M4.167 16.667V14.083H6.979L10.229 5.917H7.5V3.333H15.833V5.917H13.021L9.771 14.083H12.5V16.667Z"/></svg>',Ms='<svg><path d="M3.021 16V15H17V16ZM3.021 13.5V12H17V13.5ZM3 10.5V8.5H16.979V10.5ZM3.021 7V4H17V7Z"/></svg>',S5='<svg><path d="M3 16V14.5H4.5V16ZM6.125 16V14.5H7.625V16ZM9.25 16V14.5H10.75V16ZM12.375 16V14.5H13.875V16ZM15.5 16V14.5H17V16ZM3 13V11.5H6.5V13ZM8.25 13V11.5H11.75V13ZM13.5 13V11.5H17V13ZM3 10V8.5H9.25V10ZM10.75 10V8.5H17V10ZM3 7V4H17V7Z"/></svg>',U5='<svg><path d="M5.312 14.979H7.125L8.042 12.479H11.979L12.896 14.979H14.708L10.917 5H9.083ZM8.542 10.958 9.958 6.958H10.042L11.458 10.958ZM3.417 18.333Q2.688 18.333 2.177 17.823Q1.667 17.312 1.667 16.583V3.417Q1.667 2.688 2.177 2.177Q2.688 1.667 3.417 1.667H16.583Q17.312 1.667 17.823 2.177Q18.333 2.688 18.333 3.417V16.583Q18.333 17.312 17.823 17.823Q17.312 18.333 16.583 18.333ZM3.417 16.583H16.583Q16.583 16.583 16.583 16.583Q16.583 16.583 16.583 16.583V3.417Q16.583 3.417 16.583 3.417Q16.583 3.417 16.583 3.417H3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583ZM3.417 3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583V3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417Z"/></svg>',Z5='<svg><path d="M6 17 2 13 6 9 7.062 10.062 4.875 12.25H17V13.75H4.875L7.062 15.938ZM14 11 12.938 9.938 15.125 7.75H3V6.25H15.125L12.938 4.062L14 3L18 7Z"/></svg>',j5='<svg><path d="M2.5 15.833V14.083H7.667V15.833ZM2.5 5.917V4.167H10.771V5.917ZM9.208 17.5V12.438H10.958V14.083H17.5V15.833H10.958V17.5ZM5.917 12.542V10.875H2.5V9.125H5.917V7.479H7.667V12.542ZM9.208 10.875V9.125H17.5V10.875ZM12.333 7.562V2.5H14.083V4.167H17.5V5.917H14.083V7.562Z"/></svg>',Os='<svg><path d="M16.354 18.833 14.521 17Q13.542 17.646 12.396 17.99Q11.25 18.333 10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.729 2.01 7.594Q2.354 6.458 3 5.458L1.167 3.625L2.396 2.396L17.583 17.604ZM10 16.583Q10.896 16.583 11.708 16.365Q12.521 16.146 13.25 15.729L4.292 6.75Q3.875 7.479 3.646 8.292Q3.417 9.104 3.417 10Q3.417 12.729 5.344 14.656Q7.271 16.583 10 16.583ZM17 14.562 15.708 13.271Q16.125 12.542 16.354 11.719Q16.583 10.896 16.583 10Q16.583 7.271 14.656 5.344Q12.729 3.417 10 3.417Q9.104 3.417 8.292 3.646Q7.479 3.875 6.75 4.292L5.458 3Q6.458 2.354 7.594 2.01Q8.729 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.271 17.979 12.417Q17.625 13.562 17 14.562ZM11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771ZM8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Z"/></svg>',Ws='<svg ><path d="M16.354 18.833 14.521 17Q13.542 17.646 12.396 17.99Q11.25 18.333 10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.729 2.01 7.594Q2.354 6.458 3 5.458L1.167 3.625L2.396 2.396L17.583 17.604ZM17 14.562 5.458 3Q6.458 2.354 7.594 2.01Q8.729 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.271 17.979 12.417Q17.625 13.562 17 14.562Z"/></svg>',Fe="react-paint-",F5={strokeColor:{values:st,default:"black"},fillColor:{values:st,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:vr,default:0}},z5={strokeColor:{values:st,default:"black"},fillColor:{values:st,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:vr,default:0}},$5={strokeColor:{values:st,default:"black"},fillColor:{values:st,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:vr,default:0}},G5={strokeColor:{values:st,default:"black"},fillColor:{values:st,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:vr,default:0}},P5={opacity:{min:0,max:100,step:1,default:100}},Y5={strokeColor:{values:st,default:"black"},opacity:{min:0,max:100,step:1,default:100},fontFamily:{values:Gh,default:Rn},fontBold:{values:[!1,!0],default:!1},fontItalic:{values:[!1,!0],default:!1}},X5={strokeColor:{values:st,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:6,max:20,step:2,default:10},lineDash:{values:vr,default:0}},K5={strokeColor:{values:st,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:vr,default:0},lineArrow:{values:$h,default:0}},J5={strokeColor:{values:st,default:"black"},fillColor:{values:st,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:vr,default:0},pointsCount:{min:3,max:10,step:1,default:3}},em={strokeColor:{values:st,default:"black"},fillColor:{values:st,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:vr,default:0},pointsCount:{min:3,max:10,step:1,default:3}},zu={type:"picture",id:`${Fe}picture`,icon:Fu,label:"Image",settings:P5},m1={type:"brush",id:`${Fe}brush`,icon:c1,label:"Brosse",settings:X5},y1={type:"line",id:`${Fe}line`,icon:p1,label:"Ligne",settings:K5},v1={type:"polygon",id:`${Fe}polygon`,icon:ju,label:"Polygone",settings:J5},g1={type:"curve",id:`${Fe}curve`,icon:h1,label:"Courbe",settings:em},_1={type:"rect",id:`${Fe}rect`,icon:Ra,label:"Rectangle",settings:F5},b1={type:"square",id:`${Fe}square`,icon:Ra,label:"Carré",settings:z5},Q1={type:"circle",id:`${Fe}circle`,icon:Na,label:"Cercle",settings:$5},w1={type:"ellipse",id:`${Fe}ellipse`,icon:Na,label:"Ellipse",settings:G5},C1={type:"text",id:`${Fe}text`,icon:d1,label:"Texte",settings:Y5},tm=[m1,y1,v1,g1,_1,b1,Q1,w1,zu,C1],rr={id:`${Fe}selection`,type:"selection",icon:q5,label:"Sélection"},Jr={id:`${Fe}undo`,type:"undo",icon:V5,label:"Undo"},en={id:`${Fe}redo`,type:"redo",icon:x5,label:"Redo"},tn={id:`${Fe}clear`,type:"clear",icon:I5,label:"Clear"},Qu={id:`${Fe}export`,type:"export",icon:k5,label:"Export PNG"},Hs={id:`${Fe}load`,type:"loadfile",icon:T5,label:"Load project"},wu={id:`${Fe}save`,type:"savefile",icon:E5,label:"Save project"},Bs={id:`${Fe}upload-picture`,type:"uploadpicture",icon:Fu,label:"Upload picture"},$u=(n,a,i)=>({...n,selection:an(n,a,i)}),rm=$u,A1=(n,a,i,o,c,f)=>{const[d,p]=V2(n.width,n.height,i,o,!0);return $u({toolId:zu.id,type:"picture",id:A.uniqueId("picture_"),x:(i-d)/2,y:(o-p)/2,width:d,height:p,src:a,img:n,rotation:0},c,f)},nm=(n,a,i,o,c,f,d)=>{const p=URL.createObjectURL(i);n.onload=async()=>{if(URL.revokeObjectURL(n.src),l1(i)&&!n.width&&!n.height){const b=await i.text(),w=o1(b);if(p===n.src){n.src=w;return}}const _=A1(n,n.src,o,c,f,d);a(_)},n.src=p},am=(n,a,i,o,c,f,d)=>{n.onload=()=>{URL.revokeObjectURL(n.src);const p=A1(n,i,o,c,f,d);a(p)},s1(i).then(p=>{n.src=p}).catch(()=>{n.src=""})},im=(n,a,i,o,c)=>new Promise((f,d)=>{const p=new Image;p.onerror=()=>{d(new Error("Some images could not be loaded"))},setTimeout(()=>{d(new Error("Timeout while loading images"))},4e3),n instanceof File?nm(p,f,n,a,i,o,c):am(p,f,n,a,i,o,c)}),um=(n,a)=>{n.globalAlpha!==0&&(n.beginPath(),n.drawImage(a.img,a.x,a.y,a.width,a.height))},om=(n,a)=>i1(n,a),lm=(n,a,i,o,c,f)=>$u({...a,x:me(a.x+n[0]-i[0],o),y:me(a.y+n[1]-i[1],o)},c,f),sm=(n,a,i,o,c,f,d)=>Su(n,a,i,o,c,f,d),Ss=(n,a,i,o,c,f)=>{const d=[me(i[0],o),me(i[1],o)];switch(a.type){case"brush":return v2(a,d,c,f);case"line":return T2(a,d,c,f);case"polygon":return O2(a,d,c,f);case"curve":return Z2(a,d,c,f);case"rect":case"square":return P2(a,d,c,f);case"text":return K2(n,a,d,c,f);case"ellipse":return u5(a,d,c,f);case"circle":return d5(a,d,c,f)}},V1=(n,a,i,o,c)=>{if(a.visible===!1)return;const{center:f}=Xe(a,c);switch(t1(n,i,o,a.rotation,f),rn(n,a.style),a.type){case"brush":g2(n,a);break;case"text":J2(n,a);break;case"line":q2(n,a);break;case"polygon":W2(n,a);break;case"curve":F2(n,a);break;case"circle":p5(n,a);break;case"ellipse":o5(n,a);break;case"rect":Is(n,a);break;case"square":Is(n,a);break;case"picture":um(n,a);break}n.restore()},cm=(n,a)=>{switch(n.type){case"brush":return _2(n,a);case"line":return R2(n,a);case"polygon":return a1(n,a);case"curve":return z2(n,a);case"circle":return h5(n,a);case"ellipse":return l5(n,a);case"rect":case"square":return i1(n,a);case"text":return e5(n,a);case"picture":return om(n,a);default:return{x:0,y:0,width:100,height:100}}},fm=n=>[n.x+n.width/2,n.y+n.height/2],Xe=(n,a)=>{const i=cm(n,a),o=fm(i);return{borders:i,center:o}},dm=(n,a,i,o,c,f)=>{const d=c[0]-o[0],p=c[1]-o[1],_=c[0]-a[0],b=c[1]-a[1],w=i.rotation+Math.atan2(b,_)-Math.atan2(p,d);return{...n,rotation:f?w+Math.PI/vu/2-(w+Math.PI/vu/2)%(Math.PI/vu):w}},pm=(n,a,i,o,c,f,d,p,_,b)=>{switch(c.type){case"line":return D2(i,o,c,f,d,p,b);case"polygon":return B2(i,o,c,f,d,p,b);case"curve":return j2(i,o,c,f,d,p,b);case"brush":return Q2(i,c,f,d,p,b,_);case"circle":return y5(i,c,f,d,p,b);case"ellipse":return c5(i,c,f,d,p,b,_);case"rect":case"square":return Su(i,c,f,d,p,b,a.type==="square"||_);case"text":return r5(n,i,c,f,d,p,b);case"picture":return sm(i,c,f,d,p,b,!_);default:return c}},Gu=(n,a,i,o,c,f)=>{switch(a.type){case"rect":case"square":return Y2(n,a,i,o,c,f);case"ellipse":return s5(n,a,i,o,c,f);case"circle":return m5(n,a,i,o,c,f);case"picture":return lm(n,a,i,o,c,f);case"text":return t5(n,a,i,o,c,f);case"line":return N2(n,a,i,o,c,f);case"polygon":return H2(n,a,i,o,c,f);case"curve":return $2(n,a,i,o,c,f);case"brush":return b2(n,a,i,o,c,f);default:return a}},kn=(n,a,i)=>{switch(n.type){case"rect":case"square":return G2(n,a,i);case"ellipse":return i5(n,a,i);case"circle":return f5(n,a,i);case"picture":return rm(n,a,i);case"text":return X2(n,a,i);case"line":return k2(n,a,i);case"polygon":return M2(n,a,i);case"curve":return U2(n,a,i);case"brush":return y2(n,a,i);default:return n}},hm=({ctx:n,shape:a,currentScale:i=1,canvasOffset:o,selectionPadding:c,selectionWidth:f,selectionColor:d,withAnchors:p=!0})=>{const{center:_}=Xe(a,c);switch(t1(n,i,o,a.rotation,_),a.type){case"rect":case"square":case"circle":case"ellipse":case"picture":case"text":case"brush":p2(n,a,d,f,i,p);break;case"polygon":case"line":case"curve":E2({ctx:n,shape:a,withAnchors:p,selectionWidth:f,selectionColor:d,currentScale:i});break}n.restore()},mm=(n,a,i,o)=>({...Gu([20,20],n,[0,0],a,i,o),id:A.uniqueId(`${n.type}_`)}),Iu=({disabled:n=!1,scaleRatio:a,shape:i,defaultValue:o,updateValue:c,saveShapes:f,selectionPadding:d})=>{var E,R,N,q,B;const p=I.useRef(null),_=I.useRef(f),b=k=>{c(l2(k.target.innerHTML))};I.useEffect(()=>{if(!p.current)return;const k=p.current,M=K=>{var te;K.preventDefault();const S=(te=K.clipboardData)==null?void 0:te.getData("text/plain");document.execCommand("insertText",!1,S)};return k.addEventListener("paste",M),k.innerHTML=u2(o),k.focus(),()=>{k.removeEventListener("paste",M)}},[o]),I.useEffect(()=>{const k=_.current;return()=>{k()}},[]);const w=I.useMemo(()=>{const{borders:k,center:M}=Xe(i,d);return nr({point:[k.x,k.y],rotation:-i.rotation,origin:M})},[i,d]);return C("div",{className:"react-paint-editor-toolbox-edittextbox",ref:p,"data-fontbold":((E=i.style)==null?void 0:E.fontBold)??!1,"data-fontitalic":((R=i.style)==null?void 0:R.fontItalic)??!1,contentEditable:!n,onInput:b,style:{"--react-paint-editor-toolbox-edittextbox-transform":`translate3D(${w[0]*a}px, ${w[1]*a}px, 0) rotate(${Lu(i.rotation)}deg)`,"--react-paint-editor-toolbox-edittextbox-fontsize":`${i.fontSize*a}px`,"--react-paint-editor-toolbox-edittextbox-padding":`${d*a}px`,"--react-paint-editor-toolbox-edittextbox-color":((N=i.style)==null?void 0:N.strokeColor)??"inherit","--react-paint-editor-toolbox-edittextbox-opacity":(((q=i.style)==null?void 0:q.globalAlpha)??100)/100,"--react-paint-editor-toolbox-edittextbox-fontfamily":((B=i.style)==null?void 0:B.fontFamily)??Rn}})};try{Iu.displayName="EditTextBox",Iu.__docgenInfo={description:"",displayName:"EditTextBox",props:{scaleRatio:{defaultValue:null,description:"",name:"scaleRatio",required:!0,type:{name:"number"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},shape:{defaultValue:null,description:"",name:"shape",required:!0,type:{name:'DrawableShape<"text">'}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string[]"}},selectionPadding:{defaultValue:null,description:"",name:"selectionPadding",required:!0,type:{name:"number"}},updateValue:{defaultValue:null,description:"",name:"updateValue",required:!0,type:{name:"(newValue: string[]) => void"}},saveShapes:{defaultValue:null,description:"",name:"saveShapes",required:!0,type:{name:"() => void"}}}}}catch{}const ym=(n,a,i,o)=>{if(n.mode==="translate")return{mode:"translate",cursorStartPosition:i,originalShape:a};if(n.mode==="rotate"){const{center:c}=Xe(a,o),f=[c[0],c[1]];return{mode:"rotate",cursorStartPosition:i,originalShape:a,center:f}}else if(n.mode==="resize")return{mode:"resize",cursorStartPosition:i,originalShape:a,anchor:n.anchor}},vm=(n,a,i,o,c,f)=>{if(c){const p=qa(c,a,o,f,i,!0)||{mode:"default"},_=ym(p,c,a,f);if((_==null?void 0:_.mode)==="resize"||(_==null?void 0:_.mode)==="rotate")return{shape:c,mode:_}}const d=n.find(p=>!!qa(p,a,o,f,i,!1));return d?{shape:d,mode:{mode:"translate",cursorStartPosition:a,originalShape:d}}:{shape:void 0,mode:{mode:"default"}}},gm=300,_m=()=>{const n=I.useRef(void 0),a=I.useRef(void 0),i=f=>{var p;const d=new Date().getTime();n.current&&d<n.current+gm&&((p=a.current)==null||p.call(a,f)),n.current=new Date().getTime()};return{registerDoubleClickEvent:(f,d)=>{a.current=d,f.addEventListener("click",i),f.addEventListener("touchend",i)},unRegisterDoubleClickEvent:f=>{f.removeEventListener("click",i),f.removeEventListener("touchend",i)}}},bm=(n,a,i,o,c,f,d,p,_,b,w,E,R,N,q,B,k)=>{var K;if(i.type==="move"&&p!==void 0){const S=Ta(n,a.current,_,b,w);N([S[0]-p[0],S[1]-p[1]])}if(f==null||f.locked)return;const M=Ta(n,a.current,_,b,w);if(d.mode==="default"||d.mode==="textedition"){const S=qa(f,M,c,B,w,!0)||{mode:"default"};E(S)}else{const S=(K=a.current)==null?void 0:K.getContext("2d");if(!S)return;const te=A2(S,f,M,o,c,d,B,k,w);R(te),q(te)}},Qm=({disabled:n=!1,addShape:a,canvasSize:i,drawCanvasRef:o,setActiveTool:c,shapes:f,selectionMode:d,activeTool:p,isInsideComponent:_,setCanvasOffset:b,selectedShape:w,selectionCanvasRef:E,canvasOffsetStartPosition:R,setSelectedShape:N,setCanvasOffsetStartPosition:q,updateSingleShape:B,gridFormat:k,canvasOffset:M,saveShapes:K,setSelectionMode:S,selectionPadding:te,isShiftPressed:pe})=>{const{width:ve,height:we,scaleRatio:ge}=i,[H,$]=I.useState({mode:"default"}),{registerDoubleClickEvent:W,unRegisterDoubleClickEvent:oe}=_m();return I.useEffect(()=>{const ee=he=>window.requestAnimationFrame(()=>bm(he,E,p,k,M,w,d,R,ve,we,ge,$,B,b,N,te,pe));return _&&(document.addEventListener("mousemove",ee),document.addEventListener("touchmove",ee)),()=>{_&&(document.removeEventListener("mousemove",ee),document.removeEventListener("touchmove",ee))}},[_,E,w,d,$,k,M,R,ve,we,ge,B,p,b,N,te,pe]),I.useEffect(()=>{const ee=()=>{d.mode!=="textedition"&&d.mode!=="default"&&(S({mode:"default"}),K())};return _&&(document.addEventListener("mouseup",ee),document.addEventListener("touchend",ee)),()=>{_&&(document.removeEventListener("mouseup",ee),document.removeEventListener("touchend",ee))}},[_,d,K,S]),I.useEffect(()=>{const ee=E.current;if(!ee||n)return;const he=re=>{var ye;re.preventDefault();const be=Ta(re,E.current,ve,we,ge);if(p.type==="selection"){const{shape:De,mode:Ve}=vm(f,be,ge,M,w,te);N(De),S(Ve)}else p.type==="move"&&q(be);if(Js.includes(p.type)){const De=(ye=o.current)==null?void 0:ye.getContext("2d");if(!De)return;if(p.type==="brush"){if(w&&w.type==="brush"){const Ve=C2(w,be,ge,te);B(Ve),N(Ve)}else{const Ve=Ss(De,p,be,k,ge,te);if(!Ve)return;a(Ve),N(Ve)}S({mode:"brush"})}else if(p.type!=="picture"){const Ve=Ss(De,p,be,k,ge,te);a(Ve),c(rr),N(Ve),S({mode:"resize",cursorStartPosition:[be[0]+te,be[1]+te],originalShape:Ve,anchor:p.type==="line"||p.type==="polygon"||p.type==="curve"?0:[1,1]})}}};return ee.addEventListener("mousedown",he,{passive:!1}),ee.addEventListener("touchstart",he,{passive:!1}),()=>{ee.removeEventListener("mousedown",he),ee.removeEventListener("touchstart",he)}},[n,E,o,w,p,M,q,f,ve,we,ge,B,a,c,N,S,te,k]),I.useEffect(()=>{const ee=E.current;if(!ee)return;const he=re=>{if(p.type==="selection"&&(w==null?void 0:w.type)==="text"){const be=Ta(re,E.current,ve,we,ge);qa(w,be,M,te)&&S({mode:"textedition",defaultValue:w.value})}};if(_)return W(ee,he),()=>{oe(ee)}},[W,oe,_,E,p,w,ve,we,ge,M,S,te]),{hoverMode:H}},wm=(n,a,i,o,c,f)=>{n.strokeStyle="rgb(220,220,220)",n.lineWidth=1,n.save(),n.scale(o,o),n.beginPath();const d=kr[f-1],p=-c[0]%d,_=-c[1]%d,b=Math.ceil(a/o/d),w=Math.ceil(i/o/d);for(let E=0;E<b;E++)n.moveTo(p+(E+1)*d,_),n.lineTo(p+(E+1)*d,_+i/o);for(let E=0;E<w;E++)n.moveTo(p,_+(E+1)*d),n.lineTo(p+a/o,_+(E+1)*d);n.stroke(),n.restore()},Cm=(n,a,i,o,c,f,d,p)=>{const{width:_,height:b,scaleRatio:w}=i;n.clearRect(0,0,_,b),e1(n),o&&wm(n,_,b,w,c,o);for(let E=f.length-1;E>=0;E--)(a.mode!=="textedition"||f[E]!==p)&&V1(n,f[E],w,c,d)},Am=(n,a,i,o,c,f,d,p,_)=>{const{width:b,height:w,scaleRatio:E}=i;n.clearRect(0,0,b,w),_&&o.type!=="brush"&&hm({ctx:n,shape:_,currentScale:E,canvasOffset:c,selectionPadding:f,selectionWidth:d,selectionColor:p,withAnchors:a.mode!=="textedition"})},Eu=Ps.forwardRef(({gridFormat:n,canGrow:a,disabled:i=!1,canvasSize:o,shapes:c,addShape:f,updateSingleShape:d,selectedShape:p,setSelectedShape:_,saveShapes:b,activeTool:w,setActiveTool:E,canvasOffsetStartPosition:R,setCanvasOffsetStartPosition:N,canvasOffset:q,setCanvasOffset:B,isInsideComponent:k,selectionMode:M,setSelectionMode:K,selectionWidth:S,selectionColor:te,selectionPadding:pe,isEditMode:ve,isShiftPressed:we},ge)=>{const H=I.useRef(null),$=I.useRef(null);I.useImperativeHandle(ge,()=>H.current);const{hoverMode:W}=Qm({disabled:i,addShape:f,canvasSize:o,drawCanvasRef:H,setActiveTool:E,shapes:c,selectionMode:M,activeTool:w,isInsideComponent:k,setCanvasOffset:B,selectedShape:p,selectionCanvasRef:$,canvasOffsetStartPosition:R,setSelectedShape:_,setCanvasOffsetStartPosition:N,updateSingleShape:d,gridFormat:n,canvasOffset:q,saveShapes:b,setSelectionMode:K,selectionPadding:pe,isShiftPressed:we}),{scaleRatio:oe}=o,ee=I.useCallback(he=>{var ye;if((p==null?void 0:p.type)!=="text")return;const re=(ye=H.current)==null?void 0:ye.getContext("2d");if(!re)return;const be=kn(a5(re,p,he,pe,q),oe,pe);d(be)},[d,p,q,oe,pe]);return I.useEffect(()=>{var re;const he=(re=H.current)==null?void 0:re.getContext("2d");he&&window.requestAnimationFrame(()=>Cm(he,M,o,n,q,c,pe,p))},[c,n,M,p,q,o,pe]),I.useEffect(()=>{var re;const he=(re=$.current)==null?void 0:re.getContext("2d");he&&window.requestAnimationFrame(()=>Am(he,M,o,w,q,pe,S,te,p))},[M,p,w,q,o,pe,S,te]),C("div",{className:"react-paint-editor-canvas-box",children:fe("div",{className:"react-paint-editor-canvas-container","data-grow":a,children:[C("canvas",{className:"react-paint-editor-canvas-drawcanvas",ref:H,"data-grow":a,width:o.width,height:o.height}),ve&&C("canvas",{className:"react-paint-editor-canvas-selectioncanvas",ref:$,width:o.width,height:o.height,"data-grow":a,style:{"--react-paint-editor-canvas-cursor":w.type!=="selection"&&w.type!=="move"||W.mode==="resize"?"crosshair":w.type==="move"||W.mode==="translate"?"move":W.mode==="rotate"?"grab":"default"}}),ve&&M.mode==="textedition"&&(p==null?void 0:p.type)==="text"&&C(Iu,{scaleRatio:o.scaleRatio,disabled:i,shape:p,defaultValue:M.defaultValue,updateValue:ee,saveShapes:b,selectionPadding:pe})]})})});try{Eu.displayName="Canvas",Eu.__docgenInfo={description:"",displayName:"Canvas",props:{gridFormat:{defaultValue:null,description:"",name:"gridFormat",required:!0,type:{name:"enum",value:[{value:"0"},{value:"2"},{value:"1"},{value:"3"}]}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},canGrow:{defaultValue:null,description:"",name:"canGrow",required:!1,type:{name:"boolean"}},canvasSize:{defaultValue:null,description:"",name:"canvasSize",required:!0,type:{name:"{ width: number; height: number; scaleRatio: number; }"}},selectionColor:{defaultValue:null,description:"",name:"selectionColor",required:!0,type:{name:"string"}},selectionWidth:{defaultValue:null,description:"",name:"selectionWidth",required:!0,type:{name:"number"}},selectionPadding:{defaultValue:null,description:"",name:"selectionPadding",required:!0,type:{name:"number"}},isEditMode:{defaultValue:null,description:"",name:"isEditMode",required:!0,type:{name:"boolean"}},shapes:{defaultValue:null,description:"",name:"shapes",required:!0,type:{name:"ShapeEntity[]"}},saveShapes:{defaultValue:null,description:"",name:"saveShapes",required:!0,type:{name:"() => void"}},addShape:{defaultValue:null,description:"",name:"addShape",required:!0,type:{name:"(newShape: ShapeEntity) => void"}},updateSingleShape:{defaultValue:null,description:"",name:"updateSingleShape",required:!0,type:{name:"(updatedShape: ShapeEntity) => void"}},selectedShape:{defaultValue:null,description:"",name:"selectedShape",required:!0,type:{name:"ShapeEntity | undefined"}},setSelectedShape:{defaultValue:null,description:"",name:"setSelectedShape",required:!0,type:{name:"Dispatch<SetStateAction<ShapeEntity | undefined>>"}},activeTool:{defaultValue:null,description:"",name:"activeTool",required:!0,type:{name:"ToolsType"}},setActiveTool:{defaultValue:null,description:"",name:"setActiveTool",required:!0,type:{name:"Dispatch<SetStateAction<ToolsType>>"}},canvasOffsetStartPosition:{defaultValue:null,description:"",name:"canvasOffsetStartPosition",required:!0,type:{name:"Point | undefined"}},setCanvasOffsetStartPosition:{defaultValue:null,description:"",name:"setCanvasOffsetStartPosition",required:!0,type:{name:"Dispatch<SetStateAction<Point | undefined>>"}},canvasOffset:{defaultValue:null,description:"",name:"canvasOffset",required:!0,type:{name:"Point"}},setCanvasOffset:{defaultValue:null,description:"",name:"setCanvasOffset",required:!0,type:{name:"Dispatch<SetStateAction<Point>>"}},isInsideComponent:{defaultValue:null,description:"",name:"isInsideComponent",required:!0,type:{name:"boolean"}},selectionMode:{defaultValue:null,description:"",name:"selectionMode",required:!0,type:{name:"SelectionModeData<number | Point>"}},setSelectionMode:{defaultValue:null,description:"",name:"setSelectionMode",required:!0,type:{name:"Dispatch<SetStateAction<SelectionModeData<number | Point>>>"}},isShiftPressed:{defaultValue:null,description:"",name:"isShiftPressed",required:!0,type:{name:"boolean"}}}}}catch{}const Vm=({disabled:n=!1,ref:a,shape:i,layoutDragging:o,setLayoutDragging:c,handleSelect:f,onMoveShapes:d})=>{const[p,_]=I.useState(!1);return I.useEffect(()=>{o||_(!1)},[o]),I.useEffect(()=>{const b=a.current;if(!b)return;const w=()=>{c(void 0)},E=k=>(k.preventDefault&&k.preventDefault(),!1),R=k=>{f(i),k.dataTransfer&&(k.dataTransfer.effectAllowed="move",k.dataTransfer.setData("draggableShapeId",i.id),c(i.id))},N=()=>{o!==i.id&&_(!0)},q=()=>{_(!1)},B=k=>(k.stopPropagation(),k.dataTransfer&&d(k.dataTransfer.getData("draggableShapeId"),i.id),!1);return n||(b.addEventListener("dragstart",R),b.addEventListener("dragend",w),b.addEventListener("dragover",E),b.addEventListener("dragenter",N),b.addEventListener("dragleave",q),b.addEventListener("drop",B)),()=>{n||(b.removeEventListener("dragstart",R),b.removeEventListener("dragend",w),b.removeEventListener("dragover",E),b.removeEventListener("dragenter",N),b.removeEventListener("dragleave",q),b.removeEventListener("drop",B))}},[n,a,i,c,f,d,o]),{isOver:p}},xm=n=>{switch(n){case"brush":return c1;case"line":return p1;case"polygon":return ju;case"curve":return h1;case"rect":return Ra;case"square":return Ra;case"circle":return Na;case"ellipse":return Na;case"text":return d1;case"picture":return Fu;case"triangle":return""}},Ie=Ps.forwardRef((n,a)=>{if(n.type==="file"||n.type==="color"){const{hidden:i=!1,disabled:o=!1,selected:c=!1,icon:f,children:d,className:p="",title:_,onClick:b,...w}=n;return fe("label",{className:`react-paint-editor-button ${p}`,title:_,onClick:b,"data-disabled":+o,"data-selected":+c,"data-hidden":+i,children:[C("input",{ref:a,disabled:o,...w}),fe("span",{className:"react-paint-editor-button-content",children:[d&&C("span",{className:"react-paint-editor-button-children",children:d}),f&&C("span",{className:"react-paint-editor-button-icon",dangerouslySetInnerHTML:{__html:f}})]})]})}else{const{hidden:i=!1,disabled:o=!1,selected:c=!1,icon:f,children:d,type:p="button",className:_="",...b}=n;return C("button",{className:`react-paint-editor-button ${_}`,ref:a,disabled:o,"data-disabled":+o,"data-selected":+c,"data-hidden":+i,type:p,...b,children:fe("span",{className:"react-paint-editor-button-content",children:[d&&C("span",{className:"react-paint-editor-button-children",children:d}),f&&C("span",{className:"react-paint-editor-button-icon",dangerouslySetInnerHTML:{__html:f}})]})})}});try{Ie.displayName="Button",Ie.__docgenInfo={description:"",displayName:"Button",props:{hidden:{defaultValue:null,description:"",name:"hidden",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"string"}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string"}}}}}catch{}const yr=({children:n,title:a="",className:i="",position:o="bottom",fitContainer:c=!1,alignment:f="center"})=>fe("div",{className:`react-paint-editor-panel ${i}`,"data-fitcontainer":c,"data-position":o,"data-alignment":f,style:{"--react-paint-editor-panel-zindex":Nn.PANEL},children:[a&&C("h3",{className:"react-paint-editor-panel-title",children:a}),n]});try{yr.displayName="Panel",yr.__docgenInfo={description:"",displayName:"Panel",props:{vertical:{defaultValue:null,description:"",name:"vertical",required:!1,type:{name:"boolean"}},title:{defaultValue:{value:""},description:"",name:"title",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},fitContainer:{defaultValue:{value:"false"},description:"",name:"fitContainer",required:!1,type:{name:"boolean"}},position:{defaultValue:{value:"bottom"},description:"",name:"position",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"top"'}]}},alignment:{defaultValue:{value:"center"},description:"",name:"alignment",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'},{value:'"center"'}]}}}}}catch{}const Lm=({disabled:n=!1,shape:a,selected:i,layoutDragging:o,toggleShapeVisibility:c,toggleShapeLock:f,setLayoutDragging:d,handleRemove:p,handleSelect:_,onMoveShapes:b})=>{const w=I.useRef(null),E=k=>{n||(k.preventDefault(),k.stopPropagation(),p(a))},R=k=>{n||(k.preventDefault(),k.stopPropagation(),_(a))},N=k=>{n||(k.preventDefault(),k.stopPropagation(),c(a))},q=k=>{n||(k.preventDefault(),k.stopPropagation(),f(a))},{isOver:B}=Vm({disabled:n,ref:w,shape:a,layoutDragging:o,setLayoutDragging:d,handleSelect:_,onMoveShapes:b});return fe("div",{className:"react-paint-editor-layout","data-disabled":+n,draggable:!n,"data-is-dragging":+(o===a.id),"data-is-over":+B,onClick:R,"data-selected":+i,ref:w,children:[C("span",{dangerouslySetInnerHTML:{__html:xm(a.type)}}),C("span",{children:a.id}),C("div",{className:"react-paint-editor-layouts-separator"}),C(Ie,{className:"react-paint-editor-layouts-visible-button",title:a.visible?"Hide":"Show","data-visible":a.visible!==!1,disabled:n,selected:i,onClick:N,icon:a.visible===!1?D5:N5}),C(Ie,{className:"react-paint-editor-layouts-locked-button",title:a.locked?"Locked":"Unlocked","data-locked":!!a.locked,disabled:n,selected:i,onClick:q,icon:a.locked?W5:H5}),C(Ie,{className:"react-paint-editor-layouts-remove-button",title:"Remove",disabled:n,onClick:E,icon:f1})]})},ku=({gridFormat:n,setGridFormat:a,disabled:i=!1,shapes:o,removeShape:c,toggleShapeVisibility:f,toggleShapeLock:d,selectedShape:p,moveShapes:_,selectShape:b,isLayoutPanelShown:w})=>{const[E,R]=I.useState(void 0);return w?C(yr,{alignment:"right",className:"react-paint-editor-layouts-panel",children:C("div",{className:"react-paint-editor-layouts-panel-content",children:fe("div",{className:"react-paint-editor-layouts-scrolling-content",children:[fe("div",{className:"react-paint-editor-layouts-row",children:[C("span",{className:"react-paint-editor-layouts-subtitle",children:"Grid"}),C(Ie,{icon:B5,className:"react-paint-editor-layouts-grid-button",selected:n===0,disabled:i,onClick:()=>a(0)}),["S","M","L"].map((N,q)=>C(Ie,{className:"react-paint-editor-layouts-grid-button",selected:n===q+1,disabled:i,onClick:()=>a(q+1),children:N},N))]}),C("hr",{}),C("div",{className:"react-paint-editor-layouts",children:o.length===0?C("div",{className:"react-paint-editor-layouts-placeholder",children:"No layer yet"}):o.map(N=>C(Lm,{shape:N,disabled:i,layoutDragging:E,setLayoutDragging:R,selected:(p==null?void 0:p.id)===N.id,handleSelect:b,handleRemove:c,onMoveShapes:_,toggleShapeVisibility:f,toggleShapeLock:d},N.id))})]})})}):null};try{ku.displayName="Layouts",ku.__docgenInfo={description:"",displayName:"Layouts",props:{gridFormat:{defaultValue:null,description:"",name:"gridFormat",required:!0,type:{name:"enum",value:[{value:"0"},{value:"2"},{value:"1"},{value:"3"}]}},setGridFormat:{defaultValue:null,description:"",name:"setGridFormat",required:!0,type:{name:"Dispatch<SetStateAction<GridFormatType>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},shapes:{defaultValue:null,description:"",name:"shapes",required:!0,type:{name:"ShapeEntity[]"}},removeShape:{defaultValue:null,description:"",name:"removeShape",required:!0,type:{name:"(shape: ShapeEntity) => void"}},toggleShapeVisibility:{defaultValue:null,description:"",name:"toggleShapeVisibility",required:!0,type:{name:"(shape: ShapeEntity) => void"}},toggleShapeLock:{defaultValue:null,description:"",name:"toggleShapeLock",required:!0,type:{name:"(shape: ShapeEntity) => void"}},selectedShape:{defaultValue:null,description:"",name:"selectedShape",required:!0,type:{name:"ShapeEntity | undefined"}},selectShape:{defaultValue:null,description:"",name:"selectShape",required:!0,type:{name:"(shape: ShapeEntity) => void"}},moveShapes:{defaultValue:null,description:"",name:"moveShapes",required:!0,type:{name:"(firstShapeId: string, lastShapeId: string) => void"}},isLayoutPanelShown:{defaultValue:null,description:"",name:"isLayoutPanelShown",required:!0,type:{name:"boolean"}}}}}catch{}const Im=(n,a)=>A.flow(A.flatMap(i=>{if(!A.isObject(i))return A.filter({type:i},n);const o=A.filter(c=>A.includes(c.type,i.toolsType),n);return o?{...i,toolsType:o}:null}),A.compact)(a),Us=(n,a=!1)=>{const i=(o,c)=>{if(A.isArray(o))return c};return A.flow(A.map(o=>{if(!A.isObject(o))return null;switch(o.type){case"brush":return A.mergeWith(i,m1,o);case"circle":return A.mergeWith(i,Q1,o);case"curve":return A.mergeWith(i,g1,o);case"ellipse":return A.mergeWith(i,w1,o);case"line":return A.mergeWith(i,y1,o);case"polygon":return A.mergeWith(i,v1,o);case"rect":return A.mergeWith(i,_1,o);case"square":return A.mergeWith(i,b1,o);case"text":return A.mergeWith(i,C1,o)}return null}),o=>a?[...o,zu]:o,A.compact)(n)},lt=({type:n,img:a,isActive:i,withText:o=!1,disabled:c=!1,setActive:f})=>C(Ie,{disabled:c,selected:i,onClick:()=>{f(n)},title:n.label??n.type,icon:a,children:o?n.label:void 0});try{lt.displayName="Tool",lt.__docgenInfo={description:"",displayName:"Tool",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"ToolsType"}},img:{defaultValue:null,description:"",name:"img",required:!1,type:{name:"string"}},withText:{defaultValue:{value:"false"},description:"",name:"withText",required:!1,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},setActive:{defaultValue:null,description:"",name:"setActive",required:!0,type:{name:"(marker: ToolsType) => void"}}}}}catch{}const x1=(n,a)=>!(n.target instanceof Node)||!a?!1:a.contains(n.target),Tu=({activeTool:n,alignment:a,group:i,disabled:o=!1,setActiveToolFromId:c})=>{var B;const f=I.useRef(null),[d,p]=I.useState(!1),[,_]=I.useTransition(),[b,w]=I.useState(void 0),E=k=>{w(k),c(k.id)};if(I.useEffect(()=>{if(!d)return;const k=M=>{!x1(M,f.current)&&p(!1)};return document.addEventListener("mousedown",k,{passive:!1}),document.addEventListener("touchstart",k,{passive:!1}),()=>{document.removeEventListener("mousedown",k),document.removeEventListener("touchstart",k)}},[d]),"type"in i)return C(lt,{disabled:o,type:i,img:i.icon,isActive:n.id===i.id,setActive:E});if(!i.toolsType.length)return null;if(((B=i.toolsType)==null?void 0:B.length)===1)return C(lt,{disabled:o,type:i.toolsType[0],img:i.toolsType[0].icon,isActive:n.id===i.toolsType[0].id,setActive:E});const R=(i==null?void 0:i.toolsType.find(k=>k.type===n.type))!==void 0,N=(b?b.icon:i.toolsType&&i.toolsType[0]&&i.toolsType[0].icon)??i.title,q=()=>{b?c(b.id):i.toolsType&&i.toolsType[0]&&E(i.toolsType[0]),_(()=>{p(!0)})};return fe("div",{className:"react-paint-editor-toolbargroup-relative",children:[C(Ie,{selected:R,title:i.title,disabled:o,onClick:q,icon:N}),d&&C(yr,{alignment:a,position:"top",children:C("div",{className:"react-paint-editor-toolbargroup-panel-content","data-vertical":+i.vertical,ref:f,children:i.toolsType.map((k,M)=>C(lt,{disabled:o,type:k,img:k.icon,isActive:n.id===k.id,setActive:E},M))})})]})};try{Tu.displayName="ToolbarGroup",Tu.__docgenInfo={description:"",displayName:"ToolbarGroup",props:{activeTool:{defaultValue:null,description:"",name:"activeTool",required:!0,type:{name:"ToolsType"}},group:{defaultValue:null,description:"",name:"group",required:!0,type:{name:"CustomTool | { title: string; toolsType: CustomTool[]; vertical: boolean; }"}},alignment:{defaultValue:null,description:"",name:"alignment",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'},{value:'"center"'}]}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},img:{defaultValue:null,description:"",name:"img",required:!1,type:{name:"string"}},setActiveToolFromId:{defaultValue:null,description:"",name:"setActiveToolFromId",required:!0,type:{name:"(id: string) => void"}}}}}catch{}const Da=({disabled:n=!1,withText:a=!1,loadFile:i,type:o,img:c,accept:f})=>{const d=I.useRef(null);return C(Ie,{ref:d,type:"file",onClick:b=>{b.stopPropagation(),d.current&&(d.current.value="")},onChange:b=>{var E;const w=(E=b.target.files)==null?void 0:E.item(0);w&&i(w)},accept:f,title:o.label??o.type,icon:c,children:a?o.label:void 0,disabled:n})};try{Da.displayName="LoadFileTool",Da.__docgenInfo={description:"",displayName:"LoadFileTool",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},loadFile:{defaultValue:null,description:"",name:"loadFile",required:!0,type:{name:"(file: File) => void"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"ToolsType"}},img:{defaultValue:null,description:"",name:"img",required:!1,type:{name:"string"}},accept:{defaultValue:null,description:"",name:"accept",required:!0,type:{name:"string"}},withText:{defaultValue:{value:"false"},description:"",name:"withText",required:!1,type:{name:"boolean"}}}}}catch{}const qu=({activeTool:n,withActionsInMenu:a,hasActionToUndo:i=!1,hasActionToRedo:o=!1,hasActionToClear:c=!1,undoAction:f,redoAction:d,clearCanvas:p,alignment:_,group:b,vertical:w=!1,disabled:E=!1,withLoadAndSave:R,withExport:N,addPicture:q,loadFile:B,togglePictureUrlModal:k,saveFile:M,exportCanvasInFile:K,withUploadPicture:S,withUrlPicture:te})=>{var he;const[pe,ve]=I.useState(!1),[,we]=I.useTransition(),ge=re=>{ve(!1),B(re)},H=async re=>{ve(!1),await q(re)},$=()=>{we(()=>{ve(!0)})},W=(he=b==null?void 0:b.tools)==null?void 0:he.some(re=>re==n.type),oe=(W?n.icon:b.img)??b.title;return I.useEffect(()=>{if(!pe)return;const re=()=>{ve(!1)};return document.addEventListener("click",re),()=>{document.removeEventListener("click",re)}},[pe]),a||S||te||R||N?fe("div",{className:"react-paint-editor-toolbox-relative",children:[C(Ie,{selected:W,title:b.title,disabled:E,onClick:$,icon:oe}),pe&&C(yr,{alignment:_,position:"top",children:fe("div",{className:"react-paint-editor-toolbox-panel-content","data-vertical":+w,children:[a&&fe(yt,{children:[C(lt,{withText:!0,type:Jr,disabled:E||!i,img:Jr.icon,isActive:n.id===Jr.id,setActive:f}),C(lt,{withText:!0,type:en,disabled:E||!o,img:en.icon,isActive:n.id===en.id,setActive:d}),C(lt,{withText:!0,type:tn,disabled:E||!c,img:tn.icon,isActive:n.id===tn.id,setActive:p}),(S||te||R)&&C("hr",{})]}),S&&C(Da,{withText:!0,type:Bs,disabled:E,loadFile:H,img:Bs.icon,accept:"image/png, image/gif, image/jpeg, image/svg+xml"}),te&&C(Ie,{disabled:E,selected:!1,onClick:k,title:"Add picture from URL",icon:O5,children:"Add picture from URL"}),(S||te)&&R&&C("hr",{}),R&&fe(yt,{children:[C(Da,{withText:!0,type:Hs,disabled:E,loadFile:ge,img:Hs.icon,accept:"application/JSON"}),C(lt,{withText:!0,disabled:E,type:wu,img:wu.icon,isActive:n.id===wu.id,setActive:M})]}),N&&C(lt,{withText:!0,disabled:E,type:Qu,img:Qu.icon,isActive:n.id===Qu.id,setActive:K})]})})]}):null};try{qu.displayName="MenuGroup",qu.__docgenInfo={description:"",displayName:"MenuGroup",props:{activeTool:{defaultValue:null,description:"",name:"activeTool",required:!0,type:{name:"ToolsType"}},withActionsInMenu:{defaultValue:null,description:"",name:"withActionsInMenu",required:!0,type:{name:"boolean"}},group:{defaultValue:null,description:"",name:"group",required:!0,type:{name:'{ tools?: ("line" | "brush" | "rect" | "square" | "polygon" | "circle" | "curve" | "ellipse" | "picture" | "text" | "triangle")[] | undefined; title: string; img: string; }'}},vertical:{defaultValue:{value:"false"},description:"",name:"vertical",required:!1,type:{name:"boolean"}},alignment:{defaultValue:null,description:"",name:"alignment",required:!1,type:{name:"enum",value:[{value:'"left"'},{value:'"right"'},{value:'"center"'}]}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},img:{defaultValue:null,description:"",name:"img",required:!1,type:{name:"string"}},loadFile:{defaultValue:null,description:"",name:"loadFile",required:!0,type:{name:"(file: File) => void"}},addPicture:{defaultValue:null,description:"",name:"addPicture",required:!0,type:{name:"(file: File) => Promise<void>"}},saveFile:{defaultValue:null,description:"",name:"saveFile",required:!0,type:{name:"() => void"}},exportCanvasInFile:{defaultValue:null,description:"",name:"exportCanvasInFile",required:!0,type:{name:"() => void"}},togglePictureUrlModal:{defaultValue:null,description:"",name:"togglePictureUrlModal",required:!0,type:{name:"() => void"}},withLoadAndSave:{defaultValue:null,description:"",name:"withLoadAndSave",required:!0,type:{name:"boolean"}},withExport:{defaultValue:null,description:"",name:"withExport",required:!0,type:{name:"boolean"}},hasActionToUndo:{defaultValue:{value:"false"},description:"",name:"hasActionToUndo",required:!1,type:{name:"boolean"}},hasActionToRedo:{defaultValue:{value:"false"},description:"",name:"hasActionToRedo",required:!1,type:{name:"boolean"}},hasActionToClear:{defaultValue:{value:"false"},description:"",name:"hasActionToClear",required:!1,type:{name:"boolean"}},withUploadPicture:{defaultValue:null,description:"",name:"withUploadPicture",required:!0,type:{name:"boolean"}},withUrlPicture:{defaultValue:null,description:"",name:"withUrlPicture",required:!0,type:{name:"boolean"}},undoAction:{defaultValue:null,description:"",name:"undoAction",required:!0,type:{name:"() => void"}},redoAction:{defaultValue:null,description:"",name:"redoAction",required:!0,type:{name:"() => void"}},clearCanvas:{defaultValue:null,description:"",name:"clearCanvas",required:!0,type:{name:"() => void"}}}}}catch{}const Tn=({children:n,onClose:a,position:i="center",className:o=""})=>fe("div",{className:"react-paint-editor-modal","data-position":i,style:{"--react-paint-editor-modal-zindex":Nn.PANEL},children:[C("div",{className:"react-paint-editor-modal-mask",onClick:a}),C("div",{className:`react-paint-editor-modal-panel ${o}`,children:n})]});try{Tn.displayName="Modal",Tn.__docgenInfo={description:"",displayName:"Modal",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},position:{defaultValue:{value:"center"},description:"",name:"position",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"center"'}]}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Em=({togglePictureUrlModal:n,addPicture:a})=>{const i=I.useRef(null),o=async c=>{var d;c.preventDefault();const f=(d=i.current)==null?void 0:d.value;f&&(await a(f),n())};return I.useEffect(()=>{i.current&&i.current.focus()},[]),C(Tn,{className:"react-paint-editor-toolbox-pictureinput-modal",onClose:n,children:fe("form",{onSubmit:o,children:[fe("label",{children:["URL ",C("input",{type:"text",ref:i})]}),C(Ie,{onClick:n,children:"Annuler"}),C(Ie,{type:"submit",selected:!0,children:"Ajouter"})]})})};try{PictureUrlInput.displayName="PictureUrlInput",PictureUrlInput.__docgenInfo={description:"",displayName:"PictureUrlInput",props:{togglePictureUrlModal:{defaultValue:null,description:"",name:"togglePictureUrlModal",required:!0,type:{name:"() => void"}},addPicture:{defaultValue:null,description:"",name:"addPicture",required:!0,type:{name:"(url: string) => Promise<void>"}}}}}catch{}const Zs=40,km=[{title:"brush",toolsType:["brush"],vertical:!1},{title:"lines",toolsType:["line","curve","polygon"],vertical:!1},{title:"shapes",toolsType:["rect","square","circle","ellipse"],vertical:!1},"text"],Ru=({width:n,disabled:a=!1,activeTool:i,hasActionToUndo:o=!1,hasActionToRedo:c=!1,hasActionToClear:f=!1,withLoadAndSave:d,withExport:p,clearCanvas:_,setActiveTool:b,undoAction:w,redoAction:E,addPicture:R,loadFile:N,saveFile:q,exportCanvasInFile:B,availableTools:k,withUrlPicture:M,withUploadPicture:K})=>{const S=Im(k,km),te=(5+S.length)*Zs,pe=(2+S.length)*Zs,[ve,we]=I.useState(!1),[ge,H]=I.useState(!1),[$,W]=I.useState(n<te),[oe,ee]=I.useState(n<pe),he=()=>{we(Ee=>!Ee)},re=()=>{H(!0)},be=()=>{H(Ee=>!Ee)},ye=Ee=>{b(Ee),we(!1)},De=Ee=>{ye(k.find(nt=>nt.id===Ee)??i)};I.useEffect(()=>{W(n<te),ee(n<pe)},[n,te,pe]);const Ve=k.find(Ee=>Ee.type===i.type)!==void 0;return fe(yt,{children:[fe("div",{className:"react-paint-editor-toolbar-toolbox",children:[fe("div",{className:"react-paint-editor-toolbar-shrinkable",children:[C(lt,{type:rr,disabled:a,img:rr.icon,isActive:i.id===rr.id,setActive:ye}),oe?C(Ie,{disabled:a,onClick:he,title:"Toggle tools",icon:A5,selected:Ve}):S.map((Ee,nt)=>C(Tu,{disabled:a,activeTool:i,group:Ee,setActiveToolFromId:De},nt))]}),!$&&fe(yt,{children:[C(lt,{type:Jr,disabled:a||!o,img:Jr.icon,isActive:i.id===Jr.id,setActive:w}),C(lt,{type:en,disabled:a||!c,img:en.icon,isActive:i.id===en.id,setActive:E}),C(lt,{type:tn,disabled:a||!f,img:tn.icon,isActive:i.id===tn.id,setActive:_})]}),C(qu,{withActionsInMenu:$,disabled:a,vertical:!0,alignment:"right",group:{title:"Menu",img:R5},activeTool:i,addPicture:R,loadFile:N,saveFile:q,togglePictureUrlModal:re,exportCanvasInFile:B,withUploadPicture:K,withUrlPicture:M,withLoadAndSave:d,withExport:p,hasActionToUndo:o,hasActionToRedo:c,hasActionToClear:f,undoAction:w,redoAction:E,clearCanvas:_})]}),ve&&C(Tn,{className:"react-paint-editor-toolbar-modal",onClose:he,children:k.map((Ee,nt)=>Ee.type==="picture"?null:C(lt,{disabled:a,type:Ee,img:Ee.icon,withText:!1,isActive:i.id===Ee.id,setActive:ye},nt))}),ge&&C(Em,{togglePictureUrlModal:be,addPicture:R})]})};try{Ru.displayName="Toolbar",Ru.__docgenInfo={description:"",displayName:"Toolbar",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},activeTool:{defaultValue:null,description:"",name:"activeTool",required:!0,type:{name:"ToolsType"}},hasActionToUndo:{defaultValue:{value:"false"},description:"",name:"hasActionToUndo",required:!1,type:{name:"boolean"}},hasActionToRedo:{defaultValue:{value:"false"},description:"",name:"hasActionToRedo",required:!1,type:{name:"boolean"}},hasActionToClear:{defaultValue:{value:"false"},description:"",name:"hasActionToClear",required:!1,type:{name:"boolean"}},undoAction:{defaultValue:null,description:"",name:"undoAction",required:!0,type:{name:"() => void"}},redoAction:{defaultValue:null,description:"",name:"redoAction",required:!0,type:{name:"() => void"}},clearCanvas:{defaultValue:null,description:"",name:"clearCanvas",required:!0,type:{name:"() => void"}},setActiveTool:{defaultValue:null,description:"",name:"setActiveTool",required:!0,type:{name:"(tool: ToolsType) => void"}},loadFile:{defaultValue:null,description:"",name:"loadFile",required:!0,type:{name:"(file: File) => void"}},addPicture:{defaultValue:null,description:"",name:"addPicture",required:!0,type:{name:"(file: string | File) => Promise<void>"}},saveFile:{defaultValue:null,description:"",name:"saveFile",required:!0,type:{name:"() => void"}},exportCanvasInFile:{defaultValue:null,description:"",name:"exportCanvasInFile",required:!0,type:{name:"() => void"}},availableTools:{defaultValue:null,description:"",name:"availableTools",required:!0,type:{name:"CustomTool[]"}},withLoadAndSave:{defaultValue:null,description:"",name:"withLoadAndSave",required:!0,type:{name:"boolean"}},withExport:{defaultValue:null,description:"",name:"withExport",required:!0,type:{name:"boolean"}},withUrlPicture:{defaultValue:null,description:"",name:"withUrlPicture",required:!0,type:{name:"boolean"}},withUploadPicture:{defaultValue:null,description:"",name:"withUploadPicture",required:!0,type:{name:"boolean"}}}}}catch{}const Xr=({selectedSettings:n,setSelectedSettings:a,title:i="Choisissez une couleur",mode:o="fill",disabled:c=!1,values:f,field:d,value:p="",valueChanged:_})=>{const[b]=I.useState(A.uniqueId("settings_")),w=q=>{const B=A.toNumber(q.target.value);_(d,A.isNaN(B)?q.target.value:B)},E=q=>{_(d,q)},R=()=>{a(q=>q===b?void 0:b)},N=n===b;return A.isEmpty(f)?null:fe(yt,{children:[C(Ie,{selected:N,title:i,disabled:c,onClick:R,icon:p==="transparent"?o==="fill"?Ws:Os:void 0,children:p!=="transparent"&&C("div",{className:"react-paint-editor-colorfield-color","data-mode":o,style:{"--react-paint-editor-colorfield-color-value":p}})}),N&&C(yr,{title:i,alignment:"left",children:fe("div",{className:"react-paint-editor-colorfield-wrapper",children:[f.map((q,B)=>C(Ie,{title:q,selected:q===p,color:q,icon:q==="transparent"?o==="fill"?Ws:Os:void 0,onClick:()=>E(q),children:q!=="transparent"&&C("div",{className:"react-paint-editor-colorfield-color",color:q,"data-mode":o,style:{"--react-paint-editor-colorfield-color-value":q}})},B)),C(Ie,{type:"color",title:"Custom color",selected:!A.includes(p,f),value:p,onChange:w,children:C("div",{className:"react-paint-editor-colorfield-customcolor",style:{"--react-paint-editor-colorfield-color-value":A.includes(p,f)?"var(--react-paint-editor-app-font-color)":p},children:C("span",{dangerouslySetInnerHTML:{__html:M5}})})})]})})]})};try{Xr.displayName="ColorField",Xr.__docgenInfo={description:"",displayName:"ColorField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},title:{defaultValue:{value:"Choisissez une couleur"},description:"",name:"title",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},mode:{defaultValue:{value:"fill"},description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"fill"'},{value:'"stroke"'}]}},value:{defaultValue:{value:""},description:"",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"string[]"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const Nu=({disabled:n=!1,selectedShape:a,removeShape:i})=>{const o=()=>{i(a)};return C(Ie,{title:"Delete",disabled:n,"data-disabled":+n,onClick:o,icon:f1})};try{Nu.displayName="DeleteButton",Nu.__docgenInfo={description:"",displayName:"DeleteButton",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},selectedShape:{defaultValue:null,description:"",name:"selectedShape",required:!0,type:{name:"ShapeEntity"}},removeShape:{defaultValue:null,description:"",name:"removeShape",required:!0,type:{name:"(shape: ShapeEntity) => void"}}}}}catch{}const Du=({disabled:n,toggleLayoutPanel:a})=>C(Ie,{title:"Toggle layers panel",disabled:n,onClick:a,icon:L5,className:"react-paint-editor-layout-button"});try{Du.displayName="LayoutButton",Du.__docgenInfo={description:"",displayName:"LayoutButton",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},toggleLayoutPanel:{defaultValue:null,description:"",name:"toggleLayoutPanel",required:!0,type:{name:"() => void"}}}}}catch{}const Tr=({selectedSettings:n,setSelectedSettings:a,title:i="Choisissez l'intervalle",icon:o,disabled:c=!1,field:f,value:d=1,min:p=1,max:_=20,step:b=1,unity:w="",valueChanged:E})=>{const R=Math.round(d),[N]=I.useState(A.uniqueId("settings_")),q=M=>{const K=+M.target.value;E(f,Number.isNaN(K)?M.target.value:K)},B=()=>{a(M=>M===N?void 0:N)},k=n===N;return p===_?null:fe(yt,{children:[C(Ie,{selected:k,title:i,disabled:c,icon:o,onClick:B}),k&&C(yr,{title:i,alignment:"left",fitContainer:!0,children:C("div",{children:fe("label",{className:"react-paint-editor-rangefield",children:[C("input",{type:"range",min:p,max:_,step:b,value:d,onChange:q}),fe("span",{children:[R,w]})]})})})]})};try{Tr.displayName="RangeField",Tr.__docgenInfo={description:"",displayName:"RangeField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},title:{defaultValue:{value:"Choisissez l'intervalle"},description:"",name:"title",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},min:{defaultValue:{value:"1"},description:"",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:{value:"20"},description:"",name:"max",required:!1,type:{name:"number"}},step:{defaultValue:{value:"1"},description:"",name:"step",required:!1,type:{name:"number"}},unity:{defaultValue:{value:""},description:"",name:"unity",required:!1,type:{name:"string"}},value:{defaultValue:{value:"1"},description:"",name:"value",required:!1,type:{name:"number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const qn=({CustomOption:n,selectedSettings:a,setSelectedSettings:i,title:o="Choisissez l'option",disabled:c=!1,field:f,icon:d,values:p,defaultValue:_,valueChanged:b})=>{const[w]=I.useState(A.uniqueId("settings_")),E=q=>{b(f,q)},R=()=>{i(q=>q===w?void 0:w)},N=a===w;return p.length?fe(yt,{children:[C(Ie,{selected:N,title:o,icon:d,disabled:c,onClick:R}),N&&C(yr,{title:o,alignment:"left",fitContainer:!0,children:C("div",{className:"react-paint-editor-selectfield-wrapper",children:p.map(q=>C(Ie,{title:`${q}`,onClick:()=>E(q),selected:_==q,style:{"--react-paint-editor-button-padding":"16px"},children:C(n,{children:q})},q))})})]}):null};try{qn.displayName="SelectField",qn.__docgenInfo={description:"",displayName:"SelectField",props:{CustomOption:{defaultValue:null,description:"",name:"CustomOption",required:!0,type:{name:"FC<{ children?: ReactNode; }>"}},selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},title:{defaultValue:{value:"Choisissez l'option"},description:"",name:"title",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"(string | number)[]"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const Tm=({children:n})=>C("span",{className:"react-paint-editor-fontfamily-option",style:{"--react-paint-editor-fontfamily-family":n},children:n}),Ma=({selectedSettings:n,setSelectedSettings:a,disabled:i=!1,values:o,defaultValue:c,valueChanged:f})=>o.length?C(qn,{selectedSettings:n,setSelectedSettings:a,CustomOption:Tm,title:"Police",icon:U5,disabled:i,field:"fontFamily",values:o,defaultValue:c,valueChanged:f}):null;try{Ma.displayName="FontFamilyField",Ma.__docgenInfo={description:"",displayName:"FontFamilyField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"string[]"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const Oa=({selectedSettings:n,setSelectedSettings:a,disabled:i=!1,min:o,max:c,step:f,value:d,valueChanged:p})=>o===c?null:C(Tr,{selectedSettings:n,setSelectedSettings:a,icon:ju,title:"Nombre de points",disabled:i,field:"pointsCount",min:o,max:c,step:f,unity:"",value:d,valueChanged:p});try{Oa.displayName="PointsNumberField",Oa.__docgenInfo={description:"",displayName:"PointsNumberField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},min:{defaultValue:null,description:"",name:"min",required:!0,type:{name:"number"}},max:{defaultValue:null,description:"",name:"max",required:!0,type:{name:"number"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const Mu=({children:n})=>fe("span",{className:"react-paint-editor-linetype-option","data-type":n,children:[C("span",{}),C("span",{}),C("span",{}),C("span",{}),C("span",{}),C("span",{}),C("span",{})]}),Wa=({selectedSettings:n,setSelectedSettings:a,disabled:i=!1,values:o,defaultValue:c,valueChanged:f})=>o.length?C(qn,{selectedSettings:n,setSelectedSettings:a,CustomOption:Mu,icon:S5,title:"Type de traits",disabled:i,field:"lineDash",values:o,defaultValue:c,valueChanged:f}):null;try{Mu.displayName="LineTypeOption",Mu.__docgenInfo={description:"",displayName:"LineTypeOption",props:{}}}catch{}try{Wa.displayName="LineTypeField",Wa.__docgenInfo={description:"",displayName:"LineTypeField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"number[]"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const qm=({children:n})=>fe("span",{className:"react-paint-editor-linearrow-option","data-type":n,children:[C("span",{className:"react-paint-editor-linearrow-left"}),C("span",{className:"react-paint-editor-linearrow-right"})]}),Ha=({selectedSettings:n,setSelectedSettings:a,disabled:i=!1,values:o,defaultValue:c,valueChanged:f})=>o.length?C(qn,{selectedSettings:n,setSelectedSettings:a,CustomOption:qm,title:"Flèches",icon:Z5,disabled:i,field:"lineArrow",values:o,defaultValue:c,valueChanged:f}):null;try{Ha.displayName="LineArrowField",Ha.__docgenInfo={description:"",displayName:"LineArrowField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"number[]"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const Kr=({setSelectedSettings:n,disabled:a=!1,field:i,icon:o,values:c,value:f=!1,valueChanged:d})=>{const[p]=I.useState(A.uniqueId("settings_")),_=()=>{n(b=>b===p?void 0:p),d(i,!f)};return c.length!==2?null:C(Ie,{onClick:_,selected:f,disabled:a,icon:o})};try{Kr.displayName="ToggleField",Kr.__docgenInfo={description:"",displayName:"ToggleField",props:{setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"boolean[]"}},value:{defaultValue:{value:"false"},description:"",name:"value",required:!1,type:{name:"boolean"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: boolean) => void"}}}}}catch{}const Rm=40,Cu=({activeTool:n,selectedShape:a,selectedShapeTool:i,disabled:o,selectedSettings:c,setSelectedSettings:f,handleShapeStyleChange:d,handlePolygonLinesCount:p,handleShapeFontFamilyChange:_})=>{var b,w,E,R,N,q,B,k,M,K;return a?C(yt,{children:i&&fe(yt,{children:["strokeColor"in i.settings&&C(Xr,{selectedSettings:c,setSelectedSettings:f,title:"Couleur du trait",mode:"stroke",disabled:o,field:"strokeColor",value:(b=a.style)==null?void 0:b.strokeColor,valueChanged:d,values:i.settings.strokeColor.values}),"fillColor"in i.settings&&C(Xr,{selectedSettings:c,setSelectedSettings:f,title:"Couleur de fond",disabled:o,field:"fillColor",value:(w=a.style)==null?void 0:w.fillColor,valueChanged:d,values:i.settings.fillColor.values}),"lineWidth"in i.settings&&C(Tr,{selectedSettings:c,setSelectedSettings:f,title:"Epaisseur du trait",icon:Ms,disabled:o,field:"lineWidth",value:(E=a.style)==null?void 0:E.lineWidth,valueChanged:d,unity:"px",min:i.settings.lineWidth.min,max:i.settings.lineWidth.max,step:i.settings.lineWidth.step}),"lineDash"in i.settings&&C(Wa,{selectedSettings:c,setSelectedSettings:f,disabled:o,defaultValue:(R=a.style)==null?void 0:R.lineDash,valueChanged:d,values:i.settings.lineDash.values}),"lineArrow"in i.settings&&C(Ha,{selectedSettings:c,setSelectedSettings:f,disabled:o,defaultValue:(N=a.style)==null?void 0:N.lineArrow,valueChanged:d,values:i.settings.lineArrow.values}),"pointsCount"in i.settings&&C(Oa,{selectedSettings:c,setSelectedSettings:f,disabled:o,valueChanged:p,min:i.settings.pointsCount.min,max:i.settings.pointsCount.max,step:i.settings.pointsCount.step,value:(q=a.style)==null?void 0:q.pointsCount}),"fontFamily"in i.settings&&C(Ma,{selectedSettings:c,setSelectedSettings:f,disabled:o,valueChanged:_,values:i.settings.fontFamily.values,defaultValue:(B=a.style)==null?void 0:B.fontFamily}),"fontBold"in i.settings&&C(Kr,{setSelectedSettings:f,disabled:o,field:"fontBold",icon:Ns,valueChanged:_,values:i.settings.fontBold.values,value:(k=a.style)==null?void 0:k.fontBold}),"fontItalic"in i.settings&&C(Kr,{setSelectedSettings:f,disabled:o,field:"fontItalic",icon:Ds,valueChanged:_,values:i.settings.fontItalic.values,value:(M=a.style)==null?void 0:M.fontItalic}),"opacity"in i.settings&&C(Tr,{selectedSettings:c,setSelectedSettings:f,title:"Opacité",icon:Rs,min:i.settings.opacity.min,max:i.settings.opacity.max,step:i.settings.opacity.step,unity:"%",disabled:o,field:"globalAlpha",value:((K=a.style)==null?void 0:K.globalAlpha)??100,valueChanged:d})]})}):"settings"in n?fe(yt,{children:["strokeColor"in n.settings&&C(Xr,{selectedSettings:c,setSelectedSettings:f,title:"Couleur du trait",mode:"stroke",disabled:o,field:"strokeColor",value:n.settings.strokeColor.default,valueChanged:d,values:n.settings.strokeColor.values}),"fillColor"in n.settings&&C(Xr,{selectedSettings:c,setSelectedSettings:f,title:"Couleur de fond",disabled:o,field:"fillColor",value:n.settings.fillColor.default,valueChanged:d,values:n.settings.fillColor.values}),"lineWidth"in n.settings&&C(Tr,{selectedSettings:c,setSelectedSettings:f,title:"Epaisseur du trait",disabled:o,field:"lineWidth",icon:Ms,value:n.settings.lineWidth.default,valueChanged:d,unity:"px",min:n.settings.lineWidth.min,max:n.settings.lineWidth.max,step:n.settings.lineWidth.step}),"lineDash"in n.settings&&C(Wa,{selectedSettings:c,setSelectedSettings:f,disabled:o,defaultValue:n.settings.lineDash.default,valueChanged:d,values:n.settings.lineDash.values}),"lineArrow"in n.settings&&C(Ha,{selectedSettings:c,setSelectedSettings:f,disabled:o,defaultValue:n.settings.lineArrow.default,valueChanged:d,values:n.settings.lineArrow.values}),"pointsCount"in n.settings&&C(Oa,{selectedSettings:c,setSelectedSettings:f,disabled:o,valueChanged:p,min:n.settings.pointsCount.min,max:n.settings.pointsCount.max,step:n.settings.pointsCount.step,value:n.settings.pointsCount.default}),"fontFamily"in n.settings&&C(Ma,{selectedSettings:c,setSelectedSettings:f,disabled:o,valueChanged:_,values:n.settings.fontFamily.values,defaultValue:n.settings.fontFamily.default}),"fontBold"in n.settings&&C(Kr,{setSelectedSettings:f,disabled:o,field:"fontBold",icon:Ns,valueChanged:_,values:n.settings.fontBold.values,value:n.settings.fontBold.default}),"fontItalic"in n.settings&&C(Kr,{setSelectedSettings:f,disabled:o,field:"fontItalic",icon:Ds,valueChanged:_,values:n.settings.fontItalic.values,value:n.settings.fontItalic.default}),"opacity"in n.settings&&C(Tr,{selectedSettings:c,setSelectedSettings:f,title:"Opacité",icon:Rs,min:n.settings.opacity.min,max:n.settings.opacity.max,step:n.settings.opacity.step,unity:"%",disabled:o,field:"opacity",value:n.settings.opacity.default,valueChanged:d})]}):null},Ou=({width:n,disabled:a=!1,availableTools:i,updateToolSettings:o,layersManipulation:c,toggleLayoutPanel:f,activeTool:d,selectedShape:p,canvas:_,currentScale:b,selectionPadding:w,updateShape:E,removeShape:R})=>{const[N,q]=I.useState(void 0),[B,k]=I.useState(!1),M=()=>{k($=>!$)},K=p?A.find({id:p.toolId},i)||A.find({type:p.type},i):void 0,S=(K?A.size(K.settings)+1:"settings"in d?A.size(d.settings):0)+(c?1:0),te=S*Rm,[pe,ve]=I.useState(n<te),we=($,W)=>{p?(E(kn(A.set(["style",$],W,p),b,w),!0),o(p.toolId||d.id,$,W)):o(d.id,$,W)},ge=($,W)=>{var oe,ee,he;if(p){if(p.type!=="text")return;const re=_==null?void 0:_.getContext("2d");if(!re)return;const be=A.set(["style",$],W,p),ye=Zu(re,be.value,be.width,((oe=be.style)==null?void 0:oe.fontBold)??!1,((ee=be.style)==null?void 0:ee.fontItalic)??!1,(he=be.style)==null?void 0:he.fontFamily),De=kn({...be,fontSize:ye,height:ye*be.value.length},b,w);E(De,!0),o(p.toolId||d.id,$,W)}else o(d.id,$,W)},H=($,W)=>{if(p){if(p.type!=="polygon")return;E(S2(p,W,b,w),!0),o(p.toolId||d.id,$,W)}else o(d.id,$,W)};return I.useEffect(()=>{ve(n<te)},[n,te]),fe(yt,{children:[fe("div",{className:"react-paint-editor-settings-bar",children:[pe&&S>2&&C(Ie,{disabled:a,onClick:M,title:"Toggle settings",icon:j5}),p?C(yt,{children:K&&fe(yt,{children:[!pe&&C(Cu,{activeTool:d,selectedShape:p,selectedShapeTool:K,disabled:a,selectedSettings:N,setSelectedSettings:q,handleShapeStyleChange:we,handlePolygonLinesCount:H,handleShapeFontFamilyChange:ge}),C(Nu,{disabled:a,selectedShape:p,removeShape:R})]})}):!pe&&C(Cu,{activeTool:d,selectedShape:p,selectedShapeTool:K,disabled:a,selectedSettings:N,setSelectedSettings:q,handleShapeStyleChange:we,handlePolygonLinesCount:H,handleShapeFontFamilyChange:ge}),C("div",{className:"react-paint-editor-settings-separator"}),c&&C(Du,{disabled:a,toggleLayoutPanel:f})]}),B&&C(Tn,{className:"react-paint-editor-settings-modal",onClose:M,position:"bottom",children:C(Cu,{activeTool:d,selectedShape:p,selectedShapeTool:K,disabled:a,selectedSettings:N,setSelectedSettings:q,handleShapeStyleChange:we,handlePolygonLinesCount:H,handleShapeFontFamilyChange:ge})})]})};try{Ou.displayName="SettingsBar",Ou.__docgenInfo={description:"",displayName:"SettingsBar",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},availableTools:{defaultValue:null,description:"",name:"availableTools",required:!0,type:{name:"CustomTool[]"}},updateToolSettings:{defaultValue:null,description:"",name:"updateToolSettings",required:!0,type:{name:"(toolId: string, field: string, value: string | number | boolean) => void"}},layersManipulation:{defaultValue:null,description:"",name:"layersManipulation",required:!1,type:{name:"boolean"}},activeTool:{defaultValue:null,description:"",name:"activeTool",required:!0,type:{name:"ToolsType"}},selectedShape:{defaultValue:null,description:"",name:"selectedShape",required:!0,type:{name:"ShapeEntity | undefined"}},canvas:{defaultValue:null,description:"",name:"canvas",required:!0,type:{name:"HTMLCanvasElement | null"}},currentScale:{defaultValue:null,description:"",name:"currentScale",required:!0,type:{name:"number"}},selectionPadding:{defaultValue:null,description:"",name:"selectionPadding",required:!0,type:{name:"number"}},updateShape:{defaultValue:null,description:"",name:"updateShape",required:!0,type:{name:"(shape: ShapeEntity, withSave?: boolean | undefined) => void"}},removeShape:{defaultValue:null,description:"",name:"removeShape",required:!0,type:{name:"(shape: ShapeEntity) => void"}},toggleLayoutPanel:{defaultValue:null,description:"",name:"toggleLayoutPanel",required:!0,type:{name:"() => void"}}}}}catch{}const Ye={ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",Delete:"Delete",Backspace:"Backspace",Escape:"Escape",Shift:"Shift",z:"z",Z:"Z",y:"y",Y:"Y"},La={Copy:"copy",Paste:"paste"},Nm=({gridFormat:n,isInsideComponent:a,selectedShape:i,isEditingText:o,currentScale:c,selectionPadding:f,setSelectedShape:d,removeShape:p,pasteShape:_,updateShape:b,backwardShape:w,forwardShape:E,setShiftPressed:R})=>{const[N,q]=I.useState(void 0);return I.useEffect(()=>{const B=S=>{i&&(o||(S.preventDefault(),q({...i})))},k=S=>{N&&(o||(S.preventDefault(),_(mm(N,n,c,f))))},M=S=>{switch(S.key){case Ye.Shift:R(!1);break}},K=S=>{if(S.metaKey||S.ctrlKey){if(S.key===Ye.Z||S.key===Ye.z){S.preventDefault(),S.stopPropagation(),w();return}else if(S.key===Ye.Y||S.key===Ye.y){S.preventDefault(),S.stopPropagation(),E();return}}if(S.key===Ye.Shift){R(!0);return}if(!i)return;if(S.key===Ye.Escape){d(void 0);return}if(o)return;const te={[Ye.ArrowLeft]:[n?-kr[n-1]:-1,0],[Ye.ArrowRight]:[n?kr[n-1]:1,0],[Ye.ArrowDown]:[0,n?kr[n-1]:1],[Ye.ArrowUp]:[0,n?-kr[n-1]:-1]};switch(S.key){case Ye.ArrowLeft:case Ye.ArrowRight:case Ye.ArrowDown:case Ye.ArrowUp:b(Gu(te[S.key],i,[0,0],n,c,f));break;case Ye.Delete:case Ye.Backspace:p(i);break}};return a&&(document.addEventListener("keydown",K),document.addEventListener("keyup",M),document.addEventListener(La.Copy,B),document.addEventListener(La.Paste,k)),()=>{a&&(document.removeEventListener("keydown",K),document.removeEventListener("keyup",M),document.removeEventListener(La.Copy,B),document.removeEventListener(La.Paste,k))}},[a,f,n,N,o,i,c,b,p,d,_,w,E,R]),{}},Dm=({disabled:n,componentRef:a})=>{const[i,o]=I.useState(!1);return I.useEffect(()=>{const c=f=>{o(x1(f,a.current))};return n?o(!1):(document.addEventListener("mousedown",c,{passive:!0}),document.addEventListener("touchstart",c,{passive:!0})),()=>{n||(document.removeEventListener("mousedown",c),document.removeEventListener("touchstart",c))}},[n,a]),{isInsideComponent:i}},Mm=(n=A.noop,a,i)=>{const o=I.useRef([]),c=I.useRef(n);c.current=n;const[f,d]=I.useState(void 0),[p,_]=I.useState({states:[{shapes:[],selectedShape:void 0}],cursor:0}),b=p.cursor>0,w=p.cursor<p.states.length-1,E=o.current.length>0,R=I.useCallback(()=>{_(H=>A.isEqual(H.states[H.cursor].shapes,o.current)?H:{states:[...H.states.slice(0,H.cursor+1),{shapes:o.current,selectedShape:f}],cursor:H.cursor+1})},[f]),N=I.useCallback(H=>{o.current=[H,...o.current]},[]),q=I.useCallback(async(H,$=mr,W=mr)=>{const oe=await im(H,$,W,i.scaleRatio,a);return N(oe),R(),oe},[N,R,i,a]),B=I.useCallback((H,$=!1)=>{o.current=o.current.map(W=>W.id===(f==null?void 0:f.id)?H:W),d(W=>(W==null?void 0:W.id)===H.id?H:W),$&&R()},[f,R]),k=I.useCallback(H=>{const $=H.map(W=>A.omit(["chosen"],W));o.current=$,R()},[R]),M=I.useCallback(H=>{d($=>($==null?void 0:$.id)===H.id?void 0:$),o.current=A.remove({id:H.id},o.current),R()},[R]),K=I.useCallback(H=>{_($=>{const W=H($);return o.current=$.states[W].shapes,d($.states[W].selectedShape),A.set("cursor",W,$)})},[]),S=I.useCallback(()=>{K(H=>Math.max(0,H.cursor-1))},[K]),te=I.useCallback(()=>{K(H=>Math.min(H.states.length-1,H.cursor+1))},[K]),pe=I.useCallback((H=[],$=!1)=>{d(void 0),o.current=H,_(W=>$?{states:[{shapes:H,selectedShape:void 0}],cursor:0}:{states:[...W.states.slice(0,W.cursor+1),{shapes:H,selectedShape:void 0}],cursor:W.cursor+1})},[]),ve=I.useCallback((H,$)=>{const W=o.current,oe=A.findIndex({id:H},W),ee=A.findIndex({id:$},W);oe<ee?k([...A.slice(0,oe,W),...A.slice(oe+1,ee+1,W),W[oe],...A.slice(ee+1,W.length,W)]):k([...A.slice(0,ee,W),W[oe],...A.slice(ee,oe,W),...A.slice(oe+1,W.length,W)])},[k]),we=I.useCallback(H=>{const $=o.current,W=A.findIndex({id:H.id},$);if(W<0)return;const oe=A.set("visible",H.visible===!1,H);d(ee=>(ee==null?void 0:ee.id)===oe.id?oe:ee),k(A.set(W,oe,$))},[k]),ge=I.useCallback(H=>{const $=o.current,W=A.findIndex({id:H.id},$);if(W<0)return;const oe=A.set("locked",!H.locked,H);d(ee=>(ee==null?void 0:ee.id)===oe.id?oe:ee),k(A.set(W,oe,$))},[k]);return I.useEffect(()=>{c.current()},[p]),I.useEffect(()=>{o.current=o.current.map(H=>kn(H,i.scaleRatio,a)),d(H=>H===void 0?void 0:o.current.find($=>$.id===H.id))},[i,a]),{shapesRef:o,selectedShape:f,addShape:N,addPictureShape:q,moveShapes:ve,saveShapes:R,setSelectedShape:d,toggleShapeVisibility:we,toggleShapeLock:ge,removeShape:M,updateShape:B,backwardShape:S,forwardShape:te,clearShapes:pe,canGoBackward:b,canGoForward:w,canClear:E}},js={type:"infos",duration:4e3},Fs=500,zs=100,Wu=({type:n,text:a,duration:i})=>{const[o,c]=I.useState(!1);return I.useEffect(()=>{const f=setTimeout(()=>{c(!0)},zs),d=setTimeout(()=>{c(!1)},i-Fs-zs);return()=>{clearTimeout(f),clearTimeout(d)}},[i]),C("div",{className:"react-paint-editor-snackbar","data-is-shown":+o,"data-type":n,style:{"--react-paint-editor-panel-transition-duration":`${Fs}ms`},children:a})},Om=({snackbarList:n})=>C("div",{className:"react-paint-editor-snackbar-container",style:{"--react-paint-editor-snackbar-zindex":Nn.PANEL},children:n.map(a=>C(Wu,{...a},a.id))});try{Wu.displayName="Snackbar",Wu.__docgenInfo={description:"",displayName:"Snackbar",props:{snackbarList:{defaultValue:null,description:"",name:"snackbarList",required:!0,type:{name:"SnackBarType[]"}}}}}catch{}const Wm=()=>{const n=I.useRef([]),[a,i]=I.useState([]),o=f=>{i(d=>d.filter(p=>p.id!==f))},c=({type:f=js.type,duration:d=js.duration,text:p})=>{const _={id:A.uniqueId("snackbar_"),duration:d,type:f,text:p};i(b=>[...b,_]),n.current=[...n.current,setTimeout(()=>o(_.id),d)]};return I.useEffect(()=>()=>{for(const f of n.current)clearTimeout(f)},[]),{snackbarList:a,addSnackbar:c}},$s=300,Hu=({isLoading:n=!1})=>{const[a,i]=I.useState("hidden");return I.useEffect(()=>{if(n)i("visible");else{i("fadeOut");const o=setTimeout(()=>i("hidden"),$s);return()=>{clearTimeout(o)}}},[n]),a==="hidden"?null:C("div",{className:"react-paint-editor-loading","data-loading":a,style:{"--react-paint-editor-loading-zindex":Nn.LOADING,"--react-paint-editor-loading-transition-duration":`${$s}ms`},children:fe("div",{className:"react-paint-editor-loader",children:[C("div",{}),C("div",{}),C("div",{}),C("div",{})]})})};try{Hu.displayName="Loading",Hu.__docgenInfo={description:"",displayName:"Loading",props:{isLoading:{defaultValue:{value:"false"},description:"",name:"isLoading",required:!1,type:{name:"boolean"}}}}}catch{}const Hm=({onResized:n,element:a})=>{I.useEffect(()=>{const i=a.current;if(!i)return;const o=new ResizeObserver(c=>{var _,b;const f=(b=(_=c==null?void 0:c[0])==null?void 0:_.borderBoxSize)==null?void 0:b[0],{width:d,height:p}=f?{width:f.inlineSize,height:f.blockSize}:c==null?void 0:c[0].contentRect;n(d,p)});return o.observe(i),()=>{o.unobserve(i)}},[a,n])},Bm=0,Au={layersManipulation:!0,grid:Bm,canGrow:!1,canShrink:!0,withExport:!0,withLoadAndSave:!0,withUploadPicture:!0,withUrlPicture:!1,availableTools:tm,clearCallback:"empty",uiStyle:{toolbarBackgroundColor:"white",dividerColor:"#36418129",fontRadius:8,fontDisabledColor:"#3641812b",fontDisabledBackgroundColor:"transparent",fontColor:"#364181",fontBackgroundColor:"transparent",fontSelectedColor:"white",fontSelectedBackgroundColor:"#364181",fontHoverColor:"#364181",fontHoverBackgroundColor:"#afd8d8",canvasBackgroundColor:"white",canvasSelectionColor:Xs,canvasSelectionWidth:Ys,canvasSelectionPadding:zh}},Gs=({width:n=1e3,height:a=600,shapes:i,className:o="",mode:c="editor",disabled:f=!1,onDataChanged:d,apiRef:p,options:_=Au})=>{const{layersManipulation:b,grid:w,canGrow:E,canShrink:R,withExport:N,withLoadAndSave:q,withUploadPicture:B,withUrlPicture:k,clearCallback:M,availableTools:K}={...Au,..._},{toolbarBackgroundColor:S,dividerColor:te,fontRadius:pe,fontDisabledColor:ve,fontDisabledBackgroundColor:we,fontColor:ge,fontBackgroundColor:H,fontSelectedColor:$,fontSelectedBackgroundColor:W,fontHoverColor:oe,fontHoverBackgroundColor:ee,canvasBackgroundColor:he,canvasSelectionColor:re,canvasSelectionWidth:be,canvasSelectionPadding:ye}={...Au.uiStyle,...(_==null?void 0:_.uiStyle)??{}},De=c!=="viewer",Ve=f||!De,Ee=I.useRef(null),nt=I.useRef(null),[Ke,Te]=I.useState({width:n,height:a,scaleRatio:1}),[Dt,G]=I.useState(Us(K,B||k));I.useEffect(()=>{G(Us(K,B||k))},[K,B,k]);const{isInsideComponent:D}=Dm({disabled:Ve,componentRef:Ee}),[Z,F]=I.useState(!1),[ae,We]=I.useState(!1),[Ze,ze]=I.useState([0,0]),[He,Je]=I.useState(void 0),[ar,qr]=I.useState(rr),[Dn,$a]=I.useState({mode:"default"}),[m,Ga]=I.useState(w),[on,Pa]=I.useState(!1),{shapesRef:qe,selectedShape:Rr,addShape:gr,addPictureShape:Mn,moveShapes:Nr,setSelectedShape:$e,removeShape:Dr,updateShape:Mt,backwardShape:Ot,forwardShape:ir,clearShapes:at,saveShapes:Zt,toggleShapeVisibility:On,toggleShapeLock:_t,canGoBackward:ur,canGoForward:bt,canClear:or}=Mm(d,ye,Ke),{snackbarList:Et,addSnackbar:it}=Wm(),kt=I.useCallback(de=>{$e(void 0),qr(de)},[$e]),Ya=I.useCallback((de,Ce,Ft)=>{G(br=>br.map(zt=>zt.id===de?A.set(["settings",Ce,"default"],Ft,zt):zt)),qr(br=>br.id===de?A.set(["settings",Ce,"default"],Ft,br):br)},[]),Xa=I.useCallback(()=>{kt(rr),Ot()},[kt,Ot]),Ka=I.useCallback(()=>{kt(rr),ir()},[kt,ir]),Mr=I.useCallback((de=[],Ce=!1)=>{at(de,Ce),kt(rr),ze([0,0])},[kt,at]),Wt=I.useCallback(async(de,Ce=!0)=>{const Ft=await C5(de,Ke.scaleRatio,ye);Mr(Ft,Ce)},[Mr,Ke,ye]),Ja=I.useCallback(()=>{typeof M!="string"?Wt({shapes:M()},!1):M==="defaultShapes"&&i!==void 0?Wt({shapes:i},!1):Mr()},[Mr,Wt,i,M]),_r=I.useCallback(de=>{qr(rr),$e(de)},[$e]),jt=I.useCallback(de=>{gr(de),_r(de)},[gr,_r]),Ht=I.useCallback(()=>{F(!0);try{const de=nt.current&&qs(qe.current,Ze,n,a,ye);if(!de)throw new Error;Ts(de,"drawing.png"),F(!1)}catch(de){de instanceof Error&&it({type:"error",text:"L'export a échoué"}),console.warn(de)}finally{F(!1)}},[it,qe,Ze,n,a,ye]),ei=I.useCallback(()=>{F(!0);try{const de=Q5(qe.current,n,a);if(!de)throw new Error("L'encodage a échoué");Ts(de,"drawing.json"),F(!1)}catch(de){de instanceof Error&&it({type:"error",text:"L'enregistrement a échoué"}),console.warn(de)}finally{F(!1)}},[qe,it,n,a]),Or=I.useCallback(async de=>{F(!0);try{const Ce=await w5(de);await Wt(Ce),it({type:"success",text:"Fichier chargé !"})}catch(Ce){Ce instanceof Error&&it({type:"error",text:"Le chargement a échoué"}),console.warn(Ce)}finally{F(!1)}},[Wt,it]),Qt=I.useCallback(async de=>{F(!0);try{const Ce=await Mn(de,n,a);_r(Ce)}catch(Ce){Ce instanceof Error&&it({type:"error",text:"Le chargement a échoué"}),console.warn(Ce)}finally{F(!1)}},[Mn,_r,it,n,a]),ti=I.useCallback(de=>{const Ce=de/n;Te({width:de,height:a*Ce,scaleRatio:Ce})},[n,a]);Nm({isInsideComponent:D,selectionPadding:ye,gridFormat:m,isEditingText:Dn.mode==="textedition",selectedShape:Rr,currentScale:Ke.scaleRatio,setSelectedShape:$e,removeShape:Dr,pasteShape:jt,updateShape:Mt,backwardShape:Ot,forwardShape:ir,setShiftPressed:Pa}),Hm({element:Ee,onResized:ti}),I.useEffect(()=>{D||$e(void 0)},[D,$e]),I.useEffect(()=>{i!==void 0&&Wt({shapes:i})},[Wt,i]),I.useEffect(()=>{p&&(p.current={getCurrentImage:()=>nt.current?qs(qe.current,Ze,n,a,ye):void 0,getCurrentData:()=>u1(qe.current,n,a)})},[p,qe,Ze,n,a,ye]);const ri=`${o}${ae?" react-paint-editor-layout-opened":""} react-paint-editor-app`;return fe("div",{ref:Ee,className:ri,"data-grow":E,"data-shrink":R,style:{"--react-paint-editor-app-canvaswidth":`${n}px`,"--react-paint-editor-app-toolbar-bg":S,"--react-paint-editor-app-divider-color":te,"--react-paint-editor-app-font-radius":pe,"--react-paint-editor-app-font-disabled-color":ve,"--react-paint-editor-app-font-disabled-bg":we,"--react-paint-editor-app-font-color":ge,"--react-paint-editor-app-font-bg":H,"--react-paint-editor-app-font-selected-color":$,"--react-paint-editor-app-font-selected-bg":W,"--react-paint-editor-app-font-hover-color":oe,"--react-paint-editor-app-font-hover-bg":ee,"--react-paint-editor-app-canvas-bg":he},children:[De&&C(Ru,{width:Ke.width,disabled:Ve,activeTool:ar,clearCanvas:Ja,setActiveTool:kt,exportCanvasInFile:Ht,saveFile:ei,loadFile:Or,addPicture:Qt,hasActionToUndo:ur,hasActionToRedo:bt,hasActionToClear:or,undoAction:Xa,redoAction:Ka,availableTools:Dt,withExport:N,withLoadAndSave:q,withUploadPicture:B,withUrlPicture:k}),fe("div",{className:"react-paint-editor-app-row","data-grow":E,style:{"--react-paint-editor-app-row-zindex":Nn.APP,"--react-paint-editor-app-row-width":Ke.width,"--react-paint-editor-app-row-aspectratio":`calc(${Ke.width} / ${Ke.height})`},children:[C(Eu,{canGrow:E,gridFormat:m,disabled:Ve,isInsideComponent:D,activeTool:ar,setActiveTool:qr,canvasOffsetStartPosition:He,setCanvasOffsetStartPosition:Je,shapes:qe.current,addShape:gr,updateSingleShape:Mt,selectedShape:Rr,setSelectedShape:$e,canvasOffset:Ze,setCanvasOffset:ze,saveShapes:Zt,ref:nt,canvasSize:Ke,selectionMode:Dn,setSelectionMode:$a,selectionColor:re,selectionWidth:be,selectionPadding:ye,isEditMode:De,isShiftPressed:on}),De&&b&&C(ku,{gridFormat:m,setGridFormat:Ga,disabled:Ve,shapes:qe.current,moveShapes:Nr,selectedShape:Rr,removeShape:Dr,selectShape:_r,toggleShapeVisibility:On,toggleShapeLock:_t,isLayoutPanelShown:ae})]}),De&&fe(yt,{children:[C(Ou,{width:Ke.width,disabled:Ve,activeTool:ar,availableTools:Dt,selectedShape:Rr,selectionPadding:ye,removeShape:Dr,updateShape:Mt,canvas:nt.current,currentScale:Ke.scaleRatio,layersManipulation:b,toggleLayoutPanel:()=>{We(de=>!de)},updateToolSettings:Ya}),C(Hu,{isLoading:Z}),C(Om,{snackbarList:Et})]})]})};try{Gs.displayName="App",Gs.__docgenInfo={description:"",displayName:"App",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},width:{defaultValue:{value:"1000"},description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"600"},description:"",name:"height",required:!1,type:{name:"number"}},shapes:{defaultValue:null,description:"",name:"shapes",required:!1,type:{name:"DrawableShapeJson[]"}},onDataChanged:{defaultValue:null,description:"",name:"onDataChanged",required:!1,type:{name:"(() => void)"}},mode:{defaultValue:{value:"editor"},description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"editor"'},{value:'"viewer"'}]}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},apiRef:{defaultValue:null,description:"",name:"apiRef",required:!1,type:{name:"MutableRefObject<{ getCurrentImage: () => string; getCurrentData: () => ExportDataType; }> | undefined"}},options:{defaultValue:{value:`{\r
  layersManipulation: true,\r
  grid: GRID_NONE,\r
  canGrow: false,\r
  canShrink: true,\r
  withExport: true,\r
  withLoadAndSave: true,\r
  withUploadPicture: true,\r
  withUrlPicture: false,\r
  availableTools: DEFAULT_SHAPE_TOOLS,\r
  clearCallback: 'empty',\r
  uiStyle: {\r
    toolbarBackgroundColor: 'white',\r
    dividerColor: '#36418129',\r
    fontRadius: 8,\r
    fontDisabledColor: '#3641812b',\r
    fontDisabledBackgroundColor: 'transparent',\r
    fontColor: '#364181',\r
    fontBackgroundColor: 'transparent',\r
    fontSelectedColor: 'white',\r
    fontSelectedBackgroundColor: '#364181',\r
    fontHoverColor: '#364181',\r
    fontHoverBackgroundColor: '#afd8d8',\r
    canvasBackgroundColor: 'white',\r
    canvasSelectionColor: SELECTION_DEFAULT_COLOR,\r
    canvasSelectionWidth: SELECTION_DEFAULT_WIDTH,\r
    canvasSelectionPadding: SELECTION_DEFAULT_PADDING\r
  }\r
}`},description:"",name:"options",required:!1,type:{name:"RecursivePartial<AppOptionsType>"}}}}}catch{}export{Gs as A};
