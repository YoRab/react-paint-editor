import{j as v}from"./jsx-runtime-ffb262ed.js";import{r as E,R as Nl}from"./index-76fb7be0.js";import{c as Vn,g as q2}from"./_commonjsHelpers-de833af9.js";const R2=0,Ol=2,Ml="blue",Te=14,mo=16,Wl=[[0,0],[.5,0],[1,0],[1,.5],[1,1],[.5,1],[0,1],[0,.5]],Sl=["brush","rect","square","line","polygon","circle","curve","ellipse","picture","text"],ot=["transparent","black","white","red","green","blue","yellow"],hr=[0,1,2],D2=[0,1,2,3],ol=[[1,0],[1,2],[4,6]],N2=["arial","serif","monospace"],En="serif",O2=36,kn={APP:1,LOADING:2,PANEL:3,SNACKBAR:4},Lr=[10,20,40],uo=18,Hl=n=>{n.lineCap="round",n.lineJoin="round"},St=(n,i={})=>{const{fillColor:o="transparent",globalAlpha:s=100,strokeColor:c=Ml,lineWidth:d=Ol,lineDash:p=0}=i;s!==void 0&&(n.globalAlpha=s/100),o&&(n.fillStyle=o),c&&(n.strokeStyle=c),d&&(n.lineWidth=d),p!==void 0&&d&&n.setLineDash([ol[p][0]*d,ol[p][1]*d])},Fl=(n,i,o,s,c)=>{n.save(),n.scale(i,i),n.translate(o[0],o[1]),s!==0&&(n.translate(c[0],c[1]),n.rotate(s),n.translate(-c[0],-c[1]))};var Ai={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ai.exports;(function(n,i){(function(){function o(_,A,u){switch(u.length){case 0:return _.call(A);case 1:return _.call(A,u[0]);case 2:return _.call(A,u[0],u[1]);case 3:return _.call(A,u[0],u[1],u[2])}return _.apply(A,u)}function s(_,A,u,S){for(var Y=-1,F=_==null?0:_.length;++Y<F;){var ut=_[Y];A(S,ut,u(ut),_)}return S}function c(_,A){for(var u=-1,S=_==null?0:_.length;++u<S&&A(_[u],u,_)!==!1;);return _}function d(_,A){for(var u=_==null?0:_.length;u--&&A(_[u],u,_)!==!1;);return _}function p(_,A){for(var u=-1,S=_==null?0:_.length;++u<S;)if(!A(_[u],u,_))return!1;return!0}function h(_,A){for(var u=-1,S=_==null?0:_.length,Y=0,F=[];++u<S;){var ut=_[u];A(ut,u,_)&&(F[Y++]=ut)}return F}function w(_,A){return!!(_!=null&&_.length)&&X(_,A,0)>-1}function C(_,A,u){for(var S=-1,Y=_==null?0:_.length;++S<Y;)if(u(A,_[S]))return!0;return!1}function x(_,A){for(var u=-1,S=_==null?0:_.length,Y=Array(S);++u<S;)Y[u]=A(_[u],u,_);return Y}function L(_,A){for(var u=-1,S=A.length,Y=_.length;++u<S;)_[Y+u]=A[u];return _}function R(_,A,u,S){var Y=-1,F=_==null?0:_.length;for(S&&F&&(u=_[++Y]);++Y<F;)u=A(u,_[Y],Y,_);return u}function D(_,A,u,S){var Y=_==null?0:_.length;for(S&&Y&&(u=_[--Y]);Y--;)u=A(u,_[Y],Y,_);return u}function T(_,A){for(var u=-1,S=_==null?0:_.length;++u<S;)if(A(_[u],u,_))return!0;return!1}function B(_){return _.split("")}function k(_){return _.match(D1)||[]}function q(_,A,u){var S;return u(_,function(Y,F,ut){if(A(Y,F,ut))return S=F,!1}),S}function ee(_,A,u,S){for(var Y=_.length,F=u+(S?1:-1);S?F--:++F<Y;)if(A(_[F],F,_))return F;return-1}function X(_,A,u){return A===A?Fe(_,A,u):ee(_,pe,u)}function ae(_,A,u,S){for(var Y=u-1,F=_.length;++Y<F;)if(S(_[Y],A))return Y;return-1}function pe(_){return _!==_}function N(_,A){var u=_==null?0:_.length;return u?Le(_,A)/u:Dr}function P(_){return function(A){return A==null?m:A[_]}}function W(_){return function(A){return _==null?m:_[A]}}function J(_,A,u,S,Y){return Y(_,function(F,ut,fa){u=S?(S=!1,F):A(u,F,ut,fa)}),u}function fe(_,A){var u=_.length;for(_.sort(A);u--;)_[u]=_[u].value;return _}function Le(_,A){for(var u,S=-1,Y=_.length;++S<Y;){var F=A(_[S]);F!==m&&(u=u===m?F:u+F)}return u}function De(_,A){for(var u=-1,S=Array(_);++u<_;)S[u]=A(u);return S}function ue(_,A){return x(A,function(u){return[u,_[u]]})}function te(_){return _&&_.slice(0,tr(_)+1).replace(na,"")}function he(_){return function(A){return _(A)}}function Ce(_,A){return x(A,function(u){return _[u]})}function qe(_,A){return _.has(A)}function Ne(_,A){for(var u=-1,S=_.length;++u<S&&X(A,_[u],0)>-1;);return u}function xe(_,A){for(var u=_.length;u--&&X(A,_[u],0)>-1;);return u}function Ae(_,A){for(var u=_.length,S=0;u--;)_[u]===A&&++S;return S}function Ze(_){return"\\"+vc[_]}function Er(_,A){return _==null?m:_[A]}function ye(_){return fc.test(_)}function Tt(_){return dc.test(_)}function z(_){for(var A,u=[];!(A=_.next()).done;)u.push(A.value);return u}function O(_){var A=-1,u=Array(_.size);return _.forEach(function(S,Y){u[++A]=[Y,S]}),u}function H(_,A){return function(u){return _(A(u))}}function U(_,A){for(var u=-1,S=_.length,Y=0,F=[];++u<S;){var ut=_[u];ut!==A&&ut!==Tr||(_[u]=Tr,F[Y++]=u)}return F}function ne(_){var A=-1,u=Array(_.size);return _.forEach(function(S){u[++A]=S}),u}function Oe(_){var A=-1,u=Array(_.size);return _.forEach(function(S){u[++A]=[S,S]}),u}function Fe(_,A,u){for(var S=u-1,Y=_.length;++S<Y;)if(_[S]===A)return S;return-1}function ze(_,A,u){for(var S=u+1;S--;)if(_[S]===A)return S;return S}function Me(_){return ye(_)?kr(_):wc(_)}function Xe(_){return ye(_)?jn(_):B(_)}function tr(_){for(var A=_.length;A--&&j1.test(_.charAt(A)););return A}function kr(_){for(var A=sa.lastIndex=0;sa.test(_);)++A;return A}function jn(_){return _.match(sa)||[]}function Oi(_){return _.match(cc)||[]}var m,Mi="4.17.21",nn=200,Wi="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",Ie="Expected a function",jr="Invalid `variable` option passed into `_.template`",mr="__lodash_hash_undefined__",Tn=500,Tr="__lodash_placeholder__",Pe=1,qr=2,qt=4,Rt=1,rr=2,tt=1,Ht=2,qn=4,gt=8,nr=16,yt=32,ir=64,Vt=128,rt=256,Lt=512,Si=30,Hi="...",Fi=800,Rr=16,Dt=1,Bi=2,gr=3,Ft=1/0,Nt=9007199254740991,Ui=17976931348623157e292,Dr=NaN,vt=4294967295,Zi=vt-1,zi=vt>>>1,de=[["ary",Vt],["bind",tt],["bindKey",Ht],["curry",gt],["curryRight",nr],["flip",Lt],["partial",yt],["partialRight",ir],["rearg",rt]],ve="[object Arguments]",Bt="[object Array]",yr="[object AsyncFunction]",Ut="[object Boolean]",an="[object Date]",m1="[object DOMException]",Rn="[object Error]",Dn="[object Function]",Mo="[object GeneratorFunction]",It="[object Map]",on="[object Number]",g1="[object Null]",Zt="[object Object]",Wo="[object Promise]",y1="[object Proxy]",un="[object RegExp]",Et="[object Set]",sn="[object String]",Nn="[object Symbol]",v1="[object Undefined]",ln="[object WeakMap]",_1="[object WeakSet]",cn="[object ArrayBuffer]",Nr="[object DataView]",Pi="[object Float32Array]",$i="[object Float64Array]",Gi="[object Int8Array]",Yi="[object Int16Array]",Xi="[object Int32Array]",Ki="[object Uint8Array]",Ji="[object Uint8ClampedArray]",ea="[object Uint16Array]",ta="[object Uint32Array]",b1=/\b__p \+= '';/g,Q1=/\b(__p \+=) '' \+/g,w1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,So=/&(?:amp|lt|gt|quot|#39);/g,Ho=/[&<>"']/g,x1=RegExp(So.source),C1=RegExp(Ho.source),A1=/<%-([\s\S]+?)%>/g,V1=/<%([\s\S]+?)%>/g,Fo=/<%=([\s\S]+?)%>/g,L1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,I1=/^\w*$/,E1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ra=/[\\^$.*+?()[\]{}|]/g,k1=RegExp(ra.source),na=/^\s+/,j1=/\s/,T1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,q1=/\{\n\/\* \[wrapped with (.+)\] \*/,R1=/,? & /,D1=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,N1=/[()=,{}\[\]\/\s]/,O1=/\\(\\)?/g,M1=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bo=/\w*$/,W1=/^[-+]0x[0-9a-f]+$/i,S1=/^0b[01]+$/i,H1=/^\[object .+?Constructor\]$/,F1=/^0o[0-7]+$/i,B1=/^(?:0|[1-9]\d*)$/,U1=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,On=/($^)/,Z1=/['\n\r\u2028\u2029\\]/g,Mn="\\ud800-\\udfff",z1="\\u0300-\\u036f",P1="\\ufe20-\\ufe2f",$1="\\u20d0-\\u20ff",Uo=z1+P1+$1,Zo="\\u2700-\\u27bf",zo="a-z\\xdf-\\xf6\\xf8-\\xff",G1="\\xac\\xb1\\xd7\\xf7",Y1="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",X1="\\u2000-\\u206f",K1=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Po="A-Z\\xc0-\\xd6\\xd8-\\xde",$o="\\ufe0e\\ufe0f",Go=G1+Y1+X1+K1,ia="['’]",J1="["+Mn+"]",Yo="["+Go+"]",Wn="["+Uo+"]",Xo="\\d+",ec="["+Zo+"]",Ko="["+zo+"]",Jo="[^"+Mn+Go+Xo+Zo+zo+Po+"]",aa="\\ud83c[\\udffb-\\udfff]",tc="(?:"+Wn+"|"+aa+")",eu="[^"+Mn+"]",oa="(?:\\ud83c[\\udde6-\\uddff]){2}",ua="[\\ud800-\\udbff][\\udc00-\\udfff]",Or="["+Po+"]",tu="\\u200d",ru="(?:"+Ko+"|"+Jo+")",rc="(?:"+Or+"|"+Jo+")",nu="(?:"+ia+"(?:d|ll|m|re|s|t|ve))?",iu="(?:"+ia+"(?:D|LL|M|RE|S|T|VE))?",au=tc+"?",ou="["+$o+"]?",nc="(?:"+tu+"(?:"+[eu,oa,ua].join("|")+")"+ou+au+")*",ic="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ac="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",uu=ou+au+nc,oc="(?:"+[ec,oa,ua].join("|")+")"+uu,uc="(?:"+[eu+Wn+"?",Wn,oa,ua,J1].join("|")+")",sc=RegExp(ia,"g"),lc=RegExp(Wn,"g"),sa=RegExp(aa+"(?="+aa+")|"+uc+uu,"g"),cc=RegExp([Or+"?"+Ko+"+"+nu+"(?="+[Yo,Or,"$"].join("|")+")",rc+"+"+iu+"(?="+[Yo,Or+ru,"$"].join("|")+")",Or+"?"+ru+"+"+nu,Or+"+"+iu,ac,ic,Xo,oc].join("|"),"g"),fc=RegExp("["+tu+Mn+Uo+$o+"]"),dc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],hc=-1,be={};be[Pi]=be[$i]=be[Gi]=be[Yi]=be[Xi]=be[Ki]=be[Ji]=be[ea]=be[ta]=!0,be[ve]=be[Bt]=be[cn]=be[Ut]=be[Nr]=be[an]=be[Rn]=be[Dn]=be[It]=be[on]=be[Zt]=be[un]=be[Et]=be[sn]=be[ln]=!1;var _e={};_e[ve]=_e[Bt]=_e[cn]=_e[Nr]=_e[Ut]=_e[an]=_e[Pi]=_e[$i]=_e[Gi]=_e[Yi]=_e[Xi]=_e[It]=_e[on]=_e[Zt]=_e[un]=_e[Et]=_e[sn]=_e[Nn]=_e[Ki]=_e[Ji]=_e[ea]=_e[ta]=!0,_e[Rn]=_e[Dn]=_e[ln]=!1;var mc={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},gc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},vc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_c=parseFloat,bc=parseInt,su=typeof Vn=="object"&&Vn&&Vn.Object===Object&&Vn,Qc=typeof self=="object"&&self&&self.Object===Object&&self,$e=su||Qc||Function("return this")(),la=i&&!i.nodeType&&i,vr=la&&!0&&n&&!n.nodeType&&n,lu=vr&&vr.exports===la,ca=lu&&su.process,_t=function(){try{var _=vr&&vr.require&&vr.require("util").types;return _||ca&&ca.binding&&ca.binding("util")}catch{}}(),cu=_t&&_t.isArrayBuffer,fu=_t&&_t.isDate,du=_t&&_t.isMap,pu=_t&&_t.isRegExp,hu=_t&&_t.isSet,mu=_t&&_t.isTypedArray,wc=P("length"),xc=W(mc),Cc=W(gc),Ac=W(yc),Vc=function _(A){function u(e){if(Ee(e)&&!re(e)&&!(e instanceof F)){if(e instanceof Y)return e;if(ge.call(e,"__wrapped__"))return ls(e)}return new Y(e)}function S(){}function Y(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=m}function F(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=vt,this.__views__=[]}function ut(){var e=new F(this.__wrapped__);return e.__actions__=st(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=st(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=st(this.__views__),e}function fa(){if(this.__filtered__){var e=new F(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Lc(){var e=this.__wrapped__.value(),t=this.__dir__,r=re(e),a=t<0,l=r?e.length:0,f=Of(0,l,this.__views__),g=f.start,y=f.end,b=y-g,I=a?y:g-1,V=this.__iteratees__,j=V.length,M=0,Z=Ke(b,this.__takeCount__);if(!r||!a&&l==b&&Z==b)return Nu(e,this.__actions__);var $=[];e:for(;b--&&M<Z;){I+=t;for(var ie=-1,G=e[I];++ie<j;){var le=V[ie],ce=le.iteratee,et=le.type,dt=ce(G);if(et==Bi)G=dt;else if(!dt){if(et==Dt)continue e;break e}}$[M++]=G}return $}function _r(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function Ic(){this.__data__=wn?wn(null):{},this.size=0}function Ec(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function kc(e){var t=this.__data__;if(wn){var r=t[e];return r===mr?m:r}return ge.call(t,e)?t[e]:m}function jc(e){var t=this.__data__;return wn?t[e]!==m:ge.call(t,e)}function Tc(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=wn&&t===m?mr:t,this}function zt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function qc(){this.__data__=[],this.size=0}function Rc(e){var t=this.__data__,r=Sn(t,e);return!(r<0)&&(r==t.length-1?t.pop():hi.call(t,r,1),--this.size,!0)}function Dc(e){var t=this.__data__,r=Sn(t,e);return r<0?m:t[r][1]}function Nc(e){return Sn(this.__data__,e)>-1}function Oc(e,t){var r=this.__data__,a=Sn(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}function Pt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function Mc(){this.size=0,this.__data__={hash:new _r,map:new(bn||zt),string:new _r}}function Wc(e){var t=Kn(this,e).delete(e);return this.size-=t?1:0,t}function Sc(e){return Kn(this,e).get(e)}function Hc(e){return Kn(this,e).has(e)}function Fc(e,t){var r=Kn(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}function br(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Pt;++t<r;)this.add(e[t])}function Bc(e){return this.__data__.set(e,mr),this}function Uc(e){return this.__data__.has(e)}function kt(e){this.size=(this.__data__=new zt(e)).size}function Zc(){this.__data__=new zt,this.size=0}function zc(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Pc(e){return this.__data__.get(e)}function $c(e){return this.__data__.has(e)}function Gc(e,t){var r=this.__data__;if(r instanceof zt){var a=r.__data__;if(!bn||a.length<nn-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new Pt(a)}return r.set(e,t),this.size=r.size,this}function gu(e,t){var r=re(e),a=!r&&Vr(e),l=!r&&!a&&cr(e),f=!r&&!a&&!l&&$r(e),g=r||a||l||f,y=g?De(e.length,z0):[],b=y.length;for(var I in e)!t&&!ge.call(e,I)||g&&(I=="length"||l&&(I=="offset"||I=="parent")||f&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||Xt(I,b))||y.push(I);return y}function yu(e){var t=e.length;return t?e[Qa(0,t-1)]:m}function Yc(e,t){return Jn(st(e),Qr(t,0,e.length))}function Xc(e){return Jn(st(e))}function da(e,t,r){(r===m||jt(e[t],r))&&(r!==m||t in e)||$t(e,t,r)}function fn(e,t,r){var a=e[t];ge.call(e,t)&&jt(a,r)&&(r!==m||t in e)||$t(e,t,r)}function Sn(e,t){for(var r=e.length;r--;)if(jt(e[r][0],t))return r;return-1}function Kc(e,t,r,a){return lr(e,function(l,f,g){t(a,l,r(l),g)}),a}function vu(e,t){return e&&Mt(t,Be(t),e)}function Jc(e,t){return e&&Mt(t,ct(t),e)}function $t(e,t,r){t=="__proto__"&&mi?mi(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function pa(e,t){for(var r=-1,a=t.length,l=We(a),f=e==null;++r<a;)l[r]=f?m:Sa(e,t[r]);return l}function Qr(e,t,r){return e===e&&(r!==m&&(e=e<=r?e:r),t!==m&&(e=e>=t?e:t)),e}function bt(e,t,r,a,l,f){var g,y=t&Pe,b=t&qr,I=t&qt;if(r&&(g=l?r(e,a,l,f):r(e)),g!==m)return g;if(!Ve(e))return e;var V=re(e);if(V){if(g=Wf(e),!y)return st(e,g)}else{var j=Je(e),M=j==Dn||j==Mo;if(cr(e))return Mu(e,y);if(j==Zt||j==ve||M&&!l){if(g=b||M?{}:rs(e),!y)return b?Ef(e,Jc(g,e)):If(e,vu(g,e))}else{if(!_e[j])return l?e:{};g=Sf(e,j,y)}}f||(f=new kt);var Z=f.get(e);if(Z)return Z;f.set(e,g),Js(e)?e.forEach(function(G){g.add(bt(G,t,r,G,e,f))}):Ks(e)&&e.forEach(function(G,le){g.set(le,bt(G,t,r,le,e,f))});var $=I?b?Ta:ja:b?ct:Be,ie=V?m:$(e);return c(ie||e,function(G,le){ie&&(le=G,G=e[le]),fn(g,le,bt(G,t,r,le,e,f))}),g}function ef(e){var t=Be(e);return function(r){return _u(r,e,t)}}function _u(e,t,r){var a=r.length;if(e==null)return!a;for(e=Qe(e);a--;){var l=r[a],f=t[l],g=e[l];if(g===m&&!(l in e)||!f(g))return!1}return!0}function bu(e,t,r){if(typeof e!="function")throw new Ct(Ie);return Cn(function(){e.apply(m,r)},t)}function dn(e,t,r,a){var l=-1,f=w,g=!0,y=e.length,b=[],I=t.length;if(!y)return b;r&&(t=x(t,he(r))),a?(f=C,g=!1):t.length>=nn&&(f=qe,g=!1,t=new br(t));e:for(;++l<y;){var V=e[l],j=r==null?V:r(V);if(V=a||V!==0?V:0,g&&j===j){for(var M=I;M--;)if(t[M]===j)continue e;b.push(V)}else f(t,j,a)||b.push(V)}return b}function tf(e,t){var r=!0;return lr(e,function(a,l,f){return r=!!t(a,l,f)}),r}function Hn(e,t,r){for(var a=-1,l=e.length;++a<l;){var f=e[a],g=t(f);if(g!=null&&(y===m?g===g&&!mt(g):r(g,y)))var y=g,b=f}return b}function rf(e,t,r,a){var l=e.length;for(r=oe(r),r<0&&(r=-r>l?0:l+r),a=a===m||a>l?l:oe(a),a<0&&(a+=l),a=r>a?0:Ls(a);r<a;)e[r++]=t;return e}function Qu(e,t){var r=[];return lr(e,function(a,l,f){t(a,l,f)&&r.push(a)}),r}function Ge(e,t,r,a,l){var f=-1,g=e.length;for(r||(r=Ff),l||(l=[]);++f<g;){var y=e[f];t>0&&r(y)?t>1?Ge(y,t-1,r,a,l):L(l,y):a||(l[l.length]=y)}return l}function Ot(e,t){return e&&Ja(e,t,Be)}function ha(e,t){return e&&Us(e,t,Be)}function Fn(e,t){return h(t,function(r){return Kt(e[r])})}function wr(e,t){t=or(t,e);for(var r=0,a=t.length;e!=null&&r<a;)e=e[Wt(t[r++])];return r&&r==a?e:m}function wu(e,t,r){var a=t(e);return re(e)?a:L(a,r(e))}function nt(e){return e==null?e===m?v1:g1:Ar&&Ar in Qe(e)?Nf(e):$f(e)}function ma(e,t){return e>t}function nf(e,t){return e!=null&&ge.call(e,t)}function af(e,t){return e!=null&&t in Qe(e)}function of(e,t,r){return e>=Ke(t,r)&&e<Se(t,r)}function ga(e,t,r){for(var a=r?C:w,l=e[0].length,f=e.length,g=f,y=We(f),b=1/0,I=[];g--;){var V=e[g];g&&t&&(V=x(V,he(t))),b=Ke(V.length,b),y[g]=!r&&(t||l>=120&&V.length>=120)?new br(g&&V):m}V=e[0];var j=-1,M=y[0];e:for(;++j<l&&I.length<b;){var Z=V[j],$=t?t(Z):Z;if(Z=r||Z!==0?Z:0,!(M?qe(M,$):a(I,$,r))){for(g=f;--g;){var ie=y[g];if(!(ie?qe(ie,$):a(e[g],$,r)))continue e}M&&M.push($),I.push(Z)}}return I}function uf(e,t,r,a){return Ot(e,function(l,f,g){t(a,r(l),f,g)}),a}function pn(e,t,r){t=or(t,e),e=os(e,t);var a=e==null?e:e[Wt(wt(t))];return a==null?m:o(a,e,r)}function xu(e){return Ee(e)&&nt(e)==ve}function sf(e){return Ee(e)&&nt(e)==cn}function lf(e){return Ee(e)&&nt(e)==an}function hn(e,t,r,a,l){return e===t||(e==null||t==null||!Ee(e)&&!Ee(t)?e!==e&&t!==t:cf(e,t,r,a,hn,l))}function cf(e,t,r,a,l,f){var g=re(e),y=re(t),b=g?Bt:Je(e),I=y?Bt:Je(t);b=b==ve?Zt:b,I=I==ve?Zt:I;var V=b==Zt,j=I==Zt,M=b==I;if(M&&cr(e)){if(!cr(t))return!1;g=!0,V=!1}if(M&&!V)return f||(f=new kt),g||$r(e)?es(e,t,r,a,l,f):Rf(e,t,b,r,a,l,f);if(!(r&Rt)){var Z=V&&ge.call(e,"__wrapped__"),$=j&&ge.call(t,"__wrapped__");if(Z||$){var ie=Z?e.value():e,G=$?t.value():t;return f||(f=new kt),l(ie,G,r,a,f)}}return!!M&&(f||(f=new kt),Df(e,t,r,a,l,f))}function ff(e){return Ee(e)&&Je(e)==It}function ya(e,t,r,a){var l=r.length,f=l,g=!a;if(e==null)return!f;for(e=Qe(e);l--;){var y=r[l];if(g&&y[2]?y[1]!==e[y[0]]:!(y[0]in e))return!1}for(;++l<f;){y=r[l];var b=y[0],I=e[b],V=y[1];if(g&&y[2]){if(I===m&&!(b in e))return!1}else{var j=new kt;if(a)var M=a(I,V,b,e,t,j);if(!(M===m?hn(V,I,Rt|rr,a,j):M))return!1}}return!0}function Cu(e){return!(!Ve(e)||Uf(e))&&(Kt(e)?X0:H1).test(Cr(e))}function df(e){return Ee(e)&&nt(e)==un}function pf(e){return Ee(e)&&Je(e)==Et}function hf(e){return Ee(e)&&ii(e.length)&&!!be[nt(e)]}function Au(e){return typeof e=="function"?e:e==null?ft:typeof e=="object"?re(e)?Iu(e[0],e[1]):Lu(e):qs(e)}function va(e){if(!yn(e))return n3(e);var t=[];for(var r in Qe(e))ge.call(e,r)&&r!="constructor"&&t.push(r);return t}function mf(e){if(!Ve(e))return Pf(e);var t=yn(e),r=[];for(var a in e)(a!="constructor"||!t&&ge.call(e,a))&&r.push(a);return r}function _a(e,t){return e<t}function Vu(e,t){var r=-1,a=lt(e)?We(e.length):[];return lr(e,function(l,f,g){a[++r]=t(l,f,g)}),a}function Lu(e){var t=qa(e);return t.length==1&&t[0][2]?is(t[0][0],t[0][1]):function(r){return r===e||ya(r,e,t)}}function Iu(e,t){return Ra(e)&&ns(t)?is(Wt(e),t):function(r){var a=Sa(r,e);return a===m&&a===t?Ha(r,e):hn(t,a,Rt|rr)}}function Bn(e,t,r,a,l){e!==t&&Ja(t,function(f,g){if(l||(l=new kt),Ve(f))gf(e,t,g,r,Bn,a,l);else{var y=a?a(Na(e,g),f,g+"",e,t,l):m;y===m&&(y=f),da(e,g,y)}},ct)}function gf(e,t,r,a,l,f,g){var y=Na(e,r),b=Na(t,r),I=g.get(b);if(I)return da(e,r,I),m;var V=f?f(y,b,r+"",e,t,g):m,j=V===m;if(j){var M=re(b),Z=!M&&cr(b),$=!M&&!Z&&$r(b);V=b,M||Z||$?re(y)?V=y:je(y)?V=st(y):Z?(j=!1,V=Mu(b,!0)):$?(j=!1,V=Wu(b,!0)):V=[]:vn(b)||Vr(b)?(V=y,Vr(y)?V=Is(y):Ve(y)&&!Kt(y)||(V=rs(b))):j=!1}j&&(g.set(b,V),l(V,b,a,f,g),g.delete(b)),da(e,r,V)}function Eu(e,t){var r=e.length;if(r)return t+=t<0?r:0,Xt(t,r)?e[t]:m}function ku(e,t,r){t=t.length?x(t,function(l){return re(l)?function(f){return wr(f,l.length===1?l[0]:l)}:l}):[ft];var a=-1;return t=x(t,he(K())),fe(Vu(e,function(l,f,g){return{criteria:x(t,function(y){return y(l)}),index:++a,value:l}}),function(l,f){return Lf(l,f,r)})}function yf(e,t){return ju(e,t,function(r,a){return Ha(e,a)})}function ju(e,t,r){for(var a=-1,l=t.length,f={};++a<l;){var g=t[a],y=wr(e,g);r(y,g)&&mn(f,or(g,e),y)}return f}function vf(e){return function(t){return wr(t,e)}}function ba(e,t,r,a){var l=a?ae:X,f=-1,g=t.length,y=e;for(e===t&&(t=st(t)),r&&(y=x(e,he(r)));++f<g;)for(var b=0,I=t[f],V=r?r(I):I;(b=l(y,V,b,a))>-1;)y!==e&&hi.call(y,b,1),hi.call(e,b,1);return e}function Tu(e,t){for(var r=e?t.length:0,a=r-1;r--;){var l=t[r];if(r==a||l!==f){var f=l;Xt(l)?hi.call(e,l,1):Ca(e,l)}}return e}function Qa(e,t){return e+yi(Hs()*(t-e+1))}function _f(e,t,r,a){for(var l=-1,f=Se(gi((t-e)/(r||1)),0),g=We(f);f--;)g[a?f:++l]=e,e+=r;return g}function wa(e,t){var r="";if(!e||t<1||t>Nt)return r;do t%2&&(r+=e),t=yi(t/2),t&&(e+=e);while(t);return r}function se(e,t){return ro(as(e,t,ft),e+"")}function bf(e){return yu(Fr(e))}function Qf(e,t){var r=Fr(e);return Jn(r,Qr(t,0,r.length))}function mn(e,t,r,a){if(!Ve(e))return e;t=or(t,e);for(var l=-1,f=t.length,g=f-1,y=e;y!=null&&++l<f;){var b=Wt(t[l]),I=r;if(b==="__proto__"||b==="constructor"||b==="prototype")return e;if(l!=g){var V=y[b];I=a?a(V,b,y):m,I===m&&(I=Ve(V)?V:Xt(t[l+1])?[]:{})}fn(y,b,I),y=y[b]}return e}function wf(e){return Jn(Fr(e))}function Qt(e,t,r){var a=-1,l=e.length;t<0&&(t=-t>l?0:l+t),r=r>l?l:r,r<0&&(r+=l),l=t>r?0:r-t>>>0,t>>>=0;for(var f=We(l);++a<l;)f[a]=e[a+t];return f}function xf(e,t){var r;return lr(e,function(a,l,f){return r=t(a,l,f),!r}),!!r}function Un(e,t,r){var a=0,l=e==null?a:e.length;if(typeof t=="number"&&t===t&&l<=zi){for(;a<l;){var f=a+l>>>1,g=e[f];g!==null&&!mt(g)&&(r?g<=t:g<t)?a=f+1:l=f}return l}return xa(e,t,ft,r)}function xa(e,t,r,a){var l=0,f=e==null?0:e.length;if(f===0)return 0;t=r(t);for(var g=t!==t,y=t===null,b=mt(t),I=t===m;l<f;){var V=yi((l+f)/2),j=r(e[V]),M=j!==m,Z=j===null,$=j===j,ie=mt(j);if(g)var G=a||$;else G=I?$&&(a||M):y?$&&M&&(a||!Z):b?$&&M&&!Z&&(a||!ie):!Z&&!ie&&(a?j<=t:j<t);G?l=V+1:f=V}return Ke(f,Zi)}function qu(e,t){for(var r=-1,a=e.length,l=0,f=[];++r<a;){var g=e[r],y=t?t(g):g;if(!r||!jt(y,b)){var b=y;f[l++]=g===0?0:g}}return f}function Ru(e){return typeof e=="number"?e:mt(e)?Dr:+e}function ht(e){if(typeof e=="string")return e;if(re(e))return x(e,ht)+"";if(mt(e))return Fs?Fs.call(e):"";var t=e+"";return t=="0"&&1/e==-Ft?"-0":t}function ar(e,t,r){var a=-1,l=w,f=e.length,g=!0,y=[],b=y;if(r)g=!1,l=C;else if(f>=nn){var I=t?null:h3(e);if(I)return ne(I);g=!1,l=qe,b=new br}else b=t?[]:y;e:for(;++a<f;){var V=e[a],j=t?t(V):V;if(V=r||V!==0?V:0,g&&j===j){for(var M=b.length;M--;)if(b[M]===j)continue e;t&&b.push(j),y.push(V)}else l(b,j,r)||(b!==y&&b.push(j),y.push(V))}return y}function Ca(e,t){return t=or(t,e),e=os(e,t),e==null||delete e[Wt(wt(t))]}function Du(e,t,r,a){return mn(e,t,r(wr(e,t)),a)}function Zn(e,t,r,a){for(var l=e.length,f=a?l:-1;(a?f--:++f<l)&&t(e[f],f,e););return r?Qt(e,a?0:f,a?f+1:l):Qt(e,a?f+1:0,a?l:f)}function Nu(e,t){var r=e;return r instanceof F&&(r=r.value()),R(t,function(a,l){return l.func.apply(l.thisArg,L([a],l.args))},r)}function Aa(e,t,r){var a=e.length;if(a<2)return a?ar(e[0]):[];for(var l=-1,f=We(a);++l<a;)for(var g=e[l],y=-1;++y<a;)y!=l&&(f[l]=dn(f[l]||g,e[y],t,r));return ar(Ge(f,1),t,r)}function Ou(e,t,r){for(var a=-1,l=e.length,f=t.length,g={};++a<l;)r(g,e[a],a<f?t[a]:m);return g}function Va(e){return je(e)?e:[]}function La(e){return typeof e=="function"?e:ft}function or(e,t){return re(e)?e:Ra(e,t)?[e]:Gs(me(e))}function ur(e,t,r){var a=e.length;return r=r===m?a:r,!t&&r>=a?e:Qt(e,t,r)}function Mu(e,t){if(t)return e.slice();var r=e.length,a=Ns?Ns(r):new e.constructor(r);return e.copy(a),a}function Ia(e){var t=new e.constructor(e.byteLength);return new di(t).set(new di(e)),t}function Cf(e,t){return new e.constructor(t?Ia(e.buffer):e.buffer,e.byteOffset,e.byteLength)}function Af(e){var t=new e.constructor(e.source,Bo.exec(e));return t.lastIndex=e.lastIndex,t}function Vf(e){return xn?Qe(xn.call(e)):{}}function Wu(e,t){return new e.constructor(t?Ia(e.buffer):e.buffer,e.byteOffset,e.length)}function Su(e,t){if(e!==t){var r=e!==m,a=e===null,l=e===e,f=mt(e),g=t!==m,y=t===null,b=t===t,I=mt(t);if(!y&&!I&&!f&&e>t||f&&g&&b&&!y&&!I||a&&g&&b||!r&&b||!l)return 1;if(!a&&!f&&!I&&e<t||I&&r&&l&&!a&&!f||y&&r&&l||!g&&l||!b)return-1}return 0}function Lf(e,t,r){for(var a=-1,l=e.criteria,f=t.criteria,g=l.length,y=r.length;++a<g;){var b=Su(l[a],f[a]);if(b)return a>=y?b:b*(r[a]=="desc"?-1:1)}return e.index-t.index}function Hu(e,t,r,a){for(var l=-1,f=e.length,g=r.length,y=-1,b=t.length,I=Se(f-g,0),V=We(b+I),j=!a;++y<b;)V[y]=t[y];for(;++l<g;)(j||l<f)&&(V[r[l]]=e[l]);for(;I--;)V[y++]=e[l++];return V}function Fu(e,t,r,a){for(var l=-1,f=e.length,g=-1,y=r.length,b=-1,I=t.length,V=Se(f-y,0),j=We(V+I),M=!a;++l<V;)j[l]=e[l];for(var Z=l;++b<I;)j[Z+b]=t[b];for(;++g<y;)(M||l<f)&&(j[Z+r[g]]=e[l++]);return j}function st(e,t){var r=-1,a=e.length;for(t||(t=We(a));++r<a;)t[r]=e[r];return t}function Mt(e,t,r,a){var l=!r;r||(r={});for(var f=-1,g=t.length;++f<g;){var y=t[f],b=a?a(r[y],e[y],y,r,e):m;b===m&&(b=e[y]),l?$t(r,y,b):fn(r,y,b)}return r}function If(e,t){return Mt(e,to(e),t)}function Ef(e,t){return Mt(e,Ps(e),t)}function zn(e,t){return function(r,a){var l=re(r)?s:Kc,f=t?t():{};return l(r,e,K(a,2),f)}}function Wr(e){return se(function(t,r){var a=-1,l=r.length,f=l>1?r[l-1]:m,g=l>2?r[2]:m;for(f=e.length>3&&typeof f=="function"?(l--,f):m,g&&it(r[0],r[1],g)&&(f=l<3?m:f,l=1),t=Qe(t);++a<l;){var y=r[a];y&&e(t,y,a,f)}return t})}function Bu(e,t){return function(r,a){if(r==null)return r;if(!lt(r))return e(r,a);for(var l=r.length,f=t?l:-1,g=Qe(r);(t?f--:++f<l)&&a(g[f],f,g)!==!1;);return r}}function Uu(e){return function(t,r,a){for(var l=-1,f=Qe(t),g=a(t),y=g.length;y--;){var b=g[e?y:++l];if(r(f[b],b,f)===!1)break}return t}}function kf(e,t,r){function a(){return(this&&this!==$e&&this instanceof a?f:e).apply(l?r:this,arguments)}var l=t&tt,f=gn(e);return a}function Zu(e){return function(t){t=me(t);var r=ye(t)?Xe(t):m,a=r?r[0]:t.charAt(0),l=r?ur(r,1).join(""):t.slice(1);return a[e]()+l}}function Sr(e){return function(t){return R(Ts(js(t).replace(sc,"")),e,"")}}function gn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Pr(e.prototype),a=e.apply(r,t);return Ve(a)?a:r}}function jf(e,t,r){function a(){for(var f=arguments.length,g=We(f),y=f,b=Hr(a);y--;)g[y]=arguments[y];var I=f<3&&g[0]!==b&&g[f-1]!==b?[]:U(g,b);return f-=I.length,f<r?Yu(e,t,Pn,a.placeholder,m,g,I,m,m,r-f):o(this&&this!==$e&&this instanceof a?l:e,this,g)}var l=gn(e);return a}function zu(e){return function(t,r,a){var l=Qe(t);if(!lt(t)){var f=K(r,3);t=Be(t),r=function(y){return f(l[y],y,l)}}var g=e(t,r,a);return g>-1?l[f?t[g]:g]:m}}function Pu(e){return Yt(function(t){var r=t.length,a=r,l=Y.prototype.thru;for(e&&t.reverse();a--;){var f=t[a];if(typeof f!="function")throw new Ct(Ie);if(l&&!g&&Xn(f)=="wrapper")var g=new Y([],!0)}for(a=g?a:r;++a<r;){f=t[a];var y=Xn(f),b=y=="wrapper"?eo(f):m;g=b&&Da(b[0])&&b[1]==(Vt|gt|yt|rt)&&!b[4].length&&b[9]==1?g[Xn(b[0])].apply(g,b[3]):f.length==1&&Da(f)?g[y]():g.thru(f)}return function(){var I=arguments,V=I[0];if(g&&I.length==1&&re(V))return g.plant(V).value();for(var j=0,M=r?t[j].apply(this,I):V;++j<r;)M=t[j].call(this,M);return M}})}function Pn(e,t,r,a,l,f,g,y,b,I){function V(){for(var le=arguments.length,ce=We(le),et=le;et--;)ce[et]=arguments[et];if($)var dt=Hr(V),fr=Ae(ce,dt);if(a&&(ce=Hu(ce,a,l,$)),f&&(ce=Fu(ce,f,g,$)),le-=fr,$&&le<I)return Yu(e,t,Pn,V.placeholder,r,ce,U(ce,dt),y,b,I-le);var ke=M?r:this,At=Z?ke[e]:e;return le=ce.length,y?ce=Gf(ce,y):ie&&le>1&&ce.reverse(),j&&b<le&&(ce.length=b),this&&this!==$e&&this instanceof V&&(At=G||gn(At)),At.apply(ke,ce)}var j=t&Vt,M=t&tt,Z=t&Ht,$=t&(gt|nr),ie=t&Lt,G=Z?m:gn(e);return V}function $u(e,t){return function(r,a){return uf(r,e,t(a),{})}}function $n(e,t){return function(r,a){var l;if(r===m&&a===m)return t;if(r!==m&&(l=r),a!==m){if(l===m)return a;typeof r=="string"||typeof a=="string"?(r=ht(r),a=ht(a)):(r=Ru(r),a=Ru(a)),l=e(r,a)}return l}}function Ea(e){return Yt(function(t){return t=x(t,he(K())),se(function(r){var a=this;return e(t,function(l){return o(l,a,r)})})})}function Gn(e,t){t=t===m?" ":ht(t);var r=t.length;if(r<2)return r?wa(t,e):t;var a=wa(t,gi(e/Me(t)));return ye(t)?ur(Xe(a),0,e).join(""):a.slice(0,e)}function Tf(e,t,r,a){function l(){for(var y=-1,b=arguments.length,I=-1,V=a.length,j=We(V+b),M=this&&this!==$e&&this instanceof l?g:e;++I<V;)j[I]=a[I];for(;b--;)j[I++]=arguments[++y];return o(M,f?r:this,j)}var f=t&tt,g=gn(e);return l}function Gu(e){return function(t,r,a){return a&&typeof a!="number"&&it(t,r,a)&&(r=a=m),t=Jt(t),r===m?(r=t,t=0):r=Jt(r),a=a===m?t<r?1:-1:Jt(a),_f(t,r,a,e)}}function Yn(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=xt(t),r=xt(r)),e(t,r)}}function Yu(e,t,r,a,l,f,g,y,b,I){var V=t&gt,j=V?g:m,M=V?m:g,Z=V?f:m,$=V?m:f;t|=V?yt:ir,t&=~(V?ir:yt),t&qn||(t&=~(tt|Ht));var ie=[e,t,l,Z,j,$,M,y,b,I],G=r.apply(m,ie);return Da(e)&&$s(G,ie),G.placeholder=a,us(G,e,t)}function ka(e){var t=Br[e];return function(r,a){if(r=xt(r),a=a==null?0:Ke(oe(a),292),a&&Ss(r)){var l=(me(r)+"e").split("e");return l=(me(t(l[0]+"e"+(+l[1]+a)))+"e").split("e"),+(l[0]+"e"+(+l[1]-a))}return t(r)}}function Xu(e){return function(t){var r=Je(t);return r==It?O(t):r==Et?Oe(t):ue(t,e(t))}}function Gt(e,t,r,a,l,f,g,y){var b=t&Ht;if(!b&&typeof e!="function")throw new Ct(Ie);var I=a?a.length:0;if(I||(t&=~(yt|ir),a=l=m),g=g===m?g:Se(oe(g),0),y=y===m?y:oe(y),I-=l?l.length:0,t&ir){var V=a,j=l;a=l=m}var M=b?m:eo(e),Z=[e,t,r,a,l,V,j,f,g,y];if(M&&zf(Z,M),e=Z[0],t=Z[1],r=Z[2],a=Z[3],l=Z[4],y=Z[9]=Z[9]===m?b?0:e.length:Se(Z[9]-I,0),!y&&t&(gt|nr)&&(t&=~(gt|nr)),t&&t!=tt)$=t==gt||t==nr?jf(e,t,y):t!=yt&&t!=(tt|yt)||l.length?Pn.apply(m,Z):Tf(e,t,r,a);else var $=kf(e,t,r);return us((M?Zs:$s)($,Z),e,t)}function Ku(e,t,r,a){return e===m||jt(e,Ur[r])&&!ge.call(a,r)?t:e}function Ju(e,t,r,a,l,f){return Ve(e)&&Ve(t)&&(f.set(t,e),Bn(e,t,m,Ju,f),f.delete(t)),e}function qf(e){return vn(e)?m:e}function es(e,t,r,a,l,f){var g=r&Rt,y=e.length,b=t.length;if(y!=b&&!(g&&b>y))return!1;var I=f.get(e),V=f.get(t);if(I&&V)return I==t&&V==e;var j=-1,M=!0,Z=r&rr?new br:m;for(f.set(e,t),f.set(t,e);++j<y;){var $=e[j],ie=t[j];if(a)var G=g?a(ie,$,j,t,e,f):a($,ie,j,e,t,f);if(G!==m){if(G)continue;M=!1;break}if(Z){if(!T(t,function(le,ce){if(!qe(Z,ce)&&($===le||l($,le,r,a,f)))return Z.push(ce)})){M=!1;break}}else if($!==ie&&!l($,ie,r,a,f)){M=!1;break}}return f.delete(e),f.delete(t),M}function Rf(e,t,r,a,l,f,g){switch(r){case Nr:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case cn:return!(e.byteLength!=t.byteLength||!f(new di(e),new di(t)));case Ut:case an:case on:return jt(+e,+t);case Rn:return e.name==t.name&&e.message==t.message;case un:case sn:return e==t+"";case It:var y=O;case Et:var b=a&Rt;if(y||(y=ne),e.size!=t.size&&!b)return!1;var I=g.get(e);if(I)return I==t;a|=rr,g.set(e,t);var V=es(y(e),y(t),a,l,f,g);return g.delete(e),V;case Nn:if(xn)return xn.call(e)==xn.call(t)}return!1}function Df(e,t,r,a,l,f){var g=r&Rt,y=ja(e),b=y.length;if(b!=ja(t).length&&!g)return!1;for(var I=b;I--;){var V=y[I];if(!(g?V in t:ge.call(t,V)))return!1}var j=f.get(e),M=f.get(t);if(j&&M)return j==t&&M==e;var Z=!0;f.set(e,t),f.set(t,e);for(var $=g;++I<b;){V=y[I];var ie=e[V],G=t[V];if(a)var le=g?a(G,ie,V,t,e,f):a(ie,G,V,e,t,f);if(!(le===m?ie===G||l(ie,G,r,a,f):le)){Z=!1;break}$||($=V=="constructor")}if(Z&&!$){var ce=e.constructor,et=t.constructor;ce!=et&&"constructor"in e&&"constructor"in t&&!(typeof ce=="function"&&ce instanceof ce&&typeof et=="function"&&et instanceof et)&&(Z=!1)}return f.delete(e),f.delete(t),Z}function Yt(e){return ro(as(e,m,ds),e+"")}function ja(e){return wu(e,Be,to)}function Ta(e){return wu(e,ct,Ps)}function Xn(e){for(var t=e.name+"",r=zr[t],a=ge.call(zr,t)?r.length:0;a--;){var l=r[a],f=l.func;if(f==null||f==e)return l.name}return t}function Hr(e){return(ge.call(u,"placeholder")?u:e).placeholder}function K(){var e=u.iteratee||Ba;return e=e===Ba?Au:e,arguments.length?e(arguments[0],arguments[1]):e}function Kn(e,t){var r=e.__data__;return Bf(t)?r[typeof t=="string"?"string":"hash"]:r.map}function qa(e){for(var t=Be(e),r=t.length;r--;){var a=t[r],l=e[a];t[r]=[a,l,ns(l)]}return t}function xr(e,t){var r=Er(e,t);return Cu(r)?r:m}function Nf(e){var t=ge.call(e,Ar),r=e[Ar];try{e[Ar]=m;var a=!0}catch{}var l=ci.call(e);return a&&(t?e[Ar]=r:delete e[Ar]),l}function Of(e,t,r){for(var a=-1,l=r.length;++a<l;){var f=r[a],g=f.size;switch(f.type){case"drop":e+=g;break;case"dropRight":t-=g;break;case"take":t=Ke(t,e+g);break;case"takeRight":e=Se(e,t-g)}}return{start:e,end:t}}function Mf(e){var t=e.match(q1);return t?t[1].split(R1):[]}function ts(e,t,r){t=or(t,e);for(var a=-1,l=t.length,f=!1;++a<l;){var g=Wt(t[a]);if(!(f=e!=null&&r(e,g)))break;e=e[g]}return f||++a!=l?f:(l=e==null?0:e.length,!!l&&ii(l)&&Xt(g,l)&&(re(e)||Vr(e)))}function Wf(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&ge.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function rs(e){return typeof e.constructor!="function"||yn(e)?{}:Pr(pi(e))}function Sf(e,t,r){var a=e.constructor;switch(t){case cn:return Ia(e);case Ut:case an:return new a(+e);case Nr:return Cf(e,r);case Pi:case $i:case Gi:case Yi:case Xi:case Ki:case Ji:case ea:case ta:return Wu(e,r);case It:return new a;case on:case sn:return new a(e);case un:return Af(e);case Et:return new a;case Nn:return Vf(e)}}function Hf(e,t){var r=t.length;if(!r)return e;var a=r-1;return t[a]=(r>1?"& ":"")+t[a],t=t.join(r>2?", ":" "),e.replace(T1,`{
/* [wrapped with `+t+`] */
`)}function Ff(e){return re(e)||Vr(e)||!!(Ws&&e&&e[Ws])}function Xt(e,t){var r=typeof e;return t=t??Nt,!!t&&(r=="number"||r!="symbol"&&B1.test(e))&&e>-1&&e%1==0&&e<t}function it(e,t,r){if(!Ve(r))return!1;var a=typeof t;return!!(a=="number"?lt(r)&&Xt(t,r.length):a=="string"&&t in r)&&jt(r[t],e)}function Ra(e,t){if(re(e))return!1;var r=typeof e;return!(r!="number"&&r!="symbol"&&r!="boolean"&&e!=null&&!mt(e))||I1.test(e)||!L1.test(e)||t!=null&&e in Qe(t)}function Bf(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Da(e){var t=Xn(e),r=u[t];if(typeof r!="function"||!(t in F.prototype))return!1;if(e===r)return!0;var a=eo(r);return!!a&&e===a[0]}function Uf(e){return!!Ds&&Ds in e}function yn(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||Ur)}function ns(e){return e===e&&!Ve(e)}function is(e,t){return function(r){return r!=null&&r[e]===t&&(t!==m||e in Qe(r))}}function Zf(e){var t=ri(e,function(a){return r.size===Tn&&r.clear(),a}),r=t.cache;return t}function zf(e,t){var r=e[1],a=t[1],l=r|a,f=l<(tt|Ht|Vt),g=a==Vt&&r==gt||a==Vt&&r==rt&&e[7].length<=t[8]||a==(Vt|rt)&&t[7].length<=t[8]&&r==gt;if(!f&&!g)return e;a&tt&&(e[2]=t[2],l|=r&tt?0:qn);var y=t[3];if(y){var b=e[3];e[3]=b?Hu(b,y,t[4]):y,e[4]=b?U(e[3],Tr):t[4]}return y=t[5],y&&(b=e[5],e[5]=b?Fu(b,y,t[6]):y,e[6]=b?U(e[5],Tr):t[6]),y=t[7],y&&(e[7]=y),a&Vt&&(e[8]=e[8]==null?t[8]:Ke(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=l,e}function Pf(e){var t=[];if(e!=null)for(var r in Qe(e))t.push(r);return t}function $f(e){return ci.call(e)}function as(e,t,r){return t=Se(t===m?e.length-1:t,0),function(){for(var a=arguments,l=-1,f=Se(a.length-t,0),g=We(f);++l<f;)g[l]=a[t+l];l=-1;for(var y=We(t+1);++l<t;)y[l]=a[l];return y[t]=r(g),o(e,this,y)}}function os(e,t){return t.length<2?e:wr(e,Qt(t,0,-1))}function Gf(e,t){for(var r=e.length,a=Ke(t.length,r),l=st(e);a--;){var f=t[a];e[a]=Xt(f,r)?l[f]:m}return e}function Na(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]}function us(e,t,r){var a=t+"";return ro(e,Hf(a,Yf(Mf(a),r)))}function ss(e){var t=0,r=0;return function(){var a=i3(),l=Rr-(a-r);if(r=a,l>0){if(++t>=Fi)return arguments[0]}else t=0;return e.apply(m,arguments)}}function Jn(e,t){var r=-1,a=e.length,l=a-1;for(t=t===m?a:t;++r<t;){var f=Qa(r,l),g=e[f];e[f]=e[r],e[r]=g}return e.length=t,e}function Wt(e){if(typeof e=="string"||mt(e))return e;var t=e+"";return t=="0"&&1/e==-Ft?"-0":t}function Cr(e){if(e!=null){try{return li.call(e)}catch{}try{return e+""}catch{}}return""}function Yf(e,t){return c(de,function(r){var a="_."+r[0];t&r[1]&&!w(e,a)&&e.push(a)}),e.sort()}function ls(e){if(e instanceof F)return e.clone();var t=new Y(e.__wrapped__,e.__chain__);return t.__actions__=st(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Xf(e,t,r){t=(r?it(e,t,r):t===m)?1:Se(oe(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var l=0,f=0,g=We(gi(a/t));l<a;)g[f++]=Qt(e,l,l+=t);return g}function Kf(e){for(var t=-1,r=e==null?0:e.length,a=0,l=[];++t<r;){var f=e[t];f&&(l[a++]=f)}return l}function Jf(){var e=arguments.length;if(!e)return[];for(var t=We(e-1),r=arguments[0],a=e;a--;)t[a-1]=arguments[a];return L(re(r)?st(r):[r],Ge(t,1))}function ed(e,t,r){var a=e==null?0:e.length;return a?(t=r||t===m?1:oe(t),Qt(e,t<0?0:t,a)):[]}function td(e,t,r){var a=e==null?0:e.length;return a?(t=r||t===m?1:oe(t),t=a-t,Qt(e,0,t<0?0:t)):[]}function rd(e,t){return e&&e.length?Zn(e,K(t,3),!0,!0):[]}function nd(e,t){return e&&e.length?Zn(e,K(t,3),!0):[]}function id(e,t,r,a){var l=e==null?0:e.length;return l?(r&&typeof r!="number"&&it(e,t,r)&&(r=0,a=l),rf(e,t,r,a)):[]}function cs(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var l=r==null?0:oe(r);return l<0&&(l=Se(a+l,0)),ee(e,K(t,3),l)}function fs(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var l=a-1;return r!==m&&(l=oe(r),l=r<0?Se(a+l,0):Ke(l,a-1)),ee(e,K(t,3),l,!0)}function ds(e){return e!=null&&e.length?Ge(e,1):[]}function ad(e){return e!=null&&e.length?Ge(e,Ft):[]}function od(e,t){return e!=null&&e.length?(t=t===m?1:oe(t),Ge(e,t)):[]}function ud(e){for(var t=-1,r=e==null?0:e.length,a={};++t<r;){var l=e[t];a[l[0]]=l[1]}return a}function ps(e){return e&&e.length?e[0]:m}function sd(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var l=r==null?0:oe(r);return l<0&&(l=Se(a+l,0)),X(e,t,l)}function ld(e){return e!=null&&e.length?Qt(e,0,-1):[]}function cd(e,t){return e==null?"":r3.call(e,t)}function wt(e){var t=e==null?0:e.length;return t?e[t-1]:m}function fd(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var l=a;return r!==m&&(l=oe(r),l=l<0?Se(a+l,0):Ke(l,a-1)),t===t?ze(e,t,l):ee(e,pe,l,!0)}function dd(e,t){return e&&e.length?Eu(e,oe(t)):m}function hs(e,t){return e&&e.length&&t&&t.length?ba(e,t):e}function pd(e,t,r){return e&&e.length&&t&&t.length?ba(e,t,K(r,2)):e}function hd(e,t,r){return e&&e.length&&t&&t.length?ba(e,t,m,r):e}function md(e,t){var r=[];if(!e||!e.length)return r;var a=-1,l=[],f=e.length;for(t=K(t,3);++a<f;){var g=e[a];t(g,a,e)&&(r.push(g),l.push(a))}return Tu(e,l),r}function Oa(e){return e==null?e:o3.call(e)}function gd(e,t,r){var a=e==null?0:e.length;return a?(r&&typeof r!="number"&&it(e,t,r)?(t=0,r=a):(t=t==null?0:oe(t),r=r===m?a:oe(r)),Qt(e,t,r)):[]}function yd(e,t){return Un(e,t)}function vd(e,t,r){return xa(e,t,K(r,2))}function _d(e,t){var r=e==null?0:e.length;if(r){var a=Un(e,t);if(a<r&&jt(e[a],t))return a}return-1}function bd(e,t){return Un(e,t,!0)}function Qd(e,t,r){return xa(e,t,K(r,2),!0)}function wd(e,t){if(e!=null&&e.length){var r=Un(e,t,!0)-1;if(jt(e[r],t))return r}return-1}function xd(e){return e&&e.length?qu(e):[]}function Cd(e,t){return e&&e.length?qu(e,K(t,2)):[]}function Ad(e){var t=e==null?0:e.length;return t?Qt(e,1,t):[]}function Vd(e,t,r){return e&&e.length?(t=r||t===m?1:oe(t),Qt(e,0,t<0?0:t)):[]}function Ld(e,t,r){var a=e==null?0:e.length;return a?(t=r||t===m?1:oe(t),t=a-t,Qt(e,t<0?0:t,a)):[]}function Id(e,t){return e&&e.length?Zn(e,K(t,3),!1,!0):[]}function Ed(e,t){return e&&e.length?Zn(e,K(t,3)):[]}function kd(e){return e&&e.length?ar(e):[]}function jd(e,t){return e&&e.length?ar(e,K(t,2)):[]}function Td(e,t){return t=typeof t=="function"?t:m,e&&e.length?ar(e,m,t):[]}function Ma(e){if(!e||!e.length)return[];var t=0;return e=h(e,function(r){if(je(r))return t=Se(r.length,t),!0}),De(t,function(r){return x(e,P(r))})}function ms(e,t){if(!e||!e.length)return[];var r=Ma(e);return t==null?r:x(r,function(a){return o(t,m,a)})}function qd(e,t){return Ou(e||[],t||[],fn)}function Rd(e,t){return Ou(e||[],t||[],mn)}function gs(e){var t=u(e);return t.__chain__=!0,t}function Dd(e,t){return t(e),e}function ei(e,t){return t(e)}function Nd(){return gs(this)}function Od(){return new Y(this.value(),this.__chain__)}function Md(){this.__values__===m&&(this.__values__=Vs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?m:this.__values__[this.__index__++]}}function Wd(){return this}function Sd(e){for(var t,r=this;r instanceof S;){var a=ls(r);a.__index__=0,a.__values__=m,t?l.__wrapped__=a:t=a;var l=a;r=r.__wrapped__}return l.__wrapped__=e,t}function Hd(){var e=this.__wrapped__;if(e instanceof F){var t=e;return this.__actions__.length&&(t=new F(this)),t=t.reverse(),t.__actions__.push({func:ei,args:[Oa],thisArg:m}),new Y(t,this.__chain__)}return this.thru(Oa)}function Fd(){return Nu(this.__wrapped__,this.__actions__)}function Bd(e,t,r){var a=re(e)?p:tf;return r&&it(e,t,r)&&(t=m),a(e,K(t,3))}function Ud(e,t){return(re(e)?h:Qu)(e,K(t,3))}function Zd(e,t){return Ge(ti(e,t),1)}function zd(e,t){return Ge(ti(e,t),Ft)}function Pd(e,t,r){return r=r===m?1:oe(r),Ge(ti(e,t),r)}function ys(e,t){return(re(e)?c:lr)(e,K(t,3))}function vs(e,t){return(re(e)?d:Bs)(e,K(t,3))}function $d(e,t,r,a){e=lt(e)?e:Fr(e),r=r&&!a?oe(r):0;var l=e.length;return r<0&&(r=Se(l+r,0)),ai(e)?r<=l&&e.indexOf(t,r)>-1:!!l&&X(e,t,r)>-1}function ti(e,t){return(re(e)?x:Vu)(e,K(t,3))}function Gd(e,t,r,a){return e==null?[]:(re(t)||(t=t==null?[]:[t]),r=a?m:r,re(r)||(r=r==null?[]:[r]),ku(e,t,r))}function Yd(e,t,r){var a=re(e)?R:J,l=arguments.length<3;return a(e,K(t,4),r,l,lr)}function Xd(e,t,r){var a=re(e)?D:J,l=arguments.length<3;return a(e,K(t,4),r,l,Bs)}function Kd(e,t){return(re(e)?h:Qu)(e,ni(K(t,3)))}function Jd(e){return(re(e)?yu:bf)(e)}function ep(e,t,r){return t=(r?it(e,t,r):t===m)?1:oe(t),(re(e)?Yc:Qf)(e,t)}function tp(e){return(re(e)?Xc:wf)(e)}function rp(e){if(e==null)return 0;if(lt(e))return ai(e)?Me(e):e.length;var t=Je(e);return t==It||t==Et?e.size:va(e).length}function np(e,t,r){var a=re(e)?T:xf;return r&&it(e,t,r)&&(t=m),a(e,K(t,3))}function ip(e,t){if(typeof t!="function")throw new Ct(Ie);return e=oe(e),function(){if(--e<1)return t.apply(this,arguments)}}function _s(e,t,r){return t=r?m:t,t=e&&t==null?e.length:t,Gt(e,Vt,m,m,m,m,t)}function bs(e,t){var r;if(typeof t!="function")throw new Ct(Ie);return e=oe(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=m),r}}function Qs(e,t,r){t=r?m:t;var a=Gt(e,gt,m,m,m,m,m,t);return a.placeholder=Qs.placeholder,a}function ws(e,t,r){t=r?m:t;var a=Gt(e,nr,m,m,m,m,m,t);return a.placeholder=ws.placeholder,a}function xs(e,t,r){function a(ke){var At=M,An=Z;return M=Z=m,ce=ke,ie=e.apply(An,At)}function l(ke){return ce=ke,G=Cn(y,t),et?a(ke):ie}function f(ke){var At=ke-le,An=ke-ce,al=t-At;return dt?Ke(al,$-An):al}function g(ke){var At=ke-le,An=ke-ce;return le===m||At>=t||At<0||dt&&An>=$}function y(){var ke=bi();return g(ke)?b(ke):(G=Cn(y,f(ke)),m)}function b(ke){return G=m,fr&&M?a(ke):(M=Z=m,ie)}function I(){G!==m&&zs(G),ce=0,M=le=Z=G=m}function V(){return G===m?ie:b(bi())}function j(){var ke=bi(),At=g(ke);if(M=arguments,Z=this,le=ke,At){if(G===m)return l(le);if(dt)return zs(G),G=Cn(y,t),a(le)}return G===m&&(G=Cn(y,t)),ie}var M,Z,$,ie,G,le,ce=0,et=!1,dt=!1,fr=!0;if(typeof e!="function")throw new Ct(Ie);return t=xt(t)||0,Ve(r)&&(et=!!r.leading,dt="maxWait"in r,$=dt?Se(xt(r.maxWait)||0,t):$,fr="trailing"in r?!!r.trailing:fr),j.cancel=I,j.flush=V,j}function ap(e){return Gt(e,Lt)}function ri(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Ct(Ie);var r=function(){var a=arguments,l=t?t.apply(this,a):a[0],f=r.cache;if(f.has(l))return f.get(l);var g=e.apply(this,a);return r.cache=f.set(l,g)||f,g};return r.cache=new(ri.Cache||Pt),r}function ni(e){if(typeof e!="function")throw new Ct(Ie);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function op(e){return bs(2,e)}function up(e,t){if(typeof e!="function")throw new Ct(Ie);return t=t===m?t:oe(t),se(e,t)}function sp(e,t){if(typeof e!="function")throw new Ct(Ie);return t=t==null?0:Se(oe(t),0),se(function(r){var a=r[t],l=ur(r,0,t);return a&&L(l,a),o(e,this,l)})}function lp(e,t,r){var a=!0,l=!0;if(typeof e!="function")throw new Ct(Ie);return Ve(r)&&(a="leading"in r?!!r.leading:a,l="trailing"in r?!!r.trailing:l),xs(e,t,{leading:a,maxWait:t,trailing:l})}function cp(e){return _s(e,1)}function fp(e,t){return io(La(t),e)}function dp(){if(!arguments.length)return[];var e=arguments[0];return re(e)?e:[e]}function pp(e){return bt(e,qt)}function hp(e,t){return t=typeof t=="function"?t:m,bt(e,qt,t)}function mp(e){return bt(e,Pe|qt)}function gp(e,t){return t=typeof t=="function"?t:m,bt(e,Pe|qt,t)}function yp(e,t){return t==null||_u(e,t,Be(t))}function jt(e,t){return e===t||e!==e&&t!==t}function lt(e){return e!=null&&ii(e.length)&&!Kt(e)}function je(e){return Ee(e)&&lt(e)}function vp(e){return e===!0||e===!1||Ee(e)&&nt(e)==Ut}function _p(e){return Ee(e)&&e.nodeType===1&&!vn(e)}function bp(e){if(e==null)return!0;if(lt(e)&&(re(e)||typeof e=="string"||typeof e.splice=="function"||cr(e)||$r(e)||Vr(e)))return!e.length;var t=Je(e);if(t==It||t==Et)return!e.size;if(yn(e))return!va(e).length;for(var r in e)if(ge.call(e,r))return!1;return!0}function Qp(e,t){return hn(e,t)}function wp(e,t,r){r=typeof r=="function"?r:m;var a=r?r(e,t):m;return a===m?hn(e,t,m,r):!!a}function Wa(e){if(!Ee(e))return!1;var t=nt(e);return t==Rn||t==m1||typeof e.message=="string"&&typeof e.name=="string"&&!vn(e)}function xp(e){return typeof e=="number"&&Ss(e)}function Kt(e){if(!Ve(e))return!1;var t=nt(e);return t==Dn||t==Mo||t==yr||t==y1}function Cs(e){return typeof e=="number"&&e==oe(e)}function ii(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Nt}function Ve(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Ee(e){return e!=null&&typeof e=="object"}function Cp(e,t){return e===t||ya(e,t,qa(t))}function Ap(e,t,r){return r=typeof r=="function"?r:m,ya(e,t,qa(t),r)}function Vp(e){return As(e)&&e!=+e}function Lp(e){if(m3(e))throw new $a(Wi);return Cu(e)}function Ip(e){return e===null}function Ep(e){return e==null}function As(e){return typeof e=="number"||Ee(e)&&nt(e)==on}function vn(e){if(!Ee(e)||nt(e)!=Zt)return!1;var t=pi(e);if(t===null)return!0;var r=ge.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&li.call(r)==G0}function kp(e){return Cs(e)&&e>=-Nt&&e<=Nt}function ai(e){return typeof e=="string"||!re(e)&&Ee(e)&&nt(e)==sn}function mt(e){return typeof e=="symbol"||Ee(e)&&nt(e)==Nn}function jp(e){return e===m}function Tp(e){return Ee(e)&&Je(e)==ln}function qp(e){return Ee(e)&&nt(e)==_1}function Vs(e){if(!e)return[];if(lt(e))return ai(e)?Xe(e):st(e);if(_n&&e[_n])return z(e[_n]());var t=Je(e);return(t==It?O:t==Et?ne:Fr)(e)}function Jt(e){return e?(e=xt(e),e===Ft||e===-Ft?(e<0?-1:1)*Ui:e===e?e:0):e===0?e:0}function oe(e){var t=Jt(e),r=t%1;return t===t?r?t-r:t:0}function Ls(e){return e?Qr(oe(e),0,vt):0}function xt(e){if(typeof e=="number")return e;if(mt(e))return Dr;if(Ve(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ve(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=te(e);var r=S1.test(e);return r||F1.test(e)?bc(e.slice(2),r?2:8):W1.test(e)?Dr:+e}function Is(e){return Mt(e,ct(e))}function Rp(e){return e?Qr(oe(e),-Nt,Nt):e===0?e:0}function me(e){return e==null?"":ht(e)}function Dp(e,t){var r=Pr(e);return t==null?r:vu(r,t)}function Np(e,t){return q(e,K(t,3),Ot)}function Op(e,t){return q(e,K(t,3),ha)}function Mp(e,t){return e==null?e:Ja(e,K(t,3),ct)}function Wp(e,t){return e==null?e:Us(e,K(t,3),ct)}function Sp(e,t){return e&&Ot(e,K(t,3))}function Hp(e,t){return e&&ha(e,K(t,3))}function Fp(e){return e==null?[]:Fn(e,Be(e))}function Bp(e){return e==null?[]:Fn(e,ct(e))}function Sa(e,t,r){var a=e==null?m:wr(e,t);return a===m?r:a}function Up(e,t){return e!=null&&ts(e,t,nf)}function Ha(e,t){return e!=null&&ts(e,t,af)}function Be(e){return lt(e)?gu(e):va(e)}function ct(e){return lt(e)?gu(e,!0):mf(e)}function Zp(e,t){var r={};return t=K(t,3),Ot(e,function(a,l,f){$t(r,t(a,l,f),a)}),r}function zp(e,t){var r={};return t=K(t,3),Ot(e,function(a,l,f){$t(r,l,t(a,l,f))}),r}function Pp(e,t){return Es(e,ni(K(t)))}function Es(e,t){if(e==null)return{};var r=x(Ta(e),function(a){return[a]});return t=K(t),ju(e,r,function(a,l){return t(a,l[0])})}function $p(e,t,r){t=or(t,e);var a=-1,l=t.length;for(l||(l=1,e=m);++a<l;){var f=e==null?m:e[Wt(t[a])];f===m&&(a=l,f=r),e=Kt(f)?f.call(e):f}return e}function Gp(e,t,r){return e==null?e:mn(e,t,r)}function Yp(e,t,r,a){return a=typeof a=="function"?a:m,e==null?e:mn(e,t,r,a)}function Xp(e,t,r){var a=re(e),l=a||cr(e)||$r(e);if(t=K(t,4),r==null){var f=e&&e.constructor;r=l?a?new f:[]:Ve(e)&&Kt(f)?Pr(pi(e)):{}}return(l?c:Ot)(e,function(g,y,b){return t(r,g,y,b)}),r}function Kp(e,t){return e==null||Ca(e,t)}function Jp(e,t,r){return e==null?e:Du(e,t,La(r))}function e0(e,t,r,a){return a=typeof a=="function"?a:m,e==null?e:Du(e,t,La(r),a)}function Fr(e){return e==null?[]:Ce(e,Be(e))}function t0(e){return e==null?[]:Ce(e,ct(e))}function r0(e,t,r){return r===m&&(r=t,t=m),r!==m&&(r=xt(r),r=r===r?r:0),t!==m&&(t=xt(t),t=t===t?t:0),Qr(xt(e),t,r)}function n0(e,t,r){return t=Jt(t),r===m?(r=t,t=0):r=Jt(r),e=xt(e),of(e,t,r)}function i0(e,t,r){if(r&&typeof r!="boolean"&&it(e,t,r)&&(t=r=m),r===m&&(typeof t=="boolean"?(r=t,t=m):typeof e=="boolean"&&(r=e,e=m)),e===m&&t===m?(e=0,t=1):(e=Jt(e),t===m?(t=e,e=0):t=Jt(t)),e>t){var a=e;e=t,t=a}if(r||e%1||t%1){var l=Hs();return Ke(e+l*(t-e+_c("1e-"+((l+"").length-1))),t)}return Qa(e,t)}function ks(e){return oo(me(e).toLowerCase())}function js(e){return e=me(e),e&&e.replace(U1,xc).replace(lc,"")}function a0(e,t,r){e=me(e),t=ht(t);var a=e.length;r=r===m?a:Qr(oe(r),0,a);var l=r;return r-=t.length,r>=0&&e.slice(r,l)==t}function o0(e){return e=me(e),e&&C1.test(e)?e.replace(Ho,Cc):e}function u0(e){return e=me(e),e&&k1.test(e)?e.replace(ra,"\\$&"):e}function s0(e,t,r){e=me(e),t=oe(t);var a=t?Me(e):0;if(!t||a>=t)return e;var l=(t-a)/2;return Gn(yi(l),r)+e+Gn(gi(l),r)}function l0(e,t,r){e=me(e),t=oe(t);var a=t?Me(e):0;return t&&a<t?e+Gn(t-a,r):e}function c0(e,t,r){e=me(e),t=oe(t);var a=t?Me(e):0;return t&&a<t?Gn(t-a,r)+e:e}function f0(e,t,r){return r||t==null?t=0:t&&(t=+t),a3(me(e).replace(na,""),t||0)}function d0(e,t,r){return t=(r?it(e,t,r):t===m)?1:oe(t),wa(me(e),t)}function p0(){var e=arguments,t=me(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function h0(e,t,r){return r&&typeof r!="number"&&it(e,t,r)&&(t=r=m),(r=r===m?vt:r>>>0)?(e=me(e),e&&(typeof t=="string"||t!=null&&!ao(t))&&(t=ht(t),!t&&ye(e))?ur(Xe(e),0,r):e.split(t,r)):[]}function m0(e,t,r){return e=me(e),r=r==null?0:Qr(oe(r),0,e.length),t=ht(t),e.slice(r,r+t.length)==t}function g0(e,t,r){var a=u.templateSettings;r&&it(e,t,r)&&(t=m),e=me(e),t=Qi({},t,a,Ku);var l,f,g=Qi({},t.imports,a.imports,Ku),y=Be(g),b=Ce(g,y),I=0,V=t.interpolate||On,j="__p += '",M=Ga((t.escape||On).source+"|"+V.source+"|"+(V===Fo?M1:On).source+"|"+(t.evaluate||On).source+"|$","g"),Z="//# sourceURL="+(ge.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++hc+"]")+`
`;e.replace(M,function(G,le,ce,et,dt,fr){return ce||(ce=et),j+=e.slice(I,fr).replace(Z1,Ze),le&&(l=!0,j+=`' +
__e(`+le+`) +
'`),dt&&(f=!0,j+=`';
`+dt+`;
__p += '`),ce&&(j+=`' +
((__t = (`+ce+`)) == null ? '' : __t) +
'`),I=fr+G.length,G}),j+=`';
`;var $=ge.call(t,"variable")&&t.variable;if($){if(N1.test($))throw new $a(jr)}else j=`with (obj) {
`+j+`
}
`;j=(f?j.replace(b1,""):j).replace(Q1,"$1").replace(w1,"$1;"),j="function("+($||"obj")+`) {
`+($?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(f?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var ie=il(function(){return Rs(y,Z+"return "+j).apply(m,b)});if(ie.source=j,Wa(ie))throw ie;return ie}function y0(e){return me(e).toLowerCase()}function v0(e){return me(e).toUpperCase()}function _0(e,t,r){if(e=me(e),e&&(r||t===m))return te(e);if(!e||!(t=ht(t)))return e;var a=Xe(e),l=Xe(t);return ur(a,Ne(a,l),xe(a,l)+1).join("")}function b0(e,t,r){if(e=me(e),e&&(r||t===m))return e.slice(0,tr(e)+1);if(!e||!(t=ht(t)))return e;var a=Xe(e);return ur(a,0,xe(a,Xe(t))+1).join("")}function Q0(e,t,r){if(e=me(e),e&&(r||t===m))return e.replace(na,"");if(!e||!(t=ht(t)))return e;var a=Xe(e);return ur(a,Ne(a,Xe(t))).join("")}function w0(e,t){var r=Si,a=Hi;if(Ve(t)){var l="separator"in t?t.separator:l;r="length"in t?oe(t.length):r,a="omission"in t?ht(t.omission):a}e=me(e);var f=e.length;if(ye(e)){var g=Xe(e);f=g.length}if(r>=f)return e;var y=r-Me(a);if(y<1)return a;var b=g?ur(g,0,y).join(""):e.slice(0,y);if(l===m)return b+a;if(g&&(y+=b.length-y),ao(l)){if(e.slice(y).search(l)){var I,V=b;for(l.global||(l=Ga(l.source,me(Bo.exec(l))+"g")),l.lastIndex=0;I=l.exec(V);)var j=I.index;b=b.slice(0,j===m?y:j)}}else if(e.indexOf(ht(l),y)!=y){var M=b.lastIndexOf(l);M>-1&&(b=b.slice(0,M))}return b+a}function x0(e){return e=me(e),e&&x1.test(e)?e.replace(So,Ac):e}function Ts(e,t,r){return e=me(e),t=r?m:t,t===m?Tt(e)?Oi(e):k(e):e.match(t)||[]}function C0(e){var t=e==null?0:e.length,r=K();return e=t?x(e,function(a){if(typeof a[1]!="function")throw new Ct(Ie);return[r(a[0]),a[1]]}):[],se(function(a){for(var l=-1;++l<t;){var f=e[l];if(o(f[0],this,a))return o(f[1],this,a)}})}function A0(e){return ef(bt(e,Pe))}function Fa(e){return function(){return e}}function V0(e,t){return e==null||e!==e?t:e}function ft(e){return e}function Ba(e){return Au(typeof e=="function"?e:bt(e,Pe))}function L0(e){return Lu(bt(e,Pe))}function I0(e,t){return Iu(e,bt(t,Pe))}function Ua(e,t,r){var a=Be(t),l=Fn(t,a);r!=null||Ve(t)&&(l.length||!a.length)||(r=t,t=e,e=this,l=Fn(t,Be(t)));var f=!(Ve(r)&&"chain"in r&&!r.chain),g=Kt(e);return c(l,function(y){var b=t[y];e[y]=b,g&&(e.prototype[y]=function(){var I=this.__chain__;if(f||I){var V=e(this.__wrapped__);return(V.__actions__=st(this.__actions__)).push({func:b,args:arguments,thisArg:e}),V.__chain__=I,V}return b.apply(e,L([this.value()],arguments))})}),e}function E0(){return $e._===this&&($e._=Y0),this}function Za(){}function k0(e){return e=oe(e),se(function(t){return Eu(t,e)})}function qs(e){return Ra(e)?P(Wt(e)):vf(e)}function j0(e){return function(t){return e==null?m:wr(e,t)}}function za(){return[]}function Pa(){return!1}function T0(){return{}}function q0(){return""}function R0(){return!0}function D0(e,t){if(e=oe(e),e<1||e>Nt)return[];var r=vt,a=Ke(e,vt);t=K(t),e-=vt;for(var l=De(a,t);++r<e;)t(r);return l}function N0(e){return re(e)?x(e,Wt):mt(e)?[e]:st(Gs(me(e)))}function O0(e){var t=++$0;return me(e)+t}function M0(e){return e&&e.length?Hn(e,ft,ma):m}function W0(e,t){return e&&e.length?Hn(e,K(t,2),ma):m}function S0(e){return N(e,ft)}function H0(e,t){return N(e,K(t,2))}function F0(e){return e&&e.length?Hn(e,ft,_a):m}function B0(e,t){return e&&e.length?Hn(e,K(t,2),_a):m}function U0(e){return e&&e.length?Le(e,ft):0}function Z0(e,t){return e&&e.length?Le(e,K(t,2)):0}A=A==null?$e:Mr.defaults($e.Object(),A,Mr.pick($e,pc));var We=A.Array,oi=A.Date,$a=A.Error,Rs=A.Function,Br=A.Math,Qe=A.Object,Ga=A.RegExp,z0=A.String,Ct=A.TypeError,ui=We.prototype,P0=Rs.prototype,Ur=Qe.prototype,si=A["__core-js_shared__"],li=P0.toString,ge=Ur.hasOwnProperty,$0=0,Ds=function(){var e=/[^.]+$/.exec(si&&si.keys&&si.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ci=Ur.toString,G0=li.call(Qe),Y0=$e._,X0=Ga("^"+li.call(ge).replace(ra,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fi=lu?A.Buffer:m,sr=A.Symbol,di=A.Uint8Array,Ns=fi?fi.allocUnsafe:m,pi=H(Qe.getPrototypeOf,Qe),Os=Qe.create,Ms=Ur.propertyIsEnumerable,hi=ui.splice,Ws=sr?sr.isConcatSpreadable:m,_n=sr?sr.iterator:m,Ar=sr?sr.toStringTag:m,mi=function(){try{var e=xr(Qe,"defineProperty");return e({},"",{}),e}catch{}}(),K0=A.clearTimeout!==$e.clearTimeout&&A.clearTimeout,J0=oi&&oi.now!==$e.Date.now&&oi.now,e3=A.setTimeout!==$e.setTimeout&&A.setTimeout,gi=Br.ceil,yi=Br.floor,Ya=Qe.getOwnPropertySymbols,t3=fi?fi.isBuffer:m,Ss=A.isFinite,r3=ui.join,n3=H(Qe.keys,Qe),Se=Br.max,Ke=Br.min,i3=oi.now,a3=A.parseInt,Hs=Br.random,o3=ui.reverse,Xa=xr(A,"DataView"),bn=xr(A,"Map"),Ka=xr(A,"Promise"),Zr=xr(A,"Set"),Qn=xr(A,"WeakMap"),wn=xr(Qe,"create"),vi=Qn&&new Qn,zr={},u3=Cr(Xa),s3=Cr(bn),l3=Cr(Ka),c3=Cr(Zr),f3=Cr(Qn),_i=sr?sr.prototype:m,xn=_i?_i.valueOf:m,Fs=_i?_i.toString:m,Pr=function(){function e(){}return function(t){if(!Ve(t))return{};if(Os)return Os(t);e.prototype=t;var r=new e;return e.prototype=m,r}}();u.templateSettings={escape:A1,evaluate:V1,interpolate:Fo,variable:"",imports:{_:u}},u.prototype=S.prototype,u.prototype.constructor=u,Y.prototype=Pr(S.prototype),Y.prototype.constructor=Y,F.prototype=Pr(S.prototype),F.prototype.constructor=F,_r.prototype.clear=Ic,_r.prototype.delete=Ec,_r.prototype.get=kc,_r.prototype.has=jc,_r.prototype.set=Tc,zt.prototype.clear=qc,zt.prototype.delete=Rc,zt.prototype.get=Dc,zt.prototype.has=Nc,zt.prototype.set=Oc,Pt.prototype.clear=Mc,Pt.prototype.delete=Wc,Pt.prototype.get=Sc,Pt.prototype.has=Hc,Pt.prototype.set=Fc,br.prototype.add=br.prototype.push=Bc,br.prototype.has=Uc,kt.prototype.clear=Zc,kt.prototype.delete=zc,kt.prototype.get=Pc,kt.prototype.has=$c,kt.prototype.set=Gc;var lr=Bu(Ot),Bs=Bu(ha,!0),Ja=Uu(),Us=Uu(!0),Zs=vi?function(e,t){return vi.set(e,t),e}:ft,d3=mi?function(e,t){return mi(e,"toString",{configurable:!0,enumerable:!1,value:Fa(t),writable:!0})}:ft,p3=se,zs=K0||function(e){return $e.clearTimeout(e)},h3=Zr&&1/ne(new Zr([,-0]))[1]==Ft?function(e){return new Zr(e)}:Za,eo=vi?function(e){return vi.get(e)}:Za,to=Ya?function(e){return e==null?[]:(e=Qe(e),h(Ya(e),function(t){return Ms.call(e,t)}))}:za,Ps=Ya?function(e){for(var t=[];e;)L(t,to(e)),e=pi(e);return t}:za,Je=nt;(Xa&&Je(new Xa(new ArrayBuffer(1)))!=Nr||bn&&Je(new bn)!=It||Ka&&Je(Ka.resolve())!=Wo||Zr&&Je(new Zr)!=Et||Qn&&Je(new Qn)!=ln)&&(Je=function(e){var t=nt(e),r=t==Zt?e.constructor:m,a=r?Cr(r):"";if(a)switch(a){case u3:return Nr;case s3:return It;case l3:return Wo;case c3:return Et;case f3:return ln}return t});var m3=si?Kt:Pa,$s=ss(Zs),Cn=e3||function(e,t){return $e.setTimeout(e,t)},ro=ss(d3),Gs=Zf(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(E1,function(r,a,l,f){t.push(l?f.replace(O1,"$1"):a||r)}),t}),g3=se(function(e,t){return je(e)?dn(e,Ge(t,1,je,!0)):[]}),y3=se(function(e,t){var r=wt(t);return je(r)&&(r=m),je(e)?dn(e,Ge(t,1,je,!0),K(r,2)):[]}),v3=se(function(e,t){var r=wt(t);return je(r)&&(r=m),je(e)?dn(e,Ge(t,1,je,!0),m,r):[]}),_3=se(function(e){var t=x(e,Va);return t.length&&t[0]===e[0]?ga(t):[]}),b3=se(function(e){var t=wt(e),r=x(e,Va);return t===wt(r)?t=m:r.pop(),r.length&&r[0]===e[0]?ga(r,K(t,2)):[]}),Q3=se(function(e){var t=wt(e),r=x(e,Va);return t=typeof t=="function"?t:m,t&&r.pop(),r.length&&r[0]===e[0]?ga(r,m,t):[]}),w3=se(hs),x3=Yt(function(e,t){var r=e==null?0:e.length,a=pa(e,t);return Tu(e,x(t,function(l){return Xt(l,r)?+l:l}).sort(Su)),a}),C3=se(function(e){return ar(Ge(e,1,je,!0))}),A3=se(function(e){var t=wt(e);return je(t)&&(t=m),ar(Ge(e,1,je,!0),K(t,2))}),V3=se(function(e){var t=wt(e);return t=typeof t=="function"?t:m,ar(Ge(e,1,je,!0),m,t)}),L3=se(function(e,t){return je(e)?dn(e,t):[]}),I3=se(function(e){return Aa(h(e,je))}),E3=se(function(e){var t=wt(e);return je(t)&&(t=m),Aa(h(e,je),K(t,2))}),k3=se(function(e){var t=wt(e);return t=typeof t=="function"?t:m,Aa(h(e,je),m,t)}),j3=se(Ma),T3=se(function(e){var t=e.length,r=t>1?e[t-1]:m;return r=typeof r=="function"?(e.pop(),r):m,ms(e,r)}),q3=Yt(function(e){var t=e.length,r=t?e[0]:0,a=this.__wrapped__,l=function(f){return pa(f,e)};return!(t>1||this.__actions__.length)&&a instanceof F&&Xt(r)?(a=a.slice(r,+r+(t?1:0)),a.__actions__.push({func:ei,args:[l],thisArg:m}),new Y(a,this.__chain__).thru(function(f){return t&&!f.length&&f.push(m),f})):this.thru(l)}),R3=zn(function(e,t,r){ge.call(e,r)?++e[r]:$t(e,r,1)}),D3=zu(cs),N3=zu(fs),O3=zn(function(e,t,r){ge.call(e,r)?e[r].push(t):$t(e,r,[t])}),M3=se(function(e,t,r){var a=-1,l=typeof t=="function",f=lt(e)?We(e.length):[];return lr(e,function(g){f[++a]=l?o(t,g,r):pn(g,t,r)}),f}),W3=zn(function(e,t,r){$t(e,r,t)}),S3=zn(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),H3=se(function(e,t){if(e==null)return[];var r=t.length;return r>1&&it(e,t[0],t[1])?t=[]:r>2&&it(t[0],t[1],t[2])&&(t=[t[0]]),ku(e,Ge(t,1),[])}),bi=J0||function(){return $e.Date.now()},no=se(function(e,t,r){var a=tt;if(r.length){var l=U(r,Hr(no));a|=yt}return Gt(e,a,t,r,l)}),Ys=se(function(e,t,r){var a=tt|Ht;if(r.length){var l=U(r,Hr(Ys));a|=yt}return Gt(t,a,e,r,l)}),F3=se(function(e,t){return bu(e,1,t)}),B3=se(function(e,t,r){return bu(e,xt(t)||0,r)});ri.Cache=Pt;var U3=p3(function(e,t){t=t.length==1&&re(t[0])?x(t[0],he(K())):x(Ge(t,1),he(K()));var r=t.length;return se(function(a){for(var l=-1,f=Ke(a.length,r);++l<f;)a[l]=t[l].call(this,a[l]);return o(e,this,a)})}),io=se(function(e,t){return Gt(e,yt,m,t,U(t,Hr(io)))}),Xs=se(function(e,t){return Gt(e,ir,m,t,U(t,Hr(Xs)))}),Z3=Yt(function(e,t){return Gt(e,rt,m,m,m,t)}),z3=Yn(ma),P3=Yn(function(e,t){return e>=t}),Vr=xu(function(){return arguments}())?xu:function(e){return Ee(e)&&ge.call(e,"callee")&&!Ms.call(e,"callee")},re=We.isArray,$3=cu?he(cu):sf,cr=t3||Pa,G3=fu?he(fu):lf,Ks=du?he(du):ff,ao=pu?he(pu):df,Js=hu?he(hu):pf,$r=mu?he(mu):hf,Y3=Yn(_a),X3=Yn(function(e,t){return e<=t}),K3=Wr(function(e,t){if(yn(t)||lt(t))return Mt(t,Be(t),e),m;for(var r in t)ge.call(t,r)&&fn(e,r,t[r])}),el=Wr(function(e,t){Mt(t,ct(t),e)}),Qi=Wr(function(e,t,r,a){Mt(t,ct(t),e,a)}),J3=Wr(function(e,t,r,a){Mt(t,Be(t),e,a)}),e2=Yt(pa),t2=se(function(e,t){e=Qe(e);var r=-1,a=t.length,l=a>2?t[2]:m;for(l&&it(t[0],t[1],l)&&(a=1);++r<a;)for(var f=t[r],g=ct(f),y=-1,b=g.length;++y<b;){var I=g[y],V=e[I];(V===m||jt(V,Ur[I])&&!ge.call(e,I))&&(e[I]=f[I])}return e}),r2=se(function(e){return e.push(m,Ju),o(tl,m,e)}),n2=$u(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ci.call(t)),e[t]=r},Fa(ft)),i2=$u(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=ci.call(t)),ge.call(e,t)?e[t].push(r):e[t]=[r]},K),a2=se(pn),o2=Wr(function(e,t,r){Bn(e,t,r)}),tl=Wr(function(e,t,r,a){Bn(e,t,r,a)}),u2=Yt(function(e,t){var r={};if(e==null)return r;var a=!1;t=x(t,function(f){return f=or(f,e),a||(a=f.length>1),f}),Mt(e,Ta(e),r),a&&(r=bt(r,Pe|qr|qt,qf));for(var l=t.length;l--;)Ca(r,t[l]);return r}),s2=Yt(function(e,t){return e==null?{}:yf(e,t)}),rl=Xu(Be),nl=Xu(ct),l2=Sr(function(e,t,r){return t=t.toLowerCase(),e+(r?ks(t):t)}),c2=Sr(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),f2=Sr(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),d2=Zu("toLowerCase"),p2=Sr(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),h2=Sr(function(e,t,r){return e+(r?" ":"")+oo(t)}),m2=Sr(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),oo=Zu("toUpperCase"),il=se(function(e,t){try{return o(e,m,t)}catch(r){return Wa(r)?r:new $a(r)}}),g2=Yt(function(e,t){return c(t,function(r){r=Wt(r),$t(e,r,no(e[r],e))}),e}),y2=Pu(),v2=Pu(!0),_2=se(function(e,t){return function(r){return pn(r,e,t)}}),b2=se(function(e,t){return function(r){return pn(e,r,t)}}),Q2=Ea(x),w2=Ea(p),x2=Ea(T),C2=Gu(),A2=Gu(!0),V2=$n(function(e,t){return e+t},0),L2=ka("ceil"),I2=$n(function(e,t){return e/t},1),E2=ka("floor"),k2=$n(function(e,t){return e*t},1),j2=ka("round"),T2=$n(function(e,t){return e-t},0);return u.after=ip,u.ary=_s,u.assign=K3,u.assignIn=el,u.assignInWith=Qi,u.assignWith=J3,u.at=e2,u.before=bs,u.bind=no,u.bindAll=g2,u.bindKey=Ys,u.castArray=dp,u.chain=gs,u.chunk=Xf,u.compact=Kf,u.concat=Jf,u.cond=C0,u.conforms=A0,u.constant=Fa,u.countBy=R3,u.create=Dp,u.curry=Qs,u.curryRight=ws,u.debounce=xs,u.defaults=t2,u.defaultsDeep=r2,u.defer=F3,u.delay=B3,u.difference=g3,u.differenceBy=y3,u.differenceWith=v3,u.drop=ed,u.dropRight=td,u.dropRightWhile=rd,u.dropWhile=nd,u.fill=id,u.filter=Ud,u.flatMap=Zd,u.flatMapDeep=zd,u.flatMapDepth=Pd,u.flatten=ds,u.flattenDeep=ad,u.flattenDepth=od,u.flip=ap,u.flow=y2,u.flowRight=v2,u.fromPairs=ud,u.functions=Fp,u.functionsIn=Bp,u.groupBy=O3,u.initial=ld,u.intersection=_3,u.intersectionBy=b3,u.intersectionWith=Q3,u.invert=n2,u.invertBy=i2,u.invokeMap=M3,u.iteratee=Ba,u.keyBy=W3,u.keys=Be,u.keysIn=ct,u.map=ti,u.mapKeys=Zp,u.mapValues=zp,u.matches=L0,u.matchesProperty=I0,u.memoize=ri,u.merge=o2,u.mergeWith=tl,u.method=_2,u.methodOf=b2,u.mixin=Ua,u.negate=ni,u.nthArg=k0,u.omit=u2,u.omitBy=Pp,u.once=op,u.orderBy=Gd,u.over=Q2,u.overArgs=U3,u.overEvery=w2,u.overSome=x2,u.partial=io,u.partialRight=Xs,u.partition=S3,u.pick=s2,u.pickBy=Es,u.property=qs,u.propertyOf=j0,u.pull=w3,u.pullAll=hs,u.pullAllBy=pd,u.pullAllWith=hd,u.pullAt=x3,u.range=C2,u.rangeRight=A2,u.rearg=Z3,u.reject=Kd,u.remove=md,u.rest=up,u.reverse=Oa,u.sampleSize=ep,u.set=Gp,u.setWith=Yp,u.shuffle=tp,u.slice=gd,u.sortBy=H3,u.sortedUniq=xd,u.sortedUniqBy=Cd,u.split=h0,u.spread=sp,u.tail=Ad,u.take=Vd,u.takeRight=Ld,u.takeRightWhile=Id,u.takeWhile=Ed,u.tap=Dd,u.throttle=lp,u.thru=ei,u.toArray=Vs,u.toPairs=rl,u.toPairsIn=nl,u.toPath=N0,u.toPlainObject=Is,u.transform=Xp,u.unary=cp,u.union=C3,u.unionBy=A3,u.unionWith=V3,u.uniq=kd,u.uniqBy=jd,u.uniqWith=Td,u.unset=Kp,u.unzip=Ma,u.unzipWith=ms,u.update=Jp,u.updateWith=e0,u.values=Fr,u.valuesIn=t0,u.without=L3,u.words=Ts,u.wrap=fp,u.xor=I3,u.xorBy=E3,u.xorWith=k3,u.zip=j3,u.zipObject=qd,u.zipObjectDeep=Rd,u.zipWith=T3,u.entries=rl,u.entriesIn=nl,u.extend=el,u.extendWith=Qi,Ua(u,u),u.add=V2,u.attempt=il,u.camelCase=l2,u.capitalize=ks,u.ceil=L2,u.clamp=r0,u.clone=pp,u.cloneDeep=mp,u.cloneDeepWith=gp,u.cloneWith=hp,u.conformsTo=yp,u.deburr=js,u.defaultTo=V0,u.divide=I2,u.endsWith=a0,u.eq=jt,u.escape=o0,u.escapeRegExp=u0,u.every=Bd,u.find=D3,u.findIndex=cs,u.findKey=Np,u.findLast=N3,u.findLastIndex=fs,u.findLastKey=Op,u.floor=E2,u.forEach=ys,u.forEachRight=vs,u.forIn=Mp,u.forInRight=Wp,u.forOwn=Sp,u.forOwnRight=Hp,u.get=Sa,u.gt=z3,u.gte=P3,u.has=Up,u.hasIn=Ha,u.head=ps,u.identity=ft,u.includes=$d,u.indexOf=sd,u.inRange=n0,u.invoke=a2,u.isArguments=Vr,u.isArray=re,u.isArrayBuffer=$3,u.isArrayLike=lt,u.isArrayLikeObject=je,u.isBoolean=vp,u.isBuffer=cr,u.isDate=G3,u.isElement=_p,u.isEmpty=bp,u.isEqual=Qp,u.isEqualWith=wp,u.isError=Wa,u.isFinite=xp,u.isFunction=Kt,u.isInteger=Cs,u.isLength=ii,u.isMap=Ks,u.isMatch=Cp,u.isMatchWith=Ap,u.isNaN=Vp,u.isNative=Lp,u.isNil=Ep,u.isNull=Ip,u.isNumber=As,u.isObject=Ve,u.isObjectLike=Ee,u.isPlainObject=vn,u.isRegExp=ao,u.isSafeInteger=kp,u.isSet=Js,u.isString=ai,u.isSymbol=mt,u.isTypedArray=$r,u.isUndefined=jp,u.isWeakMap=Tp,u.isWeakSet=qp,u.join=cd,u.kebabCase=c2,u.last=wt,u.lastIndexOf=fd,u.lowerCase=f2,u.lowerFirst=d2,u.lt=Y3,u.lte=X3,u.max=M0,u.maxBy=W0,u.mean=S0,u.meanBy=H0,u.min=F0,u.minBy=B0,u.stubArray=za,u.stubFalse=Pa,u.stubObject=T0,u.stubString=q0,u.stubTrue=R0,u.multiply=k2,u.nth=dd,u.noConflict=E0,u.noop=Za,u.now=bi,u.pad=s0,u.padEnd=l0,u.padStart=c0,u.parseInt=f0,u.random=i0,u.reduce=Yd,u.reduceRight=Xd,u.repeat=d0,u.replace=p0,u.result=$p,u.round=j2,u.runInContext=_,u.sample=Jd,u.size=rp,u.snakeCase=p2,u.some=np,u.sortedIndex=yd,u.sortedIndexBy=vd,u.sortedIndexOf=_d,u.sortedLastIndex=bd,u.sortedLastIndexBy=Qd,u.sortedLastIndexOf=wd,u.startCase=h2,u.startsWith=m0,u.subtract=T2,u.sum=U0,u.sumBy=Z0,u.template=g0,u.times=D0,u.toFinite=Jt,u.toInteger=oe,u.toLength=Ls,u.toLower=y0,u.toNumber=xt,u.toSafeInteger=Rp,u.toString=me,u.toUpper=v0,u.trim=_0,u.trimEnd=b0,u.trimStart=Q0,u.truncate=w0,u.unescape=x0,u.uniqueId=O0,u.upperCase=m2,u.upperFirst=oo,u.each=ys,u.eachRight=vs,u.first=ps,Ua(u,function(){var e={};return Ot(u,function(t,r){ge.call(u.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),u.VERSION=Mi,c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){u[e].placeholder=u}),c(["drop","take"],function(e,t){F.prototype[e]=function(r){r=r===m?1:Se(oe(r),0);var a=this.__filtered__&&!t?new F(this):this.clone();return a.__filtered__?a.__takeCount__=Ke(r,a.__takeCount__):a.__views__.push({size:Ke(r,vt),type:e+(a.__dir__<0?"Right":"")}),a},F.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),c(["filter","map","takeWhile"],function(e,t){var r=t+1,a=r==Dt||r==gr;F.prototype[e]=function(l){var f=this.clone();return f.__iteratees__.push({iteratee:K(l,3),type:r}),f.__filtered__=f.__filtered__||a,f}}),c(["head","last"],function(e,t){var r="take"+(t?"Right":"");F.prototype[e]=function(){return this[r](1).value()[0]}}),c(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");F.prototype[e]=function(){return this.__filtered__?new F(this):this[r](1)}}),F.prototype.compact=function(){return this.filter(ft)},F.prototype.find=function(e){return this.filter(e).head()},F.prototype.findLast=function(e){return this.reverse().find(e)},F.prototype.invokeMap=se(function(e,t){return typeof e=="function"?new F(this):this.map(function(r){return pn(r,e,t)})}),F.prototype.reject=function(e){return this.filter(ni(K(e)))},F.prototype.slice=function(e,t){e=oe(e);var r=this;return r.__filtered__&&(e>0||t<0)?new F(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==m&&(t=oe(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},F.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},F.prototype.toArray=function(){return this.take(vt)},Ot(F.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),l=u[a?"take"+(t=="last"?"Right":""):t],f=a||/^find/.test(t);l&&(u.prototype[t]=function(){var g=this.__wrapped__,y=a?[1]:arguments,b=g instanceof F,I=y[0],V=b||re(g),j=function(le){var ce=l.apply(u,L([le],y));return a&&M?ce[0]:ce};V&&r&&typeof I=="function"&&I.length!=1&&(b=V=!1);var M=this.__chain__,Z=!!this.__actions__.length,$=f&&!M,ie=b&&!Z;if(!f&&V){g=ie?g:new F(this);var G=e.apply(g,y);return G.__actions__.push({func:ei,args:[j],thisArg:m}),new Y(G,M)}return $&&ie?e.apply(this,y):(G=this.thru(j),$?a?G.value()[0]:G.value():G)})}),c(["pop","push","shift","sort","splice","unshift"],function(e){var t=ui[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);u.prototype[e]=function(){var l=arguments;if(a&&!this.__chain__){var f=this.value();return t.apply(re(f)?f:[],l)}return this[r](function(g){return t.apply(re(g)?g:[],l)})}}),Ot(F.prototype,function(e,t){var r=u[t];if(r){var a=r.name+"";ge.call(zr,a)||(zr[a]=[]),zr[a].push({name:t,func:r})}}),zr[Pn(m,Ht).name]=[{name:"wrapper",func:m}],F.prototype.clone=ut,F.prototype.reverse=fa,F.prototype.value=Lc,u.prototype.at=q3,u.prototype.chain=Nd,u.prototype.commit=Od,u.prototype.next=Md,u.prototype.plant=Sd,u.prototype.reverse=Hd,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=Fd,u.prototype.first=u.prototype.head,_n&&(u.prototype[_n]=Wd),u},Mr=Vc();vr?((vr.exports=Mr)._=Mr,la._=Mr):$e._=Mr}).call(Vn)})(Ai,Ai.exports);var M2=Ai.exports,Bl={};(function(n){n.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},n.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},n.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},n.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},n.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},n.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},n.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},n.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},n.realToAlias=function(){var i=Object.prototype.hasOwnProperty,o=n.aliasToReal,s={};for(var c in o){var d=o[c];i.call(s,d)?s[d].push(c):s[d]=[c]}return s}(),n.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},n.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},n.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}})(Bl);var W2={},He=Bl,S2=W2,ul=Array.prototype.push;function H2(n,i){return i==2?function(o,s){return n.apply(void 0,arguments)}:function(o){return n.apply(void 0,arguments)}}function so(n,i){return i==2?function(o,s){return n(o,s)}:function(o){return n(o)}}function sl(n){for(var i=n?n.length:0,o=Array(i);i--;)o[i]=n[i];return o}function F2(n){return function(i){return n({},i)}}function B2(n,i){return function(){for(var o=arguments.length,s=o-1,c=Array(o);o--;)c[o]=arguments[o];var d=c[i],p=c.slice(0,i);return d&&ul.apply(p,d),i!=s&&ul.apply(p,c.slice(i+1)),n.apply(this,p)}}function lo(n,i){return function(){var o=arguments.length;if(o){for(var s=Array(o);o--;)s[o]=arguments[o];var c=s[0]=i.apply(void 0,s);return n.apply(void 0,s),c}}}function go(n,i,o,s){var c=typeof i=="function",d=i===Object(i);if(d&&(s=o,o=i,i=void 0),o==null)throw new TypeError;s||(s={});var p={cap:"cap"in s?s.cap:!0,curry:"curry"in s?s.curry:!0,fixed:"fixed"in s?s.fixed:!0,immutable:"immutable"in s?s.immutable:!0,rearg:"rearg"in s?s.rearg:!0},h=c?o:S2,w="curry"in s&&s.curry,C="fixed"in s&&s.fixed,x="rearg"in s&&s.rearg,L=c?o.runInContext():void 0,R=c?o:{ary:n.ary,assign:n.assign,clone:n.clone,curry:n.curry,forEach:n.forEach,isArray:n.isArray,isError:n.isError,isFunction:n.isFunction,isWeakMap:n.isWeakMap,iteratee:n.iteratee,keys:n.keys,rearg:n.rearg,toInteger:n.toInteger,toPath:n.toPath},D=R.ary,T=R.assign,B=R.clone,k=R.curry,q=R.forEach,ee=R.isArray,X=R.isError,ae=R.isFunction,pe=R.isWeakMap,N=R.keys,P=R.rearg,W=R.toInteger,J=R.toPath,fe=N(He.aryMethod),Le={castArray:function(z){return function(){var O=arguments[0];return ee(O)?z(sl(O)):z.apply(void 0,arguments)}},iteratee:function(z){return function(){var O=arguments[0],H=arguments[1],U=z(O,H),ne=U.length;return p.cap&&typeof H=="number"?(H=H>2?H-2:1,ne&&ne<=H?U:so(U,H)):U}},mixin:function(z){return function(O){var H=this;if(!ae(H))return z(H,Object(O));var U=[];return q(N(O),function(ne){ae(O[ne])&&U.push([ne,H.prototype[ne]])}),z(H,Object(O)),q(U,function(ne){var Oe=ne[1];ae(Oe)?H.prototype[ne[0]]=Oe:delete H.prototype[ne[0]]}),H}},nthArg:function(z){return function(O){var H=O<0?1:W(O)+1;return k(z(O),H)}},rearg:function(z){return function(O,H){var U=H?H.length:0;return k(z(O,H),U)}},runInContext:function(z){return function(O){return go(n,z(O),s)}}};function De(z,O){if(p.cap){var H=He.iterateeRearg[z];if(H)return Ae(O,H);var U=!c&&He.iterateeAry[z];if(U)return xe(O,U)}return O}function ue(z,O,H){return w||p.curry&&H>1?k(O,H):O}function te(z,O,H){if(p.fixed&&(C||!He.skipFixed[z])){var U=He.methodSpread[z],ne=U&&U.start;return ne===void 0?D(O,H):B2(O,ne)}return O}function he(z,O,H){return p.rearg&&H>1&&(x||!He.skipRearg[z])?P(O,He.methodRearg[z]||He.aryRearg[H]):O}function Ce(z,O){O=J(O);for(var H=-1,U=O.length,ne=U-1,Oe=B(Object(z)),Fe=Oe;Fe!=null&&++H<U;){var ze=O[H],Me=Fe[ze];Me!=null&&!(ae(Me)||X(Me)||pe(Me))&&(Fe[ze]=B(H==ne?Me:Object(Me))),Fe=Fe[ze]}return Oe}function qe(z){return ye.runInContext.convert(z)(void 0)}function Ne(z,O){var H=He.aliasToReal[z]||z,U=He.remap[H]||H,ne=s;return function(Oe){var Fe=c?L:R,ze=c?L[U]:O,Me=T(T({},ne),Oe);return go(Fe,H,ze,Me)}}function xe(z,O){return Ze(z,function(H){return typeof H=="function"?so(H,O):H})}function Ae(z,O){return Ze(z,function(H){var U=O.length;return H2(P(so(H,U),O),U)})}function Ze(z,O){return function(){var H=arguments.length;if(!H)return z();for(var U=Array(H);H--;)U[H]=arguments[H];var ne=p.rearg?0:H-1;return U[ne]=O(U[ne]),z.apply(void 0,U)}}function Er(z,O,H){var U,ne=He.aliasToReal[z]||z,Oe=O,Fe=Le[ne];return Fe?Oe=Fe(O):p.immutable&&(He.mutate.array[ne]?Oe=lo(O,sl):He.mutate.object[ne]?Oe=lo(O,F2(O)):He.mutate.set[ne]&&(Oe=lo(O,Ce))),q(fe,function(ze){return q(He.aryMethod[ze],function(Me){if(ne==Me){var Xe=He.methodSpread[ne],tr=Xe&&Xe.afterRearg;return U=tr?te(ne,he(ne,Oe,ze),ze):he(ne,te(ne,Oe,ze),ze),U=De(ne,U),U=ue(ne,U,ze),!1}}),!U}),U||(U=Oe),U==O&&(U=w?k(U,1):function(){return O.apply(this,arguments)}),U.convert=Ne(ne,O),U.placeholder=O.placeholder=H,U}if(!d)return Er(i,o,h);var ye=o,Tt=[];return q(fe,function(z){q(He.aryMethod[z],function(O){var H=ye[He.remap[O]||O];H&&Tt.push([O,Er(O,H,ye)])})}),q(N(ye),function(z){var O=ye[z];if(typeof O=="function"){for(var H=Tt.length;H--;)if(Tt[H][0]==z)return;O.convert=Ne(z,O),Tt.push([z,O])}}),q(Tt,function(z){ye[z[0]]=z[1]}),ye.convert=qe,ye.placeholder=ye,q(N(ye),function(z){q(He.realToAlias[z]||[],function(O){ye[O]=ye[z]})}),ye}var U2=go,ll=M2.runInContext(),Z2=U2(ll,ll);const Q=q2(Z2),z2=/(<([^>]+)>)/gi,P2=/<(\/)?div(\/?\s?)>/gi,$2=n=>n.map(i=>`<div>${i===""?"<br/>":i}</div>`).join(""),G2=n=>{const i=document.createElement("textarea");return i.innerHTML=n,i.value},Y2=n=>Q.flow(i=>G2(i),i=>i.split("<div>"),Q.flatMap(i=>{const o=i.replaceAll(P2,"");return o===""?void 0:o.replaceAll(z2,"")}),Q.reject(Q.isUndefined))(n),Ul=n=>n*180/Math.PI,wi=(n,i)=>i[0]>=n.x&&i[0]<=n.x+n.width&&i[1]>=n.y&&i[1]<=n.y+n.height,Xr=({origin:n=[0,0],point:i,rotation:o})=>{const s=[i[0]-n[0],i[1]-n[1]],c=s[1]*Math.cos(o)-s[0]*Math.sin(o);return[s[1]*Math.sin(o)+s[0]*Math.cos(o)+n[0],c+n[1]]},cl=(n,i,o=!0)=>{const s=Math.atan2(i[1]-n[1],i[0]-n[0]);return o?s:Ul(s)},Vi=(n,i,o,s,c=1)=>{const{clientX:d,clientY:p}=Q.getOr(Q.getOr(n,"changedTouches[0]",n),"touches[0]",n),h=(i==null?void 0:i.getBoundingClientRect())??{left:0,top:0,width:o,height:s};return[(d-h.left)*(o/h.width)/c,(p-h.top)*(s/h.height)/c]},rn=(n,i,[o,s],[c,d])=>Xr({origin:[o-c,s-d],point:n,rotation:i}),ko=(n,i,[o,s],[c,d])=>Xr({origin:[o-c,s-d],point:n,rotation:-i}),Li=(n,i,o,s,c=1,d=!1)=>{if(n.locked)return!1;const p=Math.min(1,c),{borders:h,center:w}=Re(n,s),C=rn(i,n.rotation,w,o);if(d)if(n.type==="line"||n.type==="polygon"||n.type==="curve"){for(let x=0;x<n.points.length;x++)if(wi({x:n.points[x][0]-Te/2/p,y:n.points[x][1]-Te/2/p,width:Te/p,height:Te/p},C))return{mode:"resize",anchor:x}}else{if(wi({x:h.x+h.width/2-Te/2/p,y:h.y-Te/p-mo/p,width:Te/p,height:Te/p},C))return{mode:"rotate"};for(const x of Wl)if(wi({x:h.x+h.width*x[0]-Te/2/p,y:h.y+h.height*x[1]-Te/2/p,width:Te/p,height:Te/p},C))return{mode:"resize",anchor:x}}return wi(h,C)?{mode:"translate"}:!1},X2=(n,i)=>({toolId:n.id,type:n.type,id:Q.uniqueId(`${n.type}_`),x:i[0],y:i[1],width:1,height:1,rotation:0,style:{globalAlpha:n.settings.opacity.default,fillColor:n.settings.fillColor.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default}}),Ii=(n,i)=>{var o,s;St(n,i.style),n.globalAlpha!==0&&(n.beginPath(),n.rect(i.x,i.y,i.width,i.height),((o=i.style)==null?void 0:o.fillColor)!=="transparent"&&n.fill(),((s=i.style)==null?void 0:s.strokeColor)!=="transparent"&&n.stroke())},Zl=(n,i)=>({x:n.x-i,width:n.width+i*2,y:n.y-i,height:n.height+i*2}),tn=(n,i,o,s,[c,d]=[!1,!1])=>{const p=n[0]===.5?o.x+o.width/2:n[0]===0?o.x+(c?0:o.width):o.x+(c?o.width:0),h=n[1]===.5?o.y+o.height/2:n[1]===0?o.y+(d?0:o.height):o.y+(d?o.height:0);return ko([p,h],o.rotation,i,s)},jo=(n,i,o,s,c,d=!1)=>{const{center:p,borders:h}=Re(o,c),w=rn(n,o.rotation,p,i),C=s.anchor[0]===.5?o.width:s.anchor[0]===0?h.x+h.width-w[0]+c*-2:w[0]-h.x-c*2,x=s.anchor[1]===.5?o.height:s.anchor[1]===0?h.y+h.height-w[1]+c*-2:w[1]-h.y-c*2,[L,R]=d?To(o.width,o.height,C,x):[C,x],D={...o,width:Math.abs(L),height:Math.abs(R)},{center:T}=Re(D,c),[B,k]=tn(s.anchor,p,o,i),[q,ee]=tn(s.anchor,T,D,i,[L<0,R<0]);return{...D,x:D.x-(q-B),y:D.y-(ee-k)}},K2=(n,i)=>({toolId:n.id,type:n.type,id:Q.uniqueId(`${n.type}_`),points:[[i]],rotation:0,style:{globalAlpha:n.settings.opacity.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default}}),J2=(n,i)=>{var o;i.points.length<1||(St(n,i.style),n.beginPath(),!(((o=i.style)==null?void 0:o.strokeColor)==="transparent"||n.globalAlpha===0)&&(i.points.forEach(s=>{s.length===1?n.rect(s[0][0],s[0][1],1,1):(n.moveTo(...s[0]),s.slice(1).forEach(c=>{n.lineTo(...c)}))}),n.stroke()))},e5=(n,i)=>{const o=Q.flatMap(h=>h,n.points),s=Q.flow(Q.map(h=>h[0]),Q.min,Q.add(-i))(o),c=Q.flow(Q.map(h=>h[0]),Q.max,Q.add(i))(o),d=Q.flow(Q.map(h=>h[1]),Q.min,Q.add(-i))(o),p=Q.flow(Q.map(h=>h[1]),Q.max,Q.add(i))(o);return{x:s,width:c-s,y:d,height:p-d}},t5=(n,i,o,s,c,d)=>{const{center:p,borders:h}=Re(o,c),w=rn(n,o.rotation,p,i),C=s.anchor[0]===.5?1:s.anchor[0]===0?(h.x+h.width-w[0]+c*-2)/(h.width+c*-2):(w[0]-h.x-c*2)/(h.width-c*2),x=s.anchor[1]===.5?1:s.anchor[1]===0?(h.y+h.height-w[1]+c*-2)/(h.height+c*-2):(w[1]-h.y-c*2)/(h.height-c*2),[L,R]=d?To(1,1,C,x):[C,x],D={...o,points:o.points.map(ae=>ae.map(pe=>[(pe[0]-h.x)*L+h.x,(pe[1]-h.y)*R+h.y]))},{center:T,borders:B}=Re(D,c),[k,q]=tn(s.anchor,p,{...o,...h},i),[ee,X]=tn(s.anchor,T,{...D,...B},i,[L<0,R<0]);return{...D,points:D.points.map(ae=>ae.map(([pe,N])=>[pe-(ee-k),N-(X-q)]))}},r5=(n,i)=>({...n,points:Q.set(n.points.length-1,[...n.points[n.points.length-1],[Math.round(i[0]),Math.round(i[1])]],n.points)}),n5=(n,i)=>({...n,points:Q.set(n.points.length,[[Math.round(i[0]),Math.round(i[1])]],n.points)}),dr=300,To=(n,i,o,s)=>{const c=n/i,d=o/s;return d>c||s<0?o>n?[o,o/c]:[s*c,s]:d<c?s>i?[s*c,s]:[o,o/c]:[o,s]},pt=(n,i)=>{const o=n>=0?Lr[i-1]:-Lr[i-1];return i?n+o/2-(n+o/2)%o:Math.round(n)},i5=(n,i)=>{const o=n.points.length;if(o===i)return n;if(o>i){const s=n.points.slice(0,i);return{...n,points:s,style:{...n.style,pointsCount:s.length}}}else{const s=i-o,c=Q.flow(Q.range(0),Q.map(p=>[n.points[0][0]+(n.points[1][0]-n.points[0][0])*(p+1)/(s+1),n.points[0][1]+(n.points[1][1]-n.points[0][1])*(p+1)/(s+1)]))(s),d=[n.points[0],...c,...n.points.slice(1,n.points.length)];return{...n,points:d,style:{...n.style,pointsCount:d.length}}}},a5=(n,i,o,s,c,d,p,h)=>{switch(d.mode){case"brush":return r5(i,o);case"translate":return Oo(o,d.originalShape,d.cursorStartPosition,s);case"rotate":return xh(i,o,d.originalShape,d.cursorStartPosition,d.center,s);case"resize":const w=[pt(o[0],s),pt(o[1],s)];return Ch(n,i,w,c,d.originalShape,d,p,h);default:return i}},o5=(n,i,o,s,c=!1)=>{if(!n||!i||!s||!o)return[dr,dr];const d=n/i,p=o/s;if(d>p){const h=c?o:Math.min(n,o);return[h,h/d]}else{const h=c?s:Math.min(i,s);return[h*d,h]}},u5=(n,i)=>({toolId:n.id,type:n.type,id:Q.uniqueId(`${n.type}_`),x:i[0],y:i[1],radius:1,rotation:0,style:{globalAlpha:n.settings.opacity.default,fillColor:n.settings.fillColor.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default}}),Ei=(n,i)=>{var o,s;St(n,i.style),n.beginPath(),n.arc(i.x,i.y,i.radius,0,2*Math.PI),((o=i.style)==null?void 0:o.fillColor)!=="transparent"&&n.fill(),((s=i.style)==null?void 0:s.strokeColor)!=="transparent"&&n.stroke()},s5=(n,i)=>({x:n.x-n.radius-i,width:(n.radius+i)*2,y:n.y-n.radius-i,height:(n.radius+i)*2}),fl=(n,i,o,s,[c,d]=[!1,!1])=>{const p=n[0]===.5?o.x:n[0]===0?o.x+(c?-o.radius:o.radius):o.x+(c?o.radius:-o.radius),h=n[1]===.5?o.y:n[1]===0?o.y+(d?-o.radius:o.radius):o.y+(d?o.radius:-o.radius);return ko([p,h],o.rotation,i,s)},l5=(n,i,o,s,c)=>{const{center:d,borders:p}=Re(o,c),h=rn(n,o.rotation,d,i),w=[h[0],h[1]],C=s.anchor[1]===.5?(s.anchor[0]===0?p.x+p.width-w[0]+c*(s.anchor[0]===0?-2:2):w[0]-p.x-c*(s.anchor[0]===0?-2:2))/2:(s.anchor[1]===0?p.y+p.height-w[1]+c*(s.anchor[1]===0?-2:2):w[1]-p.y-c*(s.anchor[1]===0?-2:2))/2,x={...o,radius:Math.abs(C)},{center:L}=Re(x,c),[R,D]=fl(s.anchor,d,o,i),[T,B]=fl(s.anchor,L,x,i,[C<0,C<0]);return{...x,x:x.x-(T-R),y:x.y-(B-D)}},dl=(n,i)=>{var o,s;St(n,i.style),n.globalAlpha!==0&&(n.beginPath(),n.moveTo(...i.points[0]),n.lineTo(...i.points[1]),n.lineTo(...i.points[2]),n.lineTo(...i.points[0]),((o=i.style)==null?void 0:o.fillColor)!=="transparent"&&n.fill(),((s=i.style)==null?void 0:s.strokeColor)!=="transparent"&&n.stroke())},c5=(n,i)=>({toolId:n.id,type:n.type,id:Q.uniqueId(`${n.type}_`),points:[i,i],rotation:0,style:{globalAlpha:n.settings.opacity.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default,lineArrow:n.settings.lineArrow.default}}),pl=(n,i,o)=>{var c,d,p,h,w,C;const s=[Xr({point:[0,-(10+(((c=o.style)==null?void 0:c.lineWidth)??0)*1)],rotation:i}),Xr({point:[-(5+(((d=o.style)==null?void 0:d.lineWidth)??0)*1),5+(((p=o.style)==null?void 0:p.lineWidth)??0)*2],rotation:i}),Xr({point:[5+(((h=o.style)==null?void 0:h.lineWidth)??0)*1,5+(((w=o.style)==null?void 0:w.lineWidth)??0)*2],rotation:i})];return{points:[[n[0]+s[0][0],n[1]+s[0][1]],[n[0]+s[1][0],n[1]+s[1][1]],[n[0]+s[2][0],n[1]+s[2][1]]],style:{...o.style,fillColor:(C=o.style)==null?void 0:C.strokeColor,strokeColor:"transparent"}}},zl=(n,i)=>{var o,s,c,d,p,h;if(St(n,i.style),n.globalAlpha!==0){if(n.beginPath(),n.moveTo(...i.points[0]),n.lineTo(...i.points[1]),((o=i.style)==null?void 0:o.fillColor)!=="transparent"&&n.fill(),((s=i.style)==null?void 0:s.strokeColor)!=="transparent"&&n.stroke(),((c=i.style)==null?void 0:c.lineArrow)===1||((d=i.style)==null?void 0:d.lineArrow)===3){const w=Math.PI/2-cl(i.points[0],i.points[1]);dl(n,pl(i.points[0],w,{style:i.style}))}if(((p=i.style)==null?void 0:p.lineArrow)===2||((h=i.style)==null?void 0:h.lineArrow)===3){const w=Math.PI/2-cl(i.points[1],i.points[0]);dl(n,pl(i.points[1],w,{style:i.style}))}}},f5=(n,i)=>{const o=Math.min(n.points[0][0],n.points[1][0])-i,s=Math.abs(n.points[0][0]-n.points[1][0])+i*2,c=Math.min(n.points[0][1],n.points[1][1])-i,d=Math.abs(n.points[0][1]-n.points[1][1])+i*2;return{x:o,width:s,y:c,height:d}},d5=(n,i,o,s,c)=>{const{center:d}=Re(o,c),p=rn(n,o.rotation,d,i);return Q.set(["points",s.anchor],p,o)},p5=({ctx:n,shape:i,withAnchors:o,selectionPadding:s,selectionWidth:c,selectionColor:d,currentScale:p=1})=>{const{borders:h}=Re(i,s);if(Ii(n,{...h,style:{fillColor:"transparent",strokeColor:d,lineWidth:c/p}}),!(!o||i.locked))for(let w=0;w<i.points.length;w++){const C=i.points[w];i.type==="curve"&&w>0&&w<i.points.length-1?Ii(n,{x:C[0]-Te/2,y:C[1]-Te/2,width:Te/p,height:Te/p,style:{fillColor:"rgb(255,255,255)",strokeColor:"rgb(150,150,150)",lineWidth:c/p}}):Ei(n,{x:C[0],y:C[1],radius:Te/2/p,style:{fillColor:"rgb(255,255,255)",strokeColor:"rgb(150,150,150)",lineWidth:c/p}})}},h5=(n,i)=>({toolId:n.id,type:n.type,id:Q.uniqueId(`${n.type}_`),points:Q.flow(Q.range(0),Q.map(()=>i))(n.settings.pointsCount.default),rotation:0,style:{globalAlpha:n.settings.opacity.default,fillColor:n.settings.fillColor.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default,pointsCount:n.settings.pointsCount.default}}),m5=(n,i)=>{var o,s;i.points.length<1||(St(n,i.style),n.globalAlpha!==0&&(n.beginPath(),n.moveTo(...i.points[0]),i.points.slice(1).forEach(c=>{n.lineTo(...c)}),n.lineTo(...i.points[0]),((o=i.style)==null?void 0:o.fillColor)!=="transparent"&&n.fill(),((s=i.style)==null?void 0:s.strokeColor)!=="transparent"&&n.stroke()))},Pl=(n,i)=>{const o=Q.flow(Q.map(p=>p[0]),Q.min,Q.add(-i))(n.points),s=Q.flow(Q.map(p=>p[0]),Q.max,Q.add(i))(n.points),c=Q.flow(Q.map(p=>p[1]),Q.min,Q.add(-i))(n.points),d=Q.flow(Q.map(p=>p[1]),Q.max,Q.add(i))(n.points);return{x:o,width:s-o,y:c,height:d-c}},g5=(n,i)=>({toolId:n.id,type:n.type,id:Q.uniqueId(`${n.type}_`),points:Q.flow(Q.range(0),Q.map(()=>i))(n.settings.pointsCount.default),rotation:0,style:{globalAlpha:n.settings.opacity.default,fillColor:n.settings.fillColor.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default,pointsCount:n.settings.pointsCount.default}}),y5=(n,i)=>{var o,s;if(!(i.points.length<3)&&(St(n,i.style),n.globalAlpha!==0)){n.beginPath(),n.moveTo(...i.points[0]);for(let c=1;c<i.points.length-1;c++)n.quadraticCurveTo(...i.points[c],i.points.length-2===c?i.points[c+1][0]:(i.points[c+1][0]-i.points[c][0])/2+i.points[c][0],i.points.length-2===c?i.points[c+1][1]:(i.points[c+1][1]-i.points[c][1])/2+i.points[c][1]);((o=i.style)==null?void 0:o.fillColor)!=="transparent"&&n.fill(),((s=i.style)==null?void 0:s.strokeColor)!=="transparent"&&n.stroke()}},v5=Pl,qo=(n,i,o,s,c,d=En)=>(n.font=`${c?"italic":""} ${s?"bold":""} 1px ${d}`,Q.flow(Q.map(p=>o/n.measureText(p).width),Q.min)(i)??O2),_5=(n,i,o)=>{var d,p;const s=["Texte"],c=qo(n,s,50,((d=i.settings)==null?void 0:d.fontBold.default)??!1,((p=i.settings)==null?void 0:p.fontItalic.default)??!1,i.settings.fontFamily.default);return{toolId:i.id,type:i.type,id:Q.uniqueId(`${i.type}_`),x:o[0],y:o[1],value:s,fontSize:c,width:50,height:c*(s.length||1),rotation:0,style:{globalAlpha:i.settings.opacity.default,strokeColor:i.settings.strokeColor.default,fontFamily:i.settings.fontFamily.default}}},b5=(n,i)=>{var o,s,c,d;if(St(n,i.style),!(n.globalAlpha===0||!((o=i.style)!=null&&o.strokeColor)||i.style.strokeColor==="transparent")){n.font=`${(s=i.style)!=null&&s.fontItalic?"italic":""} ${(c=i.style)!=null&&c.fontBold?"bold":""} ${i.fontSize}px ${((d=i.style)==null?void 0:d.fontFamily)??En}`,n.textBaseline="top",n.fillStyle=i.style.strokeColor;for(let p=0;p<i.value.length;p++)n.fillText(i.value[p],i.x,i.y+p*i.fontSize,i.width)}},Q5=(n,i)=>({x:n.x-i,width:n.width+i*2,y:n.y-i,height:n.height+i*2}),w5=(n,i,o,s,c,d)=>{var h,w,C;const p=jo(i,o,s,c,d,!0);return{...p,fontSize:qo(n,p.value,p.width,((h=p.style)==null?void 0:h.fontBold)??!1,((w=p.style)==null?void 0:w.fontItalic)??!1,(C=p.style)==null?void 0:C.fontFamily)}},x5=(n,i,o,s,c,d=En)=>(n.font=`${c?"italic":""} ${s?"bold":""} ${o}px ${d}`,Q.flow(Q.map(p=>n.measureText(p).width),Q.max)(i)??20),C5=(n,i,o,s)=>{var B,k,q;const c=Q.set("value",o,i),d=x5(n,c.value,c.fontSize,((B=c.style)==null?void 0:B.fontBold)??!1,((k=c.style)==null?void 0:k.fontItalic)??!1,(q=c.style)==null?void 0:q.fontFamily),p=c.fontSize*c.value.length,h={...c,width:d,height:p},w=0,{center:C}=Re(i,w),{center:x}=Re(h,w),[L,R]=tn([1,.5],C,i,s),[D,T]=tn([1,.5],x,h,s,[!1,!1]);return{...h,x:h.x-(D-L),y:h.y-(T-R)}},A5=(n,i)=>({toolId:n.id,type:n.type,id:Q.uniqueId(`${n.type}_`),x:i[0],y:i[1],radiusX:1,radiusY:1,rotation:0,style:{globalAlpha:n.settings.opacity.default,fillColor:n.settings.fillColor.default,strokeColor:n.settings.strokeColor.default,lineWidth:n.settings.lineWidth.default,lineDash:n.settings.lineDash.default}}),V5=(n,i)=>{var o,s;St(n,i.style),n.globalAlpha!==0&&(n.beginPath(),n.ellipse(i.x,i.y,i.radiusX,i.radiusY,0,0,2*Math.PI),((o=i.style)==null?void 0:o.fillColor)!=="transparent"&&n.fill(),((s=i.style)==null?void 0:s.strokeColor)!=="transparent"&&n.stroke())},L5=(n,i)=>({x:n.x-n.radiusX-i,width:(n.radiusX+i)*2,y:n.y-n.radiusY-i,height:(n.radiusY+i)*2}),hl=(n,i,o,s,[c,d]=[!1,!1])=>{const p=n[0]===.5?o.x:n[0]===0?o.x+(c?-o.radiusX:o.radiusX):o.x+(c?o.radiusX:-o.radiusX),h=n[1]===.5?o.y:n[1]===0?o.y+(d?-o.radiusY:o.radiusY):o.y+(d?o.radiusY:-o.radiusY);return ko([p,h],o.rotation,i,s)},I5=(n,i,o,s,c,d=!1)=>{const{center:p,borders:h}=Re(o,c),w=rn(n,o.rotation,p,i),C=[w[0],w[1]],x=s.anchor[0]===.5?o.radiusX:(s.anchor[0]===0?h.x+h.width-C[0]+c*(s.anchor[0]===0?-2:2):C[0]-h.x-c*(s.anchor[0]===0?-2:2))/2,L=s.anchor[1]===.5?o.radiusY:(s.anchor[1]===0?h.y+h.height-C[1]+c*(s.anchor[1]===0?-2:2):C[1]-h.y-c*(s.anchor[1]===0?-2:2))/2,[R,D]=d?To(o.radiusX,o.radiusY,x,L):[x,L],T={...o,radiusX:Math.abs(R),radiusY:Math.abs(D)},{center:B}=Re(T,c),[k,q]=hl(s.anchor,p,o,i),[ee,X]=hl(s.anchor,B,T,i,[R<0,D<0]);return{...T,x:T.x-(ee-k),y:T.y-(X-q)}},E5=n=>{const i=["img","id"];return n.map(o=>o.type==="picture"&&!o.src.startsWith("http")?Q.omit(i,{...o,src:j5(o.img)}):Q.omit(i,o))},$l=(n,i,o)=>({shapes:E5(n),config:{width:i,height:o}}),ml=n=>({...n,id:Q.uniqueId(`${n.type}_`)}),k5=n=>Q.map(i=>{if(!i.translation)return i;const o=i.translation;switch(i.type){case"rect":case"square":case"ellipse":case"circle":case"picture":return{...Q.omit(["translation"],i),x:i.x+o[0],y:i.y+o[1]};case"line":return{...Q.omit(["translation"],i),points:i.points.map(([s,c])=>[s+o[0],c+o[1]])};case"polygon":case"curve":return{...Q.omit(["translation"],i),points:i.points.map(([s,c])=>[s+o[0],c+o[1]])};case"brush":return{...Q.omit(["translation"],i),points:i.points.map(s=>s.map(([c,d])=>[c+o[0],d+o[1]]))}}},n),Gl=n=>{const s=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("svg")[0],c=s.getAttribute("width"),d=s.getAttribute("height");let p;if(c||d)p=n;else{const w=s.getAttribute("viewBox")??`0 0 ${dr} ${dr}`,[,,C,x]=w.split(" ");s.setAttribute("width",C??dr),s.setAttribute("height",x??dr),p=new XMLSerializer().serializeToString(s)}const h=new Blob([p],{type:"image/svg+xml"});return URL.createObjectURL(h)},Yl=n=>(n instanceof File?n.name:n).includes(".svg"),Xl=n=>Yl(n)?fetch(n).then(i=>i.text()).then(i=>Gl(i)):fetch(n).then(i=>i.blob()).then(i=>URL.createObjectURL(i)),gl=(n,i)=>{const o=document.createElement("a");o.href=n,o.download=i,document.body.appendChild(o),o.click(),document.body.removeChild(o)},j5=n=>{const i=document.createElement("canvas");i.width=n.width,i.height=n.height;const o=i.getContext("2d");return o?(o.drawImage(n,0,0),i.toDataURL("image/png")):""},T5=n=>"data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(n)),yl=(n,i,o,s,c)=>{const d=document.createElement("canvas");d.width=o,d.height=s;const p=d.getContext("2d");if(!p)return"";p.clearRect(0,0,o,s),Hl(p);for(let h=n.length-1;h>=0;h--)p1(p,n[h],1,i,c);return d.toDataURL("image/png")},q5=(n,i,o)=>{const s=$l(n,i,o);return T5(s)},R5=async n=>new Promise((i,o)=>{const s=new FileReader;s.onload=c=>{var h;const d=(h=c.target)==null?void 0:h.result;if(!d)return o("Impossible de récupérer les données du fichier");const p=JSON.parse(d);i(p)},s.readAsText(n)}),D5=async n=>{const i=[],o=n.shapes,s=Q.flow(c=>k5(c),Q.map(c=>{if(!Sl.includes(c.type))return null;if(c.type==="picture"){const d=new Image,p=new Promise((h,w)=>{d.onload=()=>{URL.revokeObjectURL(d.src),h()},d.onerror=()=>{w(new Error("Some images could not be loaded"))}});return i.push(p),c.src.startsWith("http")?Xl(c.src).then(h=>{d.src=h}).catch(()=>{d.src=""}):d.src=c.src,ml({...c,img:d})}return ml(c)}),Q.compact)(o);return await Promise.all(i),s},Kl='<svg><path d="M5.146 17.5Q4.146 17.5 3.208 17Q2.271 16.5 1.667 15.708Q2.208 15.75 2.802 15.344Q3.396 14.938 3.396 14.104Q3.396 13.042 4.135 12.292Q4.875 11.542 5.958 11.542Q7.021 11.542 7.76 12.292Q8.5 13.042 8.5 14.104Q8.5 15.5 7.51 16.5Q6.521 17.5 5.146 17.5ZM9.917 12.5 7.562 10.146 14.917 2.729Q15.146 2.5 15.469 2.5Q15.792 2.5 16.021 2.729L17.271 3.958Q17.5 4.188 17.5 4.531Q17.5 4.875 17.271 5.125Z"/></svg>',ki='<svg><path d="M2.5 17.5V2.5H17.5V17.5ZM4.25 15.75H15.75V4.25H4.25ZM4.25 15.75V4.25V15.75Z"/></svg>',N5='<svg><path d="M5.333 9.292 10.021 1.646 14.708 9.292ZM14.562 18.333Q13 18.333 11.896 17.229Q10.792 16.125 10.792 14.562Q10.792 13 11.896 11.896Q13 10.792 14.562 10.792Q16.125 10.792 17.229 11.896Q18.333 13 18.333 14.562Q18.333 16.125 17.229 17.229Q16.125 18.333 14.562 18.333ZM2.5 17.917V11.188H9.229V17.917ZM14.562 16.583Q15.438 16.583 16.01 16.01Q16.583 15.438 16.583 14.562Q16.583 13.688 16.01 13.115Q15.438 12.542 14.562 12.542Q13.688 12.542 13.115 13.115Q12.542 13.688 12.542 14.562Q12.542 15.438 13.115 16.01Q13.688 16.583 14.562 16.583ZM4.25 16.167H7.479V12.938H4.25ZM8.458 7.542H11.583L10.021 5ZM10.021 7.542ZM7.479 12.938ZM14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Z"/></svg>',ji='<svg><path d="M10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333ZM10 16.583Q12.75 16.583 14.667 14.667Q16.583 12.75 16.583 10Q16.583 7.25 14.667 5.333Q12.75 3.417 10 3.417Q7.25 3.417 5.333 5.333Q3.417 7.25 3.417 10Q3.417 12.75 5.333 14.667Q7.25 16.583 10 16.583ZM10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Z"/></svg>',Ro='<svg><path d="M12.25 18.333V16.167L6.833 13.458H2.5V8.208H6.25L8.25 5.917V1.667H13.5V6.917H9.708L7.75 9.146V11.958L12.25 14.208V13.083H17.5V18.333Z"/></svg>',Jl='<svg><path d="M4.125 5.083V3.333H7.062L7.896 2.5H12.104L12.938 3.333H15.875V5.083ZM6.75 17.5Q6.021 17.5 5.51 16.99Q5 16.479 5 15.75V5.958H15V15.75Q15 16.479 14.49 16.99Q13.979 17.5 13.25 17.5Z"/></svg>',vl='<svg><path d="M10 17.5Q7.208 17.5 5.271 15.594Q3.333 13.688 3.333 10.958Q3.333 9.583 3.854 8.396Q4.375 7.208 5.292 6.292L10 1.667L14.688 6.292Q15.604 7.208 16.135 8.396Q16.667 9.583 16.667 10.958Q16.667 13.688 14.719 15.594Q12.771 17.5 10 17.5ZM5.146 11.667H14.854Q15.083 10.188 14.552 9.146Q14.021 8.104 13.479 7.562L10 4.125L6.521 7.562Q5.979 8.104 5.448 9.146Q4.917 10.188 5.146 11.667Z"/></svg>',O5='<svg><path d="M11.708 15.833H5.854V14.083H11.708Q13 14.083 13.958 13.292Q14.917 12.5 14.917 11.271Q14.917 10.042 13.958 9.24Q13 8.438 11.708 8.438H6.667L8.792 10.562L7.562 11.792L3.333 7.562L7.562 3.333L8.792 4.562L6.667 6.688H11.708Q13.729 6.688 15.198 7.99Q16.667 9.292 16.667 11.25Q16.667 13.208 15.198 14.521Q13.729 15.833 11.708 15.833Z"/></svg>',M5='<svg><path d="M8.292 15.833Q6.271 15.833 4.802 14.521Q3.333 13.208 3.333 11.25Q3.333 9.292 4.802 7.99Q6.271 6.688 8.292 6.688H13.333L11.208 4.562L12.438 3.333L16.667 7.562L12.438 11.792L11.208 10.562L13.333 8.438H8.292Q7 8.438 6.042 9.229Q5.083 10.021 5.083 11.25Q5.083 12.5 6.042 13.292Q7 14.083 8.292 14.083H14.146V15.833Z"/></svg>',W5='<svg><path d="M10 17.646 2.438 11.75 3.875 10.646 10 15.396 16.125 10.646 17.562 11.75ZM10 13.188 2.5 7.354 10 1.521 17.5 7.354Z"/></svg>',S5='<svg><path d="M7.854 13.812 10 11.688 12.125 13.812 13.354 12.604 11.208 10.458 13.354 8.312 12.125 7.104 10 9.229 7.854 7.104 6.625 8.312 8.771 10.458 6.625 12.604ZM5.896 17.5Q5.167 17.5 4.656 16.99Q4.146 16.479 4.146 15.75V5.125H3.333V3.375H7.542V2.5H12.458V3.375H16.667V5.125H15.833V15.75Q15.833 16.479 15.323 16.99Q14.812 17.5 14.083 17.5Z"/></svg>',H5='<svg><path d="M17.5 5.833V15.75Q17.5 16.479 16.99 16.99Q16.479 17.5 15.75 17.5H4.25Q3.521 17.5 3.01 16.99Q2.5 16.479 2.5 15.75V4.25Q2.5 3.521 3.01 3.01Q3.521 2.5 4.25 2.5H14.167ZM10 14.917Q11.062 14.917 11.823 14.156Q12.583 13.396 12.583 12.333Q12.583 11.271 11.823 10.51Q11.062 9.75 10 9.75Q8.938 9.75 8.177 10.51Q7.417 11.271 7.417 12.333Q7.417 13.396 8.177 14.156Q8.938 14.917 10 14.917ZM5.021 8.396H12.521V5.021H5.021Z"/></svg>',F5='<svg><path d="M10 13.271 5.708 8.979 6.958 7.729 9.125 9.896V3.333H10.875V9.896L13.042 7.729L14.292 8.979ZM5.083 16.667Q4.354 16.667 3.844 16.156Q3.333 15.646 3.333 14.917V12.5H5.083V14.917Q5.083 14.917 5.083 14.917Q5.083 14.917 5.083 14.917H14.917Q14.917 14.917 14.917 14.917Q14.917 14.917 14.917 14.917V12.5H16.667V14.917Q16.667 15.646 16.156 16.156Q15.646 16.667 14.917 16.667Z"/></svg>',B5='<svg><path d="M3.417 16.667Q2.729 16.667 2.198 16.135Q1.667 15.604 1.667 14.917V5.083Q1.667 4.396 2.198 3.865Q2.729 3.333 3.417 3.333H8.25L9.917 5H16.667Q17.354 5 17.844 5.531Q18.333 6.062 18.333 6.75H3.417V14.917Q3.417 14.917 3.417 14.917Q3.417 14.917 3.417 14.917L5.438 8.5H19.583L17.396 15.479Q17.229 16.021 16.802 16.344Q16.375 16.667 15.833 16.667Z"/></svg>',Do='<svg><path d="M4.792 15.083 8.333 11.542 9.833 13.021 11.667 10.708 15.167 15.083ZM6.667 8.417Q5.938 8.417 5.427 7.906Q4.917 7.396 4.917 6.667Q4.917 5.938 5.427 5.427Q5.938 4.917 6.667 4.917Q7.396 4.917 7.906 5.427Q8.417 5.938 8.417 6.667Q8.417 7.396 7.906 7.906Q7.396 8.417 6.667 8.417ZM4.167 18.333Q3.125 18.333 2.396 17.604Q1.667 16.875 1.667 15.833V4.167Q1.667 3.125 2.396 2.396Q3.125 1.667 4.167 1.667H15.833Q16.875 1.667 17.604 2.396Q18.333 3.125 18.333 4.167V15.833Q18.333 16.875 17.604 17.604Q16.875 18.333 15.833 18.333ZM4.167 16.583H15.833Q16.146 16.583 16.365 16.365Q16.583 16.146 16.583 15.833V4.167Q16.583 3.854 16.365 3.635Q16.146 3.417 15.833 3.417H4.167Q3.854 3.417 3.635 3.635Q3.417 3.854 3.417 4.167V15.833Q3.417 16.146 3.635 16.365Q3.854 16.583 4.167 16.583Z"/></svg>',e1='<svg><path d="M8.708 16.667V5.917H4.167V3.333H15.833V5.917H11.292V16.667Z"/></svg>',t1='<svg><path d="M7.5 15.833V14.083H12.833L3.333 4.583L4.583 3.333L14.083 12.833V7.5H15.833V15.833Z"/></svg>',U5='<svg><path d="M8.0145 11.1707C8.38484 10.9914 8.82183 11.1558 8.99959 11.5295L10.7031 15.2591L12.0363 14.6238L10.3254 10.9017C10.1476 10.528 10.3106 10.0795 10.6809 9.90761L10.8883 9.84782L12.5918 9.51148L6.48133 4.33192V12.389L7.82934 11.2903L8.0145 11.1707ZM10.6587 16.9258C10.2883 17.1052 9.84395 16.9482 9.67359 16.5745L8.05894 13.0318L6.19988 14.5416C6.07396 14.6462 5.91842 14.706 5.74066 14.706C5.54423 14.706 5.35584 14.6272 5.21694 14.4871C5.07803 14.3469 5 14.1568 5 13.9586V2.74741C5 2.54919 5.07803 2.35908 5.21694 2.21891C5.35584 2.07874 5.54423 2 5.74066 2C5.91842 2 6.08878 2.06727 6.21469 2.1719L6.2221 2.16443L14.7323 9.36947C15.0508 9.63854 15.0879 10.1094 14.8286 10.4233C14.7175 10.5579 14.562 10.6475 14.4064 10.6774L12.0659 11.1408L13.6954 14.6761C13.888 15.0498 13.7102 15.4908 13.3399 15.6627L10.6587 16.9258Z"/></svg>',Z5='<svg><path d="M2.5 15V13.25H17.5V15ZM2.5 10.875V9.125H17.5V10.875ZM2.5 6.75V5H17.5V6.75Z"/></svg>',z5='<svg><path d="M10 13.354Q11.583 13.354 12.688 12.25Q13.792 11.146 13.792 9.562Q13.792 7.979 12.688 6.875Q11.583 5.771 10 5.771Q8.417 5.771 7.312 6.875Q6.208 7.979 6.208 9.562Q6.208 11.146 7.312 12.25Q8.417 13.354 10 13.354ZM10 11.812Q9.062 11.812 8.406 11.156Q7.75 10.5 7.75 9.562Q7.75 8.625 8.406 7.969Q9.062 7.312 10 7.312Q10.938 7.312 11.594 7.969Q12.25 8.625 12.25 9.562Q12.25 10.5 11.594 11.156Q10.938 11.812 10 11.812ZM10 15.833Q6.938 15.833 4.448 14.125Q1.958 12.417 0.833 9.562Q1.958 6.708 4.458 5.021Q6.958 3.333 10 3.333Q13.042 3.333 15.542 5.021Q18.042 6.708 19.167 9.562Q18.042 12.417 15.552 14.125Q13.062 15.833 10 15.833ZM10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562ZM10 14.083Q12.333 14.083 14.281 12.865Q16.229 11.646 17.25 9.562Q16.229 7.479 14.281 6.281Q12.333 5.083 10 5.083Q7.667 5.083 5.708 6.281Q3.75 7.479 2.729 9.562Q3.75 11.646 5.708 12.865Q7.667 14.083 10 14.083Z"/></svg>',P5='<svg><path d="M13.521 11.021 12.25 9.75Q12.333 8.75 11.604 7.979Q10.875 7.208 9.812 7.312L8.542 6.042Q8.896 5.896 9.26 5.833Q9.625 5.771 10 5.771Q11.583 5.771 12.688 6.875Q13.792 7.979 13.792 9.562Q13.792 9.979 13.719 10.354Q13.646 10.729 13.521 11.021ZM16.167 13.646 14.917 12.417Q15.667 11.833 16.25 11.146Q16.833 10.458 17.25 9.562Q16.229 7.479 14.292 6.281Q12.354 5.083 10 5.083Q9.396 5.083 8.885 5.156Q8.375 5.229 7.875 5.375L6.5 4Q7.354 3.646 8.208 3.49Q9.062 3.333 10 3.333Q13.146 3.333 15.615 5.052Q18.083 6.771 19.167 9.562Q18.688 10.792 17.917 11.823Q17.146 12.854 16.167 13.646ZM16.396 18.854 12.938 15.396Q12.208 15.625 11.479 15.729Q10.75 15.833 10 15.833Q6.833 15.833 4.375 14.094Q1.917 12.354 0.833 9.562Q1.25 8.479 1.917 7.552Q2.583 6.625 3.417 5.875L1.125 3.562L2.375 2.354L17.625 17.625ZM4.604 7.062Q4.021 7.604 3.542 8.219Q3.062 8.833 2.729 9.562Q3.75 11.646 5.688 12.865Q7.625 14.083 10 14.083Q10.354 14.083 10.74 14.052Q11.125 14.021 11.479 13.938L10.812 13.271Q10.625 13.312 10.417 13.333Q10.208 13.354 10 13.354Q8.417 13.354 7.312 12.25Q6.208 11.146 6.208 9.562Q6.208 9.354 6.24 9.167Q6.271 8.979 6.312 8.771ZM11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875ZM8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Z"/></svg>',$5='<svg><path d="M9.958 18.333Q8.25 18.333 6.74 17.677Q5.229 17.021 4.104 15.885Q2.979 14.75 2.323 13.229Q1.667 11.708 1.667 10Q1.667 8.271 2.333 6.75Q3 5.229 4.156 4.104Q5.312 2.979 6.854 2.323Q8.396 1.667 10.125 1.667Q11.771 1.667 13.26 2.25Q14.75 2.833 15.875 3.854Q17 4.875 17.667 6.26Q18.333 7.646 18.333 9.25Q18.333 11.688 16.792 12.948Q15.25 14.208 13.188 14.208H11.75Q11.625 14.208 11.562 14.281Q11.5 14.354 11.5 14.458Q11.5 14.688 11.812 15.219Q12.125 15.75 12.125 16.458Q12.125 17.458 11.51 17.896Q10.896 18.333 9.958 18.333ZM5.458 10.875Q6 10.875 6.375 10.5Q6.75 10.125 6.75 9.583Q6.75 9.042 6.375 8.667Q6 8.292 5.458 8.292Q4.917 8.292 4.542 8.667Q4.167 9.042 4.167 9.583Q4.167 10.125 4.542 10.5Q4.917 10.875 5.458 10.875ZM7.917 7.583Q8.458 7.583 8.833 7.208Q9.208 6.833 9.208 6.292Q9.208 5.75 8.833 5.375Q8.458 5 7.917 5Q7.375 5 7 5.375Q6.625 5.75 6.625 6.292Q6.625 6.833 7 7.208Q7.375 7.583 7.917 7.583ZM12.021 7.583Q12.562 7.583 12.938 7.208Q13.312 6.833 13.312 6.292Q13.312 5.75 12.938 5.375Q12.562 5 12.021 5Q11.479 5 11.104 5.375Q10.729 5.75 10.729 6.292Q10.729 6.833 11.104 7.208Q11.479 7.583 12.021 7.583ZM14.479 10.875Q15.021 10.875 15.396 10.5Q15.771 10.125 15.771 9.583Q15.771 9.042 15.396 8.667Q15.021 8.292 14.479 8.292Q13.938 8.292 13.562 8.667Q13.188 9.042 13.188 9.583Q13.188 10.125 13.562 10.5Q13.938 10.875 14.479 10.875Z"/></svg>',G5='<svg><path d="M9.188 16.542V14.938Q8.5 14.938 8.021 14.458Q7.542 13.979 7.542 13.292V12.458L3.583 8.5Q3.5 8.875 3.458 9.25Q3.417 9.625 3.417 10Q3.417 12.5 5.062 14.365Q6.708 16.229 9.188 16.542ZM14.854 14.438Q15.708 13.521 16.146 12.385Q16.583 11.25 16.583 10Q16.583 7.979 15.469 6.313Q14.354 4.646 12.479 3.917V4.229Q12.479 4.917 12 5.396Q11.521 5.875 10.833 5.875H9.188V7.521Q9.188 7.875 8.948 8.115Q8.708 8.354 8.354 8.354H6.708V10H11.646Q12 10 12.24 10.229Q12.479 10.458 12.479 10.812V13.292H13.292Q13.833 13.292 14.26 13.604Q14.688 13.917 14.854 14.438ZM10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333Z"/></svg>',Y5='<svg><path d="M10 0.833Q11.771 0.833 12.99 2.052Q14.208 3.271 14.208 5.042V6.667H14.917Q15.646 6.667 16.156 7.177Q16.667 7.688 16.667 8.417V16.562Q16.667 17.292 16.156 17.812Q15.646 18.333 14.917 18.333H5.083Q4.354 18.333 3.844 17.812Q3.333 17.292 3.333 16.562V8.417Q3.333 7.688 3.844 7.177Q4.354 6.667 5.083 6.667H5.792V5.042Q5.792 3.271 7.01 2.052Q8.229 0.833 10 0.833ZM10 2.583Q8.979 2.583 8.26 3.302Q7.542 4.021 7.542 5.042V6.667H12.458V5.042Q12.458 4.021 11.74 3.302Q11.021 2.583 10 2.583ZM5.083 16.583H14.917Q14.917 16.583 14.917 16.583Q14.917 16.583 14.917 16.583V8.417Q14.917 8.417 14.917 8.417Q14.917 8.417 14.917 8.417H5.083Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583ZM10 10.812Q9.292 10.812 8.802 11.302Q8.312 11.792 8.312 12.5Q8.312 13.208 8.802 13.698Q9.292 14.188 10 14.188Q10.708 14.188 11.198 13.698Q11.688 13.208 11.688 12.5Q11.688 11.792 11.198 11.302Q10.708 10.812 10 10.812ZM5.083 8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583V8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417Z"/></svg>',X5='<svg><path d="M5.792 5.042Q5.792 3.271 7.01 2.052Q8.229 0.833 10 0.833Q11.771 0.833 12.99 2.052Q14.208 3.271 14.208 5.042V6.667H14.917Q15.646 6.667 16.156 7.177Q16.667 7.688 16.667 8.417V16.562Q16.667 17.292 16.156 17.812Q15.646 18.333 14.917 18.333H5.083Q4.354 18.333 3.844 17.812Q3.333 17.292 3.333 16.562V8.417Q3.333 7.688 3.844 7.177Q4.354 6.667 5.083 6.667H12.458V5.042Q12.458 4.021 11.74 3.302Q11.021 2.583 10 2.583Q8.979 2.583 8.26 3.302Q7.542 4.021 7.542 5.042ZM5.083 16.583H14.917Q14.917 16.583 14.917 16.583Q14.917 16.583 14.917 16.583V8.417Q14.917 8.417 14.917 8.417Q14.917 8.417 14.917 8.417H5.083Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583ZM10 10.812Q9.292 10.812 8.802 11.302Q8.312 11.792 8.312 12.5Q8.312 13.208 8.802 13.698Q9.292 14.188 10 14.188Q10.708 14.188 11.198 13.698Q11.688 13.208 11.688 12.5Q11.688 11.792 11.198 11.302Q10.708 10.812 10 10.812ZM5.083 8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583V8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417Z"/></svg>',K5='<svg><path d="M18.333 15.854 16.583 14.104V13.354H15.833L14.083 11.604H16.583V8.375H13.375V10.896L11.625 9.146V8.375H10.875L9.125 6.625H11.625V3.417H8.396V5.896L6.646 4.146V3.417H5.896L4.146 1.667H16.583Q17.312 1.667 17.823 2.177Q18.333 2.688 18.333 3.417ZM13.375 6.625H16.583V3.417Q16.583 3.417 16.583 3.417Q16.583 3.417 16.583 3.417H13.375ZM16.771 19.229 15.854 18.333H3.417Q2.688 18.333 2.177 17.823Q1.667 17.312 1.667 16.583V4.125L0.812 3.271L2.042 2.021L18 18ZM13.375 16.583H14.104L13.375 15.833ZM8.396 11.604H9.125L8.396 10.854ZM8.396 16.583H11.625V14.083L10.875 13.354H8.396ZM3.417 6.625H4.167L3.417 5.875ZM3.417 11.604H6.646V9.104L5.917 8.375H3.417ZM6.646 16.583V13.354H3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Z"/></svg>',r1='<svg><path d="M7.521 17.5Q6.125 17.5 5.146 16.51Q4.167 15.521 4.167 14.125V7.417Q3.438 7.125 2.969 6.49Q2.5 5.854 2.5 5.042Q2.5 3.979 3.24 3.24Q3.979 2.5 5.042 2.5Q6.104 2.5 6.844 3.24Q7.583 3.979 7.583 5.042Q7.583 5.854 7.115 6.49Q6.646 7.125 5.917 7.417V14.125Q5.917 14.792 6.385 15.271Q6.854 15.75 7.521 15.75Q8.188 15.75 8.656 15.271Q9.125 14.792 9.125 14.125V5.875Q9.125 4.479 10.104 3.49Q11.083 2.5 12.479 2.5Q13.875 2.5 14.854 3.49Q15.833 4.479 15.833 5.875V12.583Q16.562 12.875 17.031 13.51Q17.5 14.146 17.5 14.958Q17.5 16.021 16.76 16.76Q16.021 17.5 14.958 17.5Q13.896 17.5 13.156 16.76Q12.417 16.021 12.417 14.958Q12.417 14.146 12.885 13.5Q13.354 12.854 14.083 12.583V5.875Q14.083 5.208 13.615 4.729Q13.146 4.25 12.479 4.25Q11.812 4.25 11.344 4.729Q10.875 5.208 10.875 5.875V14.125Q10.875 15.521 9.896 16.51Q8.917 17.5 7.521 17.5Z"/></svg>',_l='<svg><path d="M5.833 15V3.333H10.375Q11.812 3.333 12.885 4.156Q13.958 4.979 13.958 6.375Q13.958 7.375 13.49 7.969Q13.021 8.562 12.396 8.875V9.042Q13.312 9.354 13.844 10.021Q14.375 10.688 14.375 11.75Q14.375 13.312 13.229 14.156Q12.083 15 10.5 15ZM8.125 8.042H10.188Q10.854 8.042 11.302 7.656Q11.75 7.271 11.75 6.708Q11.75 6.167 11.302 5.771Q10.854 5.375 10.188 5.375H8.125ZM8.125 12.917H10.354Q11.167 12.917 11.625 12.51Q12.083 12.104 12.083 11.458Q12.083 10.812 11.625 10.406Q11.167 10 10.354 10H8.125Z"/></svg>',bl='<svg><path d="M4.167 16.667V14.083H6.979L10.229 5.917H7.5V3.333H15.833V5.917H13.021L9.771 14.083H12.5V16.667Z"/></svg>',Ql='<svg><path d="M3.021 16V15H17V16ZM3.021 13.5V12H17V13.5ZM3 10.5V8.5H16.979V10.5ZM3.021 7V4H17V7Z"/></svg>',J5='<svg><path d="M3 16V14.5H4.5V16ZM6.125 16V14.5H7.625V16ZM9.25 16V14.5H10.75V16ZM12.375 16V14.5H13.875V16ZM15.5 16V14.5H17V16ZM3 13V11.5H6.5V13ZM8.25 13V11.5H11.75V13ZM13.5 13V11.5H17V13ZM3 10V8.5H9.25V10ZM10.75 10V8.5H17V10ZM3 7V4H17V7Z"/></svg>',eh='<svg><path d="M5.312 14.979H7.125L8.042 12.479H11.979L12.896 14.979H14.708L10.917 5H9.083ZM8.542 10.958 9.958 6.958H10.042L11.458 10.958ZM3.417 18.333Q2.688 18.333 2.177 17.823Q1.667 17.312 1.667 16.583V3.417Q1.667 2.688 2.177 2.177Q2.688 1.667 3.417 1.667H16.583Q17.312 1.667 17.823 2.177Q18.333 2.688 18.333 3.417V16.583Q18.333 17.312 17.823 17.823Q17.312 18.333 16.583 18.333ZM3.417 16.583H16.583Q16.583 16.583 16.583 16.583Q16.583 16.583 16.583 16.583V3.417Q16.583 3.417 16.583 3.417Q16.583 3.417 16.583 3.417H3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583ZM3.417 3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583V3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417Z"/></svg>',th='<svg><path d="M6 17 2 13 6 9 7.062 10.062 4.875 12.25H17V13.75H4.875L7.062 15.938ZM14 11 12.938 9.938 15.125 7.75H3V6.25H15.125L12.938 4.062L14 3L18 7Z"/></svg>',rh='<svg><path d="M2.5 15.833V14.083H7.667V15.833ZM2.5 5.917V4.167H10.771V5.917ZM9.208 17.5V12.438H10.958V14.083H17.5V15.833H10.958V17.5ZM5.917 12.542V10.875H2.5V9.125H5.917V7.479H7.667V12.542ZM9.208 10.875V9.125H17.5V10.875ZM12.333 7.562V2.5H14.083V4.167H17.5V5.917H14.083V7.562Z"/></svg>',wl='<svg><path d="M16.354 18.833 14.521 17Q13.542 17.646 12.396 17.99Q11.25 18.333 10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.729 2.01 7.594Q2.354 6.458 3 5.458L1.167 3.625L2.396 2.396L17.583 17.604ZM10 16.583Q10.896 16.583 11.708 16.365Q12.521 16.146 13.25 15.729L4.292 6.75Q3.875 7.479 3.646 8.292Q3.417 9.104 3.417 10Q3.417 12.729 5.344 14.656Q7.271 16.583 10 16.583ZM17 14.562 15.708 13.271Q16.125 12.542 16.354 11.719Q16.583 10.896 16.583 10Q16.583 7.271 14.656 5.344Q12.729 3.417 10 3.417Q9.104 3.417 8.292 3.646Q7.479 3.875 6.75 4.292L5.458 3Q6.458 2.354 7.594 2.01Q8.729 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.271 17.979 12.417Q17.625 13.562 17 14.562ZM11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771ZM8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Z"/></svg>',xl='<svg ><path d="M16.354 18.833 14.521 17Q13.542 17.646 12.396 17.99Q11.25 18.333 10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.729 2.01 7.594Q2.354 6.458 3 5.458L1.167 3.625L2.396 2.396L17.583 17.604ZM17 14.562 5.458 3Q6.458 2.354 7.594 2.01Q8.729 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.271 17.979 12.417Q17.625 13.562 17 14.562Z"/></svg>',Ue="react-paint-",nh={strokeColor:{values:ot,default:"black"},fillColor:{values:ot,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:hr,default:0}},ih={strokeColor:{values:ot,default:"black"},fillColor:{values:ot,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:hr,default:0}},ah={strokeColor:{values:ot,default:"black"},fillColor:{values:ot,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:hr,default:0}},oh={strokeColor:{values:ot,default:"black"},fillColor:{values:ot,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:hr,default:0}},uh={opacity:{min:0,max:100,step:1,default:100}},sh={strokeColor:{values:ot,default:"black"},opacity:{min:0,max:100,step:1,default:100},fontFamily:{values:N2,default:En},fontBold:{values:[!1,!0],default:!1},fontItalic:{values:[!1,!0],default:!1}},lh={strokeColor:{values:ot,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:6,max:20,step:2,default:10},lineDash:{values:hr,default:0}},ch={strokeColor:{values:ot,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:hr,default:0},lineArrow:{values:D2,default:0}},fh={strokeColor:{values:ot,default:"black"},fillColor:{values:ot,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:hr,default:0},pointsCount:{min:3,max:10,step:1,default:3}},dh={strokeColor:{values:ot,default:"black"},fillColor:{values:ot,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:hr,default:0},pointsCount:{min:3,max:10,step:1,default:3}},No={type:"picture",id:`${Ue}picture`,icon:Do,label:"Image",settings:uh},n1={type:"brush",id:`${Ue}brush`,icon:Kl,label:"Brosse",settings:lh},i1={type:"line",id:`${Ue}line`,icon:t1,label:"Ligne",settings:ch},a1={type:"polygon",id:`${Ue}polygon`,icon:Ro,label:"Polygone",settings:fh},o1={type:"curve",id:`${Ue}curve`,icon:r1,label:"Courbe",settings:dh},u1={type:"rect",id:`${Ue}rect`,icon:ki,label:"Rectangle",settings:nh},s1={type:"square",id:`${Ue}square`,icon:ki,label:"Carré",settings:ih},l1={type:"circle",id:`${Ue}circle`,icon:ji,label:"Cercle",settings:ah},c1={type:"ellipse",id:`${Ue}ellipse`,icon:ji,label:"Ellipse",settings:oh},f1={type:"text",id:`${Ue}text`,icon:e1,label:"Texte",settings:sh},ph=[n1,i1,a1,o1,u1,s1,l1,c1,No,f1],er={id:`${Ue}selection`,type:"selection",icon:U5,label:"Sélection"},Kr={id:`${Ue}undo`,type:"undo",icon:O5,label:"Undo"},Jr={id:`${Ue}redo`,type:"redo",icon:M5,label:"Redo"},en={id:`${Ue}clear`,type:"clear",icon:S5,label:"Clear"},co={id:`${Ue}export`,type:"export",icon:F5,label:"Export PNG"},Cl={id:`${Ue}load`,type:"loadfile",icon:B5,label:"Load project"},fo={id:`${Ue}save`,type:"savefile",icon:H5,label:"Save project"},Al={id:`${Ue}upload-picture`,type:"uploadpicture",icon:Do,label:"Upload picture"},d1=(n,i,o,s)=>{const[c,d]=o5(n.width,n.height,o,s,!0);return{toolId:No.id,type:"picture",id:Q.uniqueId("picture_"),x:(o-c)/2,y:(s-d)/2,width:c,height:d,src:i,img:n,rotation:0}},hh=(n,i,o,s,c)=>{const d=URL.createObjectURL(o);n.onload=async()=>{if(URL.revokeObjectURL(n.src),Yl(o)&&!n.width&&!n.height){const h=await o.text(),w=Gl(h);if(d===n.src){n.src=w;return}}const p=d1(n,n.src,s,c);i(p)},n.src=d},mh=(n,i,o,s,c)=>{n.onload=()=>{URL.revokeObjectURL(n.src);const d=d1(n,o,s,c);i(d)},Xl(o).then(d=>{n.src=d}).catch(()=>{n.src=""})},gh=(n,i,o)=>new Promise((s,c)=>{const d=new Image;d.onerror=()=>{c(new Error("Some images could not be loaded"))},setTimeout(()=>{c(new Error("Timeout while loading images"))},4e3),n instanceof File?hh(d,s,n,i,o):mh(d,s,n,i,o)}),yh=(n,i)=>{St(n,i.style),n.globalAlpha!==0&&(n.beginPath(),n.drawImage(i.img,i.x,i.y,i.width,i.height))},vh=(n,i)=>Zl(n,i),_h=(n,i,o,s,c,d)=>jo(n,i,o,s,c,d),bh=({ctx:n,shape:i,withAnchors:o,selectionPadding:s,selectionWidth:c,selectionColor:d,currentScale:p=1})=>{const{borders:h}=Re(i,s/p);if(Ii(n,{...h,style:{fillColor:"transparent",strokeColor:d,lineWidth:c/p}}),!(!o||i.locked)){zl(n,{points:[[h.x+h.width/2,h.y],[h.x+h.width/2,h.y-Te/2-mo/p]],style:{fillColor:"transparent",strokeColor:d,lineWidth:c/p}});for(const w of Wl)Ei(n,{x:h.x+h.width*w[0],y:h.y+h.height*w[1],radius:Te/2/p,style:{fillColor:"rgb(255,255,255)",strokeColor:"rgb(150,150,150)",lineWidth:c/p}});Ei(n,{x:h.x+h.width/2,y:h.y-Te/2-mo/p,radius:Te/2/p,style:{fillColor:"rgb(255,255,255)",strokeColor:"rgb(150,150,150)",lineWidth:c/p}})}},Vl=(n,i,o,s)=>{const c=[pt(o[0],s),pt(o[1],s)];switch(i.type){case"brush":return K2(i,c);case"line":return c5(i,c);case"polygon":return h5(i,c);case"curve":return g5(i,c);case"rect":case"square":return X2(i,c);case"text":return _5(n,i,c);case"ellipse":return A5(i,c);case"circle":return u5(i,c)}},p1=(n,i,o,s,c)=>{if(i.visible===!1)return;const{center:d}=Re(i,c);switch(Fl(n,o,s,i.rotation,d),i.type){case"brush":J2(n,i);break;case"text":b5(n,i);break;case"line":zl(n,i);break;case"polygon":m5(n,i);break;case"curve":y5(n,i);break;case"circle":Ei(n,i);break;case"ellipse":V5(n,i);break;case"rect":case"square":Ii(n,i);break;case"picture":yh(n,i);break}n.restore()},Qh=(n,i)=>{switch(n.type){case"brush":return e5(n,i);case"line":return f5(n,i);case"polygon":return Pl(n,i);case"curve":return v5(n,i);case"circle":return s5(n,i);case"ellipse":return L5(n,i);case"rect":case"square":default:return Zl(n,i);case"text":return Q5(n,i);case"picture":return vh(n,i)}},wh=n=>[n.x+n.width/2,n.y+n.height/2],Re=(n,i)=>{const o=Qh(n,i),s=wh(o);return{borders:o,center:s}},xh=(n,i,o,s,c,d)=>{const p=c[0]-s[0],h=c[1]-s[1],w=c[0]-i[0],C=c[1]-i[1],x=o.rotation+Math.atan2(C,w)-Math.atan2(h,p);return{...n,rotation:d?x+Math.PI/uo/2-(x+Math.PI/uo/2)%(Math.PI/uo):x}},Ch=(n,i,o,s,c,d,p,h)=>{switch(i.type){case"line":case"polygon":case"curve":return d5(o,s,c,d,p);case"brush":return t5(o,s,c,d,p,h);case"circle":return l5(o,s,c,d,p);case"ellipse":return I5(o,s,c,d,p,h);case"rect":case"square":return jo(o,s,c,d,p,i.type==="square"||h);case"text":return w5(n,o,s,c,d,p);case"picture":return _h(o,s,c,d,p,!h)}},Oo=(n,i,o,s)=>{switch(i.type){case"rect":case"square":case"ellipse":case"circle":case"picture":default:return{...i,x:pt(i.x+n[0]-o[0],s),y:pt(i.y+n[1]-o[1],s)};case"line":return{...i,points:i.points.map(([c,d])=>[pt(c+n[0]-o[0],s),pt(d+n[1]-o[1],s)])};case"polygon":case"curve":if(s){const{borders:c}=Re(i,0),d=pt(c.x+n[0]-o[0],s)-c.x,p=pt(c.y+n[1]-o[1],s)-c.y;return{...i,points:i.points.map(([h,w])=>[h+d,w+p])}}else return{...i,points:i.points.map(([c,d])=>[pt(c+n[0]-o[0],s),pt(d+n[1]-o[1],s)])};case"brush":if(s){const{borders:c}=Re(i,0),d=pt(c.x+n[0]-o[0],s)-c.x,p=pt(c.y+n[1]-o[1],s)-c.y;return{...i,points:i.points.map(h=>h.map(([w,C])=>[w+d,C+p]))}}else return{...i,points:i.points.map(c=>c.map(([d,p])=>[d+n[0]-o[0],p+n[1]-o[1]]))}}},Ah=({ctx:n,shape:i,scaleRatio:o=1,canvasOffset:s,selectionPadding:c,selectionWidth:d,selectionColor:p,withAnchors:h=!0})=>{const{center:w}=Re(i,c);switch(Fl(n,o,s,i.rotation,w),i.type){case"polygon":case"line":case"curve":p5({ctx:n,shape:i,withAnchors:h,selectionPadding:c,selectionWidth:d,selectionColor:p,currentScale:o});break;default:bh({ctx:n,shape:i,withAnchors:h,selectionPadding:c,selectionWidth:d,selectionColor:p,currentScale:o});break}n.restore()},Vh=(n,i)=>({...Oo([20,20],n,[0,0],i),id:Q.uniqueId(`${n.type}_`)});const yo=({disabled:n=!1,scaleRatio:i,shape:o,defaultValue:s,updateValue:c,saveShapes:d,selectionPadding:p})=>{var L,R,D,T,B;const h=E.useRef(null),w=E.useRef(d),C=k=>{c(Y2(k.target.innerHTML))};E.useEffect(()=>{if(!h.current)return;const k=h.current,q=ee=>{var ae;ee.preventDefault();const X=(ae=ee.clipboardData)==null?void 0:ae.getData("text/plain");document.execCommand("insertText",!1,X)};return k.addEventListener("paste",q),k.innerHTML=$2(s),k.focus(),()=>{k.removeEventListener("paste",q)}},[s]),E.useEffect(()=>{const k=w.current;return()=>{k()}},[]);const x=E.useMemo(()=>{const{borders:k,center:q}=Re(o,p);return Xr({point:[k.x,k.y],rotation:-o.rotation,origin:q})},[o,p]);return v.jsx("div",{className:"react-paint-editor-toolbox-edittextbox",ref:h,"data-fontbold":((L=o.style)==null?void 0:L.fontBold)??!1,"data-fontitalic":((R=o.style)==null?void 0:R.fontItalic)??!1,contentEditable:!n,onInput:C,style:{"--react-paint-editor-toolbox-edittextbox-transform":`translate3D(${x[0]*i}px, ${x[1]*i}px, 0) rotate(${Ul(o.rotation)}deg)`,"--react-paint-editor-toolbox-edittextbox-fontsize":`${o.fontSize*i}px`,"--react-paint-editor-toolbox-edittextbox-padding":`${p*i}px`,"--react-paint-editor-toolbox-edittextbox-color":((D=o.style)==null?void 0:D.strokeColor)??"inherit","--react-paint-editor-toolbox-edittextbox-opacity":(((T=o.style)==null?void 0:T.globalAlpha)??100)/100,"--react-paint-editor-toolbox-edittextbox-fontfamily":((B=o.style)==null?void 0:B.fontFamily)??En}})};try{yo.displayName="EditTextBox",yo.__docgenInfo={description:"",displayName:"EditTextBox",props:{scaleRatio:{defaultValue:null,description:"",name:"scaleRatio",required:!0,type:{name:"number"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},shape:{defaultValue:null,description:"",name:"shape",required:!0,type:{name:"DrawableText"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!0,type:{name:"string[]"}},selectionPadding:{defaultValue:null,description:"",name:"selectionPadding",required:!0,type:{name:"number"}},updateValue:{defaultValue:null,description:"",name:"updateValue",required:!0,type:{name:"(newValue: string[]) => void"}},saveShapes:{defaultValue:null,description:"",name:"saveShapes",required:!0,type:{name:"() => void"}}}}}catch{}const Lh=(n,i,o,s)=>{if(n.mode==="translate")return{mode:"translate",cursorStartPosition:o,originalShape:i};if(n.mode==="rotate"){const{center:c}=Re(i,s),d=[c[0],c[1]];return{mode:"rotate",cursorStartPosition:o,originalShape:i,center:d}}else if(n.mode==="resize")return{mode:"resize",cursorStartPosition:o,originalShape:i,anchor:n.anchor}},Ih=(n,i,o,s,c,d)=>{if(c){const h=Li(c,i,s,d,o,!0)||{mode:"default"},w=Lh(h,c,i,d);if((w==null?void 0:w.mode)==="resize"||(w==null?void 0:w.mode)==="rotate")return{shape:c,mode:w}}const p=Q.find(h=>!!Li(h,i,s,d,o,!1),n);return p?{shape:p,mode:{mode:"translate",cursorStartPosition:i,originalShape:p}}:{shape:void 0,mode:{mode:"default"}}},Eh=300,kh=()=>{const n=E.useRef(void 0),i=E.useRef(void 0),o=d=>{var h;const p=new Date().getTime();n.current&&p<n.current+Eh&&((h=i.current)==null||h.call(i,d)),n.current=new Date().getTime()};return{registerDoubleClickEvent:(d,p)=>{i.current=p,d.addEventListener("click",o),d.addEventListener("touchend",o)},unRegisterDoubleClickEvent:d=>{d.removeEventListener("click",o),d.removeEventListener("touchend",o)}}},jh=(n,i,o,s,c,d,p,h,w,C,x,L,R,D,T,B,k)=>{var ee;if(o.type==="move"&&h!==void 0){const X=Vi(n,i.current,w,C,x);D([X[0]-h[0],X[1]-h[1]])}if(d==null||d.locked)return;const q=Vi(n,i.current,w,C,x);if(p.mode==="default"||p.mode==="textedition"){const X=Li(d,q,c,B,x,!0)||{mode:"default"};L(X)}else{const X=(ee=i.current)==null?void 0:ee.getContext("2d");if(!X)return;const ae=a5(X,d,q,s,c,p,B,k);R(ae),T(ae)}},Th=({disabled:n=!1,addShape:i,canvasSize:o,drawCanvasRef:s,setActiveTool:c,shapes:d,selectionMode:p,activeTool:h,isInsideComponent:w,setCanvasOffset:C,selectedShape:x,selectionCanvasRef:L,canvasOffsetStartPosition:R,setSelectedShape:D,setCanvasOffsetStartPosition:T,updateSingleShape:B,gridFormat:k,canvasOffset:q,saveShapes:ee,setSelectionMode:X,selectionPadding:ae,isShiftPressed:pe})=>{const{width:N,height:P,scaleRatio:W}=o,[J,fe]=E.useState({mode:"default"}),{registerDoubleClickEvent:Le,unRegisterDoubleClickEvent:De}=kh();return E.useEffect(()=>{const ue=te=>window.requestAnimationFrame(()=>jh(te,L,h,k,q,x,p,R,N,P,W,fe,B,C,D,ae,pe));return w&&(document.addEventListener("mousemove",ue),document.addEventListener("touchmove",ue)),()=>{w&&(document.removeEventListener("mousemove",ue),document.removeEventListener("touchmove",ue))}},[w,L,x,p,fe,k,q,R,N,P,W,B,h,C,D,ae,pe]),E.useEffect(()=>{const ue=()=>{p.mode!=="textedition"&&p.mode!=="default"&&(X({mode:"default"}),ee())};return w&&(document.addEventListener("mouseup",ue),document.addEventListener("touchend",ue)),()=>{w&&(document.removeEventListener("mouseup",ue),document.removeEventListener("touchend",ue))}},[w,p,ee,X]),E.useEffect(()=>{const ue=L.current;if(!ue||n)return;const te=he=>{var qe;he.preventDefault();const Ce=Vi(he,L.current,N,P,W);if(h.type==="selection"){const{shape:Ne,mode:xe}=Ih(d,Ce,W,q,x,ae);D(Ne),X(xe)}else h.type==="move"&&T(Ce);if(Sl.includes(h.type)){const Ne=(qe=s.current)==null?void 0:qe.getContext("2d");if(!Ne)return;if(h.type==="brush"){if(x){const xe=n5(x,Ce);B(xe),D(xe)}else{const xe=Vl(Ne,h,Ce,k);if(!xe)return;i(xe),D(xe)}X({mode:"brush"})}else{const xe=Vl(Ne,h,Ce,k);if(!xe)return;i(xe),c(er),D(xe),X({mode:"resize",cursorStartPosition:Ce,originalShape:xe,anchor:h.type==="line"||h.type==="polygon"||h.type==="curve"?0:[1,1]})}}};return ue.addEventListener("mousedown",te,{passive:!1}),ue.addEventListener("touchstart",te,{passive:!1}),()=>{ue.removeEventListener("mousedown",te),ue.removeEventListener("touchstart",te)}},[n,L,s,x,h,q,T,d,N,P,W,B,i,c,D,X,ae,k]),E.useEffect(()=>{const ue=L.current;if(!ue)return;const te=he=>{if(h.type==="selection"&&(x==null?void 0:x.type)==="text"){const Ce=Vi(he,L.current,N,P,W);Li(x,Ce,q,ae)&&X({mode:"textedition",defaultValue:x.value})}};if(w)return Le(ue,te),()=>{De(ue)}},[Le,De,w,L,h,x,N,P,W,q,X,ae]),{hoverMode:J}},qh=(n,i,o,s,c,d)=>{n.strokeStyle="rgb(220,220,220)",n.lineWidth=1,n.save(),n.scale(s,s),n.beginPath();const p=Lr[d-1],h=-c[0]%p,w=-c[1]%p,C=Math.ceil(i/s/p),x=Math.ceil(o/s/p);for(let L=0;L<C;L++)n.moveTo(h+(L+1)*p,w),n.lineTo(h+(L+1)*p,w+o/s);for(let L=0;L<x;L++)n.moveTo(h,w+(L+1)*p),n.lineTo(h+i/s,w+(L+1)*p);n.stroke(),n.restore()};const Rh=(n,i,o,s,c,d,p,h)=>{const{width:w,height:C,scaleRatio:x}=o;n.clearRect(0,0,w,C),Hl(n),s&&qh(n,w,C,x,c,s);for(let L=d.length-1;L>=0;L--)(i.mode!=="textedition"||d[L]!==h)&&p1(n,d[L],x,c,p)},Dh=(n,i,o,s,c,d,p,h,w)=>{const{width:C,height:x,scaleRatio:L}=o;n.clearRect(0,0,C,x),w&&s.type!=="brush"&&Ah({ctx:n,shape:w,scaleRatio:L,canvasOffset:c,selectionPadding:d,selectionWidth:p,selectionColor:h,withAnchors:i.mode!=="textedition"})},vo=Nl.forwardRef(({gridFormat:n,canGrow:i,disabled:o=!1,canvasSize:s,shapes:c,addShape:d,updateSingleShape:p,selectedShape:h,setSelectedShape:w,saveShapes:C,activeTool:x,setActiveTool:L,canvasOffsetStartPosition:R,setCanvasOffsetStartPosition:D,canvasOffset:T,setCanvasOffset:B,isInsideComponent:k,selectionMode:q,setSelectionMode:ee,selectionWidth:X,selectionColor:ae,selectionPadding:pe,isEditMode:N,isShiftPressed:P},W)=>{const J=E.useRef(null),fe=E.useRef(null);E.useImperativeHandle(W,()=>J.current);const{hoverMode:Le}=Th({disabled:o,addShape:d,canvasSize:s,drawCanvasRef:J,setActiveTool:L,shapes:c,selectionMode:q,activeTool:x,isInsideComponent:k,setCanvasOffset:B,selectedShape:h,selectionCanvasRef:fe,canvasOffsetStartPosition:R,setSelectedShape:w,setCanvasOffsetStartPosition:D,updateSingleShape:p,gridFormat:n,canvasOffset:T,saveShapes:C,setSelectionMode:ee,selectionPadding:pe,isShiftPressed:P}),De=E.useCallback(ue=>{var Ce;if((h==null?void 0:h.type)!=="text")return;const te=(Ce=J.current)==null?void 0:Ce.getContext("2d");if(!te)return;const he=C5(te,h,ue,T);p(he)},[p,h,T]);return E.useEffect(()=>{var te;const ue=(te=J.current)==null?void 0:te.getContext("2d");ue&&window.requestAnimationFrame(()=>Rh(ue,q,s,n,T,c,pe,h))},[c,n,q,h,T,s,pe]),E.useEffect(()=>{var te;const ue=(te=fe.current)==null?void 0:te.getContext("2d");ue&&window.requestAnimationFrame(()=>Dh(ue,q,s,x,T,pe,X,ae,h))},[q,h,x,T,s,pe,X,ae]),v.jsx("div",{className:"react-paint-editor-canvas-box",children:v.jsxs("div",{className:"react-paint-editor-canvas-container","data-grow":i,children:[v.jsx("canvas",{className:"react-paint-editor-canvas-drawcanvas",ref:J,"data-grow":i,width:s.width,height:s.height}),N&&v.jsx("canvas",{className:"react-paint-editor-canvas-selectioncanvas",ref:fe,width:s.width,height:s.height,"data-grow":i,style:{"--react-paint-editor-canvas-cursor":x.type!=="selection"&&x.type!=="move"||Le.mode==="resize"?"crosshair":x.type==="move"||Le.mode==="translate"?"move":Le.mode==="rotate"?"grab":"default"}}),N&&q.mode==="textedition"&&(h==null?void 0:h.type)==="text"&&v.jsx(yo,{scaleRatio:s.scaleRatio,disabled:o,shape:h,defaultValue:q.defaultValue,updateValue:De,saveShapes:C,selectionPadding:pe})]})})});try{vo.displayName="Canvas",vo.__docgenInfo={description:"",displayName:"Canvas",props:{gridFormat:{defaultValue:null,description:"",name:"gridFormat",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"}]}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},canGrow:{defaultValue:null,description:"",name:"canGrow",required:!1,type:{name:"boolean"}},canvasSize:{defaultValue:null,description:"",name:"canvasSize",required:!0,type:{name:"{ width: number; height: number; scaleRatio: number; }"}},selectionColor:{defaultValue:null,description:"",name:"selectionColor",required:!0,type:{name:"string"}},selectionWidth:{defaultValue:null,description:"",name:"selectionWidth",required:!0,type:{name:"number"}},selectionPadding:{defaultValue:null,description:"",name:"selectionPadding",required:!0,type:{name:"number"}},isEditMode:{defaultValue:null,description:"",name:"isEditMode",required:!0,type:{name:"boolean"}},shapes:{defaultValue:null,description:"",name:"shapes",required:!0,type:{name:"DrawableShape[]"}},saveShapes:{defaultValue:null,description:"",name:"saveShapes",required:!0,type:{name:"() => void"}},addShape:{defaultValue:null,description:"",name:"addShape",required:!0,type:{name:"(newShape: DrawableShape) => void"}},updateSingleShape:{defaultValue:null,description:"",name:"updateSingleShape",required:!0,type:{name:"(updatedShape: DrawableShape) => void"}},selectedShape:{defaultValue:null,description:"",name:"selectedShape",required:!0,type:{name:"DrawableShape | undefined"}},setSelectedShape:{defaultValue:null,description:"",name:"setSelectedShape",required:!0,type:{name:"Dispatch<SetStateAction<DrawableShape | undefined>>"}},activeTool:{defaultValue:null,description:"",name:"activeTool",required:!0,type:{name:"ToolsType"}},setActiveTool:{defaultValue:null,description:"",name:"setActiveTool",required:!0,type:{name:"Dispatch<SetStateAction<ToolsType>>"}},canvasOffsetStartPosition:{defaultValue:null,description:"",name:"canvasOffsetStartPosition",required:!0,type:{name:"Point | undefined"}},setCanvasOffsetStartPosition:{defaultValue:null,description:"",name:"setCanvasOffsetStartPosition",required:!0,type:{name:"Dispatch<SetStateAction<Point | undefined>>"}},canvasOffset:{defaultValue:null,description:"",name:"canvasOffset",required:!0,type:{name:"Point"}},setCanvasOffset:{defaultValue:null,description:"",name:"setCanvasOffset",required:!0,type:{name:"Dispatch<SetStateAction<Point>>"}},isInsideComponent:{defaultValue:null,description:"",name:"isInsideComponent",required:!0,type:{name:"boolean"}},selectionMode:{defaultValue:null,description:"",name:"selectionMode",required:!0,type:{name:"SelectionModeData<number | Point>"}},setSelectionMode:{defaultValue:null,description:"",name:"setSelectionMode",required:!0,type:{name:"Dispatch<SetStateAction<SelectionModeData<number | Point>>>"}},isShiftPressed:{defaultValue:null,description:"",name:"isShiftPressed",required:!0,type:{name:"boolean"}}}}}catch{}const Nh=({disabled:n=!1,ref:i,shape:o,layoutDragging:s,setLayoutDragging:c,handleSelect:d,onMoveShapes:p})=>{const[h,w]=E.useState(!1);return E.useEffect(()=>{s||w(!1)},[s]),E.useEffect(()=>{const C=i.current;if(!C)return;const x=()=>{c(void 0)},L=k=>(k.preventDefault&&k.preventDefault(),!1),R=k=>{d(o),k.dataTransfer&&(k.dataTransfer.effectAllowed="move",k.dataTransfer.setData("draggableShapeId",o.id),c(o.id))},D=()=>{s!==o.id&&w(!0)},T=()=>{w(!1)},B=k=>(k.stopPropagation(),k.dataTransfer&&p(k.dataTransfer.getData("draggableShapeId"),o.id),!1);return n||(C.addEventListener("dragstart",R),C.addEventListener("dragend",x),C.addEventListener("dragover",L),C.addEventListener("dragenter",D),C.addEventListener("dragleave",T),C.addEventListener("drop",B)),()=>{n||(C.removeEventListener("dragstart",R),C.removeEventListener("dragend",x),C.removeEventListener("dragover",L),C.removeEventListener("dragenter",D),C.removeEventListener("dragleave",T),C.removeEventListener("drop",B))}},[n,i,o,c,d,p,s]),{isOver:h}},Oh=n=>{switch(n){case"brush":return Kl;case"line":return t1;case"polygon":return Ro;case"curve":return r1;case"rect":return ki;case"square":return ki;case"circle":return ji;case"ellipse":return ji;case"text":return e1;case"picture":return Do}};const we=Nl.forwardRef((n,i)=>{if(n.type==="file"||n.type==="color"){const{hidden:o=!1,disabled:s=!1,selected:c=!1,icon:d,children:p,className:h="",title:w,onClick:C,...x}=n;return v.jsxs("label",{className:`react-paint-editor-button ${h}`,title:w,onClick:C,"data-disabled":+s,"data-selected":+c,"data-hidden":+o,children:[v.jsx("input",{ref:i,disabled:s,...x}),v.jsxs("span",{className:"react-paint-editor-button-content",children:[p&&v.jsx("span",{className:"react-paint-editor-button-children",children:p}),d&&v.jsx("span",{className:"react-paint-editor-button-icon",dangerouslySetInnerHTML:{__html:d}})]})]})}else{const{hidden:o=!1,disabled:s=!1,selected:c=!1,icon:d,children:p,type:h="button",className:w="",...C}=n;return v.jsx("button",{className:`react-paint-editor-button ${w}`,ref:i,disabled:s,"data-disabled":+s,"data-selected":+c,"data-hidden":+o,type:h,...C,children:v.jsxs("span",{className:"react-paint-editor-button-content",children:[p&&v.jsx("span",{className:"react-paint-editor-button-children",children:p}),d&&v.jsx("span",{className:"react-paint-editor-button-icon",dangerouslySetInnerHTML:{__html:d}})]})})}});try{we.displayName="Button",we.__docgenInfo={description:"",displayName:"Button",props:{hidden:{defaultValue:null,description:"",name:"hidden",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"string"}},accept:{defaultValue:null,description:"",name:"accept",required:!1,type:{name:"string"}}}}}catch{}const pr=({children:n,title:i="",className:o="",position:s="bottom",fitContainer:c=!1,alignment:d="center"})=>v.jsxs("div",{className:`react-paint-editor-panel ${o}`,"data-fitcontainer":c,"data-position":s,"data-alignment":d,style:{"--react-paint-editor-panel-zindex":kn.PANEL},children:[i&&v.jsx("h3",{className:"react-paint-editor-panel-title",children:i}),n]});try{pr.displayName="Panel",pr.__docgenInfo={description:"",displayName:"Panel",props:{vertical:{defaultValue:null,description:"",name:"vertical",required:!1,type:{name:"boolean"}},title:{defaultValue:{value:""},description:"",name:"title",required:!1,type:{name:"string"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},fitContainer:{defaultValue:{value:"false"},description:"",name:"fitContainer",required:!1,type:{name:"boolean"}},position:{defaultValue:{value:"bottom"},description:"",name:"position",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"top"'}]}},alignment:{defaultValue:{value:"center"},description:"",name:"alignment",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"left"'},{value:'"right"'}]}}}}}catch{}const Mh=({disabled:n=!1,shape:i,selected:o,layoutDragging:s,toggleShapeVisibility:c,toggleShapeLock:d,setLayoutDragging:p,handleRemove:h,handleSelect:w,onMoveShapes:C})=>{const x=E.useRef(null),L=k=>{n||(k.preventDefault(),k.stopPropagation(),h(i))},R=k=>{n||(k.preventDefault(),k.stopPropagation(),w(i))},D=k=>{n||(k.preventDefault(),k.stopPropagation(),c(i))},T=k=>{n||(k.preventDefault(),k.stopPropagation(),d(i))},{isOver:B}=Nh({disabled:n,ref:x,shape:i,layoutDragging:s,setLayoutDragging:p,handleSelect:w,onMoveShapes:C});return v.jsxs("div",{className:"react-paint-editor-layout","data-disabled":+n,draggable:!n,"data-is-dragging":+(s===i.id),"data-is-over":+B,onClick:R,"data-selected":+o,ref:x,children:[v.jsx("span",{dangerouslySetInnerHTML:{__html:Oh(i.type)}}),v.jsx("span",{children:i.id}),v.jsx("div",{className:"react-paint-editor-layouts-separator"}),v.jsx(we,{className:"react-paint-editor-layouts-visible-button",title:i.visible?"Hide":"Show","data-visible":i.visible!==!1,disabled:n,selected:o,onClick:D,icon:i.visible===!1?P5:z5}),v.jsx(we,{className:"react-paint-editor-layouts-locked-button",title:i.locked?"Locked":"Unlocked","data-locked":!!i.locked,disabled:n,selected:o,onClick:T,icon:i.locked?Y5:X5}),v.jsx(we,{className:"react-paint-editor-layouts-remove-button",title:"Remove",disabled:n,onClick:L,icon:Jl})]})},_o=({gridFormat:n,setGridFormat:i,disabled:o=!1,shapes:s,removeShape:c,toggleShapeVisibility:d,toggleShapeLock:p,selectedShape:h,moveShapes:w,selectShape:C,isLayoutPanelShown:x})=>{const[L,R]=E.useState(void 0);return x?v.jsx(pr,{alignment:"right",className:"react-paint-editor-layouts-panel",children:v.jsx("div",{className:"react-paint-editor-layouts-panel-content",children:v.jsxs("div",{className:"react-paint-editor-layouts-scrolling-content",children:[v.jsxs("div",{className:"react-paint-editor-layouts-row",children:[v.jsx("span",{className:"react-paint-editor-layouts-subtitle",children:"Grid"}),v.jsx(we,{icon:K5,className:"react-paint-editor-layouts-grid-button",selected:n===0,disabled:o,onClick:()=>i(0)}),["S","M","L"].map((D,T)=>v.jsx(we,{className:"react-paint-editor-layouts-grid-button",selected:n===T+1,disabled:o,onClick:()=>i(T+1),children:D},D))]}),v.jsx("hr",{}),v.jsx("div",{className:"react-paint-editor-layouts",children:s.length===0?v.jsx("div",{className:"react-paint-editor-layouts-placeholder",children:"No layer yet"}):Q.map(D=>v.jsx(Mh,{shape:D,disabled:o,layoutDragging:L,setLayoutDragging:R,selected:(h==null?void 0:h.id)===D.id,handleSelect:C,handleRemove:c,onMoveShapes:w,toggleShapeVisibility:d,toggleShapeLock:p},D.id),s)})]})})}):null};try{_o.displayName="Layouts",_o.__docgenInfo={description:"",displayName:"Layouts",props:{gridFormat:{defaultValue:null,description:"",name:"gridFormat",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"},{value:"2"},{value:"3"}]}},setGridFormat:{defaultValue:null,description:"",name:"setGridFormat",required:!0,type:{name:"Dispatch<SetStateAction<GridFormatType>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},shapes:{defaultValue:null,description:"",name:"shapes",required:!0,type:{name:"DrawableShape[]"}},removeShape:{defaultValue:null,description:"",name:"removeShape",required:!0,type:{name:"(shape: DrawableShape) => void"}},toggleShapeVisibility:{defaultValue:null,description:"",name:"toggleShapeVisibility",required:!0,type:{name:"(shape: DrawableShape) => void"}},toggleShapeLock:{defaultValue:null,description:"",name:"toggleShapeLock",required:!0,type:{name:"(shape: DrawableShape) => void"}},selectedShape:{defaultValue:null,description:"",name:"selectedShape",required:!0,type:{name:"DrawableShape | undefined"}},selectShape:{defaultValue:null,description:"",name:"selectShape",required:!0,type:{name:"(shape: DrawableShape) => void"}},moveShapes:{defaultValue:null,description:"",name:"moveShapes",required:!0,type:{name:"(firstShapeId: string, lastShapeId: string) => void"}},isLayoutPanelShown:{defaultValue:null,description:"",name:"isLayoutPanelShown",required:!0,type:{name:"boolean"}}}}}catch{}const Wh=(n,i)=>Q.flow(Q.flatMap(o=>{if(!Q.isObject(o))return Q.filter({type:o},n);const s=Q.filter(c=>Q.includes(c.type,o.toolsType),n);return s?{...o,toolsType:s}:null}),Q.compact)(i),Ll=(n,i=!1)=>{const o=(s,c)=>{if(Q.isArray(s))return c};return Q.flow(Q.map(s=>{if(!Q.isObject(s))return null;switch(Q.get("type",s)){case"brush":return Q.mergeWith(o,n1,s);case"circle":return Q.mergeWith(o,l1,s);case"curve":return Q.mergeWith(o,o1,s);case"ellipse":return Q.mergeWith(o,c1,s);case"line":return Q.mergeWith(o,i1,s);case"polygon":return Q.mergeWith(o,a1,s);case"rect":return Q.mergeWith(o,u1,s);case"square":return Q.mergeWith(o,s1,s);case"text":return Q.mergeWith(o,f1,s)}return null}),s=>i?[...s,No]:s,Q.compact)(n)},at=({type:n,img:i,isActive:o,withText:s=!1,disabled:c=!1,setActive:d})=>{const p=()=>{d(n)};return v.jsx(we,{disabled:c,selected:o,onClick:p,title:n.label??n.type,icon:i,children:s?n.label:void 0})};try{at.displayName="Tool",at.__docgenInfo={description:"",displayName:"Tool",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"ToolsType"}},img:{defaultValue:null,description:"",name:"img",required:!1,type:{name:"string"}},withText:{defaultValue:{value:"false"},description:"",name:"withText",required:!1,type:{name:"boolean"}},isActive:{defaultValue:null,description:"",name:"isActive",required:!0,type:{name:"boolean"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},setActive:{defaultValue:null,description:"",name:"setActive",required:!0,type:{name:"(marker: ToolsType) => void"}}}}}catch{}const h1=(n,i)=>!(n.target instanceof Node)||!i?!1:i.contains(n.target);const bo=({activeTool:n,alignment:i,group:o,disabled:s=!1,setActiveToolFromId:c})=>{var B;const d=E.useRef(null),[p,h]=E.useState(!1),[,w]=E.useTransition(),[C,x]=E.useState(void 0),L=k=>{x(k),c(k.id)};if(E.useEffect(()=>{if(!p)return;const k=q=>{!h1(q,d.current)&&h(!1)};return document.addEventListener("mousedown",k,{passive:!1}),document.addEventListener("touchstart",k,{passive:!1}),()=>{document.removeEventListener("mousedown",k),document.removeEventListener("touchstart",k)}},[p]),"type"in o)return v.jsx(at,{disabled:s,type:o,img:o.icon,isActive:n.id===o.id,setActive:L});if(Q.isEmpty(o.toolsType))return null;if(((B=o.toolsType)==null?void 0:B.length)===1)return v.jsx(at,{disabled:s,type:o.toolsType[0],img:o.toolsType[0].icon,isActive:n.id===o.toolsType[0].id,setActive:L});const R=Q.find({type:n.type},o==null?void 0:o.toolsType)!==void 0,D=(C?C.icon:o.toolsType&&o.toolsType[0]&&o.toolsType[0].icon)??o.title,T=()=>{C?c(C.id):o.toolsType&&o.toolsType[0]&&L(o.toolsType[0]),w(()=>{h(!0)})};return v.jsxs("div",{className:"react-paint-editor-toolbargroup-relative",children:[v.jsx(we,{selected:R,title:o.title,disabled:s,onClick:T,icon:D}),p&&v.jsx(pr,{alignment:i,position:"top",children:v.jsx("div",{className:"react-paint-editor-toolbargroup-panel-content","data-vertical":+o.vertical,ref:d,children:o.toolsType.map((k,q)=>v.jsx(at,{disabled:s,type:k,img:k.icon,isActive:n.id===k.id,setActive:L},q))})})]})};try{bo.displayName="ToolbarGroup",bo.__docgenInfo={description:"",displayName:"ToolbarGroup",props:{activeTool:{defaultValue:null,description:"",name:"activeTool",required:!0,type:{name:"ToolsType"}},group:{defaultValue:null,description:"",name:"group",required:!0,type:{name:"CustomTool | { title: string; toolsType: CustomTool[]; vertical: boolean; }"}},alignment:{defaultValue:null,description:"",name:"alignment",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"left"'},{value:'"right"'}]}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},img:{defaultValue:null,description:"",name:"img",required:!1,type:{name:"string"}},setActiveToolFromId:{defaultValue:null,description:"",name:"setActiveToolFromId",required:!0,type:{name:"(id: string) => void"}}}}}catch{}const Ti=({disabled:n=!1,withText:i=!1,loadFile:o,type:s,img:c,accept:d})=>{const p=E.useRef(null),h=C=>{C.stopPropagation(),p.current&&(p.current.value="")},w=C=>{var L;const x=(L=C.target.files)==null?void 0:L.item(0);x&&o(x)};return v.jsx(we,{ref:p,type:"file",onClick:h,onChange:w,accept:d,title:s.label??s.type,icon:c,children:i?s.label:void 0,disabled:n})};try{Ti.displayName="LoadFileTool",Ti.__docgenInfo={description:"",displayName:"LoadFileTool",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},loadFile:{defaultValue:null,description:"",name:"loadFile",required:!0,type:{name:"(file: File) => void"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"ToolsType"}},img:{defaultValue:null,description:"",name:"img",required:!1,type:{name:"string"}},accept:{defaultValue:null,description:"",name:"accept",required:!0,type:{name:"string"}},withText:{defaultValue:{value:"false"},description:"",name:"withText",required:!1,type:{name:"boolean"}}}}}catch{}const Qo=({activeTool:n,withActionsInMenu:i,hasActionToUndo:o=!1,hasActionToRedo:s=!1,hasActionToClear:c=!1,undoAction:d,redoAction:p,clearCanvas:h,alignment:w,group:C,vertical:x=!1,disabled:L=!1,withLoadAndSave:R,withExport:D,addPicture:T,loadFile:B,togglePictureUrlModal:k,saveFile:q,exportCanvasInFile:ee,withUploadPicture:X,withUrlPicture:ae})=>{const[pe,N]=E.useState(!1),[,P]=E.useTransition(),W=te=>{N(!1),B(te)},J=async te=>{N(!1),await T(te)},fe=()=>{P(()=>{N(!0)})},Le=Q.includes(n.type,C==null?void 0:C.tools),De=(Le?n.icon:C.img)??C.title;return E.useEffect(()=>{if(!pe)return;const te=()=>{N(!1)};return document.addEventListener("click",te),()=>{document.removeEventListener("click",te)}},[pe]),i||X||ae||R||D?v.jsxs("div",{className:"react-paint-editor-toolbox-relative",children:[v.jsx(we,{selected:Le,title:C.title,disabled:L,onClick:fe,icon:De}),pe&&v.jsx(pr,{alignment:w,position:"top",children:v.jsxs("div",{className:"react-paint-editor-toolbox-panel-content","data-vertical":+x,children:[i&&v.jsxs(v.Fragment,{children:[v.jsx(at,{withText:!0,type:Kr,disabled:L||!o,img:Kr.icon,isActive:n.id===Kr.id,setActive:d}),v.jsx(at,{withText:!0,type:Jr,disabled:L||!s,img:Jr.icon,isActive:n.id===Jr.id,setActive:p}),v.jsx(at,{withText:!0,type:en,disabled:L||!c,img:en.icon,isActive:n.id===en.id,setActive:h}),(X||ae||R)&&v.jsx("hr",{})]}),X&&v.jsx(Ti,{withText:!0,type:Al,disabled:L,loadFile:J,img:Al.icon,accept:"image/png, image/gif, image/jpeg, image/svg+xml"}),ae&&v.jsx(we,{disabled:L,selected:!1,onClick:k,title:"Add picture from URL",icon:G5,children:"Add picture from URL"}),(X||ae)&&R&&v.jsx("hr",{}),R&&v.jsxs(v.Fragment,{children:[v.jsx(Ti,{withText:!0,type:Cl,disabled:L,loadFile:W,img:Cl.icon,accept:"application/JSON"}),v.jsx(at,{withText:!0,disabled:L,type:fo,img:fo.icon,isActive:n.id===fo.id,setActive:q})]}),D&&v.jsx(at,{withText:!0,disabled:L,type:co,img:co.icon,isActive:n.id===co.id,setActive:ee})]})})]}):null};try{Qo.displayName="MenuGroup",Qo.__docgenInfo={description:"",displayName:"MenuGroup",props:{activeTool:{defaultValue:null,description:"",name:"activeTool",required:!0,type:{name:"ToolsType"}},withActionsInMenu:{defaultValue:null,description:"",name:"withActionsInMenu",required:!0,type:{name:"boolean"}},group:{defaultValue:null,description:"",name:"group",required:!0,type:{name:'{ tools?: ("brush" | "rect" | "square" | "line" | "polygon" | "circle" | "curve" | "ellipse" | "picture" | "text")[] | undefined; title: string; img: string; }'}},vertical:{defaultValue:{value:"false"},description:"",name:"vertical",required:!1,type:{name:"boolean"}},alignment:{defaultValue:null,description:"",name:"alignment",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"left"'},{value:'"right"'}]}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},img:{defaultValue:null,description:"",name:"img",required:!1,type:{name:"string"}},loadFile:{defaultValue:null,description:"",name:"loadFile",required:!0,type:{name:"(file: File) => void"}},addPicture:{defaultValue:null,description:"",name:"addPicture",required:!0,type:{name:"(file: File) => Promise<void>"}},saveFile:{defaultValue:null,description:"",name:"saveFile",required:!0,type:{name:"() => void"}},exportCanvasInFile:{defaultValue:null,description:"",name:"exportCanvasInFile",required:!0,type:{name:"() => void"}},togglePictureUrlModal:{defaultValue:null,description:"",name:"togglePictureUrlModal",required:!0,type:{name:"() => void"}},withLoadAndSave:{defaultValue:null,description:"",name:"withLoadAndSave",required:!0,type:{name:"boolean"}},withExport:{defaultValue:null,description:"",name:"withExport",required:!0,type:{name:"boolean"}},hasActionToUndo:{defaultValue:{value:"false"},description:"",name:"hasActionToUndo",required:!1,type:{name:"boolean"}},hasActionToRedo:{defaultValue:{value:"false"},description:"",name:"hasActionToRedo",required:!1,type:{name:"boolean"}},hasActionToClear:{defaultValue:{value:"false"},description:"",name:"hasActionToClear",required:!1,type:{name:"boolean"}},withUploadPicture:{defaultValue:null,description:"",name:"withUploadPicture",required:!0,type:{name:"boolean"}},withUrlPicture:{defaultValue:null,description:"",name:"withUrlPicture",required:!0,type:{name:"boolean"}},undoAction:{defaultValue:null,description:"",name:"undoAction",required:!0,type:{name:"() => void"}},redoAction:{defaultValue:null,description:"",name:"redoAction",required:!0,type:{name:"() => void"}},clearCanvas:{defaultValue:null,description:"",name:"clearCanvas",required:!0,type:{name:"() => void"}}}}}catch{}const Ln=({children:n,onClose:i,position:o="center",className:s=""})=>v.jsxs("div",{className:"react-paint-editor-modal","data-position":o,style:{"--react-paint-editor-modal-zindex":kn.PANEL},children:[v.jsx("div",{className:"react-paint-editor-modal-mask",onClick:i}),v.jsx("div",{className:`react-paint-editor-modal-panel ${s}`,children:n})]});try{Ln.displayName="Modal",Ln.__docgenInfo={description:"",displayName:"Modal",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},position:{defaultValue:{value:"center"},description:"",name:"position",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"bottom"'}]}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}const Sh=({togglePictureUrlModal:n,addPicture:i})=>{const o=E.useRef(null),s=async c=>{var p;c.preventDefault();const d=(p=o.current)==null?void 0:p.value;d&&(await i(d),n())};return E.useEffect(()=>{o.current&&o.current.focus()},[]),v.jsx(Ln,{className:"react-paint-editor-toolbox-pictureinput-modal",onClose:n,children:v.jsxs("form",{onSubmit:s,children:[v.jsxs("label",{children:["URL ",v.jsx("input",{type:"text",ref:o})]}),v.jsx(we,{onClick:n,children:"Annuler"}),v.jsx(we,{type:"submit",selected:!0,children:"Ajouter"})]})})};try{PictureUrlInput.displayName="PictureUrlInput",PictureUrlInput.__docgenInfo={description:"",displayName:"PictureUrlInput",props:{togglePictureUrlModal:{defaultValue:null,description:"",name:"togglePictureUrlModal",required:!0,type:{name:"() => void"}},addPicture:{defaultValue:null,description:"",name:"addPicture",required:!0,type:{name:"(url: string) => Promise<void>"}}}}}catch{}const Il=40,Hh=[{title:"brush",toolsType:["brush"],vertical:!1},{title:"lines",toolsType:["line","curve","polygon"],vertical:!1},{title:"shapes",toolsType:["rect","square","circle","ellipse"],vertical:!1},"text"],wo=({width:n,disabled:i=!1,activeTool:o,hasActionToUndo:s=!1,hasActionToRedo:c=!1,hasActionToClear:d=!1,withLoadAndSave:p,withExport:h,clearCanvas:w,setActiveTool:C,undoAction:x,redoAction:L,addPicture:R,loadFile:D,saveFile:T,exportCanvasInFile:B,availableTools:k,withUrlPicture:q,withUploadPicture:ee})=>{const X=Wh(k,Hh),ae=(5+X.length)*Il,pe=(2+X.length)*Il,[N,P]=E.useState(!1),[W,J]=E.useState(!1),[fe,Le]=E.useState(n<ae),[De,ue]=E.useState(n<pe),te=()=>{P(Ae=>!Ae)},he=()=>{J(!0)},Ce=()=>{J(Ae=>!Ae)},qe=Ae=>{C(Ae),P(!1)},Ne=Ae=>{qe(k.find(Ze=>Ze.id===Ae)??o)};E.useEffect(()=>{Le(n<ae),ue(n<pe)},[n,ae,pe]);const xe=Q.find({type:o},k)!==void 0;return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"react-paint-editor-toolbar-toolbox",children:[v.jsxs("div",{className:"react-paint-editor-toolbar-shrinkable",children:[v.jsx(at,{type:er,disabled:i,img:er.icon,isActive:o.id===er.id,setActive:qe}),De?v.jsx(we,{disabled:i,onClick:te,title:"Toggle tools",icon:N5,selected:xe}):X.map((Ae,Ze)=>v.jsx(bo,{disabled:i,activeTool:o,group:Ae,setActiveToolFromId:Ne},Ze))]}),!fe&&v.jsxs(v.Fragment,{children:[v.jsx(at,{type:Kr,disabled:i||!s,img:Kr.icon,isActive:o.id===Kr.id,setActive:x}),v.jsx(at,{type:Jr,disabled:i||!c,img:Jr.icon,isActive:o.id===Jr.id,setActive:L}),v.jsx(at,{type:en,disabled:i||!d,img:en.icon,isActive:o.id===en.id,setActive:w})]}),v.jsx(Qo,{withActionsInMenu:fe,disabled:i,vertical:!0,alignment:"right",group:{title:"Menu",img:Z5},activeTool:o,addPicture:R,loadFile:D,saveFile:T,togglePictureUrlModal:he,exportCanvasInFile:B,withUploadPicture:ee,withUrlPicture:q,withLoadAndSave:p,withExport:h,hasActionToUndo:s,hasActionToRedo:c,hasActionToClear:d,undoAction:x,redoAction:L,clearCanvas:w})]}),N&&v.jsx(Ln,{className:"react-paint-editor-toolbar-modal",onClose:te,children:k.map((Ae,Ze)=>Ae.type==="picture"?null:v.jsx(at,{disabled:i,type:Ae,img:Ae.icon,withText:!1,isActive:o.id===Ae.id,setActive:qe},Ze))}),W&&v.jsx(Sh,{togglePictureUrlModal:Ce,addPicture:R})]})};try{wo.displayName="Toolbar",wo.__docgenInfo={description:"",displayName:"Toolbar",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},activeTool:{defaultValue:null,description:"",name:"activeTool",required:!0,type:{name:"ToolsType"}},hasActionToUndo:{defaultValue:{value:"false"},description:"",name:"hasActionToUndo",required:!1,type:{name:"boolean"}},hasActionToRedo:{defaultValue:{value:"false"},description:"",name:"hasActionToRedo",required:!1,type:{name:"boolean"}},hasActionToClear:{defaultValue:{value:"false"},description:"",name:"hasActionToClear",required:!1,type:{name:"boolean"}},undoAction:{defaultValue:null,description:"",name:"undoAction",required:!0,type:{name:"() => void"}},redoAction:{defaultValue:null,description:"",name:"redoAction",required:!0,type:{name:"() => void"}},clearCanvas:{defaultValue:null,description:"",name:"clearCanvas",required:!0,type:{name:"() => void"}},setActiveTool:{defaultValue:null,description:"",name:"setActiveTool",required:!0,type:{name:"(tool: ToolsType) => void"}},loadFile:{defaultValue:null,description:"",name:"loadFile",required:!0,type:{name:"(file: File) => void"}},addPicture:{defaultValue:null,description:"",name:"addPicture",required:!0,type:{name:"(file: string | File) => Promise<void>"}},saveFile:{defaultValue:null,description:"",name:"saveFile",required:!0,type:{name:"() => void"}},exportCanvasInFile:{defaultValue:null,description:"",name:"exportCanvasInFile",required:!0,type:{name:"() => void"}},availableTools:{defaultValue:null,description:"",name:"availableTools",required:!0,type:{name:"CustomTool[]"}},withLoadAndSave:{defaultValue:null,description:"",name:"withLoadAndSave",required:!0,type:{name:"boolean"}},withExport:{defaultValue:null,description:"",name:"withExport",required:!0,type:{name:"boolean"}},withUrlPicture:{defaultValue:null,description:"",name:"withUrlPicture",required:!0,type:{name:"boolean"}},withUploadPicture:{defaultValue:null,description:"",name:"withUploadPicture",required:!0,type:{name:"boolean"}}}}}catch{}const Gr=({selectedSettings:n,setSelectedSettings:i,title:o="Choisissez une couleur",mode:s="fill",disabled:c=!1,values:d,field:p,value:h="",valueChanged:w})=>{const[C]=E.useState(Q.uniqueId("settings_")),x=T=>{const B=Q.toNumber(T.target.value);w(p,Q.isNaN(B)?T.target.value:B)},L=T=>{w(p,T)},R=()=>{i(T=>T===C?void 0:C)},D=n===C;return Q.isEmpty(d)?null:v.jsxs(v.Fragment,{children:[v.jsx(we,{selected:D,title:o,disabled:c,onClick:R,icon:h==="transparent"?s==="fill"?xl:wl:void 0,children:h!=="transparent"&&v.jsx("div",{className:"react-paint-editor-colorfield-color","data-mode":s,style:{"--react-paint-editor-colorfield-color-value":h}})}),D&&v.jsx(pr,{title:o,alignment:"left",children:v.jsxs("div",{className:"react-paint-editor-colorfield-wrapper",children:[d.map((T,B)=>v.jsx(we,{title:T,selected:T===h,color:T,icon:T==="transparent"?s==="fill"?xl:wl:void 0,onClick:()=>L(T),children:T!=="transparent"&&v.jsx("div",{className:"react-paint-editor-colorfield-color",color:T,"data-mode":s,style:{"--react-paint-editor-colorfield-color-value":T}})},B)),v.jsx(we,{type:"color",title:"Custom color",selected:!Q.includes(h,d),value:h,onChange:x,children:v.jsx("div",{className:"react-paint-editor-colorfield-customcolor",style:{"--react-paint-editor-colorfield-color-value":Q.includes(h,d)?"var(--react-paint-editor-app-font-color)":h},children:v.jsx("span",{dangerouslySetInnerHTML:{__html:$5}})})})]})})]})};try{Gr.displayName="ColorField",Gr.__docgenInfo={description:"",displayName:"ColorField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},title:{defaultValue:{value:"Choisissez une couleur"},description:"",name:"title",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},mode:{defaultValue:{value:"fill"},description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"fill"'},{value:'"stroke"'}]}},value:{defaultValue:{value:""},description:"",name:"value",required:!1,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"string[]"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const xo=({disabled:n=!1,selectedShape:i,removeShape:o})=>{const s=()=>{o(i)};return v.jsx(we,{title:"Delete",disabled:n,"data-disabled":+n,onClick:s,icon:Jl})};try{xo.displayName="DeleteButton",xo.__docgenInfo={description:"",displayName:"DeleteButton",props:{disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},selectedShape:{defaultValue:null,description:"",name:"selectedShape",required:!0,type:{name:"DrawableShape"}},removeShape:{defaultValue:null,description:"",name:"removeShape",required:!0,type:{name:"(shape: DrawableShape) => void"}}}}}catch{}const Co=({disabled:n,toggleLayoutPanel:i})=>v.jsx(we,{title:"Toggle layers panel",disabled:n,onClick:i,icon:W5,className:"react-paint-editor-layout-button"});try{Co.displayName="LayoutButton",Co.__docgenInfo={description:"",displayName:"LayoutButton",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!0,type:{name:"boolean"}},toggleLayoutPanel:{defaultValue:null,description:"",name:"toggleLayoutPanel",required:!0,type:{name:"() => void"}}}}}catch{}const Ir=({selectedSettings:n,setSelectedSettings:i,title:o="Choisissez l'intervalle",icon:s,disabled:c=!1,field:d,value:p=1,min:h=1,max:w=20,step:C=1,unity:x="",valueChanged:L})=>{const R=Math.round(p),[D]=E.useState(Q.uniqueId("settings_")),T=q=>{const ee=Q.toNumber(q.target.value);L(d,Q.isNaN(ee)?q.target.value:ee)},B=()=>{i(q=>q===D?void 0:D)},k=n===D;return h===w?null:v.jsxs(v.Fragment,{children:[v.jsx(we,{selected:k,title:o,disabled:c,icon:s,onClick:B}),k&&v.jsx(pr,{title:o,alignment:"left",fitContainer:!0,children:v.jsx("div",{children:v.jsxs("label",{className:"react-paint-editor-rangefield",children:[v.jsx("input",{type:"range",min:h,max:w,step:C,value:p,onChange:T}),v.jsxs("span",{children:[R,x]})]})})})]})};try{Ir.displayName="RangeField",Ir.__docgenInfo={description:"",displayName:"RangeField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},title:{defaultValue:{value:"Choisissez l'intervalle"},description:"",name:"title",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},min:{defaultValue:{value:"1"},description:"",name:"min",required:!1,type:{name:"number"}},max:{defaultValue:{value:"20"},description:"",name:"max",required:!1,type:{name:"number"}},step:{defaultValue:{value:"1"},description:"",name:"step",required:!1,type:{name:"number"}},unity:{defaultValue:{value:""},description:"",name:"unity",required:!1,type:{name:"string"}},value:{defaultValue:{value:"1"},description:"",name:"value",required:!1,type:{name:"number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const In=({CustomOption:n,selectedSettings:i,setSelectedSettings:o,title:s="Choisissez l'option",disabled:c=!1,field:d,icon:p,values:h,defaultValue:w,valueChanged:C})=>{const[x]=E.useState(Q.uniqueId("settings_")),L=T=>{C(d,T)},R=()=>{o(T=>T===x?void 0:x)},D=i===x;return Q.isEmpty(h)?null:v.jsxs(v.Fragment,{children:[v.jsx(we,{selected:D,title:s,icon:p,disabled:c,onClick:R}),D&&v.jsx(pr,{title:s,alignment:"left",fitContainer:!0,children:v.jsx("div",{className:"react-paint-editor-selectfield-wrapper",children:h.map(T=>v.jsx(we,{title:`${T}`,onClick:()=>L(T),selected:w==T,style:{"--react-paint-editor-button-padding":"16px"},children:v.jsx(n,{children:T})},T))})})]})};try{In.displayName="SelectField",In.__docgenInfo={description:"",displayName:"SelectField",props:{CustomOption:{defaultValue:null,description:"",name:"CustomOption",required:!0,type:{name:"FC<{ children?: ReactNode; }>"}},selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},title:{defaultValue:{value:"Choisissez l'option"},description:"",name:"title",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"(string | number)[]"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const Fh=({children:n})=>v.jsx("span",{className:"react-paint-editor-fontfamily-option",style:{"--react-paint-editor-fontfamily-family":n},children:n}),qi=({selectedSettings:n,setSelectedSettings:i,disabled:o=!1,values:s,defaultValue:c,valueChanged:d})=>Q.isEmpty(s)?null:v.jsx(In,{selectedSettings:n,setSelectedSettings:i,CustomOption:Fh,title:"Police",icon:eh,disabled:o,field:"fontFamily",values:s,defaultValue:c,valueChanged:d});try{qi.displayName="FontFamilyField",qi.__docgenInfo={description:"",displayName:"FontFamilyField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"string[]"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const Ri=({selectedSettings:n,setSelectedSettings:i,disabled:o=!1,min:s,max:c,step:d,value:p,valueChanged:h})=>s===c?null:v.jsx(Ir,{selectedSettings:n,setSelectedSettings:i,icon:Ro,title:"Nombre de points",disabled:o,field:"pointsCount",min:s,max:c,step:d,unity:"",value:p,valueChanged:h});try{Ri.displayName="PointsNumberField",Ri.__docgenInfo={description:"",displayName:"PointsNumberField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},min:{defaultValue:null,description:"",name:"min",required:!0,type:{name:"number"}},max:{defaultValue:null,description:"",name:"max",required:!0,type:{name:"number"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const Ao=({children:n})=>v.jsxs("span",{className:"react-paint-editor-linetype-option","data-type":n,children:[v.jsx("span",{}),v.jsx("span",{}),v.jsx("span",{}),v.jsx("span",{}),v.jsx("span",{}),v.jsx("span",{}),v.jsx("span",{})]}),Di=({selectedSettings:n,setSelectedSettings:i,disabled:o=!1,values:s,defaultValue:c,valueChanged:d})=>Q.isEmpty(s)?null:v.jsx(In,{selectedSettings:n,setSelectedSettings:i,CustomOption:Ao,icon:J5,title:"Type de traits",disabled:o,field:"lineDash",values:s,defaultValue:c,valueChanged:d});try{Ao.displayName="LineTypeOption",Ao.__docgenInfo={description:"",displayName:"LineTypeOption",props:{}}}catch{}try{Di.displayName="LineTypeField",Di.__docgenInfo={description:"",displayName:"LineTypeField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"number[]"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const Bh=({children:n})=>v.jsxs("span",{className:"react-paint-editor-linearrow-option","data-type":n,children:[v.jsx("span",{className:"react-paint-editor-linearrow-left"}),v.jsx("span",{className:"react-paint-editor-linearrow-right"})]}),Ni=({selectedSettings:n,setSelectedSettings:i,disabled:o=!1,values:s,defaultValue:c,valueChanged:d})=>Q.isEmpty(s)?null:v.jsx(In,{selectedSettings:n,setSelectedSettings:i,CustomOption:Bh,title:"Flèches",icon:th,disabled:o,field:"lineArrow",values:s,defaultValue:c,valueChanged:d});try{Ni.displayName="LineArrowField",Ni.__docgenInfo={description:"",displayName:"LineArrowField",props:{selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"string | undefined"}},setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"number[]"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: string | number) => void"}}}}}catch{}const Yr=({setSelectedSettings:n,disabled:i=!1,field:o,icon:s,values:c,value:d=!1,valueChanged:p})=>{const[h]=E.useState(Q.uniqueId("settings_")),w=()=>{n(C=>C===h?void 0:h),p(o,!d)};return c.length!==2?null:v.jsx(we,{onClick:w,selected:d,disabled:i,icon:s})};try{Yr.displayName="ToggleField",Yr.__docgenInfo={description:"",displayName:"ToggleField",props:{setSelectedSettings:{defaultValue:null,description:"",name:"setSelectedSettings",required:!0,type:{name:"Dispatch<SetStateAction<string | undefined>>"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},field:{defaultValue:null,description:"",name:"field",required:!0,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"string"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"boolean[]"}},value:{defaultValue:{value:"false"},description:"",name:"value",required:!1,type:{name:"boolean"}},valueChanged:{defaultValue:null,description:"",name:"valueChanged",required:!0,type:{name:"(field: string, value: boolean) => void"}}}}}catch{}const Uh=40,po=({activeTool:n,selectedShape:i,selectedShapeTool:o,disabled:s,selectedSettings:c,setSelectedSettings:d,handleShapeStyleChange:p,handlePolygonLinesCount:h,handleShapeFontFamilyChange:w})=>{var C,x,L,R,D,T,B,k,q,ee;return i?v.jsx(v.Fragment,{children:o&&v.jsxs(v.Fragment,{children:["strokeColor"in o.settings&&v.jsx(Gr,{selectedSettings:c,setSelectedSettings:d,title:"Couleur du trait",mode:"stroke",disabled:s,field:"strokeColor",value:(C=i.style)==null?void 0:C.strokeColor,valueChanged:p,values:o.settings.strokeColor.values}),"fillColor"in o.settings&&v.jsx(Gr,{selectedSettings:c,setSelectedSettings:d,title:"Couleur de fond",disabled:s,field:"fillColor",value:(x=i.style)==null?void 0:x.fillColor,valueChanged:p,values:o.settings.fillColor.values}),"lineWidth"in o.settings&&v.jsx(Ir,{selectedSettings:c,setSelectedSettings:d,title:"Epaisseur du trait",icon:Ql,disabled:s,field:"lineWidth",value:(L=i.style)==null?void 0:L.lineWidth,valueChanged:p,unity:"px",min:o.settings.lineWidth.min,max:o.settings.lineWidth.max,step:o.settings.lineWidth.step}),"lineDash"in o.settings&&v.jsx(Di,{selectedSettings:c,setSelectedSettings:d,disabled:s,defaultValue:(R=i.style)==null?void 0:R.lineDash,valueChanged:p,values:o.settings.lineDash.values}),"lineArrow"in o.settings&&v.jsx(Ni,{selectedSettings:c,setSelectedSettings:d,disabled:s,defaultValue:(D=i.style)==null?void 0:D.lineArrow,valueChanged:p,values:o.settings.lineArrow.values}),"pointsCount"in o.settings&&v.jsx(Ri,{selectedSettings:c,setSelectedSettings:d,disabled:s,valueChanged:h,min:o.settings.pointsCount.min,max:o.settings.pointsCount.max,step:o.settings.pointsCount.step,value:(T=i.style)==null?void 0:T.pointsCount}),"fontFamily"in o.settings&&v.jsx(qi,{selectedSettings:c,setSelectedSettings:d,disabled:s,valueChanged:w,values:o.settings.fontFamily.values,defaultValue:(B=i.style)==null?void 0:B.fontFamily}),"fontBold"in o.settings&&v.jsx(Yr,{setSelectedSettings:d,disabled:s,field:"fontBold",icon:_l,valueChanged:w,values:o.settings.fontBold.values,value:(k=i.style)==null?void 0:k.fontBold}),"fontItalic"in o.settings&&v.jsx(Yr,{setSelectedSettings:d,disabled:s,field:"fontItalic",icon:bl,valueChanged:w,values:o.settings.fontItalic.values,value:(q=i.style)==null?void 0:q.fontItalic}),"opacity"in o.settings&&v.jsx(Ir,{selectedSettings:c,setSelectedSettings:d,title:"Opacité",icon:vl,min:o.settings.opacity.min,max:o.settings.opacity.max,step:o.settings.opacity.step,unity:"%",disabled:s,field:"globalAlpha",value:((ee=i.style)==null?void 0:ee.globalAlpha)??100,valueChanged:p})]})}):"settings"in n?v.jsxs(v.Fragment,{children:["strokeColor"in n.settings&&v.jsx(Gr,{selectedSettings:c,setSelectedSettings:d,title:"Couleur du trait",mode:"stroke",disabled:s,field:"strokeColor",value:n.settings.strokeColor.default,valueChanged:p,values:n.settings.strokeColor.values}),"fillColor"in n.settings&&v.jsx(Gr,{selectedSettings:c,setSelectedSettings:d,title:"Couleur de fond",disabled:s,field:"fillColor",value:n.settings.fillColor.default,valueChanged:p,values:n.settings.fillColor.values}),"lineWidth"in n.settings&&v.jsx(Ir,{selectedSettings:c,setSelectedSettings:d,title:"Epaisseur du trait",disabled:s,field:"lineWidth",icon:Ql,value:n.settings.lineWidth.default,valueChanged:p,unity:"px",min:n.settings.lineWidth.min,max:n.settings.lineWidth.max,step:n.settings.lineWidth.step}),"lineDash"in n.settings&&v.jsx(Di,{selectedSettings:c,setSelectedSettings:d,disabled:s,defaultValue:n.settings.lineDash.default,valueChanged:p,values:n.settings.lineDash.values}),"lineArrow"in n.settings&&v.jsx(Ni,{selectedSettings:c,setSelectedSettings:d,disabled:s,defaultValue:n.settings.lineArrow.default,valueChanged:p,values:n.settings.lineArrow.values}),"pointsCount"in n.settings&&v.jsx(Ri,{selectedSettings:c,setSelectedSettings:d,disabled:s,valueChanged:h,min:n.settings.pointsCount.min,max:n.settings.pointsCount.max,step:n.settings.pointsCount.step,value:n.settings.pointsCount.default}),"fontFamily"in n.settings&&v.jsx(qi,{selectedSettings:c,setSelectedSettings:d,disabled:s,valueChanged:w,values:n.settings.fontFamily.values,defaultValue:n.settings.fontFamily.default}),"fontBold"in n.settings&&v.jsx(Yr,{setSelectedSettings:d,disabled:s,field:"fontBold",icon:_l,valueChanged:w,values:n.settings.fontBold.values,value:n.settings.fontBold.default}),"fontItalic"in n.settings&&v.jsx(Yr,{setSelectedSettings:d,disabled:s,field:"fontItalic",icon:bl,valueChanged:w,values:n.settings.fontItalic.values,value:n.settings.fontItalic.default}),"opacity"in n.settings&&v.jsx(Ir,{selectedSettings:c,setSelectedSettings:d,title:"Opacité",icon:vl,min:n.settings.opacity.min,max:n.settings.opacity.max,step:n.settings.opacity.step,unity:"%",disabled:s,field:"opacity",value:n.settings.opacity.default,valueChanged:p})]}):null},Vo=({width:n,disabled:i=!1,availableTools:o,updateToolSettings:s,layersManipulation:c,toggleLayoutPanel:d,activeTool:p,selectedShape:h,canvas:w,updateShape:C,removeShape:x})=>{const[L,R]=E.useState(void 0),[D,T]=E.useState(!1),B=()=>{T(W=>!W)},k=h?Q.find({id:h.toolId},o)||Q.find({type:h.type},o):void 0,q=(k?Q.size(k.settings)+1:"settings"in p?Q.size(p.settings):0)+(c?1:0),ee=q*Uh,[X,ae]=E.useState(n<ee),pe=(W,J)=>{h?(C(Q.set(["style",W],J,h),!0),s(h.toolId||p.id,W,J)):s(p.id,W,J)},N=(W,J)=>{var fe,Le,De;if(h){const ue=w==null?void 0:w.getContext("2d");if(!ue)return;const te=Q.set(["style",W],J,h),he=qo(ue,te.value,te.width,((fe=te.style)==null?void 0:fe.fontBold)??!1,((Le=te.style)==null?void 0:Le.fontItalic)??!1,(De=te.style)==null?void 0:De.fontFamily),Ce={...te,fontSize:he,height:he*te.value.length};C(Ce,!0),s(h.toolId||p.id,W,J)}else s(p.id,W,J)},P=(W,J)=>{h?(C(i5(h,J),!0),s(h.toolId||p.id,W,J)):s(p.id,W,J)};return E.useEffect(()=>{ae(n<ee)},[n,ee]),v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"react-paint-editor-settings-bar",children:[X&&q>2&&v.jsx(we,{disabled:i,onClick:B,title:"Toggle settings",icon:rh}),h?v.jsx(v.Fragment,{children:k&&v.jsxs(v.Fragment,{children:[!X&&v.jsx(po,{activeTool:p,selectedShape:h,selectedShapeTool:k,disabled:i,selectedSettings:L,setSelectedSettings:R,handleShapeStyleChange:pe,handlePolygonLinesCount:P,handleShapeFontFamilyChange:N}),v.jsx(xo,{disabled:i,selectedShape:h,removeShape:x})]})}):!X&&v.jsx(po,{activeTool:p,selectedShape:h,selectedShapeTool:k,disabled:i,selectedSettings:L,setSelectedSettings:R,handleShapeStyleChange:pe,handlePolygonLinesCount:P,handleShapeFontFamilyChange:N}),v.jsx("div",{className:"react-paint-editor-settings-separator"}),c&&v.jsx(Co,{disabled:i,toggleLayoutPanel:d})]}),D&&v.jsx(Ln,{className:"react-paint-editor-settings-modal",onClose:B,position:"bottom",children:v.jsx(po,{activeTool:p,selectedShape:h,selectedShapeTool:k,disabled:i,selectedSettings:L,setSelectedSettings:R,handleShapeStyleChange:pe,handlePolygonLinesCount:P,handleShapeFontFamilyChange:N})})]})};try{Vo.displayName="SettingsBar",Vo.__docgenInfo={description:"",displayName:"SettingsBar",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},availableTools:{defaultValue:null,description:"",name:"availableTools",required:!0,type:{name:"CustomTool[]"}},updateToolSettings:{defaultValue:null,description:"",name:"updateToolSettings",required:!0,type:{name:"(toolId: string, field: string, value: string | number | boolean) => void"}},layersManipulation:{defaultValue:null,description:"",name:"layersManipulation",required:!1,type:{name:"boolean"}},activeTool:{defaultValue:null,description:"",name:"activeTool",required:!0,type:{name:"ToolsType"}},selectedShape:{defaultValue:null,description:"",name:"selectedShape",required:!0,type:{name:"DrawableShape | undefined"}},canvas:{defaultValue:null,description:"",name:"canvas",required:!0,type:{name:"HTMLCanvasElement | null"}},updateShape:{defaultValue:null,description:"",name:"updateShape",required:!0,type:{name:"(shape: DrawableShape, withSave?: boolean | undefined) => void"}},removeShape:{defaultValue:null,description:"",name:"removeShape",required:!0,type:{name:"(shape: DrawableShape) => void"}},toggleLayoutPanel:{defaultValue:null,description:"",name:"toggleLayoutPanel",required:!0,type:{name:"() => void"}}}}}catch{}const Ye={ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",Delete:"Delete",Backspace:"Backspace",Escape:"Escape",Shift:"Shift",z:"z",Z:"Z",y:"y",Y:"Y"},xi={Copy:"copy",Paste:"paste"},Zh=({gridFormat:n,isInsideComponent:i,selectedShape:o,isEditingText:s,setSelectedShape:c,removeShape:d,pasteShape:p,updateShape:h,backwardShape:w,forwardShape:C,setShiftPressed:x})=>{const[L,R]=E.useState(void 0);return E.useEffect(()=>{const D=q=>{o&&(s||(q.preventDefault(),R({...o})))},T=q=>{L&&(s||(q.preventDefault(),p(Vh(L,n))))},B=q=>{switch(q.key){case Ye.Shift:x(!1);break}},k=q=>{if(q.metaKey||q.ctrlKey){if(q.key===Ye.Z||q.key===Ye.z){q.preventDefault(),q.stopPropagation(),w();return}else if(q.key===Ye.Y||q.key===Ye.y){q.preventDefault(),q.stopPropagation(),C();return}}if(q.key===Ye.Shift){x(!0);return}if(!o)return;if(q.key===Ye.Escape){c(void 0);return}if(s)return;const ee={[Ye.ArrowLeft]:[n?-Lr[n-1]:-1,0],[Ye.ArrowRight]:[n?Lr[n-1]:1,0],[Ye.ArrowDown]:[0,n?Lr[n-1]:1],[Ye.ArrowUp]:[0,n?-Lr[n-1]:-1]};switch(q.key){case Ye.ArrowLeft:case Ye.ArrowRight:case Ye.ArrowDown:case Ye.ArrowUp:h(Oo(ee[q.key],o,[0,0],n));break;case Ye.Delete:case Ye.Backspace:d(o);break}};return i&&(document.addEventListener("keydown",k),document.addEventListener("keyup",B),document.addEventListener(xi.Copy,D),document.addEventListener(xi.Paste,T)),()=>{i&&(document.removeEventListener("keydown",k),document.removeEventListener("keyup",B),document.removeEventListener(xi.Copy,D),document.removeEventListener(xi.Paste,T))}},[i,n,L,s,o,h,d,c,p,w,C,x]),{}},zh=({disabled:n,componentRef:i})=>{const[o,s]=E.useState(!1);return E.useEffect(()=>{const c=d=>{s(h1(d,i.current))};return n?s(!1):(document.addEventListener("mousedown",c,{passive:!0}),document.addEventListener("touchstart",c,{passive:!0})),()=>{n||(document.removeEventListener("mousedown",c),document.removeEventListener("touchstart",c))}},[n,i]),{isInsideComponent:o}},Ph=(n=Q.noop)=>{const i=E.useRef([]),o=E.useRef(n);o.current=n;const[s,c]=E.useState(void 0),[d,p]=E.useState({states:[{shapes:[],selectedShape:void 0}],cursor:0}),h=d.cursor>0,w=d.cursor<d.states.length-1,C=i.current.length>0,x=E.useCallback(()=>{p(N=>Q.isEqual(Q.get([N.cursor,"shapes"],N.states),i.current)?N:{states:[...N.states.slice(0,N.cursor+1),{shapes:i.current,selectedShape:s}],cursor:N.cursor+1})},[s]),L=E.useCallback(N=>{i.current=[N,...i.current]},[]),R=E.useCallback(async(N,P=dr,W=dr)=>{const J=await gh(N,P,W);return L(J),x(),J},[L,x]),D=E.useCallback((N,P=!1)=>{i.current=i.current.map(W=>W.id===(s==null?void 0:s.id)?N:W),c(W=>(W==null?void 0:W.id)===N.id?N:W),P&&x()},[s,x]),T=E.useCallback(N=>{const P=N.map(W=>Q.omit(["chosen"],W));i.current=P,x()},[x]),B=E.useCallback(N=>{c(P=>(P==null?void 0:P.id)===N.id?void 0:P),i.current=Q.remove({id:N.id},i.current),x()},[x]),k=E.useCallback(()=>{p(N=>{const P=Math.max(0,N.cursor-1);return i.current=Q.get([P,"shapes"],N.states),c(Q.get([P,"selectedShape"],N.states)),Q.set("cursor",P,N)})},[]),q=E.useCallback(()=>{p(N=>{const P=Math.min(N.states.length-1,N.cursor+1);return i.current=Q.get([P,"shapes"],N.states),c(Q.get([P,"selectedShape"],N.states)),Q.set("cursor",P,N)})},[]),ee=E.useCallback((N=[],P=!1)=>{c(void 0),i.current=N,p(W=>P?{states:[{shapes:N,selectedShape:void 0}],cursor:0}:{states:[...W.states.slice(0,W.cursor+1),{shapes:N,selectedShape:void 0}],cursor:W.cursor+1})},[]),X=E.useCallback((N,P)=>{const W=i.current,J=Q.findIndex({id:N},W),fe=Q.findIndex({id:P},W);J<fe?T([...Q.slice(0,J,W),...Q.slice(J+1,fe+1,W),W[J],...Q.slice(fe+1,W.length,W)]):T([...Q.slice(0,fe,W),W[J],...Q.slice(fe,J,W),...Q.slice(J+1,W.length,W)])},[T]),ae=E.useCallback(N=>{const P=i.current,W=Q.findIndex({id:N.id},P);if(W<0)return;const J=Q.set("visible",N.visible===!1,N);c(fe=>(fe==null?void 0:fe.id)===J.id?J:fe),T(Q.set(W,J,P))},[T]),pe=E.useCallback(N=>{const P=i.current,W=Q.findIndex({id:N.id},P);if(W<0)return;const J=Q.set("locked",!N.locked,N);c(fe=>(fe==null?void 0:fe.id)===J.id?J:fe),T(Q.set(W,J,P))},[T]);return E.useEffect(()=>{o.current()},[d]),{shapesRef:i,selectedShape:s,addShape:L,addPictureShape:R,moveShapes:X,saveShapes:x,setSelectedShape:c,toggleShapeVisibility:ae,toggleShapeLock:pe,removeShape:B,updateShape:D,backwardShape:k,forwardShape:q,clearShapes:ee,canGoBackward:h,canGoForward:w,canClear:C}},El={type:"infos",duration:4e3},kl=500,jl=100;const Lo=({type:n,text:i,duration:o})=>{const[s,c]=E.useState(!1);return E.useEffect(()=>{const d=setTimeout(()=>{c(!0)},jl),p=setTimeout(()=>{c(!1)},o-kl-jl);return()=>{clearTimeout(d),clearTimeout(p)}},[o]),v.jsx("div",{className:"react-paint-editor-snackbar","data-is-shown":+s,"data-type":n,style:{"--react-paint-editor-panel-transition-duration":`${kl}ms`},children:i})},$h=({snackbarList:n})=>v.jsx("div",{className:"react-paint-editor-snackbar-container",style:{"--react-paint-editor-snackbar-zindex":kn.PANEL},children:n.map(i=>v.jsx(Lo,{...i},i.id))});try{Lo.displayName="Snackbar",Lo.__docgenInfo={description:"",displayName:"Snackbar",props:{snackbarList:{defaultValue:null,description:"",name:"snackbarList",required:!0,type:{name:"SnackBarType[]"}}}}}catch{}const Gh=()=>{const n=E.useRef([]),[i,o]=E.useState([]),s=d=>{o(p=>Q.remove({id:d},p))},c=({type:d=El.type,duration:p=El.duration,text:h})=>{const w={id:Q.uniqueId("snackbar_"),duration:p,type:d,text:h};o(C=>[...C,w]),n.current=[...n.current,setTimeout(()=>s(w.id),p)]};return E.useEffect(()=>()=>{for(const d of n.current)clearTimeout(d)},[]),{snackbarList:i,addSnackbar:c}},Tl=300;const Io=({isLoading:n=!1})=>{const[i,o]=E.useState("hidden");return E.useEffect(()=>{if(n)o("visible");else{o("fadeOut");const s=setTimeout(()=>o("hidden"),Tl);return()=>{clearTimeout(s)}}},[n]),i==="hidden"?null:v.jsx("div",{className:"react-paint-editor-loading","data-loading":i,style:{"--react-paint-editor-loading-zindex":kn.LOADING,"--react-paint-editor-loading-transition-duration":`${Tl}ms`},children:v.jsxs("div",{className:"react-paint-editor-loader",children:[v.jsx("div",{}),v.jsx("div",{}),v.jsx("div",{}),v.jsx("div",{})]})})};try{Io.displayName="Loading",Io.__docgenInfo={description:"",displayName:"Loading",props:{isLoading:{defaultValue:{value:"false"},description:"",name:"isLoading",required:!1,type:{name:"boolean"}}}}}catch{}const Yh=({onResized:n,element:i})=>{E.useEffect(()=>{const o=i.current;if(!o)return;const s=new ResizeObserver(c=>{const{width:d,height:p}=Q.get("0.borderBoxSize",c)?Q.flow(Q.get("0.borderBoxSize"),Q.castArray,Q.first,h=>({width:Q.get("inlineSize",h),height:Q.get("blockSize",h)}))(c):Q.get("0.contentRect",c);n(d,p)});return s.observe(o),()=>{s.unobserve(o)}},[i,n])},Xh=0,ho={layersManipulation:!0,grid:Xh,canGrow:!1,canShrink:!0,withExport:!0,withLoadAndSave:!0,withUploadPicture:!0,withUrlPicture:!1,availableTools:ph,clearCallback:"empty",uiStyle:{toolbarBackgroundColor:"white",dividerColor:"#36418129",fontRadius:8,fontDisabledColor:"#3641812b",fontDisabledBackgroundColor:"transparent",fontColor:"#364181",fontBackgroundColor:"transparent",fontSelectedColor:"white",fontSelectedBackgroundColor:"#364181",fontHoverColor:"#364181",fontHoverBackgroundColor:"#afd8d8",canvasBackgroundColor:"white",canvasSelectionColor:Ml,canvasSelectionWidth:Ol,canvasSelectionPadding:R2}};const Eo=({width:n=1e3,height:i=600,shapes:o,className:s="",mode:c="editor",disabled:d=!1,onDataChanged:p,apiRef:h,options:w=ho})=>{const{layersManipulation:C,grid:x,canGrow:L,canShrink:R,withExport:D,withLoadAndSave:T,withUploadPicture:B,withUrlPicture:k,clearCallback:q,availableTools:ee}={...ho,...w},{toolbarBackgroundColor:X,dividerColor:ae,fontRadius:pe,fontDisabledColor:N,fontDisabledBackgroundColor:P,fontColor:W,fontBackgroundColor:J,fontSelectedColor:fe,fontSelectedBackgroundColor:Le,fontHoverColor:De,fontHoverBackgroundColor:ue,canvasBackgroundColor:te,canvasSelectionColor:he,canvasSelectionWidth:Ce}={...ho.uiStyle,...(w==null?void 0:w.uiStyle)??{}},qe=c!=="viewer",Ne=d||!qe,xe=E.useRef(null),Ae=E.useRef(null),[Ze,Er]=E.useState({width:n,height:i,scaleRatio:1}),ye=0,[Tt,z]=E.useState(Ll(ee,B||k));E.useEffect(()=>{z(Ll(ee,B||k))},[ee,B,k]);const{isInsideComponent:O}=zh({disabled:Ne,componentRef:xe}),[H,U]=E.useState(!1),[ne,Oe]=E.useState(!1),[Fe,ze]=E.useState([0,0]),[Me,Xe]=E.useState(void 0),[tr,kr]=E.useState(er),[jn,Oi]=E.useState({mode:"default"}),[m,Mi]=E.useState(x),[nn,Wi]=E.useState(!1),{shapesRef:Ie,selectedShape:jr,addShape:mr,addPictureShape:Tn,moveShapes:Tr,setSelectedShape:Pe,removeShape:qr,updateShape:qt,backwardShape:Rt,forwardShape:rr,clearShapes:tt,saveShapes:Ht,toggleShapeVisibility:qn,toggleShapeLock:gt,canGoBackward:nr,canGoForward:yt,canClear:ir}=Ph(p),{snackbarList:Vt,addSnackbar:rt}=Gh(),Lt=E.useCallback(de=>{Pe(void 0),kr(de)},[Pe]),Si=E.useCallback((de,ve,Bt)=>{z(yr=>yr.map(Ut=>Ut.id===de?Q.set(["settings",ve,"default"],Bt,Ut):Ut)),kr(yr=>yr.id===de?Q.set(["settings",ve,"default"],Bt,yr):yr)},[]),Hi=E.useCallback(()=>{Lt(er),Rt()},[Lt,Rt]),Fi=E.useCallback(()=>{Lt(er),rr()},[Lt,rr]),Rr=E.useCallback((de=[],ve=!1)=>{tt(de,ve),Lt(er),ze([0,0])},[Lt,tt]),Dt=E.useCallback(async(de,ve=!0)=>{const Bt=await D5(de);Rr(Bt,ve)},[Rr]),Bi=E.useCallback(()=>{typeof q!="string"?Dt({shapes:q()},!1):q==="defaultShapes"&&o!==void 0?Dt({shapes:o},!1):Rr()},[Rr,Dt,o,q]),gr=E.useCallback(de=>{kr(er),Pe(de)},[Pe]),Ft=E.useCallback(de=>{mr(de),gr(de)},[mr,gr]),Nt=E.useCallback(()=>{U(!0);try{const de=Ae.current&&yl(Ie.current,Fe,n,i,ye);if(!de)throw new Error;gl(de,"drawing.png"),U(!1)}catch(de){de instanceof Error&&rt({type:"error",text:"L'export a échoué"}),console.warn(de)}finally{U(!1)}},[rt,Ie,Fe,n,i,ye]),Ui=E.useCallback(()=>{U(!0);try{const de=q5(Ie.current,n,i);if(!de)throw new Error("L'encodage a échoué");gl(de,"drawing.json"),U(!1)}catch(de){de instanceof Error&&rt({type:"error",text:"L'enregistrement a échoué"}),console.warn(de)}finally{U(!1)}},[Ie,rt,n,i]),Dr=E.useCallback(async de=>{U(!0);try{const ve=await R5(de);await Dt(ve),rt({type:"success",text:"Fichier chargé !"})}catch(ve){ve instanceof Error&&rt({type:"error",text:"Le chargement a échoué"}),console.warn(ve)}finally{U(!1)}},[Dt,rt]),vt=E.useCallback(async de=>{U(!0);try{const ve=await Tn(de,n,i);gr(ve)}catch(ve){ve instanceof Error&&rt({type:"error",text:"Le chargement a échoué"}),console.warn(ve)}finally{U(!1)}},[Tn,gr,rt,n,i]),Zi=E.useCallback(de=>{const ve=de/n;Er({width:de,height:i*ve,scaleRatio:ve})},[n,i]);Zh({isInsideComponent:O,gridFormat:m,isEditingText:jn.mode==="textedition",selectedShape:jr,setSelectedShape:Pe,removeShape:qr,pasteShape:Ft,updateShape:qt,backwardShape:Rt,forwardShape:rr,setShiftPressed:Wi}),Yh({element:xe,onResized:Zi}),E.useEffect(()=>{O||Pe(void 0)},[O,Pe]),E.useEffect(()=>{o!==void 0&&Dt({shapes:o})},[Dt,o]),E.useEffect(()=>{h&&(h.current={getCurrentImage:()=>Ae.current?yl(Ie.current,Fe,n,i,ye):void 0,getCurrentData:()=>$l(Ie.current,n,i)})},[h,Ie,Fe,n,i,ye]);const zi=`${s}${ne?" react-paint-editor-layout-opened":""} react-paint-editor-app`;return v.jsxs("div",{ref:xe,className:zi,"data-grow":L,"data-shrink":R,style:{"--react-paint-editor-app-canvaswidth":`${n}px`,"--react-paint-editor-app-toolbar-bg":X,"--react-paint-editor-app-divider-color":ae,"--react-paint-editor-app-font-radius":pe,"--react-paint-editor-app-font-disabled-color":N,"--react-paint-editor-app-font-disabled-bg":P,"--react-paint-editor-app-font-color":W,"--react-paint-editor-app-font-bg":J,"--react-paint-editor-app-font-selected-color":fe,"--react-paint-editor-app-font-selected-bg":Le,"--react-paint-editor-app-font-hover-color":De,"--react-paint-editor-app-font-hover-bg":ue,"--react-paint-editor-app-canvas-bg":te},children:[qe&&v.jsx(wo,{width:Ze.width,disabled:Ne,activeTool:tr,clearCanvas:Bi,setActiveTool:Lt,exportCanvasInFile:Nt,saveFile:Ui,loadFile:Dr,addPicture:vt,hasActionToUndo:nr,hasActionToRedo:yt,hasActionToClear:ir,undoAction:Hi,redoAction:Fi,availableTools:Tt,withExport:D,withLoadAndSave:T,withUploadPicture:B,withUrlPicture:k}),v.jsxs("div",{className:"react-paint-editor-app-row","data-grow":L,style:{"--react-paint-editor-app-row-zindex":kn.APP,"--react-paint-editor-app-row-width":Ze.width,"--react-paint-editor-app-row-aspectratio":`calc(${Ze.width} / ${Ze.height})`},children:[v.jsx(vo,{canGrow:L,gridFormat:m,disabled:Ne,isInsideComponent:O,activeTool:tr,setActiveTool:kr,canvasOffsetStartPosition:Me,setCanvasOffsetStartPosition:Xe,shapes:Ie.current,addShape:mr,updateSingleShape:qt,selectedShape:jr,setSelectedShape:Pe,canvasOffset:Fe,setCanvasOffset:ze,saveShapes:Ht,ref:Ae,canvasSize:Ze,selectionMode:jn,setSelectionMode:Oi,selectionColor:he,selectionWidth:Ce,selectionPadding:ye,isEditMode:qe,isShiftPressed:nn}),qe&&C&&v.jsx(_o,{gridFormat:m,setGridFormat:Mi,disabled:Ne,shapes:Ie.current,moveShapes:Tr,selectedShape:jr,removeShape:qr,selectShape:gr,toggleShapeVisibility:qn,toggleShapeLock:gt,isLayoutPanelShown:ne})]}),qe&&v.jsxs(v.Fragment,{children:[v.jsx(Vo,{width:Ze.width,disabled:Ne,activeTool:tr,availableTools:Tt,selectedShape:jr,removeShape:qr,updateShape:qt,canvas:Ae.current,layersManipulation:C,toggleLayoutPanel:()=>{Oe(de=>!de)},updateToolSettings:Si}),v.jsx(Io,{isLoading:H}),v.jsx($h,{snackbarList:Vt})]})]})};try{Eo.displayName="App",Eo.__docgenInfo={description:"",displayName:"App",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},width:{defaultValue:{value:"1000"},description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:{value:"600"},description:"",name:"height",required:!1,type:{name:"number"}},shapes:{defaultValue:null,description:"",name:"shapes",required:!1,type:{name:"DrawableShapeJson[]"}},onDataChanged:{defaultValue:null,description:"",name:"onDataChanged",required:!1,type:{name:"(() => void)"}},mode:{defaultValue:{value:"editor"},description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"editor"'},{value:'"viewer"'}]}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},apiRef:{defaultValue:null,description:"",name:"apiRef",required:!1,type:{name:"MutableRefObject<{ getCurrentImage: () => string; getCurrentData: () => ExportDataType; }> | undefined"}},options:{defaultValue:{value:`{\r
  layersManipulation: true,\r
  grid: GRID_NONE,\r
  canGrow: false,\r
  canShrink: true,\r
  withExport: true,\r
  withLoadAndSave: true,\r
  withUploadPicture: true,\r
  withUrlPicture: false,\r
  availableTools: DEFAULT_SHAPE_TOOLS,\r
  clearCallback: 'empty',\r
  uiStyle: {\r
    toolbarBackgroundColor: 'white',\r
    dividerColor: '#36418129',\r
    fontRadius: 8,\r
    fontDisabledColor: '#3641812b',\r
    fontDisabledBackgroundColor: 'transparent',\r
    fontColor: '#364181',\r
    fontBackgroundColor: 'transparent',\r
    fontSelectedColor: 'white',\r
    fontSelectedBackgroundColor: '#364181',\r
    fontHoverColor: '#364181',\r
    fontHoverBackgroundColor: '#afd8d8',\r
    canvasBackgroundColor: 'white',\r
    canvasSelectionColor: SELECTION_DEFAULT_COLOR,\r
    canvasSelectionWidth: SELECTION_DEFAULT_WIDTH,\r
    canvasSelectionPadding: SELECTION_DEFAULT_PADDING\r
  }\r
}`},description:"",name:"options",required:!1,type:{name:"RecursivePartial<AppOptionsType>"}}}}}catch{}const tm={title:"Main/React Paint Editor",component:Eo,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}},Ci={args:{}};var ql,Rl,Dl;Ci.parameters={...Ci.parameters,docs:{...(ql=Ci.parameters)==null?void 0:ql.docs,source:{originalSource:`{
  args: {
    //primary: true,
    //  label: 'Button',
  }
}`,...(Dl=(Rl=Ci.parameters)==null?void 0:Rl.docs)==null?void 0:Dl.source}}};const rm=["Primary"];export{Ci as Primary,rm as __namedExportsOrder,tm as default};
//# sourceMappingURL=App.stories-40453fe7.js.map
