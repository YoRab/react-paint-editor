import{r as m,R as qt}from"./index-CDs2tPxN.js";import{j as l}from"./jsx-runtime-qGIIFXMu.js";const Qt='<svg><path d="M5.146 17.5Q4.146 17.5 3.208 17Q2.271 16.5 1.667 15.708Q2.208 15.75 2.802 15.344Q3.396 14.938 3.396 14.104Q3.396 13.042 4.135 12.292Q4.875 11.542 5.958 11.542Q7.021 11.542 7.76 12.292Q8.5 13.042 8.5 14.104Q8.5 15.5 7.51 16.5Q6.521 17.5 5.146 17.5ZM9.917 12.5 7.562 10.146 14.917 2.729Q15.146 2.5 15.469 2.5Q15.792 2.5 16.021 2.729L17.271 3.958Q17.5 4.188 17.5 4.531Q17.5 4.875 17.271 5.125Z"/></svg>',$e='<svg><path d="M2.5 17.5V2.5H17.5V17.5ZM4.25 15.75H15.75V4.25H4.25ZM4.25 15.75V4.25V15.75Z"/></svg>',br='<svg><path d="M5.333 9.292 10.021 1.646 14.708 9.292ZM14.562 18.333Q13 18.333 11.896 17.229Q10.792 16.125 10.792 14.562Q10.792 13 11.896 11.896Q13 10.792 14.562 10.792Q16.125 10.792 17.229 11.896Q18.333 13 18.333 14.562Q18.333 16.125 17.229 17.229Q16.125 18.333 14.562 18.333ZM2.5 17.917V11.188H9.229V17.917ZM14.562 16.583Q15.438 16.583 16.01 16.01Q16.583 15.438 16.583 14.562Q16.583 13.688 16.01 13.115Q15.438 12.542 14.562 12.542Q13.688 12.542 13.115 13.115Q12.542 13.688 12.542 14.562Q12.542 15.438 13.115 16.01Q13.688 16.583 14.562 16.583ZM4.25 16.167H7.479V12.938H4.25ZM8.458 7.542H11.583L10.021 5ZM10.021 7.542ZM7.479 12.938ZM14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Z"/></svg>',Ye='<svg><path d="M10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333ZM10 16.583Q12.75 16.583 14.667 14.667Q16.583 12.75 16.583 10Q16.583 7.25 14.667 5.333Q12.75 3.417 10 3.417Q7.25 3.417 5.333 5.333Q3.417 7.25 3.417 10Q3.417 12.75 5.333 14.667Q7.25 16.583 10 16.583ZM10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Z"/></svg>',Hn='<svg><path d="M12.25 18.333V16.167L6.833 13.458H2.5V8.208H6.25L8.25 5.917V1.667H13.5V6.917H9.708L7.75 9.146V11.958L12.25 14.208V13.083H17.5V18.333Z"/></svg>',Ct='<svg><path d="M4.125 5.083V3.333H7.062L7.896 2.5H12.104L12.938 3.333H15.875V5.083ZM6.75 17.5Q6.021 17.5 5.51 16.99Q5 16.479 5 15.75V5.958H15V15.75Q15 16.479 14.49 16.99Q13.979 17.5 13.25 17.5Z"/></svg>',Gn='<svg><path d="M10 17.5Q7.208 17.5 5.271 15.594Q3.333 13.688 3.333 10.958Q3.333 9.583 3.854 8.396Q4.375 7.208 5.292 6.292L10 1.667L14.688 6.292Q15.604 7.208 16.135 8.396Q16.667 9.583 16.667 10.958Q16.667 13.688 14.719 15.594Q12.771 17.5 10 17.5ZM5.146 11.667H14.854Q15.083 10.188 14.552 9.146Q14.021 8.104 13.479 7.562L10 4.125L6.521 7.562Q5.979 8.104 5.448 9.146Q4.917 10.188 5.146 11.667Z"/></svg>',Tr='<svg><path d="M11.708 15.833H5.854V14.083H11.708Q13 14.083 13.958 13.292Q14.917 12.5 14.917 11.271Q14.917 10.042 13.958 9.24Q13 8.438 11.708 8.438H6.667L8.792 10.562L7.562 11.792L3.333 7.562L7.562 3.333L8.792 4.562L6.667 6.688H11.708Q13.729 6.688 15.198 7.99Q16.667 9.292 16.667 11.25Q16.667 13.208 15.198 14.521Q13.729 15.833 11.708 15.833Z"/></svg>',kr='<svg><path d="M8.292 15.833Q6.271 15.833 4.802 14.521Q3.333 13.208 3.333 11.25Q3.333 9.292 4.802 7.99Q6.271 6.688 8.292 6.688H13.333L11.208 4.562L12.438 3.333L16.667 7.562L12.438 11.792L11.208 10.562L13.333 8.438H8.292Q7 8.438 6.042 9.229Q5.083 10.021 5.083 11.25Q5.083 12.5 6.042 13.292Q7 14.083 8.292 14.083H14.146V15.833Z"/></svg>',wr='<svg><path d="M10 17.646 2.438 11.75 3.875 10.646 10 15.396 16.125 10.646 17.562 11.75ZM10 13.188 2.5 7.354 10 1.521 17.5 7.354Z"/></svg>',xr='<svg><path d="M7.854 13.812 10 11.688 12.125 13.812 13.354 12.604 11.208 10.458 13.354 8.312 12.125 7.104 10 9.229 7.854 7.104 6.625 8.312 8.771 10.458 6.625 12.604ZM5.896 17.5Q5.167 17.5 4.656 16.99Q4.146 16.479 4.146 15.75V5.125H3.333V3.375H7.542V2.5H12.458V3.375H16.667V5.125H15.833V15.75Q15.833 16.479 15.323 16.99Q14.812 17.5 14.083 17.5Z"/></svg>',qr='<svg><path d="M17.5 5.833V15.75Q17.5 16.479 16.99 16.99Q16.479 17.5 15.75 17.5H4.25Q3.521 17.5 3.01 16.99Q2.5 16.479 2.5 15.75V4.25Q2.5 3.521 3.01 3.01Q3.521 2.5 4.25 2.5H14.167ZM10 14.917Q11.062 14.917 11.823 14.156Q12.583 13.396 12.583 12.333Q12.583 11.271 11.823 10.51Q11.062 9.75 10 9.75Q8.938 9.75 8.177 10.51Q7.417 11.271 7.417 12.333Q7.417 13.396 8.177 14.156Q8.938 14.917 10 14.917ZM5.021 8.396H12.521V5.021H5.021Z"/></svg>',Qr='<svg><path d="M10 13.271 5.708 8.979 6.958 7.729 9.125 9.896V3.333H10.875V9.896L13.042 7.729L14.292 8.979ZM5.083 16.667Q4.354 16.667 3.844 16.156Q3.333 15.646 3.333 14.917V12.5H5.083V14.917Q5.083 14.917 5.083 14.917Q5.083 14.917 5.083 14.917H14.917Q14.917 14.917 14.917 14.917Q14.917 14.917 14.917 14.917V12.5H16.667V14.917Q16.667 15.646 16.156 16.156Q15.646 16.667 14.917 16.667Z"/></svg>',Cr='<svg><path d="M3.417 16.667Q2.729 16.667 2.198 16.135Q1.667 15.604 1.667 14.917V5.083Q1.667 4.396 2.198 3.865Q2.729 3.333 3.417 3.333H8.25L9.917 5H16.667Q17.354 5 17.844 5.531Q18.333 6.062 18.333 6.75H3.417V14.917Q3.417 14.917 3.417 14.917Q3.417 14.917 3.417 14.917L5.438 8.5H19.583L17.396 15.479Q17.229 16.021 16.802 16.344Q16.375 16.667 15.833 16.667Z"/></svg>',_n='<svg><path d="M4.792 15.083 8.333 11.542 9.833 13.021 11.667 10.708 15.167 15.083ZM6.667 8.417Q5.938 8.417 5.427 7.906Q4.917 7.396 4.917 6.667Q4.917 5.938 5.427 5.427Q5.938 4.917 6.667 4.917Q7.396 4.917 7.906 5.427Q8.417 5.938 8.417 6.667Q8.417 7.396 7.906 7.906Q7.396 8.417 6.667 8.417ZM4.167 18.333Q3.125 18.333 2.396 17.604Q1.667 16.875 1.667 15.833V4.167Q1.667 3.125 2.396 2.396Q3.125 1.667 4.167 1.667H15.833Q16.875 1.667 17.604 2.396Q18.333 3.125 18.333 4.167V15.833Q18.333 16.875 17.604 17.604Q16.875 18.333 15.833 18.333ZM4.167 16.583H15.833Q16.146 16.583 16.365 16.365Q16.583 16.146 16.583 15.833V4.167Q16.583 3.854 16.365 3.635Q16.146 3.417 15.833 3.417H4.167Q3.854 3.417 3.635 3.635Q3.417 3.854 3.417 4.167V15.833Q3.417 16.146 3.635 16.365Q3.854 16.583 4.167 16.583Z"/></svg>',St='<svg><path d="M8.708 16.667V5.917H4.167V3.333H15.833V5.917H11.292V16.667Z"/></svg>',Dt='<svg><path d="M7.5 15.833V14.083H12.833L3.333 4.583L4.583 3.333L14.083 12.833V7.5H15.833V15.833Z"/></svg>',Sr='<svg><path d="M8.0145 11.1707C8.38484 10.9914 8.82183 11.1558 8.99959 11.5295L10.7031 15.2591L12.0363 14.6238L10.3254 10.9017C10.1476 10.528 10.3106 10.0795 10.6809 9.90761L10.8883 9.84782L12.5918 9.51148L6.48133 4.33192V12.389L7.82934 11.2903L8.0145 11.1707ZM10.6587 16.9258C10.2883 17.1052 9.84395 16.9482 9.67359 16.5745L8.05894 13.0318L6.19988 14.5416C6.07396 14.6462 5.91842 14.706 5.74066 14.706C5.54423 14.706 5.35584 14.6272 5.21694 14.4871C5.07803 14.3469 5 14.1568 5 13.9586V2.74741C5 2.54919 5.07803 2.35908 5.21694 2.21891C5.35584 2.07874 5.54423 2 5.74066 2C5.91842 2 6.08878 2.06727 6.21469 2.1719L6.2221 2.16443L14.7323 9.36947C15.0508 9.63854 15.0879 10.1094 14.8286 10.4233C14.7175 10.5579 14.562 10.6475 14.4064 10.6774L12.0659 11.1408L13.6954 14.6761C13.888 15.0498 13.7102 15.4908 13.3399 15.6627L10.6587 16.9258Z"/></svg>',Dr='<svg><path d="M2.5 15V13.25H17.5V15ZM2.5 10.875V9.125H17.5V10.875ZM2.5 6.75V5H17.5V6.75Z"/></svg>',Lr='<svg><path d="M10 13.354Q11.583 13.354 12.688 12.25Q13.792 11.146 13.792 9.562Q13.792 7.979 12.688 6.875Q11.583 5.771 10 5.771Q8.417 5.771 7.312 6.875Q6.208 7.979 6.208 9.562Q6.208 11.146 7.312 12.25Q8.417 13.354 10 13.354ZM10 11.812Q9.062 11.812 8.406 11.156Q7.75 10.5 7.75 9.562Q7.75 8.625 8.406 7.969Q9.062 7.312 10 7.312Q10.938 7.312 11.594 7.969Q12.25 8.625 12.25 9.562Q12.25 10.5 11.594 11.156Q10.938 11.812 10 11.812ZM10 15.833Q6.938 15.833 4.448 14.125Q1.958 12.417 0.833 9.562Q1.958 6.708 4.458 5.021Q6.958 3.333 10 3.333Q13.042 3.333 15.542 5.021Q18.042 6.708 19.167 9.562Q18.042 12.417 15.552 14.125Q13.062 15.833 10 15.833ZM10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562ZM10 14.083Q12.333 14.083 14.281 12.865Q16.229 11.646 17.25 9.562Q16.229 7.479 14.281 6.281Q12.333 5.083 10 5.083Q7.667 5.083 5.708 6.281Q3.75 7.479 2.729 9.562Q3.75 11.646 5.708 12.865Q7.667 14.083 10 14.083Z"/></svg>',Pr='<svg><path d="M13.521 11.021 12.25 9.75Q12.333 8.75 11.604 7.979Q10.875 7.208 9.812 7.312L8.542 6.042Q8.896 5.896 9.26 5.833Q9.625 5.771 10 5.771Q11.583 5.771 12.688 6.875Q13.792 7.979 13.792 9.562Q13.792 9.979 13.719 10.354Q13.646 10.729 13.521 11.021ZM16.167 13.646 14.917 12.417Q15.667 11.833 16.25 11.146Q16.833 10.458 17.25 9.562Q16.229 7.479 14.292 6.281Q12.354 5.083 10 5.083Q9.396 5.083 8.885 5.156Q8.375 5.229 7.875 5.375L6.5 4Q7.354 3.646 8.208 3.49Q9.062 3.333 10 3.333Q13.146 3.333 15.615 5.052Q18.083 6.771 19.167 9.562Q18.688 10.792 17.917 11.823Q17.146 12.854 16.167 13.646ZM16.396 18.854 12.938 15.396Q12.208 15.625 11.479 15.729Q10.75 15.833 10 15.833Q6.833 15.833 4.375 14.094Q1.917 12.354 0.833 9.562Q1.25 8.479 1.917 7.552Q2.583 6.625 3.417 5.875L1.125 3.562L2.375 2.354L17.625 17.625ZM4.604 7.062Q4.021 7.604 3.542 8.219Q3.062 8.833 2.729 9.562Q3.75 11.646 5.688 12.865Q7.625 14.083 10 14.083Q10.354 14.083 10.74 14.052Q11.125 14.021 11.479 13.938L10.812 13.271Q10.625 13.312 10.417 13.333Q10.208 13.354 10 13.354Q8.417 13.354 7.312 12.25Q6.208 11.146 6.208 9.562Q6.208 9.354 6.24 9.167Q6.271 8.979 6.312 8.771ZM11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875ZM8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Z"/></svg>',Ir='<svg><path d="M9.958 18.333Q8.25 18.333 6.74 17.677Q5.229 17.021 4.104 15.885Q2.979 14.75 2.323 13.229Q1.667 11.708 1.667 10Q1.667 8.271 2.333 6.75Q3 5.229 4.156 4.104Q5.312 2.979 6.854 2.323Q8.396 1.667 10.125 1.667Q11.771 1.667 13.26 2.25Q14.75 2.833 15.875 3.854Q17 4.875 17.667 6.26Q18.333 7.646 18.333 9.25Q18.333 11.688 16.792 12.948Q15.25 14.208 13.188 14.208H11.75Q11.625 14.208 11.562 14.281Q11.5 14.354 11.5 14.458Q11.5 14.688 11.812 15.219Q12.125 15.75 12.125 16.458Q12.125 17.458 11.51 17.896Q10.896 18.333 9.958 18.333ZM5.458 10.875Q6 10.875 6.375 10.5Q6.75 10.125 6.75 9.583Q6.75 9.042 6.375 8.667Q6 8.292 5.458 8.292Q4.917 8.292 4.542 8.667Q4.167 9.042 4.167 9.583Q4.167 10.125 4.542 10.5Q4.917 10.875 5.458 10.875ZM7.917 7.583Q8.458 7.583 8.833 7.208Q9.208 6.833 9.208 6.292Q9.208 5.75 8.833 5.375Q8.458 5 7.917 5Q7.375 5 7 5.375Q6.625 5.75 6.625 6.292Q6.625 6.833 7 7.208Q7.375 7.583 7.917 7.583ZM12.021 7.583Q12.562 7.583 12.938 7.208Q13.312 6.833 13.312 6.292Q13.312 5.75 12.938 5.375Q12.562 5 12.021 5Q11.479 5 11.104 5.375Q10.729 5.75 10.729 6.292Q10.729 6.833 11.104 7.208Q11.479 7.583 12.021 7.583ZM14.479 10.875Q15.021 10.875 15.396 10.5Q15.771 10.125 15.771 9.583Q15.771 9.042 15.396 8.667Q15.021 8.292 14.479 8.292Q13.938 8.292 13.562 8.667Q13.188 9.042 13.188 9.583Q13.188 10.125 13.562 10.5Q13.938 10.875 14.479 10.875Z"/></svg>',Ar='<svg><path d="M9.188 16.542V14.938Q8.5 14.938 8.021 14.458Q7.542 13.979 7.542 13.292V12.458L3.583 8.5Q3.5 8.875 3.458 9.25Q3.417 9.625 3.417 10Q3.417 12.5 5.062 14.365Q6.708 16.229 9.188 16.542ZM14.854 14.438Q15.708 13.521 16.146 12.385Q16.583 11.25 16.583 10Q16.583 7.979 15.469 6.313Q14.354 4.646 12.479 3.917V4.229Q12.479 4.917 12 5.396Q11.521 5.875 10.833 5.875H9.188V7.521Q9.188 7.875 8.948 8.115Q8.708 8.354 8.354 8.354H6.708V10H11.646Q12 10 12.24 10.229Q12.479 10.458 12.479 10.812V13.292H13.292Q13.833 13.292 14.26 13.604Q14.688 13.917 14.854 14.438ZM10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333Z"/></svg>',Er='<svg><path d="M10 0.833Q11.771 0.833 12.99 2.052Q14.208 3.271 14.208 5.042V6.667H14.917Q15.646 6.667 16.156 7.177Q16.667 7.688 16.667 8.417V16.562Q16.667 17.292 16.156 17.812Q15.646 18.333 14.917 18.333H5.083Q4.354 18.333 3.844 17.812Q3.333 17.292 3.333 16.562V8.417Q3.333 7.688 3.844 7.177Q4.354 6.667 5.083 6.667H5.792V5.042Q5.792 3.271 7.01 2.052Q8.229 0.833 10 0.833ZM10 2.583Q8.979 2.583 8.26 3.302Q7.542 4.021 7.542 5.042V6.667H12.458V5.042Q12.458 4.021 11.74 3.302Q11.021 2.583 10 2.583ZM5.083 16.583H14.917Q14.917 16.583 14.917 16.583Q14.917 16.583 14.917 16.583V8.417Q14.917 8.417 14.917 8.417Q14.917 8.417 14.917 8.417H5.083Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583ZM10 10.812Q9.292 10.812 8.802 11.302Q8.312 11.792 8.312 12.5Q8.312 13.208 8.802 13.698Q9.292 14.188 10 14.188Q10.708 14.188 11.198 13.698Q11.688 13.208 11.688 12.5Q11.688 11.792 11.198 11.302Q10.708 10.812 10 10.812ZM5.083 8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583V8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417Z"/></svg>',jr='<svg><path d="M5.792 5.042Q5.792 3.271 7.01 2.052Q8.229 0.833 10 0.833Q11.771 0.833 12.99 2.052Q14.208 3.271 14.208 5.042V6.667H14.917Q15.646 6.667 16.156 7.177Q16.667 7.688 16.667 8.417V16.562Q16.667 17.292 16.156 17.812Q15.646 18.333 14.917 18.333H5.083Q4.354 18.333 3.844 17.812Q3.333 17.292 3.333 16.562V8.417Q3.333 7.688 3.844 7.177Q4.354 6.667 5.083 6.667H12.458V5.042Q12.458 4.021 11.74 3.302Q11.021 2.583 10 2.583Q8.979 2.583 8.26 3.302Q7.542 4.021 7.542 5.042ZM5.083 16.583H14.917Q14.917 16.583 14.917 16.583Q14.917 16.583 14.917 16.583V8.417Q14.917 8.417 14.917 8.417Q14.917 8.417 14.917 8.417H5.083Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583ZM10 10.812Q9.292 10.812 8.802 11.302Q8.312 11.792 8.312 12.5Q8.312 13.208 8.802 13.698Q9.292 14.188 10 14.188Q10.708 14.188 11.198 13.698Q11.688 13.208 11.688 12.5Q11.688 11.792 11.198 11.302Q10.708 10.812 10 10.812ZM5.083 8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583V8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417Z"/></svg>',Rr='<svg><path d="M18.333 15.854 16.583 14.104V13.354H15.833L14.083 11.604H16.583V8.375H13.375V10.896L11.625 9.146V8.375H10.875L9.125 6.625H11.625V3.417H8.396V5.896L6.646 4.146V3.417H5.896L4.146 1.667H16.583Q17.312 1.667 17.823 2.177Q18.333 2.688 18.333 3.417ZM13.375 6.625H16.583V3.417Q16.583 3.417 16.583 3.417Q16.583 3.417 16.583 3.417H13.375ZM16.771 19.229 15.854 18.333H3.417Q2.688 18.333 2.177 17.823Q1.667 17.312 1.667 16.583V4.125L0.812 3.271L2.042 2.021L18 18ZM13.375 16.583H14.104L13.375 15.833ZM8.396 11.604H9.125L8.396 10.854ZM8.396 16.583H11.625V14.083L10.875 13.354H8.396ZM3.417 6.625H4.167L3.417 5.875ZM3.417 11.604H6.646V9.104L5.917 8.375H3.417ZM6.646 16.583V13.354H3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Z"/></svg>',Lt='<svg><path d="M7.521 17.5Q6.125 17.5 5.146 16.51Q4.167 15.521 4.167 14.125V7.417Q3.438 7.125 2.969 6.49Q2.5 5.854 2.5 5.042Q2.5 3.979 3.24 3.24Q3.979 2.5 5.042 2.5Q6.104 2.5 6.844 3.24Q7.583 3.979 7.583 5.042Q7.583 5.854 7.115 6.49Q6.646 7.125 5.917 7.417V14.125Q5.917 14.792 6.385 15.271Q6.854 15.75 7.521 15.75Q8.188 15.75 8.656 15.271Q9.125 14.792 9.125 14.125V5.875Q9.125 4.479 10.104 3.49Q11.083 2.5 12.479 2.5Q13.875 2.5 14.854 3.49Q15.833 4.479 15.833 5.875V12.583Q16.562 12.875 17.031 13.51Q17.5 14.146 17.5 14.958Q17.5 16.021 16.76 16.76Q16.021 17.5 14.958 17.5Q13.896 17.5 13.156 16.76Q12.417 16.021 12.417 14.958Q12.417 14.146 12.885 13.5Q13.354 12.854 14.083 12.583V5.875Q14.083 5.208 13.615 4.729Q13.146 4.25 12.479 4.25Q11.812 4.25 11.344 4.729Q10.875 5.208 10.875 5.875V14.125Q10.875 15.521 9.896 16.51Q8.917 17.5 7.521 17.5Z"/></svg>',$n='<svg><path d="M5.833 15V3.333H10.375Q11.812 3.333 12.885 4.156Q13.958 4.979 13.958 6.375Q13.958 7.375 13.49 7.969Q13.021 8.562 12.396 8.875V9.042Q13.312 9.354 13.844 10.021Q14.375 10.688 14.375 11.75Q14.375 13.312 13.229 14.156Q12.083 15 10.5 15ZM8.125 8.042H10.188Q10.854 8.042 11.302 7.656Q11.75 7.271 11.75 6.708Q11.75 6.167 11.302 5.771Q10.854 5.375 10.188 5.375H8.125ZM8.125 12.917H10.354Q11.167 12.917 11.625 12.51Q12.083 12.104 12.083 11.458Q12.083 10.812 11.625 10.406Q11.167 10 10.354 10H8.125Z"/></svg>',Yn='<svg><path d="M4.167 16.667V14.083H6.979L10.229 5.917H7.5V3.333H15.833V5.917H13.021L9.771 14.083H12.5V16.667Z"/></svg>',Xn='<svg><path d="M3.021 16V15H17V16ZM3.021 13.5V12H17V13.5ZM3 10.5V8.5H16.979V10.5ZM3.021 7V4H17V7Z"/></svg>',Vr='<svg><path d="M3 16V14.5H4.5V16ZM6.125 16V14.5H7.625V16ZM9.25 16V14.5H10.75V16ZM12.375 16V14.5H13.875V16ZM15.5 16V14.5H17V16ZM3 13V11.5H6.5V13ZM8.25 13V11.5H11.75V13ZM13.5 13V11.5H17V13ZM3 10V8.5H9.25V10ZM10.75 10V8.5H17V10ZM3 7V4H17V7Z"/></svg>',Mr='<svg><path d="M5.312 14.979H7.125L8.042 12.479H11.979L12.896 14.979H14.708L10.917 5H9.083ZM8.542 10.958 9.958 6.958H10.042L11.458 10.958ZM3.417 18.333Q2.688 18.333 2.177 17.823Q1.667 17.312 1.667 16.583V3.417Q1.667 2.688 2.177 2.177Q2.688 1.667 3.417 1.667H16.583Q17.312 1.667 17.823 2.177Q18.333 2.688 18.333 3.417V16.583Q18.333 17.312 17.823 17.823Q17.312 18.333 16.583 18.333ZM3.417 16.583H16.583Q16.583 16.583 16.583 16.583Q16.583 16.583 16.583 16.583V3.417Q16.583 3.417 16.583 3.417Q16.583 3.417 16.583 3.417H3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583ZM3.417 3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583V3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417Z"/></svg>',Nr='<svg><path d="M6 17 2 13 6 9 7.062 10.062 4.875 12.25H17V13.75H4.875L7.062 15.938ZM14 11 12.938 9.938 15.125 7.75H3V6.25H15.125L12.938 4.062L14 3L18 7Z"/></svg>',Hr='<svg><path d="M2.5 15.833V14.083H7.667V15.833ZM2.5 5.917V4.167H10.771V5.917ZM9.208 17.5V12.438H10.958V14.083H17.5V15.833H10.958V17.5ZM5.917 12.542V10.875H2.5V9.125H5.917V7.479H7.667V12.542ZM9.208 10.875V9.125H17.5V10.875ZM12.333 7.562V2.5H14.083V4.167H17.5V5.917H14.083V7.562Z"/></svg>',Kn='<svg><path d="M16.354 18.833 14.521 17Q13.542 17.646 12.396 17.99Q11.25 18.333 10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.729 2.01 7.594Q2.354 6.458 3 5.458L1.167 3.625L2.396 2.396L17.583 17.604ZM10 16.583Q10.896 16.583 11.708 16.365Q12.521 16.146 13.25 15.729L4.292 6.75Q3.875 7.479 3.646 8.292Q3.417 9.104 3.417 10Q3.417 12.729 5.344 14.656Q7.271 16.583 10 16.583ZM17 14.562 15.708 13.271Q16.125 12.542 16.354 11.719Q16.583 10.896 16.583 10Q16.583 7.271 14.656 5.344Q12.729 3.417 10 3.417Q9.104 3.417 8.292 3.646Q7.479 3.875 6.75 4.292L5.458 3Q6.458 2.354 7.594 2.01Q8.729 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.271 17.979 12.417Q17.625 13.562 17 14.562ZM11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771ZM8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Z"/></svg>',Jn='<svg ><path d="M16.354 18.833 14.521 17Q13.542 17.646 12.396 17.99Q11.25 18.333 10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.729 2.01 7.594Q2.354 6.458 3 5.458L1.167 3.625L2.396 2.396L17.583 17.604ZM17 14.562 5.458 3Q6.458 2.354 7.594 2.01Q8.729 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.271 17.979 12.417Q17.625 13.562 17 14.562Z"/></svg>',X=["transparent","black","white","red","green","blue","yellow"],pe=[0,1,2],_r=[0,1,2,3],et=[[1,0],[1,2],[4,6]],Fr=["arial","serif","monospace"],He="serif",Or=36,Je={LOADING:2,PANEL:3,SNACKBAR:4},U="react-paint-",Br={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:pe,default:0}},Zr={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:pe,default:0}},zr={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:pe,default:0}},Ur={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:pe,default:0}},Wr={opacity:{min:0,max:100,step:1,default:100}},Gr={strokeColor:{values:X,default:"black"},opacity:{min:0,max:100,step:1,default:100},fontFamily:{values:Fr,default:He},fontBold:{values:[!1,!0],default:!1},fontItalic:{values:[!1,!0],default:!1}},$r={strokeColor:{values:X,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:6,max:20,step:2,default:10},lineDash:{values:pe,default:0}},Yr={strokeColor:{values:X,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:pe,default:0},lineArrow:{values:_r,default:0}},Xr={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:pe,default:0},pointsCount:{min:3,max:10,step:1,default:3}},Kr={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:pe,default:0},pointsCount:{min:3,max:10,step:1,default:3}},Fn={type:"picture",id:`${U}picture`,icon:_n,label:"Image",settings:Wr},Pt={type:"brush",id:`${U}brush`,icon:Qt,label:"Brosse",settings:$r},It={type:"line",id:`${U}line`,icon:Dt,label:"Ligne",settings:Yr},At={type:"polygon",id:`${U}polygon`,icon:Hn,label:"Polygone",settings:Xr},Et={type:"curve",id:`${U}curve`,icon:Lt,label:"Courbe",settings:Kr},jt={type:"rect",id:`${U}rect`,icon:$e,label:"Rectangle",settings:Br},Rt={type:"square",id:`${U}square`,icon:$e,label:"Carré",settings:Zr},Vt={type:"circle",id:`${U}circle`,icon:Ye,label:"Cercle",settings:zr},Mt={type:"ellipse",id:`${U}ellipse`,icon:Ye,label:"Ellipse",settings:Ur},Nt={type:"text",id:`${U}text`,icon:St,label:"Texte",settings:Gr},Jr=[Pt,It,At,Et,jt,Rt,Vt,Mt,Fn,Nt],le={id:`${U}selection`,type:"selection",icon:Sr,label:"Sélection"},be={id:`${U}undo`,type:"undo",icon:Tr,label:"Undo"},Te={id:`${U}redo`,type:"redo",icon:kr,label:"Redo"},ke={id:`${U}clear`,type:"clear",icon:xr,label:"Clear"},kn={id:`${U}export`,type:"export",icon:Qr,label:"Export PNG"},nt={id:`${U}load`,type:"loadfile",icon:Cr,label:"Load project"},wn={id:`${U}save`,type:"savefile",icon:qr,label:"Save project"},tt={id:`${U}upload-picture`,type:"uploadpicture",icon:_n,label:"Upload picture"},ea=0,Ht=2,_t="blue",B=14,Dn=16,Ft=[[0,0],[.5,0],[1,0],[1,.5],[1,1],[.5,1],[0,1],[0,.5]],Ot=["brush","rect","square","line","polygon","circle","curve","ellipse","picture","text","triangle"],Bt="react-paint-canvas-drawcanvas",Zt="react-paint-canvas-selectioncanvas",rt={layersManipulation:!0,grid:0,canGrow:!1,canShrink:!0,withExport:!0,withLoadAndSave:!0,withUploadPicture:!0,withUrlPicture:!1,availableTools:Jr,clearCallback:"empty",brushAlgo:"simple",withFrameSelection:!1,withSkeleton:!1,canvasSelectionPadding:ea},na={canvasBackgroundColor:"white",canvasSelectionColor:_t,canvasSelectionWidth:Ht},zt=(e,n)=>!(e.target instanceof Node)||!n?!1:n.contains(e.target),ta=({disabled:e,componentRef:n})=>{const[t,r]=m.useState(!1);return m.useEffect(()=>{if(e)r(!1);else{const a=i=>{r(zt(i,n.current))};return document.addEventListener("mousedown",a,{passive:!0}),document.addEventListener("touchstart",a,{passive:!0}),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}}},[e,n]),{isInsideComponent:t}},ce=300,Ln=(e,n)=>{const t={...n};for(const r of e)delete t[r];return t},Y=(e,n,t)=>{const r=Array.isArray(t)?[...t]:{...t},a=Array.isArray(e)?e:typeof e=="string"?e.split("."):[e];return a.reduce((i,s,o)=>(i[s]=Pn(i[s])?{...i[s]}:Array.isArray(i[s])?[...i[s]]:i[s]===void 0||i[s]===null?{}:i[s],o===a.length-1&&(i[s]=n),i[s]),r),r},Pn=e=>typeof e=="object"&&!Array.isArray(e)&&e!==null,se=(e,n,t)=>{if(!Pn(n)||!Pn(t))return t;const r={...n};for(const a in t)Object.hasOwn(t,a)&&(Object.hasOwn(r,a)?r[a]=e(r[a],t[a],a)??se(e,r[a],t[a]):r[a]=t[a]);return r},Ut=(e,n)=>{if(e===n)return!0;if(typeof e!="object"||typeof n!="object"||e===null||n===null)return!1;const t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(const a of t)if(!r.includes(a)||!Ut(e[a],n[a]))return!1;return!0},xn={},G=(e="")=>{xn[e]||(xn[e]=0);const n=++xn[e];return`${e}${n}`},On=e=>e.filter(n=>n!=null),Wt=e=>{e.lineCap="round",e.lineJoin="round"},me=(e,n={})=>{const{lineCap:t="round",fillColor:r="transparent",opacity:a=100,strokeColor:i=_t,lineWidth:s=Ht,lineDash:o=0}=n;e.lineCap=t,e.globalAlpha=a/100,e.fillStyle=r,e.strokeStyle=i,e.lineWidth=s,e.setLineDash(o===0?[]:[et[o][0]*s,et[o][1]*s])},Bn=(e,n,t,r)=>{e.save(),e.scale(n.canvasSize.scaleRatio,n.canvasSize.scaleRatio),e.translate(n.canvasOffset[0],n.canvasOffset[1]),t&&r&&(e.translate(r[0],r[1]),e.rotate(t),e.translate(-r[0],-r[1]))},Xe=e=>{const n=new Path2D;return n.rect(e.x,e.y,e.width,e.height),n},Ke=e=>{const n=new Path2D;return n.arc(e.x,e.y,e.radius,0,2*Math.PI),n},ra=e=>{const n=new Path2D;return n.ellipse(e.x,e.y,e.radiusX,e.radiusY,0,0,2*Math.PI),n},In=e=>{const n=new Path2D;return n.moveTo(...e.points[0]),n.lineTo(...e.points[1]),n},aa=e=>{if(e.points.length<3)return;const n=new Path2D;n.moveTo(...e.points[0]);for(let t=1;t<e.points.length-1;t++)n.quadraticCurveTo(...e.points[t],e.points.length-2===t?e.points[t+1][0]:(e.points[t+1][0]-e.points[t][0])/2+e.points[t][0],e.points.length-2===t?e.points[t+1][1]:(e.points[t+1][1]-e.points[t][1])/2+e.points[t][1]);return n},ia=e=>{if(e.points.length<1)return;const n=new Path2D;n.moveTo(...e.points[0]);for(const t of e.points.slice(1))n.lineTo(...t);return n.lineTo(...e.points[0]),n},sa=e=>{const n=new Path2D;return n.moveTo(...e.points[0]),n.lineTo(...e.points[1]),n.lineTo(...e.points[2]),n.lineTo(...e.points[0]),n},Zn=(e,n,t,r=!1)=>{const{borders:a}=z(n,t);return{border:Xe(a),shapePath:e,anchors:[...n.points.map((i,s)=>r&&s>0&&s<n.points.length-1?Xe({x:i[0]-B/2,y:i[1]-B/2,width:B/t.canvasSize.scaleRatio,height:B/t.canvasSize.scaleRatio}):Ke({x:i[0],y:i[1],radius:B/2/t.canvasSize.scaleRatio}))]}},oa=({ctx:e,shape:n,withAnchors:t,selectionWidth:r,selectionColor:a,settings:i})=>{if(n.selection&&(me(e,{fillColor:"transparent",strokeColor:a,lineWidth:r/i.canvasSize.scaleRatio}),n.selection.shapePath&&e.stroke(n.selection.shapePath),!(!t||n.locked))){me(e,{fillColor:"rgb(255,255,255)",strokeColor:"rgb(150,150,150)",lineWidth:2/i.canvasSize.scaleRatio});for(const s of n.selection.anchors)e.fill(s),e.stroke(s)}},qn=18,la=(e,{brushAlgo:n})=>{var u;if(e.points.length<1||((u=e.style)==null?void 0:u.strokeColor)==="transparent")return;const t=e.points.flat(),r=t.map(c=>c[0]),a=t.map(c=>c[1]),i=Math.min(...r),s=Math.min(...a),o=new Path2D;for(const c of e.points){if(!c.length)return;if(c.length===1)o.rect(...ie(c[0],i,s,e.scaleX,e.scaleY),1,1);else switch(o.moveTo(...ie(c[0],i,s,e.scaleX,e.scaleY)),n){case"quadratic":for(let d=0;d<c.slice(1).length-2;d++){const y=ie(c[d],i,s,e.scaleX,e.scaleY),T=ie(c[d+1],i,s,e.scaleX,e.scaleY),v=(y[0]+T[0])/2,p=(y[1]+T[1])/2;o.quadraticCurveTo(...y,v,p)}o.quadraticCurveTo(...ie(c[c.length-2],i,s,e.scaleX,e.scaleY),...ie(c[c.length-1],i,s,e.scaleX,e.scaleY));break;default:for(const d of c.slice(1))o.lineTo(...ie(d,i,s,e.scaleX,e.scaleY));break}}return o},qe=(e,n)=>{const t=la(e,n);return{...e,path:t,selection:Qe(t,e,n)}},ua=qe,ca=(e,n,t)=>qe({toolId:e.id,type:e.type,id:G(`${e.type}_`),points:[[n]],rotation:0,scaleX:1,scaleY:1,style:{opacity:e.settings.opacity.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default}},t),da=(e,n)=>{var t;n.points.length<1||!n.path||e.globalAlpha!==0&&(((t=n.style)==null?void 0:t.strokeColor)==="transparent"||e.globalAlpha===0||e.stroke(n.path))},pa=(e,{selectionPadding:n})=>{const t=e.points.flat(),r=Math.min(...t.map(u=>u[0])),a=Math.min(...t.map(u=>u[1])),i=t.map(u=>ie(u,r,a,e.scaleX,e.scaleY)),s=Math.max(...i.map(u=>u[0]))+n,o=Math.max(...i.map(u=>u[1]))+n;return{x:r-n,width:s-r+n,y:a-n,height:o-a+n}},ma=(e,n,t,r)=>{const{borders:a}=z(n,r),i=r.gridGap?V(a.x+e[0]-t[0],r)-a.x:e[0]-t[0],s=r.gridGap?V(a.y+e[1]-t[1],r)-a.y:e[1]-t[1];return qe({...n,points:n.points.map(o=>o.map(([u,c])=>[u+i,c+s]))},r)},ya=(e,n,t,r,a)=>{const{borders:i}=z({...n,scaleX:1,scaleY:1},r),{borders:s}=z(n,r),{borderX:o,borderHeight:u,borderY:c,borderWidth:d}=Ce(e,n,t,r,a),y=Math.max(0,i.width-2*r.selectionPadding),T=Math.max(0,i.height-2*r.selectionPadding),v=Math.max(0,d-2*r.selectionPadding),p=Math.max(0,u-2*r.selectionPadding),k=y?v/y:1,f=T?p/T:1;if(!y||!T)return n;const h=de(o-s.x),x=de(c-s.y);return qe({...n,points:n.points.map(q=>q.map(([Q,E])=>[Q+h,E+x])),scaleX:k,scaleY:f},r)},fa=(e,n,t)=>{const r={...e,points:Y(e.points.length-1,[...e.points[e.points.length-1],[Math.round(n[0]),Math.round(n[1])]],e.points)};return qe(r,t)},ga=(e,n,t)=>{const r={...e,points:Y(e.points.length,[[Math.round(n[0]),Math.round(n[1])]],e.points)};return qe(r,t)},An=e=>e*180/Math.PI,va=(e,n)=>n[0]>=e.x&&n[0]<=e.x+e.width&&n[1]>=e.y&&n[1]<=e.y+e.height,Gt=(e,n)=>{const t=n.x-Math.min(Math.max(n.x,e.x),e.x+e.width),r=n.y-Math.min(Math.max(n.y,e.y),e.y+e.height);return Math.sqrt(t*t+r*r)<=n.radius},ne=({origin:e=[0,0],point:n,rotation:t})=>{const r=[n[0]-e[0],n[1]-e[1]],a=r[1]*Math.cos(t)-r[0]*Math.sin(t);return[r[1]*Math.sin(t)+r[0]*Math.cos(t)+e[0],a+e[1]]},at=e=>(e+2*Math.PI)%(2*Math.PI),$t=({targetVector:[e,n],radian:t=!0,originVector:r})=>{const a=at(Math.atan2(n[1]-e[1],n[0]-e[0]));if(r){const[i,s]=r,o=Math.atan2(s[1]-i[1],s[0]-i[0]),u=at(a-o);return t?u:An(u)}return t?a:An(a)},de=(e,n=2)=>Math.round(e*10**n)/10**n,ie=(e,n,t,r=1,a=1)=>[n+(e[0]-n)*r,t+(e[1]-t)*a],V=(e,n,t=0)=>{if(!n.gridGap)return de(e);const r=e+t,a=r>=0?n.gridGap:-n.gridGap;return r+a/2-(r+a/2)%a-t},ha=(e,n,t=0)=>n.gridGap?e+Math.PI/qn/2-(e+Math.PI/qn/2)%(Math.PI/qn):de(e,3),ba=(e,n,t,r,a,i)=>{switch(r.mode){case"brush":return fa(n,t,a);case"translate":return Un(t,r.originalShape,r.cursorStartPosition,a);case"rotate":return Di(n,t,r.originalShape,r.cursorStartPosition,r.center,a);case"resize":return Li(e,n,t,r.originalShape,r,a,i);default:return n}},Ta=(e,n,t,r,a=!1)=>{if(!e||!n||!r||!t)return[ce,ce];const i=e/n,s=t/r;if(i>s){const u=a?t:Math.min(e,t);return[u,u/i]}const o=a?r:Math.min(n,r);return[o*i,o]},ka=({line:e,size:n,direction:t})=>{const r=Math.PI/2-$t({targetVector:[e.points[0],e.points[1]]}),a=[e.points[0][0]+(e.points[1][0]-e.points[0][0])/2,e.points[0][1]+(e.points[1][1]-e.points[0][1])/2];let i;if(["start","both"].includes(t)){const o=ne({point:e.points[0],origin:a,rotation:-r});i=ne({point:[o[0],o[1]+n],origin:a,rotation:r})}else i=[...e.points[0]];let s;if(["end","both"].includes(t)){const o=ne({point:e.points[1],origin:a,rotation:-r});s=ne({point:[o[0],o[1]-n],origin:a,rotation:r})}else s=[...e.points[1]];return{points:[i,s]}},Qe=(e,n,t)=>{const{borders:r}=z(n,t);return{border:Xe(r),shapePath:e,line:In({points:[[r.x+r.width/2,r.y],[r.x+r.width/2,r.y-(B/2+Dn)/t.canvasSize.scaleRatio]]}),anchors:[Ke({x:r.x+r.width/2,y:r.y-(B/2+Dn)/t.canvasSize.scaleRatio,radius:B/2/t.canvasSize.scaleRatio}),...Ft.map(a=>Ke({x:r.x+r.width*a[0],y:r.y+r.height*a[1],radius:B/2/t.canvasSize.scaleRatio}))]}},wa=(e,n,t,r,a,i)=>{if(n.selection&&(me(e,{fillColor:"transparent",strokeColor:t,lineWidth:r/a.canvasSize.scaleRatio}),n.selection.shapePath?e.stroke(n.selection.shapePath):e.stroke(n.selection.border),!(!i||n.locked))){n.selection.shapePath&&e.stroke(n.selection.border),e.stroke(n.selection.line),me(e,{fillColor:"rgb(255,255,255)",strokeColor:"rgb(150,150,150)",lineWidth:2/a.canvasSize.scaleRatio});for(const s of n.selection.anchors)e.fill(s),e.stroke(s)}},it=({borderStart:e,borderSize:n,vector:t,settings:r,invertedAxe:a,anchor:i})=>{switch(i){case 0:{if(a){const o=n-2*r.selectionPadding;return[e+o,t-o]}const s=Math.max(2*r.selectionPadding,n-t);return[e+n-s,s]}case .5:return[e,n];case 1:if(a){const s=n+t;return[e+s,2*r.selectionPadding-s]}return[e,Math.max(2*r.selectionPadding,n+t)];default:return[0,0]}},xa=(e,n,t,r,a,i,s,o,u,c)=>{const{selectionPadding:d}=c,y=(n.width-d*2||1)/(n.height-d*2||1),T=(a-d*2)/(s-d*2);let v,p,k,f;return u.anchor[0]!==.5&&u.anchor[1]!==.5?T<y?(p=i,f=s,k=(s-d*2)*y+2*d,u.anchor[0]===0?v=n.width-e[0]>d?n.x+(n.width-k):n.x+n.width-2*d:v=n.width+e[0]>d?n.x:n.x-k+2*d):(v=r,k=a,f=(a-d*2)/y+2*d,u.anchor[1]===0?p=n.height-e[1]>d?n.y+(n.height-f):n.y+n.height-2*d:p=n.height+e[1]>d?n.y:n.y-f+2*d):u.anchor[0]!==.5?(v=r,k=a,f=(a-d*2)/y+2*d,p=n.y+(n.height-f)/2):(p=i,f=s,k=(s-d*2)*y+2*d,v=n.x+(n.width-k)/2),{borderX:v,borderWidth:k,borderY:p,borderHeight:f,center:t,originalShape:o}},st=({borderX:e,borderWidth:n,borderY:t,borderHeight:r,center:a,originalShape:i})=>{const s=[e+n/2-a[0],t+r/2-a[1]],[o,u]=ne({point:s,rotation:-i.rotation});return{borderX:de(e+o-s[0]),borderWidth:de(n),borderY:de(t+u-s[1]),borderHeight:de(r)}},Ce=(e,n,t,r,a=!1)=>{const{center:i,borders:s}=z(n,r),o=ne({origin:i,point:e,rotation:n.rotation}),u=t.anchor[0]===0&&o[0]>=s.x+s.width||t.anchor[0]===1&&o[0]<=s.x,c=t.anchor[1]===0&&o[1]>=s.y+s.height||t.anchor[1]===1&&o[1]<=s.y,d=[V(o[0],r,t.anchor[0]===0&&!u||t.anchor[0]===1&&u?r.selectionPadding:-r.selectionPadding),V(o[1],r,t.anchor[1]===0&&!c||t.anchor[1]===1&&c?r.selectionPadding:-r.selectionPadding)],y=r.gridGap?[t.anchor[0]===0?s.x:t.anchor[0]===.5?s.x+s.width/2:s.x+s.width,t.anchor[1]===0?s.y:t.anchor[1]===.5?s.y+s.height/2:s.y+s.height]:ne({origin:i,point:t.cursorStartPosition,rotation:n.rotation}),T=[d[0]-y[0],d[1]-y[1]],[v,p]=it({borderStart:s.x,borderSize:s.width,vector:T[0],settings:r,invertedAxe:u,anchor:t.anchor[0]}),[k,f]=it({borderStart:s.y,borderSize:s.height,vector:T[1],settings:r,invertedAxe:c,anchor:t.anchor[1]});if(a){const h=xa(T,s,i,v,p,k,f,n,t,r);return st(h)}return st({borderX:v,borderWidth:p,borderY:k,borderHeight:f,center:i,originalShape:n})},qa=(e,n,t)=>{me(e,{fillColor:"rgba(170,170,170, 0.1)",strokeColor:"rgb(170,170,170)",lineWidth:1/t.canvasSize.scaleRatio}),e.fillRect(n[0][0],n[0][1],n[1][0]-n[0][0],n[1][1]-n[0][1]),e.strokeRect(n[0][0],n[0][1],n[1][0]-n[0][0],n[1][1]-n[0][1])},en=(e,n)=>{const t=Ke(e);return{...e,path:t,selection:Qe(t,e,n)}},Qa=en,Ca=(e,n,t)=>en({toolId:e.id,type:e.type,id:G(`${e.type}_`),x:n[0],y:n[1],radius:0,rotation:0,style:{opacity:e.settings.opacity.default,fillColor:e.settings.fillColor.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default}},t),Sa=(e,n)=>{var t,r;e.globalAlpha===0||!n.path||(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},Da=(e,n)=>({x:e.x-e.radius-n.selectionPadding,width:(e.radius+n.selectionPadding)*2,y:e.y-e.radius-n.selectionPadding,height:(e.radius+n.selectionPadding)*2}),La=(e,n,t,r)=>en({...n,x:V(n.x+e[0]-t[0],r),y:V(n.y+e[1]-t[1],r)},r),Pa=(e,n,t,r)=>{const{borderX:a,borderHeight:i,borderY:s,borderWidth:o}=Ce(e,n,t,r,!0);return en({...n,radius:Math.max(0,o/2-r.selectionPadding),x:a+o/2,y:s+i/2},r)},En=(e,n,t)=>{const{clientX:r=0,clientY:a=0}="touches"in e&&e.touches[0]?e.touches[0]:"changedTouches"in e&&e.changedTouches[0]?e.changedTouches[0]:"clientX"in e?e:{},i=(n==null?void 0:n.getBoundingClientRect())??{left:0,top:0,width:t.canvasSize.width,height:t.canvasSize.height};return[(r-i.left)*(t.canvasSize.width/i.width)/t.canvasSize.scaleRatio,(a-i.top)*(t.canvasSize.height/i.height)/t.canvasSize.scaleRatio]},Yt=e=>"touches"in e,ye=(e,n,[t,r],[a,i])=>ne({origin:[t-a,r-i],point:e,rotation:n}),Ia=(e,n,[t,r],[a,i])=>ne({origin:[t-a,r-i],point:e,rotation:-n}),Ue=(e,n,t)=>t?Gt(e,{x:n[0],y:n[1],radius:t}):va(e,n),_e=(e,n,t,r=!1,a=0)=>{if(e.locked)return!1;const{canvasSize:{scaleRatio:i}}=t,{borders:s,center:o}=z(e,t),u=ye(n,e.rotation,o,t.canvasOffset);if(r)if(e.type==="line"||e.type==="polygon"||e.type==="curve"){for(let c=0;c<e.points.length;c++)if(Ue({x:e.points[c][0]-B/2/i,y:e.points[c][1]-B/2/i,width:B/i,height:B/i},u,a))return{mode:"resize",anchor:c}}else{if(Ue({x:s.x+s.width/2-B/2/i,y:s.y-B/i-Dn/i,width:B/i,height:B/i},u,a))return{mode:"rotate"};for(const c of Ft)if(Ue({x:s.x+s.width*c[0]-B/2/i,y:s.y+s.height*c[1]-B/2/i,width:B/i,height:B/i},u,a))return{mode:"resize",anchor:c}}return Ue(s,u,a)?{mode:"translate"}:!1},Xt=(e,n,t,r)=>{var s,o,u;if(n.locked)return!1;const{center:a}=z(n,r),i=ye(t,n.rotation,a,r.canvasOffset);return"path"in n&&n.path?((s=n.style)==null?void 0:s.fillColor)&&((o=n.style)==null?void 0:o.fillColor)!=="transparent"?e.isPointInPath(n.path,i[0],i[1])?{mode:"translate"}:!1:(e.lineWidth=(((u=n.style)==null?void 0:u.lineWidth)??0)+15,e.isPointInStroke(n.path,i[0],i[1])?{mode:"translate"}:!1):_e(n,t,r,!1)};function ot(e,n){const t=Math.max(e.x,n.x),r=Math.max(e.y,n.y),a=Math.min(e.x+(e.width||1),n.x+(n.width||1)),i=Math.min(e.y+(e.height||1),n.y+(n.height||1));if(t<a&&r<i)return{x:t,y:r,width:a-t,height:i-r}}const lt=({ctx:e,path:n,rect:t,offset:r,checkFill:a})=>{for(let i=0;i<r;i+=r/2)for(let s=0;s<r;s+=r/2)for(let o=i+t.x;o<t.x+t.width;o+=r)for(let u=s+t.y;u<t.y+t.height;u+=r)if(a?e.isPointInPath(n,o,u):e.isPointInStroke(n,o,u))return!0;return!1},Qn=10,Aa=(e,n,t,r)=>{var h,x,q,Q;const{selectionPadding:a,canvasOffset:i}=r,{center:s,borders:o}=z(n,r),u=ye(t[0],n.rotation,s,i),c=ye(t[1],n.rotation,s,i),d=Math.round(Math.min(u[0],c[0])-a/2),y=Math.round(Math.max(u[0],c[0])+a),T=Math.round(Math.min(u[1],c[1])-a/2),v=Math.round(Math.max(u[1],c[1])+a),p={x:d,y:T,width:y-d,height:v-T},k=ot(o,p);if(!k)return!1;if(o.width<=1||o.height<=1||!("path"in n&&n.path))return!0;if(e.lineWidth=(((h=n.style)==null?void 0:h.lineWidth)??0)+Qn,n.type==="brush"){const E=n.points.flat(),I=Math.min(...E.map(C=>C[0])),M=Math.min(...E.map(C=>C[1]));for(const C of n.points){if(C.length<1)break;if(C.length<2){const L=ie(C[0],I,M,n.scaleX,n.scaleY);if(Gt(k,{x:L[0],y:L[1],radius:(((x=n.style)==null?void 0:x.lineWidth)??1)/2}))return!0}for(let L=0;L<C.length-1;L++){const N=ie(C[L],I,M,n.scaleX,n.scaleY),S=ie(C[L+1],I,M,n.scaleX,n.scaleY),j=Math.min(N[0],S[0]),H=Math.min(N[1],S[1]),P=ot({x:j,y:H,width:Math.abs(N[0]-S[0]),height:Math.abs(N[1]-S[1])},p);if(P){const D=new Path2D;if(D.moveTo(...N),D.lineTo(...S),lt({ctx:e,path:D,rect:P,offset:Qn,checkFill:!1}))return!0}}}return!1}const f=!!((q=n.style)!=null&&q.fillColor&&((Q=n.style)==null?void 0:Q.fillColor)!=="transparent");return lt({ctx:e,path:n.path,rect:k,offset:Qn,checkFill:f})},we=(e,n)=>{const t=ia(e);return{...e,path:t,selection:Zn(t,e,n)}},Ea=we,ja=(e,n,t)=>we({toolId:e.id,type:e.type,id:G(`${e.type}_`),points:new Array(e.settings.pointsCount.default).fill(n),rotation:0,style:{opacity:e.settings.opacity.default,fillColor:e.settings.fillColor.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default,pointsCount:e.settings.pointsCount.default}},t),Ra=(e,n)=>{var t,r;n.path&&e.globalAlpha!==0&&(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},Kt=(e,n)=>{const t=Math.min(...e.points.map(s=>s[0]))-n.selectionPadding,r=Math.max(...e.points.map(s=>s[0]))+n.selectionPadding,a=Math.min(...e.points.map(s=>s[1]))-n.selectionPadding,i=Math.max(...e.points.map(s=>s[1]))+n.selectionPadding;return{x:t,width:r-t,y:a,height:i-a}},Va=(e,n,t,r)=>{const{borders:a}=z(n,r);return we({...n,points:n.points.map(([i,s])=>r.gridGap?[i+V(a.x+e[0]-t[0],r)-a.x,s+V(a.y+e[1]-t[1],r)-a.y]:[V(i+e[0]-t[0],r),V(s+e[1]-t[1],r)])},r)},Ma=(e,n,t,r)=>{const a=[V(e[0],r),V(e[1],r)],{center:i}=z(n,r),s=ye(a,n.rotation,i,r.canvasOffset),o=Y(["points",t.anchor],s,n);return we(o,r)},Na=(e,n,t)=>{const r=e.points.length;if(r===n)return e;if(r>n){const o=e.points.slice(0,n);return we({...e,points:o,style:{...e.style,pointsCount:o.length}},t)}const a=n-r,i=new Array(a).fill(void 0).map((o,u)=>[e.points[0][0]+(e.points[1][0]-e.points[0][0])*(u+1)/(a+1),e.points[0][1]+(e.points[1][1]-e.points[0][1])*(u+1)/(a+1)]),s=[e.points[0],...i,...e.points.slice(1,e.points.length)];return we({...e,points:s,style:{...e.style,pointsCount:s.length}},t)},xe=(e,n)=>{const t=aa(e);return{...e,path:t,selection:Zn(t,e,n,!0)}},Ha=xe,_a=(e,n,t)=>xe({toolId:e.id,type:e.type,id:G(`${e.type}_`),points:new Array(e.settings.pointsCount.default).fill(n),rotation:0,style:{opacity:e.settings.opacity.default,fillColor:e.settings.fillColor.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default,pointsCount:e.settings.pointsCount.default}},t),Fa=(e,n,t,r)=>{const a=[V(e[0],r),V(e[1],r)],{center:i}=z(n,r),s=ye(a,n.rotation,i,r.canvasOffset),o=Y(["points",t.anchor],s,n);return xe(o,r)},Oa=(e,n)=>{var t,r;n.path&&e.globalAlpha!==0&&(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},Ba=Kt,Za=(e,n,t,r)=>{const{borders:a}=z(n,r);return xe({...n,points:n.points.map(([i,s])=>r.gridGap?[i+V(a.x+e[0]-t[0],r)-a.x,s+V(a.y+e[1]-t[1],r)-a.y]:[V(i+e[0]-t[0],r),V(s+e[1]-t[1],r)])},r)},za=(e,n,t)=>{const r=e.points.length;if(r===n)return e;if(r>n){const o=e.points.slice(0,n);return xe({...e,points:o,style:{...e.style,pointsCount:o.length}},t)}const a=n-r,i=new Array(a).fill(void 0).map((o,u)=>[e.points[0][0]+(e.points[1][0]-e.points[0][0])*(u+1)/(a+1),e.points[0][1]+(e.points[1][1]-e.points[0][1])*(u+1)/(a+1)]),s=[e.points[0],...i,...e.points.slice(1,e.points.length)];return xe({...e,points:s,style:{...e.style,pointsCount:s.length}},t)},nn=(e,n)=>{const t=ra(e);return{...e,path:t,selection:Qe(t,e,n)}},Ua=nn,Wa=(e,n,t)=>nn({toolId:e.id,type:e.type,id:G(`${e.type}_`),x:n[0],y:n[1],radiusX:0,radiusY:0,rotation:0,style:{opacity:e.settings.opacity.default,fillColor:e.settings.fillColor.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default}},t),Ga=(e,n)=>{var t,r;e.globalAlpha===0||!n.path||(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},$a=(e,n)=>({x:e.x-e.radiusX-n.selectionPadding,width:(e.radiusX+n.selectionPadding)*2,y:e.y-e.radiusY-n.selectionPadding,height:(e.radiusY+n.selectionPadding)*2}),Ya=(e,n,t,r)=>nn({...n,x:V(n.x+e[0]-t[0],r),y:V(n.y+e[1]-t[1],r)},r),Xa=(e,n,t,r,a=!1)=>{const{borderX:i,borderHeight:s,borderY:o,borderWidth:u}=Ce(e,n,t,r,a);return nn({...n,radiusX:Math.max(0,u/2-r.selectionPadding),radiusY:Math.max(0,s/2-r.selectionPadding),x:i+u/2,y:o+s/2},r)},Ka=e=>({...e,path:sa(e)}),ut=e=>{const n={...e,type:"triangle"};return Ka(n)},Ja=(e,n)=>{var t,r;e.globalAlpha!==0&&n.path&&(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},tn=(e,n)=>{var a,i,s,o,u,c,d,y,T,v,p;const t=[];let r;if(((a=e.style)==null?void 0:a.lineArrow)===1||((i=e.style)==null?void 0:i.lineArrow)===2||((s=e.style)==null?void 0:s.lineArrow)===3){const k=Math.PI/2-$t({targetVector:[e.points[0],e.points[1]]});(((o=e.style)==null?void 0:o.lineArrow)===1||((u=e.style)==null?void 0:u.lineArrow)===3)&&t.push(ut(ct(e.points[0],k,e.style))),(((c=e.style)==null?void 0:c.lineArrow)===2||((d=e.style)==null?void 0:d.lineArrow)===3)&&t.push(ut(ct(e.points[1],k+Math.PI,e.style)));const f=10+(((y=e.style)==null?void 0:y.lineWidth)??0)*2,h=ka({line:e,size:f,direction:((T=e.style)==null?void 0:T.lineArrow)===1?"start":((v=e.style)==null?void 0:v.lineArrow)===2?"end":"both"});r=In(h)}else r=In(e);return{...e,path:r,selection:Zn(r,e,n),arrows:t,style:{...e.style,lineCap:(p=e.style)!=null&&p.lineArrow?"butt":"round"}}},ei=tn,ni=(e,n,t)=>{const r={toolId:e.id,type:e.type,id:G(`${e.type}_`),points:[n,n],rotation:0,style:{opacity:e.settings.opacity.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default,lineArrow:e.settings.lineArrow.default}};return tn(r,t)},ct=(e,n,t)=>{const r=[ne({point:[0,0],rotation:n}),ne({point:[-(5+(t.lineWidth??0)),10+(t.lineWidth??0)*2],rotation:n}),ne({point:[5+(t.lineWidth??0),10+(t.lineWidth??0)*2],rotation:n})];return{points:[[e[0]+r[0][0],e[1]+r[0][1]],[e[0]+r[1][0],e[1]+r[1][1]],[e[0]+r[2][0],e[1]+r[2][1]]],style:{...t,fillColor:t.strokeColor,strokeColor:"transparent"}}},ti=(e,n)=>{var t,r;if(!(e.globalAlpha===0||!n.path)){((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path);for(const a of n.arrows??[])me(e,a.style),Ja(e,a)}},ri=(e,n)=>{const t=Math.min(e.points[0][0],e.points[1][0])-n.selectionPadding,r=Math.abs(e.points[0][0]-e.points[1][0])+n.selectionPadding*2,a=Math.min(e.points[0][1],e.points[1][1])-n.selectionPadding,i=Math.abs(e.points[0][1]-e.points[1][1])+n.selectionPadding*2;return{x:t,width:r,y:a,height:i}},ai=(e,n,t,r)=>tn({...n,points:n.points.map(([a,i])=>[V(a+e[0]-t[0],r),V(i+e[1]-t[1],r)])},r),ii=(e,n,t,r)=>{const a=[V(e[0],r),V(e[1],r)],{center:i}=z(n,r),s=ye(a,n.rotation,i,r.canvasOffset),o=Y(["points",t.anchor],s,n);return tn(o,r)},rn=(e,n)=>{const t=Xe(e);return{...e,path:t,selection:Qe(t,e,n)}},si=rn,oi=(e,n,t,r=0,a=0)=>{const i={toolId:e.id,type:e.type,id:G(`${e.type}_`),x:n[0],y:n[1],width:r,height:a,rotation:0,style:{opacity:e.settings.opacity.default,fillColor:e.settings.fillColor.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default}};return rn(i,t)},dt=(e,n)=>{var t,r;e.globalAlpha===0||!n.path||(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},Jt=(e,n)=>({x:e.x-n.selectionPadding,width:e.width+n.selectionPadding*2,y:e.y-n.selectionPadding,height:e.height+n.selectionPadding*2}),pt=(e,n,t,r,[a,i]=[!1,!1])=>{const s=e[0]===.5?t.x+t.width/2:e[0]===0?t.x+(a?0:t.width):t.x+(a?t.width:0),o=e[1]===.5?t.y+t.height/2:e[1]===0?t.y+(i?0:t.height):t.y+(i?t.height:0);return Ia([s,o],t.rotation,n,r.canvasOffset)},li=(e,n,t,r)=>rn({...n,x:V(n.x+e[0]-t[0],r),y:V(n.y+e[1]-t[1],r)},r),ui=(e,n,t,r,a=!1)=>{const{borderX:i,borderHeight:s,borderY:o,borderWidth:u}=Ce(e,n,t,r,a);return rn({...n,width:Math.max(0,u-2*r.selectionPadding),height:Math.max(0,s-2*r.selectionPadding),x:i+r.selectionPadding,y:o+r.selectionPadding},r)},an=(e,n)=>({...e,selection:Qe(void 0,e,n)}),ci=an,er=(e,n,t,r,a)=>{const[i,s]=Ta(e.width,e.height,t,r,!0);return an({toolId:Fn.id,type:"picture",id:G("picture_"),x:(t-i)/2,y:(r-s)/2,width:i,height:s,src:n,img:e,rotation:0},a)},di=(e,n,t,r,a,i)=>{const s=URL.createObjectURL(t);e.onload=async()=>{if(URL.revokeObjectURL(e.src),rr(t)&&!e.width&&!e.height){const u=await t.text(),c=tr(u);if(s===e.src){e.src=c;return}}const o=er(e,e.src,r,a,i);n(o)},e.src=s},pi=(e,n,t,r,a,i)=>{e.onload=()=>{URL.revokeObjectURL(e.src);const s=er(e,t,r,a,i);n(s)},ar(t).then(s=>{e.src=s}).catch(()=>{e.src=""})},mi=(e,n,t,r)=>new Promise((a,i)=>{const s=new Image;s.onerror=()=>{i(new Error("Some images could not be loaded"))},setTimeout(()=>{i(new Error("Timeout while loading images"))},4e3),e instanceof File?di(s,a,e,n,t,r):pi(s,a,e,n,t,r)}),yi=(e,n)=>{e.globalAlpha!==0&&(e.beginPath(),e.drawImage(n.img,n.x,n.y,n.width,n.height))},fi=(e,n)=>Jt(e,n),gi=(e,n,t,r)=>an({...n,x:V(n.x+e[0]-t[0],r),y:V(n.y+e[1]-t[1],r)},r),vi=(e,n,t,r,a)=>{const{borderX:i,borderHeight:s,borderY:o,borderWidth:u}=Ce(e,n,t,r,!0);return an({...n,width:Math.max(0,u-2*r.selectionPadding),height:Math.max(0,s-2*r.selectionPadding),x:i+r.selectionPadding,y:o+r.selectionPadding},r)},Cn=["Texte"],sn=(e,n)=>({...e,selection:Qe(void 0,e,n)}),hi=sn,zn=(e,n,t,r,a,i=He)=>{e.font=`${a?"italic":""} ${r?"bold":""} 1px ${i}`;const s=n.map(o=>t/e.measureText(o).width);return Math.min(...s)||Or},bi=(e,n,t,r)=>{var i,s;const a=zn(e,Cn,50,((i=n.settings)==null?void 0:i.fontBold.default)??!1,((s=n.settings)==null?void 0:s.fontItalic.default)??!1,n.settings.fontFamily.default);return sn({toolId:n.id,type:n.type,id:G(`${n.type}_`),x:t[0],y:t[1],value:Cn,fontSize:a,width:50,height:a*(Cn.length||1),rotation:0,style:{opacity:n.settings.opacity.default,strokeColor:n.settings.strokeColor.default,fontFamily:n.settings.fontFamily.default,fontItalic:n.settings.fontItalic.default,fontBold:n.settings.fontBold.default}},r)},Ti=(e,n)=>{var t,r,a,i;if(!(e.globalAlpha===0||!((t=n.style)!=null&&t.strokeColor)||n.style.strokeColor==="transparent")){e.font=`${(r=n.style)!=null&&r.fontItalic?"italic":""} ${(a=n.style)!=null&&a.fontBold?"bold":""} ${n.fontSize}px ${((i=n.style)==null?void 0:i.fontFamily)??He}`,e.textBaseline="top",e.fillStyle=n.style.strokeColor;for(let s=0;s<n.value.length;s++)e.fillText(n.value[s],n.x,n.y+s*n.fontSize,n.width)}},ki=(e,n)=>({x:e.x-n.selectionPadding,width:e.width+n.selectionPadding*2,y:e.y-n.selectionPadding,height:e.height+n.selectionPadding*2}),wi=(e,n,t,r)=>sn({...n,x:V(n.x+e[0]-t[0],r),y:V(n.y+e[1]-t[1],r)},r),xi=(e,n,t,r,a)=>{var d,y,T;const{borderX:i,borderHeight:s,borderY:o,borderWidth:u}=Ce(n,t,r,a,!0),c=sn({...t,width:Math.max(0,u-2*a.selectionPadding),height:Math.max(0,s-2*a.selectionPadding),x:i+a.selectionPadding,y:o+a.selectionPadding},a);return{...c,fontSize:zn(e,c.value,c.width,((d=c.style)==null?void 0:d.fontBold)??!1,((y=c.style)==null?void 0:y.fontItalic)??!1,(T=c.style)==null?void 0:T.fontFamily)}},qi=(e,n,t,r,a,i=He)=>{e.font=`${a?"italic":""} ${r?"bold":""} ${t}px ${i}`;const s=n.map(o=>e.measureText(o).width);return Math.max(...s)||20},Qi=(e,n,t,r)=>{var p,k,f;const a={...n,value:t},i=qi(e,a.value,a.fontSize,((p=a.style)==null?void 0:p.fontBold)??!1,((k=a.style)==null?void 0:k.fontItalic)??!1,(f=a.style)==null?void 0:f.fontFamily),s=a.fontSize*a.value.length,o={...a,width:i,height:s},{center:u}=z(n,r),{center:c}=z(o,r),[d,y]=pt([1,1],u,n,r),[T,v]=pt([1,1],c,o,r,[!1,!1]);return{...o,x:o.x-(T-d),y:o.y-(v-y)}},mt=(e,n,t,r)=>{const a=[V(t[0],r),V(t[1],r)];switch(n.type){case"brush":return ca(n,a,r);case"line":return ni(n,a,r);case"polygon":return ja(n,a,r);case"curve":return _a(n,a,r);case"rect":case"square":return oi(n,a,r);case"text":return bi(e,n,a,r);case"ellipse":return Wa(n,a,r);case"circle":return Ca(n,a,r)}},nr=(e,n,t)=>{if(n.visible===!1)return;const{center:r}=z(n,t);switch(Bn(e,t,n.rotation,r),me(e,n.style),n.type){case"brush":da(e,n);break;case"text":Ti(e,n);break;case"line":ti(e,n);break;case"polygon":Ra(e,n);break;case"curve":Oa(e,n);break;case"circle":Sa(e,n);break;case"ellipse":Ga(e,n);break;case"rect":dt(e,n);break;case"square":dt(e,n);break;case"picture":yi(e,n);break}e.restore()},Ci=(e,n)=>{switch(e.type){case"brush":return pa(e,n);case"line":return ri(e,n);case"polygon":return Kt(e,n);case"curve":return Ba(e,n);case"circle":return Da(e,n);case"ellipse":return $a(e,n);case"rect":case"square":return Jt(e,n);case"text":return ki(e,n);case"picture":return fi(e,n);default:return{x:0,y:0,width:100,height:100}}},Si=e=>[e.x+e.width/2,e.y+e.height/2],z=(e,n)=>{const t=Ci(e,n),r=Si(t);return{borders:t,center:r}},Di=(e,n,t,r,a,i)=>{const s=a[0]-r[0],o=a[1]-r[1],u=a[0]-n[0],c=a[1]-n[1],d=t.rotation+Math.atan2(c,u)-Math.atan2(o,s);return{...e,rotation:ha(d,i)}},Li=(e,n,t,r,a,i,s)=>{switch(r.type){case"line":return ii(t,r,a,i);case"polygon":return Ma(t,r,a,i);case"curve":return Fa(t,r,a,i);case"brush":return ya(t,r,a,i,s);case"circle":return Pa(t,r,a,i);case"ellipse":return Xa(t,r,a,i,s);case"rect":case"square":return ui(t,r,a,i,n.type==="square"||s);case"text":return xi(e,t,r,a,i);case"picture":return vi(t,r,a,i);default:return r}},Un=(e,n,t,r)=>{switch(n.type){case"rect":case"square":return li(e,n,t,r);case"ellipse":return Ya(e,n,t,r);case"circle":return La(e,n,t,r);case"picture":return gi(e,n,t,r);case"text":return wi(e,n,t,r);case"line":return ai(e,n,t,r);case"polygon":return Va(e,n,t,r);case"curve":return Za(e,n,t,r);case"brush":return ma(e,n,t,r);default:return n}},Ne=(e,n)=>{switch(e.type){case"rect":case"square":return si(e,n);case"ellipse":return Ua(e,n);case"circle":return Qa(e,n);case"picture":return ci(e,n);case"text":return hi(e,n);case"line":return ei(e,n);case"polygon":return Ea(e,n);case"curve":return Ha(e,n);case"brush":return ua(e,n);default:return e}},yt=({ctx:e,shape:n,settings:t,selectionWidth:r,selectionColor:a,withAnchors:i=!0})=>{const{center:s}=z(n,t);switch(Bn(e,t,n.rotation,s),n.type){case"rect":case"square":case"circle":case"ellipse":case"picture":case"text":case"brush":wa(e,n,a,r,t,i);break;case"polygon":case"line":case"curve":oa({ctx:e,shape:n,withAnchors:i,selectionWidth:r,selectionColor:a,settings:t});break}e.restore()},Pi=({ctx:e,selectionFrame:n,settings:t})=>{Bn(e,t),qa(e,n,t),e.restore()},Ii=(e,n)=>({...Un([20,20],e,[0,0],n),id:G(`${e.type}_`)}),tr=e=>{const r=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("svg")[0],a=r.getAttribute("width"),i=r.getAttribute("height");let s;if(a||i)s=e;else{const u=r.getAttribute("viewBox")??`0 0 ${ce} ${ce}`,[,,c,d]=u.split(" ");r.setAttribute("width",c??ce),r.setAttribute("height",d??ce),s=new XMLSerializer().serializeToString(r)}const o=new Blob([s],{type:"image/svg+xml"});return URL.createObjectURL(o)},rr=e=>(e instanceof File?e.name:e).includes(".svg"),ar=e=>rr(e)?fetch(e).then(n=>n.text()).then(n=>tr(n)):fetch(e).then(n=>n.blob()).then(n=>URL.createObjectURL(n)),ft=(e,n)=>{const t=document.createElement("a");t.href=e,t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t)},Ai=e=>{const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const t=n.getContext("2d");return t?(t.drawImage(e,0,0),n.toDataURL("image/png")):""},Ei=e=>`data:text/plain;charset=utf-8,${encodeURIComponent(JSON.stringify(e))}`,gt=(e,n,t,r)=>{const a=document.createElement("canvas");a.width=n,a.height=t;const i=a.getContext("2d");if(!i)return"";i.clearRect(0,0,n,t),Wt(i);for(let s=e.length-1;s>=0;s--)nr(i,e[s],Y(["canvasSize","scaleRatio"],1,r));return a.toDataURL("image/png")},ji=(e,n,t)=>{const r=Wn(e,n,t);return Ei(r)},Ri=async e=>new Promise((n,t)=>{const r=new FileReader;r.onload=a=>{var o;const i=(o=a.target)==null?void 0:o.result;if(!i)return t("Impossible de récupérer les données du fichier");const s=JSON.parse(i);n(s)},r.readAsText(e)}),Vi=async(e,n)=>{if(!e)return[];const t=[],r=On(e.map(a=>{if(!a||!Ot.includes(a.type))return null;if(a.type==="picture"){const i=new Image,s=new Promise((o,u)=>{i.onload=()=>{URL.revokeObjectURL(i.src),o()},i.onerror=()=>{u(new Error("Some images could not be loaded"))}});return t.push(s),a.src.startsWith("http")?ar(a.src).then(o=>{i.src=o}).catch(()=>{i.src=""}):i.src=a.src,vt({...a,img:i},n)}return vt(a,n)}));return await Promise.all(t),r},Mi=e=>{const n=["img","id","selection","path","arrows"];return e.map(t=>t.type==="picture"&&!t.src.startsWith("http")?Ln(n,{...t,src:Ai(t.img)}):Ln(n,t))},Wn=(e,n,t)=>({shapes:Mi(e),config:{width:n,height:t}}),vt=(e,n)=>Ne({...e,id:G(`${e.type}_`)},n),Ni=e=>{const n=m.useRef([]),t=m.useRef({dataChanged:[]}),[r,a]=m.useState(void 0),[i,s]=m.useState(void 0),[o,u]=m.useState(void 0),[c,d]=m.useState({states:[{shapes:[],selectedShape:void 0}],cursor:0}),y=c.cursor>0,T=c.cursor<c.states.length-1,v=n.current.length>0,p=m.useCallback(()=>{d(b=>Ut(b.states[b.cursor].shapes,n.current)?b:{states:[...b.states.slice(0,b.cursor+1),{shapes:n.current,selectedShape:i}],cursor:b.cursor+1})},[i]),k=m.useCallback(b=>{n.current=[b,...n.current]},[]),f=m.useCallback((b,g,w)=>{if(b.target&&"className"in b.target&&![Bt,Zt].includes(b.target.className)){u(void 0);return}const R=n.current.find(A=>A.id===(i==null?void 0:i.id)?!!_e(i,w,e):!!Xt(g,A,w,e));u(R)},[e,i]),h=m.useCallback(async(b,g=ce,w=ce)=>{const R=await mi(b,g,w,e);return k(R),p(),R},[k,p,e]),x=m.useCallback((b,g=!1)=>{n.current=n.current.map(w=>w.id===(i==null?void 0:i.id)?b:w),s(w=>(w==null?void 0:w.id)===b.id?b:w),g&&p()},[i,p]),q=m.useCallback(b=>{const g=b.map(w=>Ln(["chosen"],w));n.current=g,p()},[p]),Q=m.useCallback(b=>{s(g=>(g==null?void 0:g.id)===b.id?void 0:g),n.current=n.current.filter(g=>g.id!==b.id),p()},[p]),E=m.useCallback(b=>{d(g=>{const w=b(g);return n.current=g.states[w].shapes,s(g.states[w].selectedShape),Y("cursor",w,g)})},[]),I=m.useCallback(()=>{E(b=>Math.max(0,b.cursor-1))},[E]),M=m.useCallback(()=>{E(b=>Math.min(b.states.length-1,b.cursor+1))},[E]),C=m.useCallback((b=[],g=!1)=>{s(void 0),n.current=b,d(w=>g?{states:[{shapes:b,selectedShape:void 0}],cursor:0}:{states:[...w.states.slice(0,w.cursor+1),{shapes:b,selectedShape:void 0}],cursor:w.cursor+1})},[]),L=m.useCallback((b,g)=>{const w=n.current,R=w.findIndex($=>$.id===b),A=w.findIndex($=>$.id===g);R<A?q([...w.slice(0,R),...w.slice(R+1,A+1),w[R],...w.slice(A+1,w.length)]):q([...w.slice(0,A),w[R],...w.slice(A,R),...w.slice(R+1,w.length)])},[q]),N=m.useCallback(b=>{const g=n.current,w=g.findIndex(A=>A.id===b.id);if(w<0)return;const R=Y("visible",b.visible===!1,b);s(A=>(A==null?void 0:A.id)===R.id?R:A),q(Y(w,R,g))},[q]),S=m.useCallback(b=>{const g=n.current,w=g.findIndex(A=>A.id===b.id);if(w<0)return;const R=Y("locked",!b.locked,b);s(A=>(A==null?void 0:A.id)===R.id?R:A),q(Y(w,R,g))},[q]),j=m.useCallback((b,g)=>{Object.hasOwn(t.current,b)&&(t.current[b]=[...t.current[b],g])},[]),H=m.useCallback((b,g)=>{if(Object.hasOwn(t.current,b))if(g){const w=t.current[b].findIndex(R=>R===g);t.current[b]=[...t.current[b].slice(0,w),...t.current[b].slice(w+1)]}else t.current[b]=[]},[]),{canvasSize:{width:P,height:D}}=e;m.useEffect(()=>{const b=Wn(n.current,P,D);for(const g of t.current.dataChanged)g(b)},[P,D,c]),m.useEffect(()=>{n.current=n.current.map(b=>Ne(b,e)),s(b=>b===void 0?void 0:n.current.find(g=>g.id===b.id))},[e]);const Z=m.useCallback((b,g)=>{a(w=>{const R=[(w==null?void 0:w[0])??[g[0],g[1]],[g[0],g[1]]],A=n.current.filter($=>Aa(b,$,R,e));return s(A==null?void 0:A[0]),R})},[e]);return{registerEvent:j,unregisterEvent:H,shapesRef:n,selectedShape:i,hoveredShape:o,selectionFrame:r,setSelectionFrame:a,refreshSelectedShapes:Z,addShape:k,addPictureShape:h,moveShapes:L,saveShapes:p,setSelectedShape:s,refreshHoveredShape:f,toggleShapeVisibility:N,toggleShapeLock:S,removeShape:Q,updateShape:x,backwardShape:I,forwardShape:M,clearShapes:C,canGoBackward:y,canGoForward:T,canClear:v}},ht=(e,n=!1)=>{const t=(a,i)=>{if(Array.isArray(a))return i},r=e.map(a=>{if(typeof a!="object")return null;switch(a.type){case"brush":return se(t,Pt,a);case"circle":return se(t,Vt,a);case"curve":return se(t,Et,a);case"ellipse":return se(t,Mt,a);case"line":return se(t,It,a);case"polygon":return se(t,At,a);case"rect":return se(t,jt,a);case"square":return se(t,Rt,a);case"text":return se(t,Nt,a)}return null});return On(n?[...r,Fn]:r)},ds=({width:e=1e3,height:n=600,shapes:t,mode:r="editor",disabled:a=!1,options:i=rt})=>{const{layersManipulation:s,brushAlgo:o,grid:u,canGrow:c,canShrink:d,withExport:y,withLoadAndSave:T,withUploadPicture:v,withUrlPicture:p,withSkeleton:k,withFrameSelection:f,clearCallback:h,availableTools:x,canvasSelectionPadding:q}={...rt,...i},Q=r!=="viewer",E=a||!Q,I=m.useRef(null),M=m.useRef(null),[C,L]=m.useState(!1),N=m.useCallback(O=>{I.current=O},[]),[S,j]=m.useState(le),[H,P]=m.useState(u),[D,Z]=m.useState({width:e,height:n,scaleRatio:1}),[b,g]=m.useState([0,0]),w=m.useMemo(()=>({brushAlgo:o,canvasSize:D,canvasOffset:b,gridGap:H,selectionPadding:q}),[q,H,o,b,D]),[R,A]=m.useState(ht(x,v||p)),{isInsideComponent:$}=ta({disabled:E,componentRef:I}),{registerEvent:Se,unregisterEvent:De,shapesRef:J,selectedShape:ge,selectionFrame:Le,hoveredShape:Pe,addShape:Ie,addPictureShape:Ae,moveShapes:oe,setSelectedShape:te,setSelectionFrame:un,refreshSelectedShapes:cn,refreshHoveredShape:dn,removeShape:Fe,updateShape:Oe,backwardShape:Be,forwardShape:ee,clearShapes:Ee,saveShapes:pn,toggleShapeVisibility:mn,toggleShapeLock:yn,canGoBackward:fn,canGoForward:ae,canClear:gn}=Ni(w),je=m.useCallback(O=>{te(void 0),j(O)},[te]),ve=m.useCallback((O=[],Re=!1)=>{Ee(O,Re),je(le),g([0,0])},[je,Ee]),Ze=m.useCallback(O=>{j(le),te(O)},[te]),vn=m.useCallback(()=>{const O=ji(J.current,e,n);if(!O)throw new Error("L'encodage a échoué");ft(O,"drawing.json")},[J,e,n]),hn=m.useCallback(()=>{const O=gt(J.current,e,n,w);if(!O)throw new Error;ft(O,"drawing.png")},[J,e,n,w]),bn=()=>M.current?gt(J.current,e,n,w):void 0,Tn=()=>Wn(J.current,e,n);m.useEffect(()=>{$||te(void 0)},[$,te]);const _=m.useCallback(async(O,Re=!0)=>{const hr=await Vi(O,w);ve(hr,Re)},[ve,w]);!C&&t!==void 0&&(L(!0),_(t));const re=m.useCallback(async O=>{const Re=await Ri(O);await _(Re.shapes??[])},[_]),ze=m.useCallback(()=>{typeof h!="string"?_(h(),!1):h==="defaultShapes"&&t!==void 0?_(t,!1):ve()},[ve,_,t,h]);m.useEffect(()=>{A(ht(x,v||p))},[x,v,p]);const ue={canvas:M,editor:I,setEditor:N};return{editorProps:{shapesRef:J,addPictureShape:Ae,moveShapes:oe,toggleShapeVisibility:mn,toggleShapeLock:yn,canGoBackward:fn,canGoForward:ae,canClear:gn,selectedShape:ge,removeShape:Fe,updateShape:Oe,backwardShape:Be,forwardShape:ee,refs:ue,width:e,height:n,canvasSize:D,selectTool:je,selectShape:Ze,activeTool:S,setActiveTool:j,setAvailableTools:A,isEditMode:Q,isDisabled:E,availableTools:R,gridGap:H,setGridGap:P,loadFile:re,exportPicture:hn,exportData:vn,clearCanvas:ze,settings:w,canvas:{canGrow:c,canShrink:d,layersManipulation:s,withExport:y,withLoadAndSave:T,withUploadPicture:v,withUrlPicture:p}},canvasProps:{shapesRef:J,selectedShape:ge,selectionFrame:Le,hoveredShape:Pe,addShape:Ie,setSelectedShape:te,setSelectionFrame:un,refreshSelectedShapes:cn,refreshHoveredShape:dn,removeShape:Fe,updateShape:Oe,backwardShape:Be,forwardShape:ee,saveShapes:pn,refs:ue,width:e,height:n,settings:w,canvasSize:D,setCanvasSize:Z,setCanvasOffset:g,selectShape:Ze,activeTool:S,setActiveTool:j,isInsideComponent:$,isEditMode:Q,isDisabled:E,canvas:{withSkeleton:k,withFrameSelection:f,canGrow:c,canShrink:d}},registerEvent:Se,unregisterEvent:De,resetCanvas:_,getCurrentImage:bn,getCurrentData:Tn}},Hi=300,_i=()=>{const e=m.useRef(void 0),n=m.useRef(void 0),t=i=>{var o;const s=new Date().getTime();e.current&&s<e.current+Hi&&((o=n.current)==null||o.call(n,i)),e.current=new Date().getTime()};return{registerDoubleClickEvent:(i,s)=>{n.current=s,i.addEventListener("click",t),i.addEventListener("touchend",t)},unRegisterDoubleClickEvent:i=>{i.removeEventListener("click",t),i.removeEventListener("touchend",t)}}},Fi=(e,n,t,r)=>{if(e.mode==="translate")return{mode:"translate",cursorStartPosition:t,originalShape:n};if(e.mode==="rotate"){const{center:a}=z(n,r),i=[a[0],a[1]];return{mode:"rotate",cursorStartPosition:t,originalShape:n,center:i}}if(e.mode==="resize")return{mode:"resize",cursorStartPosition:t,originalShape:n,anchor:e.anchor}},Oi=(e,n,t,r,a,i,s)=>{let o=!1;if(a){o=_e(a,t,r,!0,i?20:void 0);const c=Fi(o||{mode:"default"},a,t,r);if((c==null?void 0:c.mode)==="resize"||(c==null?void 0:c.mode)==="rotate")return{shape:a,mode:c}}const u=n.find(c=>c.id===(a==null?void 0:a.id)?!!o:!!Xt(e,c,t,r));return u?{shape:u,mode:{mode:"translate",cursorStartPosition:t,originalShape:u}}:{shape:void 0,mode:{mode:s?"selectionFrame":"default"}}},Bi=(e,n,t,r,a,i,s,o,u,c,d,y,T,v)=>{var f,h;const p=(f=n.current)==null?void 0:f.getContext("2d");if(!p)return;const k=En(e,n.current,T);if(t.type==="move"&&i!==void 0){c([k[0]-i[0],k[1]-i[1]]);return}if(a.mode==="selectionFrame"){y(p,k,T);return}if(Yt(e)||o(e,p,k,T),!(r===void 0||r.locked))if(a.mode==="default"||a.mode==="textedition"){const x=_e(r,k,T,!0)||{mode:"default"};s(x)}else{const x=(h=n.current)==null?void 0:h.getContext("2d");if(!x)return;const q=ba(x,r,k,a,T,v);u(q),d(q)}},Zi=({disabled:e=!1,addShape:n,drawCanvasRef:t,setActiveTool:r,refreshHoveredShape:a,shapes:i,selectionMode:s,activeTool:o,isInsideComponent:u,setCanvasOffset:c,selectedShape:d,selectionCanvasRef:y,canvasOffsetStartPosition:T,refreshSelectedShapes:v,setSelectedShape:p,setSelectionFrame:k,setCanvasOffsetStartPosition:f,updateSingleShape:h,saveShapes:x,setSelectionMode:q,settings:Q,isShiftPressed:E,withFrameSelection:I})=>{const[M,C]=m.useState({mode:"default"}),{registerDoubleClickEvent:L,unRegisterDoubleClickEvent:N}=_i();return m.useEffect(()=>{const S=j=>window.requestAnimationFrame(()=>Bi(j,y,o,d,s,T,C,a,h,c,p,v,Q,E));if(u)return document.addEventListener("mousemove",S),document.addEventListener("touchmove",S),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)}},[u,y,d,s,T,h,o,c,p,a,v,Q,E]),m.useEffect(()=>{const S=()=>{s.mode!=="textedition"&&s.mode!=="default"&&(q({mode:"default"}),k(void 0),x())};return u&&(document.addEventListener("mouseup",S),document.addEventListener("touchend",S)),()=>{u&&(document.removeEventListener("mouseup",S),document.removeEventListener("touchend",S))}},[u,s,x,k,q]),m.useEffect(()=>{const S=y.current;if(!S)return;const j=S.getContext("2d");if(!j||e)return;const H=P=>{var Z;P.preventDefault();const D=En(P,y.current,Q);if(o.type==="selection"){const{shape:b,mode:g}=Oi(j,i,D,Q,d,Yt(P),I);p(b),q(g),g.mode==="selectionFrame"&&k([[D[0],D[1]],[D[0],D[1]]])}else if(o.type==="move")f(D);else if(Ot.some(b=>b===o.type)){const b=(Z=t.current)==null?void 0:Z.getContext("2d");if(!b)return;if(o.type==="brush"){if(d&&d.type==="brush"){const g=ga(d,D,Q);h(g),p(g)}else{const g=mt(b,o,D,Q);if(!g)return;n(g),p(g)}q({mode:"brush"})}else if(o.type!=="picture"){const g=mt(b,o,D,Q);n(g),r(le),p(g),q({mode:"resize",cursorStartPosition:[D[0]+Q.selectionPadding,D[1]+Q.selectionPadding],originalShape:g,anchor:o.type==="line"||o.type==="polygon"||o.type==="curve"?0:[1,1]})}}};return S.addEventListener("mousedown",H,{passive:!1}),S.addEventListener("touchstart",H,{passive:!1}),()=>{S.removeEventListener("mousedown",H),S.removeEventListener("touchstart",H)}},[e,y,t,d,o,f,i,h,n,r,p,q,k,Q,I]),m.useEffect(()=>{const S=y.current;if(!S)return;const j=H=>{if(o.type==="selection"&&(d==null?void 0:d.type)==="text"){const P=En(H,y.current,Q);_e(d,P,Q)&&q({mode:"textedition",defaultValue:d.value})}};if(u)return L(S,j),()=>{N(S)}},[L,N,u,y,o,d,q,Q]),{hoverMode:M}},zi=(e,n,t,r)=>{const{gridGap:a,canvasOffset:i,canvasSize:{scaleRatio:s}}=r;e.strokeStyle="rgb(220,220,220)",e.lineWidth=1,e.save(),e.scale(s,s),e.beginPath();const o=-i[0]%a,u=-i[1]%a,c=Math.ceil(n/s/a),d=Math.ceil(t/s/a);for(let y=0;y<c;y++)e.moveTo(o+(y+1)*a,u),e.lineTo(o+(y+1)*a,u+t/s);for(let y=0;y<d;y++)e.moveTo(o,u+(y+1)*a),e.lineTo(o+n/s,u+(y+1)*a);e.stroke(),e.restore()},ir=({disabled:e=!1,scaleRatio:n,shape:t,defaultValue:r,updateValue:a,saveShapes:i,settings:s})=>{var y,T,v,p,k;const o=m.useRef(null),u=m.useRef(i),c=f=>{const h=Array.from(f.target.childNodes).map(x=>x.childNodes[0].nodeValue??"");a(h)};m.useEffect(()=>{if(!o.current)return;const f=o.current,h=x=>{var Q;x.preventDefault();const q=(Q=x.clipboardData)==null?void 0:Q.getData("text/plain");document.execCommand("insertText",!1,q)};f.addEventListener("paste",h),f.innerText="";for(const x of r){const q=document.createElement("div");x===""?q.innerHTML="<br/>":q.innerText=x,f.appendChild(q)}return f.focus(),()=>{f.removeEventListener("paste",h)}},[r]),m.useEffect(()=>{const f=u.current;return()=>{f()}},[]);const d=m.useMemo(()=>{const{borders:f,center:h}=z(t,s);return ne({point:[f.x,f.y],rotation:-t.rotation,origin:h})},[t,s]);return l.jsx("div",{className:"react-paint-editor-toolbox-edittextbox",ref:o,"data-fontbold":((y=t.style)==null?void 0:y.fontBold)??!1,"data-fontitalic":((T=t.style)==null?void 0:T.fontItalic)??!1,contentEditable:!e,onInput:c,style:{"--react-paint-editor-toolbox-edittextbox-transform":`translate3D(${d[0]*n}px, ${d[1]*n}px, 0) rotate(${An(t.rotation)}deg)`,"--react-paint-editor-toolbox-edittextbox-fontsize":`${t.fontSize*n}px`,"--react-paint-editor-toolbox-edittextbox-padding":`${s.selectionPadding*n}px`,"--react-paint-editor-toolbox-edittextbox-color":((v=t.style)==null?void 0:v.strokeColor)??"inherit","--react-paint-editor-toolbox-edittextbox-opacity":(((p=t.style)==null?void 0:p.opacity)??100)/100,"--react-paint-editor-toolbox-edittextbox-fontfamily":((k=t.style)==null?void 0:k.fontFamily)??He}})};ir.__docgenInfo={description:"",methods:[],displayName:"EditTextBox",props:{scaleRatio:{required:!0,tsType:{name:"number"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},shape:{required:!0,tsType:{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]},description:""},defaultValue:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},settings:{required:!0,tsType:{name:"signature",type:"object",raw:`{\r
  brushAlgo: BrushAlgo\r
  gridGap: number\r
  canvasOffset: Point\r
  canvasSize: {\r
    width: number\r
    height: number\r
    scaleRatio: number\r
  }\r
  selectionPadding: number\r
}`,signature:{properties:[{key:"brushAlgo",value:{name:"union",raw:"'simple' | 'quadratic'",elements:[{name:"literal",value:"'simple'"},{name:"literal",value:"'quadratic'"}],required:!0}},{key:"gridGap",value:{name:"number",required:!0}},{key:"canvasOffset",value:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}],required:!0}},{key:"canvasSize",value:{name:"signature",type:"object",raw:`{\r
  width: number\r
  height: number\r
  scaleRatio: number\r
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"scaleRatio",value:{name:"number",required:!0}}]},required:!0}},{key:"selectionPadding",value:{name:"number",required:!0}}]}},description:""},updateValue:{required:!0,tsType:{name:"signature",type:"function",raw:"(newValue: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"newValue"}],return:{name:"void"}}},description:""},saveShapes:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Ui=(e,n,t,r,a)=>{const{canvasSize:{width:i,height:s}}=t;e.clearRect(0,0,i,s),Wt(e),t.gridGap&&zi(e,i,s,t);for(let o=r.length-1;o>=0;o--)(n.mode!=="textedition"||r[o]!==a)&&nr(e,r[o],t)},Wi=(e,n,t,r,a,i,s,o,u,c)=>{e.clearRect(0,0,t.canvasSize.width,t.canvasSize.height),c&&o&&o.id!==(s==null?void 0:s.id)&&r.type==="selection"&&n.mode==="default"&&yt({ctx:e,shape:o,settings:t,selectionWidth:a,selectionColor:i,withAnchors:!1}),s&&r.type!=="brush"&&yt({ctx:e,shape:s,settings:t,selectionWidth:a,selectionColor:i,withAnchors:n.mode!=="textedition"}),u&&Pi({ctx:e,selectionFrame:u,settings:t})},sr=qt.forwardRef(({canGrow:e,disabled:n=!1,canvasSize:t,shapes:r,addShape:a,updateSingleShape:i,selectedShape:s,setSelectedShape:o,setSelectionFrame:u,hoveredShape:c,selectionFrame:d,refreshHoveredShape:y,refreshSelectedShapes:T,saveShapes:v,activeTool:p,setActiveTool:k,canvasOffsetStartPosition:f,setCanvasOffsetStartPosition:h,setCanvasOffset:x,isInsideComponent:q,selectionMode:Q,setSelectionMode:E,selectionWidth:I,selectionColor:M,settings:C,isEditMode:L,isShiftPressed:N,withFrameSelection:S,withSkeleton:j},H)=>{const P=m.useRef(null),D=m.useRef(null);m.useImperativeHandle(H,()=>P.current);const{hoverMode:Z}=Zi({disabled:n,addShape:a,drawCanvasRef:P,setActiveTool:k,shapes:r,selectionMode:Q,activeTool:p,isInsideComponent:q,setCanvasOffset:x,selectedShape:s,selectionCanvasRef:D,canvasOffsetStartPosition:f,setSelectedShape:o,setSelectionFrame:u,refreshHoveredShape:y,refreshSelectedShapes:T,setCanvasOffsetStartPosition:h,updateSingleShape:i,saveShapes:v,setSelectionMode:E,isShiftPressed:N,withFrameSelection:S,settings:C}),b=m.useCallback(g=>{var A;if((s==null?void 0:s.type)!=="text")return;const w=(A=P.current)==null?void 0:A.getContext("2d");if(!w)return;const R=Ne(Qi(w,s,g,C),C);i(R)},[i,s,C]);return m.useEffect(()=>{var w;const g=(w=P.current)==null?void 0:w.getContext("2d");g&&window.requestAnimationFrame(()=>Ui(g,Q,C,r,s))},[r,Q,s,C]),m.useEffect(()=>{var w;const g=(w=D.current)==null?void 0:w.getContext("2d");g&&window.requestAnimationFrame(()=>Wi(g,Q,C,p,I,M,s,c,d,j))},[c,d,Q,s,p,C,I,M,j]),l.jsx("div",{className:"react-paint-canvas-box",children:l.jsxs("div",{className:"react-paint-canvas-container","data-grow":e,children:[l.jsx("canvas",{className:Bt,ref:P,"data-grow":e,width:t.width,height:t.height}),L&&l.jsx("canvas",{className:Zt,ref:D,width:t.width,height:t.height,"data-grow":e,style:{"--react-paint-canvas-cursor":p.type!=="selection"&&p.type!=="move"||Z.mode==="resize"?"crosshair":p.type==="move"||Z.mode==="translate"?"move":Z.mode==="rotate"?"grab":"default"}}),L&&Q.mode==="textedition"&&(s==null?void 0:s.type)==="text"&&l.jsx(ir,{scaleRatio:t.scaleRatio,disabled:n,shape:s,defaultValue:Q.defaultValue,updateValue:b,saveShapes:v,settings:C})]})})});sr.__docgenInfo={description:"",methods:[],displayName:"Canvas",props:{disabled:{defaultValue:{value:"false",computed:!1},required:!1}}};const W={ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",Delete:"Delete",Backspace:"Backspace",Escape:"Escape",Shift:"Shift",z:"z",Z:"Z",y:"y",Y:"Y"},We={Copy:"copy",Paste:"paste"},Gi=({isInsideComponent:e,selectedShape:n,isEditingText:t,settings:r,setSelectedShape:a,removeShape:i,pasteShape:s,updateShape:o,backwardShape:u,forwardShape:c,setShiftPressed:d})=>{const[y,T]=m.useState(void 0);return m.useEffect(()=>{const v=h=>{n&&(t||(h.preventDefault(),T({...n})))},p=h=>{y&&(t||(h.preventDefault(),s(Ii(y,r))))},k=h=>{switch(h.key){case W.Shift:d(!1);break}},f=h=>{if(h.metaKey||h.ctrlKey){if(h.key===W.Z||h.key===W.z){h.preventDefault(),h.stopPropagation(),u();return}if(h.key===W.Y||h.key===W.y){h.preventDefault(),h.stopPropagation(),c();return}}if(h.key===W.Shift){d(!0);return}if(!n)return;if(h.key===W.Escape){a(void 0);return}if(t)return;const x={[W.ArrowLeft]:[r.gridGap?-r.gridGap:-1,0],[W.ArrowRight]:[r.gridGap?r.gridGap:1,0],[W.ArrowDown]:[0,r.gridGap?r.gridGap:1],[W.ArrowUp]:[0,r.gridGap?-r.gridGap:-1]};switch(h.key){case W.ArrowLeft:case W.ArrowRight:case W.ArrowDown:case W.ArrowUp:o(Un(x[h.key],n,[0,0],r));break;case W.Delete:case W.Backspace:i(n);break}};if(e)return document.addEventListener("keydown",f),document.addEventListener("keyup",k),document.addEventListener(We.Copy,v),document.addEventListener(We.Paste,p),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",k),document.removeEventListener(We.Copy,v),document.removeEventListener(We.Paste,p)}},[e,y,t,n,r,o,i,a,s,u,c,d]),{}},$i=({onResized:e,element:n})=>{m.useEffect(()=>{const t=n.current;if(!t)return;const r=new ResizeObserver(a=>{var u,c;const i=(c=(u=a==null?void 0:a[0])==null?void 0:u.borderBoxSize)==null?void 0:c[0],{width:s,height:o}=i?{width:i.inlineSize,height:i.blockSize}:(a==null?void 0:a[0].contentRect)??{};e(s,o)});return r.observe(t),()=>{r.unobserve(t)}},[n,e])},Yi=({options:e,className:n,style:t,canvasProps:r})=>{const{shapesRef:a,selectedShape:i,selectionFrame:s,hoveredShape:o,addShape:u,setSelectedShape:c,setSelectionFrame:d,refreshSelectedShapes:y,refreshHoveredShape:T,removeShape:v,updateShape:p,backwardShape:k,forwardShape:f,saveShapes:h,refs:x,width:q,height:Q,settings:E,canvasSize:I,setCanvasSize:M,setCanvasOffset:C,selectShape:L,activeTool:N,setActiveTool:S,isInsideComponent:j,isEditMode:H,isDisabled:P,canvas:{withSkeleton:D,withFrameSelection:Z,canGrow:b,canShrink:g}}=r,{canvasBackgroundColor:w,canvasSelectionColor:R,canvasSelectionWidth:A}={...na,...e},$=m.useRef(null),[Se,De]=m.useState(void 0),[J,ge]=m.useState({mode:"default"}),[Le,Pe]=m.useState(!1),Ie=m.useCallback(oe=>{u(oe),L(oe)},[u,L]),Ae=m.useCallback(oe=>{const te=oe/q;M({width:oe,height:Q*te,scaleRatio:te})},[q,Q,M]);return Gi({isInsideComponent:j,isEditingText:J.mode==="textedition",settings:E,selectedShape:i,setSelectedShape:c,removeShape:v,pasteShape:Ie,updateShape:p,backwardShape:k,forwardShape:f,setShiftPressed:Pe}),$i({element:$,onResized:Ae}),l.jsx("div",{ref:$,className:`react-paint-app-row${n?` ${n}`:""}`,"data-grow":b,"data-shrink":g,style:{"--react-paint-app-row-width":I.width,"--react-paint-app-canvaswidth":`${q}px`,"--react-paint-app-row-aspectratio":`calc(${I.width} / ${I.height})`,"--react-paint-app-canvas-bg":w,...t},children:l.jsx(sr,{ref:x.canvas,canGrow:b,disabled:P,isInsideComponent:j,activeTool:N,setActiveTool:S,canvasOffsetStartPosition:Se,setCanvasOffsetStartPosition:De,shapes:a.current,addShape:u,updateSingleShape:p,selectedShape:i,selectionFrame:s,setSelectedShape:c,setSelectionFrame:d,hoveredShape:o,refreshHoveredShape:T,refreshSelectedShapes:y,settings:E,setCanvasOffset:C,saveShapes:h,canvasSize:I,selectionMode:J,setSelectionMode:ge,selectionColor:R,selectionWidth:A,isEditMode:H,isShiftPressed:Le,withFrameSelection:Z,withSkeleton:D})})};Yi.__docgenInfo={description:"",methods:[],displayName:"App",props:{canvasProps:{required:!0,tsType:{name:"ReturnType['canvasProps']",raw:"UseReactPaintReturnType['canvasProps']"},description:""},className:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},options:{required:!1,tsType:{name:"signature",type:"object",raw:`{\r
  canvasBackgroundColor?: string\r
  canvasSelectionColor?: string\r
  canvasSelectionWidth?: number\r
}`,signature:{properties:[{key:"canvasBackgroundColor",value:{name:"string",required:!1}},{key:"canvasSelectionColor",value:{name:"string",required:!1}},{key:"canvasSelectionWidth",value:{name:"number",required:!1}}]}},description:""}}};const bt=300,or=({isLoading:e=!1})=>{const[n,t]=m.useState("hidden");return m.useEffect(()=>{if(e)t("visible");else{t("fadeOut");const r=setTimeout(()=>t("hidden"),bt);return()=>{clearTimeout(r)}}},[e]),n==="hidden"?null:l.jsx("div",{className:"react-paint-editor-loading","data-loading":n,style:{"--react-paint-editor-loading-zindex":Je.LOADING,"--react-paint-editor-loading-transition-duration":`${bt}ms`},children:l.jsxs("div",{className:"react-paint-editor-loader",children:[l.jsx("div",{}),l.jsx("div",{}),l.jsx("div",{}),l.jsx("div",{})]})})};or.__docgenInfo={description:"",methods:[],displayName:"Loading",props:{isLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const Tt={type:"infos",duration:4e3},kt=500,wt=100,Xi=({type:e,text:n,duration:t})=>{const[r,a]=m.useState(!1);return m.useEffect(()=>{const i=setTimeout(()=>{a(!0)},wt),s=setTimeout(()=>{a(!1)},t-kt-wt);return()=>{clearTimeout(i),clearTimeout(s)}},[t]),l.jsx("div",{className:"react-paint-editor-snackbar","data-is-shown":+r,"data-type":e,style:{"--react-paint-editor-panel-transition-duration":`${kt}ms`},children:n})},lr=({snackbarList:e})=>l.jsx("div",{className:"react-paint-editor-snackbar-container",style:{"--react-paint-editor-snackbar-zindex":Je.SNACKBAR},children:e.map(n=>l.jsx(Xi,{...n},n.id))});lr.__docgenInfo={description:"",methods:[],displayName:"SnackbarContainer",props:{snackbarList:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  type: SnackbarTypeType\r
  text: string\r
  duration: number\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'infos' | 'error' | 'success'",elements:[{name:"literal",value:"'infos'"},{name:"literal",value:"'error'"},{name:"literal",value:"'success'"}],required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"duration",value:{name:"number",required:!0}}]}}],raw:"SnackBarType[]"},description:""}}};const Ki=({disabled:e=!1,ref:n,shape:t,layoutDragging:r,setLayoutDragging:a,handleSelect:i,onMoveShapes:s})=>{const[o,u]=m.useState(!1);return m.useEffect(()=>{r||u(!1)},[r]),m.useEffect(()=>{const c=n.current;if(!c)return;const d=()=>{a(void 0)},y=f=>(f.preventDefault&&f.preventDefault(),!1),T=f=>{i(t),f.dataTransfer&&(f.dataTransfer.effectAllowed="move",f.dataTransfer.setData("draggableShapeId",t.id),a(t.id))},v=()=>{r!==t.id&&u(!0)},p=()=>{u(!1)},k=f=>(f.stopPropagation(),f.dataTransfer&&s(f.dataTransfer.getData("draggableShapeId"),t.id),!1);return e||(c.addEventListener("dragstart",T),c.addEventListener("dragend",d),c.addEventListener("dragover",y),c.addEventListener("dragenter",v),c.addEventListener("dragleave",p),c.addEventListener("drop",k)),()=>{e||(c.removeEventListener("dragstart",T),c.removeEventListener("dragend",d),c.removeEventListener("dragover",y),c.removeEventListener("dragenter",v),c.removeEventListener("dragleave",p),c.removeEventListener("drop",k))}},[e,n,t,a,i,s,r]),{isOver:o}},F=qt.forwardRef((e,n)=>{if(e.type==="file"||e.type==="color"){const{hidden:d=!1,disabled:y=!1,selected:T=!1,icon:v,children:p,className:k="",title:f,onClick:h,...x}=e;return l.jsxs("label",{className:`react-paint-editor-button ${k}`,title:f,onClick:h,"data-disabled":+y,"data-selected":+T,"data-hidden":+d,children:[l.jsx("input",{ref:n,disabled:y,...x}),l.jsxs("span",{className:"react-paint-editor-button-content",children:[p&&l.jsx("span",{className:"react-paint-editor-button-children",children:p}),v&&l.jsx("span",{className:"react-paint-editor-button-icon",dangerouslySetInnerHTML:{__html:v}})]})]})}const{hidden:t=!1,disabled:r=!1,selected:a=!1,icon:i,children:s,type:o="button",className:u="",...c}=e;return l.jsx("button",{className:`react-paint-editor-button ${u}`,ref:n,disabled:r,"data-disabled":+r,"data-selected":+a,"data-hidden":+t,type:o,...c,children:l.jsxs("span",{className:"react-paint-editor-button-content",children:[s&&l.jsx("span",{className:"react-paint-editor-button-children",children:s}),i&&l.jsx("span",{className:"react-paint-editor-button-icon",dangerouslySetInnerHTML:{__html:i}})]})})});F.__docgenInfo={description:"",methods:[],displayName:"Button"};const fe=({children:e,title:n="",className:t="",position:r="bottom",fitContainer:a=!1,alignment:i="center"})=>l.jsxs("div",{className:`react-paint-editor-panel ${t}`,"data-fitcontainer":a,"data-position":r,"data-alignment":i,style:{"--react-paint-editor-panel-zindex":Je.PANEL},children:[n&&l.jsx("h3",{className:"react-paint-editor-panel-title",children:n}),e]});fe.__docgenInfo={description:"",methods:[],displayName:"Panel",props:{vertical:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},fitContainer:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},position:{required:!1,tsType:{name:"union",raw:"'bottom' | 'top'",elements:[{name:"literal",value:"'bottom'"},{name:"literal",value:"'top'"}]},description:"",defaultValue:{value:"'bottom'",computed:!1}},alignment:{required:!1,tsType:{name:"union",raw:"'left' | 'right' | 'center'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"},{name:"literal",value:"'center'"}]},description:"",defaultValue:{value:"'center'",computed:!1}}}};const Ji=e=>{switch(e){case"brush":return Qt;case"line":return Dt;case"polygon":return Hn;case"curve":return Lt;case"rect":return $e;case"square":return $e;case"circle":return Ye;case"ellipse":return Ye;case"text":return St;case"picture":return _n;case"triangle":return""}},es=({disabled:e=!1,shape:n,selected:t,layoutDragging:r,toggleShapeVisibility:a,toggleShapeLock:i,setLayoutDragging:s,handleRemove:o,handleSelect:u,onMoveShapes:c})=>{const d=m.useRef(null),y=f=>{e||(f.preventDefault(),f.stopPropagation(),o(n))},T=f=>{e||(f.preventDefault(),f.stopPropagation(),u(n))},v=f=>{e||(f.preventDefault(),f.stopPropagation(),a(n))},p=f=>{e||(f.preventDefault(),f.stopPropagation(),i(n))},{isOver:k}=Ki({disabled:e,ref:d,shape:n,layoutDragging:r,setLayoutDragging:s,handleSelect:u,onMoveShapes:c});return l.jsxs("div",{className:"react-paint-editor-layout","data-disabled":+e,draggable:!e,"data-is-dragging":+(r===n.id),"data-is-over":+k,onClick:T,"data-selected":+t,ref:d,children:[l.jsx("span",{dangerouslySetInnerHTML:{__html:Ji(n.type)}}),l.jsx("span",{children:n.id}),l.jsx("div",{className:"react-paint-editor-layouts-separator"}),l.jsx(F,{className:"react-paint-editor-layouts-visible-button",title:n.visible?"Hide":"Show","data-visible":n.visible!==!1,disabled:e,selected:t,onClick:v,icon:n.visible===!1?Pr:Lr}),l.jsx(F,{className:"react-paint-editor-layouts-locked-button",title:n.locked?"Locked":"Unlocked","data-locked":!!n.locked,disabled:e,selected:t,onClick:p,icon:n.locked?Er:jr}),l.jsx(F,{className:"react-paint-editor-layouts-remove-button",title:"Remove",disabled:e,onClick:y,icon:Ct})]})},ur=({gridFormat:e,setGridFormat:n,disabled:t=!1,shapes:r,removeShape:a,toggleShapeVisibility:i,toggleShapeLock:s,selectedShape:o,moveShapes:u,selectShape:c,isLayoutPanelShown:d})=>{const[y,T]=m.useState(void 0);return d?l.jsx(fe,{alignment:"right",className:"react-paint-editor-layouts-panel",children:l.jsx("div",{className:"react-paint-editor-layouts-panel-content",children:l.jsxs("div",{className:"react-paint-editor-layouts-scrolling-content",children:[l.jsxs("div",{className:"react-paint-editor-layouts-row",children:[l.jsx("span",{className:"react-paint-editor-layouts-subtitle",children:"Grid"}),l.jsx(F,{icon:Rr,className:"react-paint-editor-layouts-grid-button",selected:e==="none",disabled:t,onClick:()=>n("none")}),["small","medium","large"].map(v=>l.jsx(F,{className:"react-paint-editor-layouts-grid-button",selected:e===v,disabled:t,onClick:()=>n(v),children:v.charAt(0).toUpperCase()},v))]}),l.jsx("hr",{}),l.jsx("div",{className:"react-paint-editor-layouts",children:r.length===0?l.jsx("div",{className:"react-paint-editor-layouts-placeholder",children:"No layer yet"}):r.map(v=>l.jsx(es,{shape:v,disabled:t,layoutDragging:y,setLayoutDragging:T,selected:(o==null?void 0:o.id)===v.id,handleSelect:c,handleRemove:a,onMoveShapes:u,toggleShapeVisibility:i,toggleShapeLock:s},v.id))})]})})}):null};ur.__docgenInfo={description:"",methods:[],displayName:"Layouts",props:{gridFormat:{required:!0,tsType:{name:"union",raw:"keyof typeof GridValues",elements:[{name:"literal",value:"none"},{name:"literal",value:"small"},{name:"literal",value:"medium"},{name:"literal",value:"large"}]},description:""},setGridFormat:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: GridLabelType) => void",signature:{arguments:[{type:{name:"union",raw:"keyof typeof GridValues",elements:[{name:"literal",value:"none"},{name:"literal",value:"small"},{name:"literal",value:"medium"},{name:"literal",value:"large"}]},name:"value"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},shapes:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:`{\r
  id: string\r
  toolId?: string\r
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  toolId?: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]}],raw:"ShapeEntity[]"},description:""},removeShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{\r
  id: string\r
  toolId?: string\r
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  toolId?: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""},toggleShapeVisibility:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{\r
  id: string\r
  toolId?: string\r
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  toolId?: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""},toggleShapeLock:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{\r
  id: string\r
  toolId?: string\r
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  toolId?: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""},selectedShape:{required:!0,tsType:{name:"union",raw:"ShapeEntity | undefined",elements:[{name:"intersection",raw:`{\r
  id: string\r
  toolId?: string\r
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  toolId?: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},{name:"undefined"}]},description:""},selectShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{\r
  id: string\r
  toolId?: string\r
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  toolId?: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""},moveShapes:{required:!0,tsType:{name:"signature",type:"function",raw:"(firstShapeId: string, lastShapeId: string) => void",signature:{arguments:[{type:{name:"string"},name:"firstShapeId"},{type:{name:"string"},name:"lastShapeId"}],return:{name:"void"}}},description:""},isLayoutPanelShown:{required:!0,tsType:{name:"boolean"},description:""}}};const on=({children:e,onClose:n,position:t="center",className:r=""})=>l.jsxs("div",{className:"react-paint-editor-modal","data-position":t,style:{"--react-paint-editor-modal-zindex":Je.PANEL},children:[l.jsx("div",{className:"react-paint-editor-modal-mask",onClick:n}),l.jsx("div",{className:`react-paint-editor-modal-panel ${r}`,children:e})]});on.__docgenInfo={description:"",methods:[],displayName:"Modal",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},position:{required:!1,tsType:{name:"union",raw:"'center' | 'bottom'",elements:[{name:"literal",value:"'center'"},{name:"literal",value:"'bottom'"}]},description:"",defaultValue:{value:"'center'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}}}};const Ve=({selectedSettings:e,setSelectedSettings:n,title:t="Choisissez une couleur",mode:r="fill",disabled:a=!1,values:i,field:s,value:o="",valueChanged:u})=>{const[c]=m.useState(G("settings_")),d=p=>{const k=+p.target.value;u(s,Number.isNaN(k)?p.target.value:k)},y=p=>{u(s,p)},T=()=>{n(p=>p===c?void 0:c)},v=e===c;return i.length?l.jsxs(l.Fragment,{children:[l.jsx(F,{selected:v,title:t,disabled:a,onClick:T,icon:o==="transparent"?r==="fill"?Jn:Kn:void 0,children:o!=="transparent"&&l.jsx("div",{className:"react-paint-editor-colorfield-color","data-mode":r,style:{"--react-paint-editor-colorfield-color-value":o}})}),v&&l.jsx(fe,{title:t,alignment:"left",children:l.jsxs("div",{className:"react-paint-editor-colorfield-wrapper",children:[i.map((p,k)=>l.jsx(F,{title:p,selected:p===o,color:p,icon:p==="transparent"?r==="fill"?Jn:Kn:void 0,onClick:()=>y(p),children:p!=="transparent"&&l.jsx("div",{className:"react-paint-editor-colorfield-color",color:p,"data-mode":r,style:{"--react-paint-editor-colorfield-color-value":p}})},p)),l.jsx(F,{type:"color",title:"Custom color",selected:!i.includes(o),value:o,onChange:d,children:l.jsx("div",{className:"react-paint-editor-colorfield-customcolor",style:{"--react-paint-editor-colorfield-color-value":i.includes(o)?"var(--react-paint-editor-app-font-color)":o},children:l.jsx("span",{dangerouslySetInnerHTML:{__html:Ir}})})})]})})]}):null};Ve.__docgenInfo={description:"",methods:[],displayName:"ColorField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Choisissez une couleur'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},field:{required:!0,tsType:{name:"string"},description:""},mode:{required:!1,tsType:{name:"union",raw:"'fill' | 'stroke'",elements:[{name:"literal",value:"'fill'"},{name:"literal",value:"'stroke'"}]},description:"",defaultValue:{value:"'fill'",computed:!1}},value:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"''",computed:!1}},values:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const cr=({disabled:e=!1,selectedShape:n,removeShape:t})=>{const r=()=>{t(n)};return l.jsx(F,{title:"Delete",disabled:e,"data-disabled":+e,onClick:r,icon:Ct})};cr.__docgenInfo={description:"",methods:[],displayName:"DeleteButton",props:{disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},selectedShape:{required:!0,tsType:{name:"intersection",raw:`{\r
  id: string\r
  toolId?: string\r
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  toolId?: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},description:""},removeShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{\r
  id: string\r
  toolId?: string\r
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  toolId?: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""}}};const ln=({CustomOption:e,selectedSettings:n,setSelectedSettings:t,title:r="Choisissez l'option",disabled:a=!1,field:i,icon:s,values:o,defaultValue:u,valueChanged:c})=>{const[d]=m.useState(G("settings_")),y=p=>{c(i,p)},T=()=>{t(p=>p===d?void 0:d)},v=n===d;return o.length?l.jsxs(l.Fragment,{children:[l.jsx(F,{selected:v,title:r,icon:s,disabled:a,onClick:T}),v&&l.jsx(fe,{title:r,alignment:"left",fitContainer:!0,children:l.jsx("div",{className:"react-paint-editor-selectfield-wrapper",children:o.map(p=>l.jsx(F,{title:`${p}`,onClick:()=>y(p),selected:u===p,style:{"--react-paint-editor-button-padding":"16px"},children:l.jsx(e,{children:p})},p))})})]}):null};ln.__docgenInfo={description:"",methods:[],displayName:"SelectField",props:{CustomOption:{required:!0,tsType:{name:"ReactFC",raw:`React.FC<{\r
  children?: React.ReactNode\r
}>`,elements:[{name:"signature",type:"object",raw:`{\r
  children?: React.ReactNode\r
}`,signature:{properties:[{key:"children",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}}]}}]},description:""},selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:`"Choisissez l'option"`,computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},icon:{required:!0,tsType:{name:"string"},description:""},field:{required:!0,tsType:{name:"string"},description:""},values:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(string | number)[]"},description:""},defaultValue:{required:!1,tsType:{name:"union",raw:"number | string | undefined",elements:[{name:"number"},{name:"string"},{name:"undefined"}]},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const ns=({children:e})=>l.jsx("span",{className:"react-paint-editor-fontfamily-option",style:{"--react-paint-editor-fontfamily-family":e},children:e}),jn=({selectedSettings:e,setSelectedSettings:n,disabled:t=!1,values:r,defaultValue:a,valueChanged:i})=>r.length?l.jsx(ln,{selectedSettings:e,setSelectedSettings:n,CustomOption:ns,title:"Police",icon:Mr,disabled:t,field:"fontFamily",values:r,defaultValue:a,valueChanged:i}):null;jn.__docgenInfo={description:"",methods:[],displayName:"FontFamilyField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},values:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},defaultValue:{required:!1,tsType:{name:"union",raw:"number | string | undefined",elements:[{name:"number"},{name:"string"},{name:"undefined"}]},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const dr=({disabled:e,toggleLayoutPanel:n})=>l.jsx(F,{title:"Toggle layers panel",disabled:e,onClick:n,icon:wr,className:"react-paint-editor-layout-button"});dr.__docgenInfo={description:"",methods:[],displayName:"LayoutButton",props:{disabled:{required:!0,tsType:{name:"boolean"},description:""},toggleLayoutPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ts=({children:e})=>l.jsxs("span",{className:"react-paint-editor-linearrow-option","data-type":e,children:[l.jsx("span",{className:"react-paint-editor-linearrow-left"}),l.jsx("span",{className:"react-paint-editor-linearrow-right"})]}),Rn=({selectedSettings:e,setSelectedSettings:n,disabled:t=!1,values:r,defaultValue:a,valueChanged:i})=>r.length?l.jsx(ln,{selectedSettings:e,setSelectedSettings:n,CustomOption:ts,title:"Flèches",icon:Nr,disabled:t,field:"lineArrow",values:r,defaultValue:a,valueChanged:i}):null;Rn.__docgenInfo={description:"",methods:[],displayName:"LineArrowField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},values:{required:!0,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:""},defaultValue:{required:!1,tsType:{name:"union",raw:"number | string | undefined",elements:[{name:"number"},{name:"string"},{name:"undefined"}]},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const pr=({children:e})=>l.jsxs("span",{className:"react-paint-editor-linetype-option","data-type":e,children:[l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{})]}),Vn=({selectedSettings:e,setSelectedSettings:n,disabled:t=!1,values:r,defaultValue:a,valueChanged:i})=>r.length?l.jsx(ln,{selectedSettings:e,setSelectedSettings:n,CustomOption:pr,icon:Vr,title:"Type de traits",disabled:t,field:"lineDash",values:r,defaultValue:a,valueChanged:i}):null;pr.__docgenInfo={description:"",methods:[],displayName:"LineTypeOption",props:{children:{required:!0,tsType:{name:"string"},description:""}}};Vn.__docgenInfo={description:"",methods:[],displayName:"LineTypeField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},values:{required:!0,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:""},defaultValue:{required:!1,tsType:{name:"union",raw:"number | string | undefined",elements:[{name:"number"},{name:"string"},{name:"undefined"}]},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const he=({selectedSettings:e,setSelectedSettings:n,title:t="Choisissez l'intervalle",icon:r,disabled:a=!1,field:i,value:s=1,min:o=1,max:u=20,step:c=1,unity:d="",valueChanged:y})=>{const T=Math.round(s),[v]=m.useState(G("settings_")),p=m.useRef(null),k=x=>{const q=+x.target.value;y(i,Number.isNaN(q)?x.target.value:q,!1),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{y(i,Number.isNaN(q)?x.target.value:q,!0)},1e3)},f=()=>{n(x=>x===v?void 0:v)};m.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const h=e===v;return o===u?null:l.jsxs(l.Fragment,{children:[l.jsx(F,{selected:h,title:t,disabled:a,icon:r,onClick:f}),h&&l.jsx(fe,{title:t,alignment:"left",fitContainer:!0,children:l.jsx("div",{children:l.jsxs("label",{className:"react-paint-editor-rangefield",children:[l.jsx("input",{type:"range",min:o,max:u,step:c,value:s,onChange:k}),l.jsxs("span",{children:[T,d]})]})})})]})};he.__docgenInfo={description:"",methods:[],displayName:"RangeField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:`"Choisissez l'intervalle"`,computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},field:{required:!0,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"string"},description:""},min:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},max:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"20",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},unity:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},value:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:"",defaultValue:{value:"1",computed:!1}},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number, needHistorySave?: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"},{type:{name:"boolean"},name:"needHistorySave"}],return:{name:"void"}}},description:""}}};const Mn=({selectedSettings:e,setSelectedSettings:n,disabled:t=!1,min:r,max:a,step:i,value:s,valueChanged:o})=>r===a?null:l.jsx(he,{selectedSettings:e,setSelectedSettings:n,icon:Hn,title:"Nombre de points",disabled:t,field:"pointsCount",min:r,max:a,step:i,unity:"",value:s,valueChanged:o});Mn.__docgenInfo={description:"",methods:[],displayName:"PointsNumberField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},min:{required:!0,tsType:{name:"number"},description:""},max:{required:!0,tsType:{name:"number"},description:""},step:{required:!0,tsType:{name:"number"},description:""},value:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const Me=({setSelectedSettings:e,disabled:n=!1,field:t,icon:r,values:a,value:i=!1,valueChanged:s})=>{const[o]=m.useState(G("settings_")),u=()=>{e(c=>c===o?void 0:o),s(t,!i)};return a.length!==2?null:l.jsx(F,{onClick:u,selected:i,disabled:n,icon:r})};Me.__docgenInfo={description:"",methods:[],displayName:"ToggleField",props:{setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},field:{required:!0,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"string"},description:""},values:{required:!0,tsType:{name:"Array",elements:[{name:"boolean"}],raw:"boolean[]"},description:""},value:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"boolean"},name:"value"}],return:{name:"void"}}},description:""}}};const rs=40,Sn=({activeTool:e,selectedShape:n,selectedShapeTool:t,disabled:r,selectedSettings:a,setSelectedSettings:i,handleShapeStyleChange:s,handlePolygonLinesCount:o,handleShapeFontFamilyChange:u})=>{var c,d,y,T,v,p,k,f,h,x;return n?l.jsx(l.Fragment,{children:t&&l.jsxs(l.Fragment,{children:["strokeColor"in t.settings&&l.jsx(Ve,{selectedSettings:a,setSelectedSettings:i,title:"Couleur du trait",mode:"stroke",disabled:r,field:"strokeColor",value:(c=n.style)==null?void 0:c.strokeColor,valueChanged:s,values:t.settings.strokeColor.values}),"fillColor"in t.settings&&l.jsx(Ve,{selectedSettings:a,setSelectedSettings:i,title:"Couleur de fond",disabled:r,field:"fillColor",value:(d=n.style)==null?void 0:d.fillColor,valueChanged:s,values:t.settings.fillColor.values}),"lineWidth"in t.settings&&l.jsx(he,{selectedSettings:a,setSelectedSettings:i,title:"Epaisseur du trait",icon:Xn,disabled:r,field:"lineWidth",value:(y=n.style)==null?void 0:y.lineWidth,valueChanged:s,unity:"px",min:t.settings.lineWidth.min,max:t.settings.lineWidth.max,step:t.settings.lineWidth.step}),"lineDash"in t.settings&&l.jsx(Vn,{selectedSettings:a,setSelectedSettings:i,disabled:r,defaultValue:(T=n.style)==null?void 0:T.lineDash,valueChanged:s,values:t.settings.lineDash.values}),"lineArrow"in t.settings&&l.jsx(Rn,{selectedSettings:a,setSelectedSettings:i,disabled:r,defaultValue:(v=n.style)==null?void 0:v.lineArrow,valueChanged:s,values:t.settings.lineArrow.values}),"pointsCount"in t.settings&&l.jsx(Mn,{selectedSettings:a,setSelectedSettings:i,disabled:r,valueChanged:o,min:t.settings.pointsCount.min,max:t.settings.pointsCount.max,step:t.settings.pointsCount.step,value:(p=n.style)==null?void 0:p.pointsCount}),"fontFamily"in t.settings&&l.jsx(jn,{selectedSettings:a,setSelectedSettings:i,disabled:r,valueChanged:u,values:t.settings.fontFamily.values,defaultValue:(k=n.style)==null?void 0:k.fontFamily}),"fontBold"in t.settings&&l.jsx(Me,{setSelectedSettings:i,disabled:r,field:"fontBold",icon:$n,valueChanged:u,values:t.settings.fontBold.values,value:(f=n.style)==null?void 0:f.fontBold}),"fontItalic"in t.settings&&l.jsx(Me,{setSelectedSettings:i,disabled:r,field:"fontItalic",icon:Yn,valueChanged:u,values:t.settings.fontItalic.values,value:(h=n.style)==null?void 0:h.fontItalic}),"opacity"in t.settings&&l.jsx(he,{selectedSettings:a,setSelectedSettings:i,title:"Opacité",icon:Gn,min:t.settings.opacity.min,max:t.settings.opacity.max,step:t.settings.opacity.step,unity:"%",disabled:r,field:"opacity",value:((x=n.style)==null?void 0:x.opacity)??100,valueChanged:s})]})}):"settings"in e?l.jsxs(l.Fragment,{children:["strokeColor"in e.settings&&l.jsx(Ve,{selectedSettings:a,setSelectedSettings:i,title:"Couleur du trait",mode:"stroke",disabled:r,field:"strokeColor",value:e.settings.strokeColor.default,valueChanged:s,values:e.settings.strokeColor.values}),"fillColor"in e.settings&&l.jsx(Ve,{selectedSettings:a,setSelectedSettings:i,title:"Couleur de fond",disabled:r,field:"fillColor",value:e.settings.fillColor.default,valueChanged:s,values:e.settings.fillColor.values}),"lineWidth"in e.settings&&l.jsx(he,{selectedSettings:a,setSelectedSettings:i,title:"Epaisseur du trait",disabled:r,field:"lineWidth",icon:Xn,value:e.settings.lineWidth.default,valueChanged:s,unity:"px",min:e.settings.lineWidth.min,max:e.settings.lineWidth.max,step:e.settings.lineWidth.step}),"lineDash"in e.settings&&l.jsx(Vn,{selectedSettings:a,setSelectedSettings:i,disabled:r,defaultValue:e.settings.lineDash.default,valueChanged:s,values:e.settings.lineDash.values}),"lineArrow"in e.settings&&l.jsx(Rn,{selectedSettings:a,setSelectedSettings:i,disabled:r,defaultValue:e.settings.lineArrow.default,valueChanged:s,values:e.settings.lineArrow.values}),"pointsCount"in e.settings&&l.jsx(Mn,{selectedSettings:a,setSelectedSettings:i,disabled:r,valueChanged:o,min:e.settings.pointsCount.min,max:e.settings.pointsCount.max,step:e.settings.pointsCount.step,value:e.settings.pointsCount.default}),"fontFamily"in e.settings&&l.jsx(jn,{selectedSettings:a,setSelectedSettings:i,disabled:r,valueChanged:u,values:e.settings.fontFamily.values,defaultValue:e.settings.fontFamily.default}),"fontBold"in e.settings&&l.jsx(Me,{setSelectedSettings:i,disabled:r,field:"fontBold",icon:$n,valueChanged:u,values:e.settings.fontBold.values,value:e.settings.fontBold.default}),"fontItalic"in e.settings&&l.jsx(Me,{setSelectedSettings:i,disabled:r,field:"fontItalic",icon:Yn,valueChanged:u,values:e.settings.fontItalic.values,value:e.settings.fontItalic.default}),"opacity"in e.settings&&l.jsx(he,{selectedSettings:a,setSelectedSettings:i,title:"Opacité",icon:Gn,min:e.settings.opacity.min,max:e.settings.opacity.max,step:e.settings.opacity.step,unity:"%",disabled:r,field:"opacity",value:e.settings.opacity.default,valueChanged:s})]}):null},mr=({width:e,disabled:n=!1,availableTools:t,updateToolSettings:r,layersManipulation:a,toggleLayoutPanel:i,activeTool:s,selectedShape:o,canvas:u,settings:c,updateShape:d,removeShape:y})=>{const[T,v]=m.useState(void 0),[p,k]=m.useState(!1),f=()=>{k(C=>!C)},h=o?t.find(C=>C.id===o.toolId)||t.find(C=>C.type===o.type):void 0,x=(h?Object.keys(h.settings).length+1:"settings"in s?Object.keys(s.settings).length:0)+(a?1:0),q=x*rs,Q=e<q,E=(C,L,N=!0)=>{o?(d(Ne(Y(["style",C],L,o),c),N),h&&r(h.id,C,L)):r(s.id,C,L)},I=(C,L)=>{var N,S,j;if(o){if(o.type!=="text")return;const H=u==null?void 0:u.getContext("2d");if(!H)return;const P=Y(["style",C],L,o),D=zn(H,P.value,P.width,((N=P.style)==null?void 0:N.fontBold)??!1,((S=P.style)==null?void 0:S.fontItalic)??!1,(j=P.style)==null?void 0:j.fontFamily),Z=Ne({...P,fontSize:D,height:D*P.value.length},c);d(Z,!0),h&&r(h.id,C,L)}else r(s.id,C,L)},M=(C,L)=>{if(o){if(o.type!=="polygon"&&o.type!=="curve")return;d(o.type==="polygon"?Na(o,L,c):za(o,L,c),!0),h&&r(h.id,C,L)}else r(s.id,C,L)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"react-paint-editor-settings-bar",children:[l.jsxs("div",{className:"react-paint-editor-settings-shrinkable",children:[Q&&x>2&&l.jsx(F,{disabled:n,onClick:f,title:"Toggle settings",icon:Hr}),o?l.jsx(l.Fragment,{children:h&&l.jsxs(l.Fragment,{children:[!Q&&l.jsx(Sn,{activeTool:s,selectedShape:o,selectedShapeTool:h,disabled:n,selectedSettings:T,setSelectedSettings:v,handleShapeStyleChange:E,handlePolygonLinesCount:M,handleShapeFontFamilyChange:I}),l.jsx(cr,{disabled:n,selectedShape:o,removeShape:y})]})}):!Q&&l.jsx(Sn,{activeTool:s,selectedShape:o,selectedShapeTool:h,disabled:n,selectedSettings:T,setSelectedSettings:v,handleShapeStyleChange:E,handlePolygonLinesCount:M,handleShapeFontFamilyChange:I})]}),l.jsx("div",{className:"react-paint-editor-settings-separator"}),a&&l.jsx(dr,{disabled:n,toggleLayoutPanel:i})]}),p&&l.jsx(on,{className:"react-paint-editor-settings-modal",onClose:f,position:"bottom",children:l.jsx(Sn,{activeTool:s,selectedShape:o,selectedShapeTool:h,disabled:n,selectedSettings:T,setSelectedSettings:v,handleShapeStyleChange:E,handlePolygonLinesCount:M,handleShapeFontFamilyChange:I})})]})};mr.__docgenInfo={description:"",methods:[],displayName:"SettingsBar",props:{width:{required:!0,tsType:{name:"number"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},availableTools:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]}],raw:"CustomTool[]"},description:""},updateToolSettings:{required:!0,tsType:{name:"signature",type:"function",raw:"(toolId: string, field: string, value: string | number | boolean) => void",signature:{arguments:[{type:{name:"string"},name:"toolId"},{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}]},name:"value"}],return:{name:"void"}}},description:""},layersManipulation:{required:!1,tsType:{name:"boolean"},description:""},activeTool:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{\r
  id: string\r
  type: ActionsType\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},selectedShape:{required:!0,tsType:{name:"union",raw:"ShapeEntity | undefined",elements:[{name:"intersection",raw:`{\r
  id: string\r
  toolId?: string\r
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  toolId?: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},{name:"undefined"}]},description:""},canvas:{required:!0,tsType:{name:"union",raw:"HTMLCanvasElement | null",elements:[{name:"HTMLCanvasElement"},{name:"null"}]},description:""},settings:{required:!0,tsType:{name:"signature",type:"object",raw:`{\r
  brushAlgo: BrushAlgo\r
  gridGap: number\r
  canvasOffset: Point\r
  canvasSize: {\r
    width: number\r
    height: number\r
    scaleRatio: number\r
  }\r
  selectionPadding: number\r
}`,signature:{properties:[{key:"brushAlgo",value:{name:"union",raw:"'simple' | 'quadratic'",elements:[{name:"literal",value:"'simple'"},{name:"literal",value:"'quadratic'"}],required:!0}},{key:"gridGap",value:{name:"number",required:!0}},{key:"canvasOffset",value:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}],required:!0}},{key:"canvasSize",value:{name:"signature",type:"object",raw:`{\r
  width: number\r
  height: number\r
  scaleRatio: number\r
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"scaleRatio",value:{name:"number",required:!0}}]},required:!0}},{key:"selectionPadding",value:{name:"number",required:!0}}]}},description:""},updateShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity, withSave?: boolean) => void",signature:{arguments:[{type:{name:"intersection",raw:`{\r
  id: string\r
  toolId?: string\r
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  toolId?: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"},{type:{name:"boolean"},name:"withSave"}],return:{name:"void"}}},description:""},removeShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{\r
  id: string\r
  toolId?: string\r
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  toolId?: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
} & (T extends 'line'\r
  ? Line & {\r
      type: 'line'\r
      selection?: SelectionLinesType\r
      path?: Path2D\r
      arrows?: DrawableShape<'triangle'>[]\r
    }\r
  : T extends 'picture'\r
    ? Picture & {\r
        type: 'picture'\r
        img: HTMLImageElement\r
        selection?: SelectionDefaultType\r
      }\r
    : T extends 'text'\r
      ? Text & { type: 'text'; selection?: SelectionDefaultType }\r
      : T extends 'rect'\r
        ? Rect & {\r
            type: 'rect'\r
            selection?: SelectionDefaultType\r
            path?: Path2D\r
          }\r
        : T extends 'square'\r
          ? Rect & {\r
              type: 'square'\r
              selection?: SelectionDefaultType\r
              path?: Path2D\r
            }\r
          : T extends 'circle'\r
            ? Circle & {\r
                type: 'circle'\r
                selection?: SelectionDefaultType\r
                path?: Path2D\r
              }\r
            : T extends 'ellipse'\r
              ? Ellipse & {\r
                  type: 'ellipse'\r
                  selection?: SelectionDefaultType\r
                  path?: Path2D\r
                }\r
              : T extends 'triangle'\r
                ? Triangle & { type: 'triangle'; path?: Path2D }\r
                : T extends 'polygon'\r
                  ? Polygon & {\r
                      type: 'polygon'\r
                      selection?: SelectionLinesType\r
                      path?: Path2D\r
                    }\r
                  : T extends 'curve'\r
                    ? Curve & {\r
                        type: 'curve'\r
                        selection?: SelectionLinesType\r
                        path?: Path2D\r
                      }\r
                    : T extends 'brush'\r
                      ? Brush & {\r
                          type: 'brush'\r
                          selection?: SelectionDefaultType\r
                          path?: Path2D\r
                          scaleX?: number\r
                          scaleY?: number\r
                        }\r
                      : never)`,elements:[{name:"signature",type:"object",raw:`{\r
  toolId?: string\r
  visible?: boolean\r
  locked?: boolean\r
  rotation: number\r
  style?: StyleShape\r
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{\r
  fillColor?: string\r
  opacity?: number\r
  strokeColor?: string\r
  lineWidth?: number\r
  lineDash?: number\r
  lineArrow?: number\r
  pointsCount?: number\r
  fontFamily?: string\r
  fontItalic?: boolean\r
  fontBold?: boolean\r
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""},toggleLayoutPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const as=(e,n)=>{const t=n.flatMap(r=>{if(typeof r!="object")return e.filter(i=>i.type===r);const a=e.filter(i=>r.toolsType.includes(i.type));return a?{...r,toolsType:a}:null});return On(t)},Nn=({disabled:e=!1,withText:n=!1,loadFile:t,type:r,img:a,accept:i})=>{const s=m.useRef(null),o=c=>{c.stopPropagation(),s.current&&(s.current.value="")},u=c=>{var y;const d=(y=c.target.files)==null?void 0:y.item(0);d&&t(d)};return l.jsx(F,{ref:s,type:"file",onClick:o,onChange:u,accept:i,title:r.label??r.type,icon:a,disabled:e,children:n?r.label:void 0})};Nn.__docgenInfo={description:"",methods:[],displayName:"LoadFileTool",props:{disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},loadFile:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},type:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{\r
  id: string\r
  type: ActionsType\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},img:{required:!1,tsType:{name:"string"},description:""},accept:{required:!0,tsType:{name:"string"},description:""},withText:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const K=({type:e,img:n,isActive:t,withText:r=!1,disabled:a=!1,setActive:i})=>{const s=()=>{i(e)};return l.jsx(F,{disabled:a,selected:t,onClick:s,title:e.label??e.type,icon:n,children:r?e.label:void 0})};K.__docgenInfo={description:"",methods:[],displayName:"Tool",props:{type:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{\r
  id: string\r
  type: ActionsType\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},img:{required:!1,tsType:{name:"string"},description:""},withText:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isActive:{required:!0,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},setActive:{required:!0,tsType:{name:"signature",type:"function",raw:"(marker: ToolsType) => void",signature:{arguments:[{type:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{\r
  id: string\r
  type: ActionsType\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},name:"marker"}],return:{name:"void"}}},description:""}}};const yr=({activeTool:e,withActionsInMenu:n,hasActionToUndo:t=!1,hasActionToRedo:r=!1,hasActionToClear:a=!1,undoAction:i,redoAction:s,clearCanvas:o,alignment:u,group:c,vertical:d=!1,disabled:y=!1,withLoadAndSave:T,withExport:v,addPicture:p,loadFile:k,togglePictureUrlModal:f,saveFile:h,exportCanvasInFile:x,withUploadPicture:q,withUrlPicture:Q})=>{var P;const[E,I]=m.useState(!1),[,M]=m.useTransition(),C=D=>{I(!1),k(D)},L=async D=>{I(!1),await p(D)},N=()=>{M(()=>{I(!0)})},S=(P=c==null?void 0:c.tools)==null?void 0:P.some(D=>D===e.type),j=(S?e.icon:c.img)??c.title;return m.useEffect(()=>{if(!E)return;const D=()=>{I(!1)};return document.addEventListener("click",D),()=>{document.removeEventListener("click",D)}},[E]),n||q||Q||T||v?l.jsxs("div",{className:"react-paint-editor-toolbox-relative",children:[l.jsx(F,{selected:S,title:c.title,disabled:y,onClick:N,icon:j}),E&&l.jsx(fe,{alignment:u,position:"top",children:l.jsxs("div",{className:"react-paint-editor-toolbox-panel-content","data-vertical":+d,children:[n&&l.jsxs(l.Fragment,{children:[l.jsx(K,{withText:!0,type:be,disabled:y||!t,img:be.icon,isActive:e.id===be.id,setActive:i}),l.jsx(K,{withText:!0,type:Te,disabled:y||!r,img:Te.icon,isActive:e.id===Te.id,setActive:s}),l.jsx(K,{withText:!0,type:ke,disabled:y||!a,img:ke.icon,isActive:e.id===ke.id,setActive:o}),(q||Q||T)&&l.jsx("hr",{})]}),q&&l.jsx(Nn,{withText:!0,type:tt,disabled:y,loadFile:L,img:tt.icon,accept:"image/png, image/gif, image/jpeg, image/svg+xml"}),Q&&l.jsx(F,{disabled:y,selected:!1,onClick:f,title:"Add picture from URL",icon:Ar,children:"Add picture from URL"}),(q||Q)&&T&&l.jsx("hr",{}),T&&l.jsxs(l.Fragment,{children:[l.jsx(Nn,{withText:!0,type:nt,disabled:y,loadFile:C,img:nt.icon,accept:"application/JSON"}),l.jsx(K,{withText:!0,disabled:y,type:wn,img:wn.icon,isActive:e.id===wn.id,setActive:h})]}),v&&l.jsx(K,{withText:!0,disabled:y,type:kn,img:kn.icon,isActive:e.id===kn.id,setActive:x})]})})]}):null};yr.__docgenInfo={description:"",methods:[],displayName:"MenuGroup",props:{activeTool:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{\r
  id: string\r
  type: ActionsType\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},withActionsInMenu:{required:!0,tsType:{name:"boolean"},description:""},group:{required:!0,tsType:{name:"signature",type:"object",raw:`{\r
  tools?: ShapeType[]\r
  title: string\r
  img: string\r
}`,signature:{properties:[{key:"tools",value:{name:"Array",elements:[{name:"unknown[number]",raw:"(typeof ShapeTypeArray)[number]"}],raw:"ShapeType[]",required:!1}},{key:"title",value:{name:"string",required:!0}},{key:"img",value:{name:"string",required:!0}}]}},description:""},vertical:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},alignment:{required:!1,tsType:{name:"union",raw:"'left' | 'center' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'center'"},{name:"literal",value:"'right'"}]},description:""},title:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},img:{required:!1,tsType:{name:"string"},description:""},loadFile:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},addPicture:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File) => Promise<void>",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},saveFile:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},exportCanvasInFile:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},togglePictureUrlModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},withLoadAndSave:{required:!0,tsType:{name:"boolean"},description:""},withExport:{required:!0,tsType:{name:"boolean"},description:""},hasActionToUndo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hasActionToRedo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hasActionToClear:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},withUploadPicture:{required:!0,tsType:{name:"boolean"},description:""},withUrlPicture:{required:!0,tsType:{name:"boolean"},description:""},undoAction:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},redoAction:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},clearCanvas:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const fr=({togglePictureUrlModal:e,addPicture:n})=>{const t=m.useRef(null),r=async a=>{var s;a.preventDefault();const i=(s=t.current)==null?void 0:s.value;i&&(await n(i),e())};return m.useEffect(()=>{t.current&&t.current.focus()},[]),l.jsx(on,{className:"react-paint-editor-toolbox-pictureinput-modal",onClose:e,children:l.jsxs("form",{onSubmit:r,children:[l.jsxs("label",{children:["URL ",l.jsx("input",{type:"text",ref:t})]}),l.jsx(F,{onClick:e,children:"Annuler"}),l.jsx(F,{type:"submit",selected:!0,children:"Ajouter"})]})})};fr.__docgenInfo={description:"",methods:[],displayName:"PictureUrlModal",props:{togglePictureUrlModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},addPicture:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => Promise<void>",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""}}};const gr=({activeTool:e,alignment:n,group:t,disabled:r=!1,setActiveToolFromId:a})=>{var k,f,h;const i=m.useRef(null),[s,o]=m.useState(!1),[,u]=m.useTransition(),[c,d]=m.useState(void 0),y=x=>{d(x),a(x.id)};if(m.useEffect(()=>{if(!s)return;const x=q=>{!zt(q,i.current)&&o(!1)};return document.addEventListener("mousedown",x,{passive:!1}),document.addEventListener("touchstart",x,{passive:!1}),()=>{document.removeEventListener("mousedown",x),document.removeEventListener("touchstart",x)}},[s]),"type"in t)return l.jsx(K,{disabled:r,type:t,img:t.icon,isActive:e.id===t.id,setActive:y});if(!t.toolsType.length)return null;if(((k=t.toolsType)==null?void 0:k.length)===1)return l.jsx(K,{disabled:r,type:t.toolsType[0],img:t.toolsType[0].icon,isActive:e.id===t.toolsType[0].id,setActive:y});const T=(t==null?void 0:t.toolsType.find(x=>x.type===e.type))!==void 0,v=(c?c.icon:(h=(f=t.toolsType)==null?void 0:f[0])==null?void 0:h.icon)??t.title,p=()=>{var x;c?a(c.id):(x=t.toolsType)!=null&&x[0]&&y(t.toolsType[0]),u(()=>{o(!0)})};return l.jsxs("div",{className:"react-paint-editor-toolbargroup-relative",children:[l.jsx(F,{selected:T,title:t.title,disabled:r,onClick:p,icon:v}),s&&l.jsx(fe,{alignment:n,position:"top",children:l.jsx("div",{className:"react-paint-editor-toolbargroup-panel-content","data-vertical":+t.vertical,ref:i,children:t.toolsType.map((x,q)=>l.jsx(K,{disabled:r,type:x,img:x.icon,isActive:e.id===x.id,setActive:y},x.id))})})]})};gr.__docgenInfo={description:"",methods:[],displayName:"ToolbarGroup",props:{activeTool:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{\r
  id: string\r
  type: ActionsType\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},group:{required:!0,tsType:{name:"union",raw:`| CustomTool\r
| {\r
    title: string\r
    toolsType: CustomTool[]\r
    vertical: boolean\r
  }`,elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{\r
  title: string\r
  toolsType: CustomTool[]\r
  vertical: boolean\r
}`,signature:{properties:[{key:"title",value:{name:"string",required:!0}},{key:"toolsType",value:{name:"Array",elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]}],raw:"CustomTool[]",required:!0}},{key:"vertical",value:{name:"boolean",required:!0}}]}}]},description:""},alignment:{required:!1,tsType:{name:"union",raw:"'left' | 'center' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'center'"},{name:"literal",value:"'right'"}]},description:""},title:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},img:{required:!1,tsType:{name:"string"},description:""},setActiveToolFromId:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""}}};const xt=40,is=[{title:"brush",toolsType:["brush"],vertical:!1},{title:"lines",toolsType:["line","curve","polygon"],vertical:!1},{title:"shapes",toolsType:["rect","square","circle","ellipse"],vertical:!1},"text"],vr=({width:e,disabled:n=!1,activeTool:t,hasActionToUndo:r=!1,hasActionToRedo:a=!1,hasActionToClear:i=!1,withLoadAndSave:s,withExport:o,clearCanvas:u,setActiveTool:c,undoAction:d,redoAction:y,addPicture:T,loadFile:v,saveFile:p,exportCanvasInFile:k,availableTools:f,withUrlPicture:h,withUploadPicture:x})=>{const q=as(f,is),Q=(5+q.length)*xt,E=e<Q,I=(2+q.length)*xt,M=e<I,[C,L]=m.useState(!1),[N,S]=m.useState(!1),j=()=>{L(g=>!g)},H=()=>{S(!0)},P=()=>{S(g=>!g)},D=g=>{c(g),L(!1)},Z=g=>{D(f.find(w=>w.id===g)??t)},b=f.find(g=>g.type===t.type)!==void 0;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"react-paint-editor-toolbar-toolbox",children:[l.jsxs("div",{className:"react-paint-editor-toolbar-shrinkable",children:[l.jsx(K,{type:le,disabled:n,img:le.icon,isActive:t.id===le.id,setActive:D}),M?l.jsx(F,{disabled:n,onClick:j,title:"Toggle tools",icon:br,selected:b}):q.map((g,w)=>l.jsx(gr,{disabled:n,activeTool:t,group:g,setActiveToolFromId:Z},"id"in g?g.id:g.title))]}),!E&&l.jsxs(l.Fragment,{children:[l.jsx(K,{type:be,disabled:n||!r,img:be.icon,isActive:t.id===be.id,setActive:d}),l.jsx(K,{type:Te,disabled:n||!a,img:Te.icon,isActive:t.id===Te.id,setActive:y}),l.jsx(K,{type:ke,disabled:n||!i,img:ke.icon,isActive:t.id===ke.id,setActive:u})]}),l.jsx(yr,{withActionsInMenu:E,disabled:n,vertical:!0,alignment:"right",group:{title:"Menu",img:Dr},activeTool:t,addPicture:T,loadFile:v,saveFile:p,togglePictureUrlModal:H,exportCanvasInFile:k,withUploadPicture:x,withUrlPicture:h,withLoadAndSave:s,withExport:o,hasActionToUndo:r,hasActionToRedo:a,hasActionToClear:i,undoAction:d,redoAction:y,clearCanvas:u})]}),C&&l.jsx(on,{className:"react-paint-editor-toolbar-modal",onClose:j,children:f.map((g,w)=>g.type==="picture"?null:l.jsx(K,{disabled:n,type:g,img:g.icon,withText:!1,isActive:t.id===g.id,setActive:D},g.id))}),N&&l.jsx(fr,{togglePictureUrlModal:P,addPicture:T})]})};vr.__docgenInfo={description:"",methods:[],displayName:"Toolbar",props:{width:{required:!0,tsType:{name:"number"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},activeTool:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{\r
  id: string\r
  type: ActionsType\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},hasActionToUndo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hasActionToRedo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hasActionToClear:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},undoAction:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},redoAction:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},clearCanvas:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},setActiveTool:{required:!0,tsType:{name:"signature",type:"function",raw:"(tool: ToolsType) => void",signature:{arguments:[{type:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{\r
  id: string\r
  type: ActionsType\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},name:"tool"}],return:{name:"void"}}},description:""},loadFile:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},addPicture:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File | string) => Promise<void>",signature:{arguments:[{type:{name:"union",raw:"File | string",elements:[{name:"File"},{name:"string"}]},name:"file"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},saveFile:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},exportCanvasInFile:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},availableTools:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
} & (\r
  | {\r
      type: 'brush'\r
      settings: ToolsSettingsType<'brush'>\r
    }\r
  | {\r
      type: 'circle'\r
      settings: ToolsSettingsType<'circle'>\r
    }\r
  | {\r
      type: 'ellipse'\r
      settings: ToolsSettingsType<'ellipse'>\r
    }\r
  | {\r
      type: 'rect'\r
      settings: ToolsSettingsType<'rect'>\r
    }\r
  | {\r
      type: 'square'\r
      settings: ToolsSettingsType<'square'>\r
    }\r
  | {\r
      type: 'line'\r
      settings: ToolsSettingsType<'line'>\r
    }\r
  | {\r
      type: 'polygon'\r
      settings: ToolsSettingsType<'polygon'>\r
    }\r
  | {\r
      type: 'curve'\r
      settings: ToolsSettingsType<'curve'>\r
    }\r
  | {\r
      type: 'text'\r
      settings: ToolsSettingsType<'text'>\r
    }\r
  | {\r
      type: 'picture'\r
      settings: ToolsSettingsType<'picture'>\r
    }\r
)`,elements:[{name:"signature",type:"object",raw:`{\r
  id: string\r
  icon: string\r
  label: string\r
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]}],raw:"CustomTool[]"},description:""},withLoadAndSave:{required:!0,tsType:{name:"boolean"},description:""},withExport:{required:!0,tsType:{name:"boolean"},description:""},withUrlPicture:{required:!0,tsType:{name:"boolean"},description:""},withUploadPicture:{required:!0,tsType:{name:"boolean"},description:""}}};const Ge={none:0,small:10,medium:20,large:40},ss={toolbarBackgroundColor:"white",dividerColor:"#36418129",fontRadius:8,fontDisabledColor:"#3641812b",fontDisabledBackgroundColor:"transparent",fontColor:"#364181",fontBackgroundColor:"transparent",fontSelectedColor:"white",fontSelectedBackgroundColor:"#364181",fontHoverColor:"#364181",fontHoverBackgroundColor:"#afd8d8"},os=()=>{const e=m.useRef([]),[n,t]=m.useState([]),r=i=>{t(s=>s.filter(o=>o.id!==i))},a=({type:i=Tt.type,duration:s=Tt.duration,text:o})=>{const u={id:G("snackbar_"),duration:s,type:i,text:o};t(c=>[...c,u]),e.current=[...e.current,setTimeout(()=>r(u.id),s)]};return m.useEffect(()=>()=>{for(const i of e.current)clearTimeout(i)},[]),{snackbarList:n,addSnackbar:a}},ls=({editorProps:e,className:n,style:t,options:r,children:a})=>{const{shapesRef:i,addPictureShape:s,moveShapes:o,toggleShapeVisibility:u,toggleShapeLock:c,canGoBackward:d,canGoForward:y,canClear:T,selectedShape:v,removeShape:p,updateShape:k,backwardShape:f,forwardShape:h,refs:x,width:q,height:Q,canvasSize:E,selectTool:I,selectShape:M,activeTool:C,setActiveTool:L,setAvailableTools:N,isEditMode:S,isDisabled:j,availableTools:H,gridGap:P,setGridGap:D,loadFile:Z,exportPicture:b,exportData:g,clearCanvas:w,settings:R,canvas:{canGrow:A,layersManipulation:$,withExport:Se,withLoadAndSave:De,withUploadPicture:J,withUrlPicture:ge}}=e,{toolbarBackgroundColor:Le,dividerColor:Pe,fontRadius:Ie,fontDisabledColor:Ae,fontDisabledBackgroundColor:oe,fontColor:te,fontBackgroundColor:un,fontSelectedColor:cn,fontSelectedBackgroundColor:dn,fontHoverColor:Fe,fontHoverBackgroundColor:Oe}={...ss,...r},[Be,ee]=m.useState(!1),[Ee,pn]=m.useState(!1),mn=P>=Ge.large?"large":P>=Ge.medium?"medium":P>=Ge.small?"small":"none",yn=_=>{D(Ge[_])},{snackbarList:fn,addSnackbar:ae}=os(),gn=m.useCallback((_,re,ze)=>{N(ue=>ue.map(O=>O.id===_?Y(["settings",re,"default"],ze,O):O)),L(ue=>ue.id===_?Y(["settings",re,"default"],ze,ue):ue)},[L,N]),je=m.useCallback(()=>{I(le),f()},[I,f]),ve=m.useCallback(()=>{I(le),h()},[I,h]),Ze=m.useCallback(()=>{ee(!0);try{b(),ee(!1)}catch(_){_ instanceof Error&&ae({type:"error",text:"L'export a échoué"}),console.warn(_)}finally{ee(!1)}},[b,ae]),vn=m.useCallback(()=>{ee(!0);try{g(),ee(!1)}catch(_){_ instanceof Error&&ae({type:"error",text:"L'enregistrement a échoué"}),console.warn(_)}finally{ee(!1)}},[g,ae]),hn=m.useCallback(async _=>{ee(!0);try{await Z(_),ae({type:"success",text:"Fichier chargé !"})}catch(re){re instanceof Error&&ae({type:"error",text:"Le chargement a échoué"}),console.warn(re)}finally{ee(!1)}},[Z,ae]),bn=m.useCallback(async _=>{ee(!0);try{const re=await s(_,q,Q);M(re)}catch(re){re instanceof Error&&ae({type:"error",text:"Le chargement a échoué"}),console.warn(re)}finally{ee(!1)}},[s,M,ae,q,Q]),Tn=`${n?`${n} `:""}${Ee?"react-paint-editor-layout-opened ":""}react-paint-editor-app`;return l.jsxs("div",{ref:x.setEditor,className:Tn,style:{"--react-paint-editor-app-maxWidth":A?"100%":`${q}px`,"--react-paint-editor-app-toolbar-bg":Le,"--react-paint-editor-app-divider-color":Pe,"--react-paint-editor-app-font-radius":Ie,"--react-paint-editor-app-font-disabled-color":Ae,"--react-paint-editor-app-font-disabled-bg":oe,"--react-paint-editor-app-font-color":te,"--react-paint-editor-app-font-bg":un,"--react-paint-editor-app-font-selected-color":cn,"--react-paint-editor-app-font-selected-bg":dn,"--react-paint-editor-app-font-hover-color":Fe,"--react-paint-editor-app-font-hover-bg":Oe,...t},children:[S&&l.jsx(vr,{width:E.width,disabled:j,activeTool:C,clearCanvas:w,setActiveTool:I,exportCanvasInFile:Ze,saveFile:vn,loadFile:hn,addPicture:bn,hasActionToUndo:d,hasActionToRedo:y,hasActionToClear:T,undoAction:je,redoAction:ve,availableTools:H,withExport:Se,withLoadAndSave:De,withUploadPicture:J,withUrlPicture:ge}),a,S&&$&&l.jsx(ur,{gridFormat:mn,setGridFormat:yn,disabled:j,shapes:i.current,moveShapes:o,selectedShape:v,removeShape:p,selectShape:M,toggleShapeVisibility:u,toggleShapeLock:c,isLayoutPanelShown:Ee}),S&&l.jsxs(l.Fragment,{children:[l.jsx(mr,{width:E.width,disabled:j,activeTool:C,availableTools:H,selectedShape:v,settings:R,removeShape:p,updateShape:k,canvas:x.canvas.current,layersManipulation:$,toggleLayoutPanel:()=>{pn(_=>!_)},updateToolSettings:gn}),l.jsx(or,{isLoading:Be}),l.jsx(lr,{snackbarList:fn})]})]})};ls.__docgenInfo={description:"",methods:[],displayName:"Editor",props:{editorProps:{required:!0,tsType:{name:"ReturnType['editorProps']",raw:"UseReactPaintReturnType['editorProps']"},description:""},className:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},options:{required:!1,tsType:{name:"signature",type:"object",raw:`{\r
  toolbarBackgroundColor?: string\r
  dividerColor?: string\r
  fontRadius?: number\r
  fontDisabledColor?: string\r
  fontDisabledBackgroundColor?: string\r
  fontColor?: string\r
  fontBackgroundColor?: string\r
  fontSelectedColor?: string\r
  fontSelectedBackgroundColor?: string\r
  fontHoverColor?: string\r
  fontHoverBackgroundColor?: string\r
}`,signature:{properties:[{key:"toolbarBackgroundColor",value:{name:"string",required:!1}},{key:"dividerColor",value:{name:"string",required:!1}},{key:"fontRadius",value:{name:"number",required:!1}},{key:"fontDisabledColor",value:{name:"string",required:!1}},{key:"fontDisabledBackgroundColor",value:{name:"string",required:!1}},{key:"fontColor",value:{name:"string",required:!1}},{key:"fontBackgroundColor",value:{name:"string",required:!1}},{key:"fontSelectedColor",value:{name:"string",required:!1}},{key:"fontSelectedBackgroundColor",value:{name:"string",required:!1}},{key:"fontHoverColor",value:{name:"string",required:!1}},{key:"fontHoverBackgroundColor",value:{name:"string",required:!1}}]}},description:""}}};export{Yi as A,ls as E,ds as u};
