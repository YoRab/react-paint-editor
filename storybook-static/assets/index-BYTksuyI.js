import{r as m,R as Ct}from"./index-CDs2tPxN.js";import{j as l}from"./jsx-runtime-qGIIFXMu.js";const St='<svg><path d="M5.146 17.5Q4.146 17.5 3.208 17Q2.271 16.5 1.667 15.708Q2.208 15.75 2.802 15.344Q3.396 14.938 3.396 14.104Q3.396 13.042 4.135 12.292Q4.875 11.542 5.958 11.542Q7.021 11.542 7.76 12.292Q8.5 13.042 8.5 14.104Q8.5 15.5 7.51 16.5Q6.521 17.5 5.146 17.5ZM9.917 12.5 7.562 10.146 14.917 2.729Q15.146 2.5 15.469 2.5Q15.792 2.5 16.021 2.729L17.271 3.958Q17.5 4.188 17.5 4.531Q17.5 4.875 17.271 5.125Z"/></svg>',Ye='<svg><path d="M2.5 17.5V2.5H17.5V17.5ZM4.25 15.75H15.75V4.25H4.25ZM4.25 15.75V4.25V15.75Z"/></svg>',Tr='<svg><path d="M5.333 9.292 10.021 1.646 14.708 9.292ZM14.562 18.333Q13 18.333 11.896 17.229Q10.792 16.125 10.792 14.562Q10.792 13 11.896 11.896Q13 10.792 14.562 10.792Q16.125 10.792 17.229 11.896Q18.333 13 18.333 14.562Q18.333 16.125 17.229 17.229Q16.125 18.333 14.562 18.333ZM2.5 17.917V11.188H9.229V17.917ZM14.562 16.583Q15.438 16.583 16.01 16.01Q16.583 15.438 16.583 14.562Q16.583 13.688 16.01 13.115Q15.438 12.542 14.562 12.542Q13.688 12.542 13.115 13.115Q12.542 13.688 12.542 14.562Q12.542 15.438 13.115 16.01Q13.688 16.583 14.562 16.583ZM4.25 16.167H7.479V12.938H4.25ZM8.458 7.542H11.583L10.021 5ZM10.021 7.542ZM7.479 12.938ZM14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Q14.562 14.562 14.562 14.562Z"/></svg>',Xe='<svg><path d="M10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333ZM10 16.583Q12.75 16.583 14.667 14.667Q16.583 12.75 16.583 10Q16.583 7.25 14.667 5.333Q12.75 3.417 10 3.417Q7.25 3.417 5.333 5.333Q3.417 7.25 3.417 10Q3.417 12.75 5.333 14.667Q7.25 16.583 10 16.583ZM10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Q10 10 10 10Z"/></svg>',Fn='<svg><path d="M12.25 18.333V16.167L6.833 13.458H2.5V8.208H6.25L8.25 5.917V1.667H13.5V6.917H9.708L7.75 9.146V11.958L12.25 14.208V13.083H17.5V18.333Z"/></svg>',Dt='<svg><path d="M4.125 5.083V3.333H7.062L7.896 2.5H12.104L12.938 3.333H15.875V5.083ZM6.75 17.5Q6.021 17.5 5.51 16.99Q5 16.479 5 15.75V5.958H15V15.75Q15 16.479 14.49 16.99Q13.979 17.5 13.25 17.5Z"/></svg>',Yn='<svg><path d="M10 17.5Q7.208 17.5 5.271 15.594Q3.333 13.688 3.333 10.958Q3.333 9.583 3.854 8.396Q4.375 7.208 5.292 6.292L10 1.667L14.688 6.292Q15.604 7.208 16.135 8.396Q16.667 9.583 16.667 10.958Q16.667 13.688 14.719 15.594Q12.771 17.5 10 17.5ZM5.146 11.667H14.854Q15.083 10.188 14.552 9.146Q14.021 8.104 13.479 7.562L10 4.125L6.521 7.562Q5.979 8.104 5.448 9.146Q4.917 10.188 5.146 11.667Z"/></svg>',kr='<svg><path d="M11.708 15.833H5.854V14.083H11.708Q13 14.083 13.958 13.292Q14.917 12.5 14.917 11.271Q14.917 10.042 13.958 9.24Q13 8.438 11.708 8.438H6.667L8.792 10.562L7.562 11.792L3.333 7.562L7.562 3.333L8.792 4.562L6.667 6.688H11.708Q13.729 6.688 15.198 7.99Q16.667 9.292 16.667 11.25Q16.667 13.208 15.198 14.521Q13.729 15.833 11.708 15.833Z"/></svg>',wr='<svg><path d="M8.292 15.833Q6.271 15.833 4.802 14.521Q3.333 13.208 3.333 11.25Q3.333 9.292 4.802 7.99Q6.271 6.688 8.292 6.688H13.333L11.208 4.562L12.438 3.333L16.667 7.562L12.438 11.792L11.208 10.562L13.333 8.438H8.292Q7 8.438 6.042 9.229Q5.083 10.021 5.083 11.25Q5.083 12.5 6.042 13.292Q7 14.083 8.292 14.083H14.146V15.833Z"/></svg>',xr='<svg><path d="M10 17.646 2.438 11.75 3.875 10.646 10 15.396 16.125 10.646 17.562 11.75ZM10 13.188 2.5 7.354 10 1.521 17.5 7.354Z"/></svg>',qr='<svg><path d="M7.854 13.812 10 11.688 12.125 13.812 13.354 12.604 11.208 10.458 13.354 8.312 12.125 7.104 10 9.229 7.854 7.104 6.625 8.312 8.771 10.458 6.625 12.604ZM5.896 17.5Q5.167 17.5 4.656 16.99Q4.146 16.479 4.146 15.75V5.125H3.333V3.375H7.542V2.5H12.458V3.375H16.667V5.125H15.833V15.75Q15.833 16.479 15.323 16.99Q14.812 17.5 14.083 17.5Z"/></svg>',Qr='<svg><path d="M17.5 5.833V15.75Q17.5 16.479 16.99 16.99Q16.479 17.5 15.75 17.5H4.25Q3.521 17.5 3.01 16.99Q2.5 16.479 2.5 15.75V4.25Q2.5 3.521 3.01 3.01Q3.521 2.5 4.25 2.5H14.167ZM10 14.917Q11.062 14.917 11.823 14.156Q12.583 13.396 12.583 12.333Q12.583 11.271 11.823 10.51Q11.062 9.75 10 9.75Q8.938 9.75 8.177 10.51Q7.417 11.271 7.417 12.333Q7.417 13.396 8.177 14.156Q8.938 14.917 10 14.917ZM5.021 8.396H12.521V5.021H5.021Z"/></svg>',Cr='<svg><path d="M10 13.271 5.708 8.979 6.958 7.729 9.125 9.896V3.333H10.875V9.896L13.042 7.729L14.292 8.979ZM5.083 16.667Q4.354 16.667 3.844 16.156Q3.333 15.646 3.333 14.917V12.5H5.083V14.917Q5.083 14.917 5.083 14.917Q5.083 14.917 5.083 14.917H14.917Q14.917 14.917 14.917 14.917Q14.917 14.917 14.917 14.917V12.5H16.667V14.917Q16.667 15.646 16.156 16.156Q15.646 16.667 14.917 16.667Z"/></svg>',Sr='<svg><path d="M3.417 16.667Q2.729 16.667 2.198 16.135Q1.667 15.604 1.667 14.917V5.083Q1.667 4.396 2.198 3.865Q2.729 3.333 3.417 3.333H8.25L9.917 5H16.667Q17.354 5 17.844 5.531Q18.333 6.062 18.333 6.75H3.417V14.917Q3.417 14.917 3.417 14.917Q3.417 14.917 3.417 14.917L5.438 8.5H19.583L17.396 15.479Q17.229 16.021 16.802 16.344Q16.375 16.667 15.833 16.667Z"/></svg>',On='<svg><path d="M4.792 15.083 8.333 11.542 9.833 13.021 11.667 10.708 15.167 15.083ZM6.667 8.417Q5.938 8.417 5.427 7.906Q4.917 7.396 4.917 6.667Q4.917 5.938 5.427 5.427Q5.938 4.917 6.667 4.917Q7.396 4.917 7.906 5.427Q8.417 5.938 8.417 6.667Q8.417 7.396 7.906 7.906Q7.396 8.417 6.667 8.417ZM4.167 18.333Q3.125 18.333 2.396 17.604Q1.667 16.875 1.667 15.833V4.167Q1.667 3.125 2.396 2.396Q3.125 1.667 4.167 1.667H15.833Q16.875 1.667 17.604 2.396Q18.333 3.125 18.333 4.167V15.833Q18.333 16.875 17.604 17.604Q16.875 18.333 15.833 18.333ZM4.167 16.583H15.833Q16.146 16.583 16.365 16.365Q16.583 16.146 16.583 15.833V4.167Q16.583 3.854 16.365 3.635Q16.146 3.417 15.833 3.417H4.167Q3.854 3.417 3.635 3.635Q3.417 3.854 3.417 4.167V15.833Q3.417 16.146 3.635 16.365Q3.854 16.583 4.167 16.583Z"/></svg>',Lt='<svg><path d="M8.708 16.667V5.917H4.167V3.333H15.833V5.917H11.292V16.667Z"/></svg>',Pt='<svg><path d="M7.5 15.833V14.083H12.833L3.333 4.583L4.583 3.333L14.083 12.833V7.5H15.833V15.833Z"/></svg>',Dr='<svg><path d="M8.0145 11.1707C8.38484 10.9914 8.82183 11.1558 8.99959 11.5295L10.7031 15.2591L12.0363 14.6238L10.3254 10.9017C10.1476 10.528 10.3106 10.0795 10.6809 9.90761L10.8883 9.84782L12.5918 9.51148L6.48133 4.33192V12.389L7.82934 11.2903L8.0145 11.1707ZM10.6587 16.9258C10.2883 17.1052 9.84395 16.9482 9.67359 16.5745L8.05894 13.0318L6.19988 14.5416C6.07396 14.6462 5.91842 14.706 5.74066 14.706C5.54423 14.706 5.35584 14.6272 5.21694 14.4871C5.07803 14.3469 5 14.1568 5 13.9586V2.74741C5 2.54919 5.07803 2.35908 5.21694 2.21891C5.35584 2.07874 5.54423 2 5.74066 2C5.91842 2 6.08878 2.06727 6.21469 2.1719L6.2221 2.16443L14.7323 9.36947C15.0508 9.63854 15.0879 10.1094 14.8286 10.4233C14.7175 10.5579 14.562 10.6475 14.4064 10.6774L12.0659 11.1408L13.6954 14.6761C13.888 15.0498 13.7102 15.4908 13.3399 15.6627L10.6587 16.9258Z"/></svg>',Lr='<svg><path d="M2.5 15V13.25H17.5V15ZM2.5 10.875V9.125H17.5V10.875ZM2.5 6.75V5H17.5V6.75Z"/></svg>',Pr='<svg><path d="M10 13.354Q11.583 13.354 12.688 12.25Q13.792 11.146 13.792 9.562Q13.792 7.979 12.688 6.875Q11.583 5.771 10 5.771Q8.417 5.771 7.312 6.875Q6.208 7.979 6.208 9.562Q6.208 11.146 7.312 12.25Q8.417 13.354 10 13.354ZM10 11.812Q9.062 11.812 8.406 11.156Q7.75 10.5 7.75 9.562Q7.75 8.625 8.406 7.969Q9.062 7.312 10 7.312Q10.938 7.312 11.594 7.969Q12.25 8.625 12.25 9.562Q12.25 10.5 11.594 11.156Q10.938 11.812 10 11.812ZM10 15.833Q6.938 15.833 4.448 14.125Q1.958 12.417 0.833 9.562Q1.958 6.708 4.458 5.021Q6.958 3.333 10 3.333Q13.042 3.333 15.542 5.021Q18.042 6.708 19.167 9.562Q18.042 12.417 15.552 14.125Q13.062 15.833 10 15.833ZM10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562Q10 9.562 10 9.562ZM10 14.083Q12.333 14.083 14.281 12.865Q16.229 11.646 17.25 9.562Q16.229 7.479 14.281 6.281Q12.333 5.083 10 5.083Q7.667 5.083 5.708 6.281Q3.75 7.479 2.729 9.562Q3.75 11.646 5.708 12.865Q7.667 14.083 10 14.083Z"/></svg>',Ir='<svg><path d="M13.521 11.021 12.25 9.75Q12.333 8.75 11.604 7.979Q10.875 7.208 9.812 7.312L8.542 6.042Q8.896 5.896 9.26 5.833Q9.625 5.771 10 5.771Q11.583 5.771 12.688 6.875Q13.792 7.979 13.792 9.562Q13.792 9.979 13.719 10.354Q13.646 10.729 13.521 11.021ZM16.167 13.646 14.917 12.417Q15.667 11.833 16.25 11.146Q16.833 10.458 17.25 9.562Q16.229 7.479 14.292 6.281Q12.354 5.083 10 5.083Q9.396 5.083 8.885 5.156Q8.375 5.229 7.875 5.375L6.5 4Q7.354 3.646 8.208 3.49Q9.062 3.333 10 3.333Q13.146 3.333 15.615 5.052Q18.083 6.771 19.167 9.562Q18.688 10.792 17.917 11.823Q17.146 12.854 16.167 13.646ZM16.396 18.854 12.938 15.396Q12.208 15.625 11.479 15.729Q10.75 15.833 10 15.833Q6.833 15.833 4.375 14.094Q1.917 12.354 0.833 9.562Q1.25 8.479 1.917 7.552Q2.583 6.625 3.417 5.875L1.125 3.562L2.375 2.354L17.625 17.625ZM4.604 7.062Q4.021 7.604 3.542 8.219Q3.062 8.833 2.729 9.562Q3.75 11.646 5.688 12.865Q7.625 14.083 10 14.083Q10.354 14.083 10.74 14.052Q11.125 14.021 11.479 13.938L10.812 13.271Q10.625 13.312 10.417 13.333Q10.208 13.354 10 13.354Q8.417 13.354 7.312 12.25Q6.208 11.146 6.208 9.562Q6.208 9.354 6.24 9.167Q6.271 8.979 6.312 8.771ZM11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875Q11.375 8.875 11.375 8.875ZM8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Q8.042 10.5 8.042 10.5Z"/></svg>',Ar='<svg><path d="M9.958 18.333Q8.25 18.333 6.74 17.677Q5.229 17.021 4.104 15.885Q2.979 14.75 2.323 13.229Q1.667 11.708 1.667 10Q1.667 8.271 2.333 6.75Q3 5.229 4.156 4.104Q5.312 2.979 6.854 2.323Q8.396 1.667 10.125 1.667Q11.771 1.667 13.26 2.25Q14.75 2.833 15.875 3.854Q17 4.875 17.667 6.26Q18.333 7.646 18.333 9.25Q18.333 11.688 16.792 12.948Q15.25 14.208 13.188 14.208H11.75Q11.625 14.208 11.562 14.281Q11.5 14.354 11.5 14.458Q11.5 14.688 11.812 15.219Q12.125 15.75 12.125 16.458Q12.125 17.458 11.51 17.896Q10.896 18.333 9.958 18.333ZM5.458 10.875Q6 10.875 6.375 10.5Q6.75 10.125 6.75 9.583Q6.75 9.042 6.375 8.667Q6 8.292 5.458 8.292Q4.917 8.292 4.542 8.667Q4.167 9.042 4.167 9.583Q4.167 10.125 4.542 10.5Q4.917 10.875 5.458 10.875ZM7.917 7.583Q8.458 7.583 8.833 7.208Q9.208 6.833 9.208 6.292Q9.208 5.75 8.833 5.375Q8.458 5 7.917 5Q7.375 5 7 5.375Q6.625 5.75 6.625 6.292Q6.625 6.833 7 7.208Q7.375 7.583 7.917 7.583ZM12.021 7.583Q12.562 7.583 12.938 7.208Q13.312 6.833 13.312 6.292Q13.312 5.75 12.938 5.375Q12.562 5 12.021 5Q11.479 5 11.104 5.375Q10.729 5.75 10.729 6.292Q10.729 6.833 11.104 7.208Q11.479 7.583 12.021 7.583ZM14.479 10.875Q15.021 10.875 15.396 10.5Q15.771 10.125 15.771 9.583Q15.771 9.042 15.396 8.667Q15.021 8.292 14.479 8.292Q13.938 8.292 13.562 8.667Q13.188 9.042 13.188 9.583Q13.188 10.125 13.562 10.5Q13.938 10.875 14.479 10.875Z"/></svg>',Er='<svg><path d="M9.188 16.542V14.938Q8.5 14.938 8.021 14.458Q7.542 13.979 7.542 13.292V12.458L3.583 8.5Q3.5 8.875 3.458 9.25Q3.417 9.625 3.417 10Q3.417 12.5 5.062 14.365Q6.708 16.229 9.188 16.542ZM14.854 14.438Q15.708 13.521 16.146 12.385Q16.583 11.25 16.583 10Q16.583 7.979 15.469 6.313Q14.354 4.646 12.479 3.917V4.229Q12.479 4.917 12 5.396Q11.521 5.875 10.833 5.875H9.188V7.521Q9.188 7.875 8.948 8.115Q8.708 8.354 8.354 8.354H6.708V10H11.646Q12 10 12.24 10.229Q12.479 10.458 12.479 10.812V13.292H13.292Q13.833 13.292 14.26 13.604Q14.688 13.917 14.854 14.438ZM10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.271 2.323 6.75Q2.979 5.229 4.104 4.104Q5.229 2.979 6.75 2.323Q8.271 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.729 17.677 13.25Q17.021 14.771 15.896 15.896Q14.771 17.021 13.25 17.677Q11.729 18.333 10 18.333Z"/></svg>',Rr='<svg><path d="M10 0.833Q11.771 0.833 12.99 2.052Q14.208 3.271 14.208 5.042V6.667H14.917Q15.646 6.667 16.156 7.177Q16.667 7.688 16.667 8.417V16.562Q16.667 17.292 16.156 17.812Q15.646 18.333 14.917 18.333H5.083Q4.354 18.333 3.844 17.812Q3.333 17.292 3.333 16.562V8.417Q3.333 7.688 3.844 7.177Q4.354 6.667 5.083 6.667H5.792V5.042Q5.792 3.271 7.01 2.052Q8.229 0.833 10 0.833ZM10 2.583Q8.979 2.583 8.26 3.302Q7.542 4.021 7.542 5.042V6.667H12.458V5.042Q12.458 4.021 11.74 3.302Q11.021 2.583 10 2.583ZM5.083 16.583H14.917Q14.917 16.583 14.917 16.583Q14.917 16.583 14.917 16.583V8.417Q14.917 8.417 14.917 8.417Q14.917 8.417 14.917 8.417H5.083Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583ZM10 10.812Q9.292 10.812 8.802 11.302Q8.312 11.792 8.312 12.5Q8.312 13.208 8.802 13.698Q9.292 14.188 10 14.188Q10.708 14.188 11.198 13.698Q11.688 13.208 11.688 12.5Q11.688 11.792 11.198 11.302Q10.708 10.812 10 10.812ZM5.083 8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583V8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417Z"/></svg>',jr='<svg><path d="M5.792 5.042Q5.792 3.271 7.01 2.052Q8.229 0.833 10 0.833Q11.771 0.833 12.99 2.052Q14.208 3.271 14.208 5.042V6.667H14.917Q15.646 6.667 16.156 7.177Q16.667 7.688 16.667 8.417V16.562Q16.667 17.292 16.156 17.812Q15.646 18.333 14.917 18.333H5.083Q4.354 18.333 3.844 17.812Q3.333 17.292 3.333 16.562V8.417Q3.333 7.688 3.844 7.177Q4.354 6.667 5.083 6.667H12.458V5.042Q12.458 4.021 11.74 3.302Q11.021 2.583 10 2.583Q8.979 2.583 8.26 3.302Q7.542 4.021 7.542 5.042ZM5.083 16.583H14.917Q14.917 16.583 14.917 16.583Q14.917 16.583 14.917 16.583V8.417Q14.917 8.417 14.917 8.417Q14.917 8.417 14.917 8.417H5.083Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583ZM10 10.812Q9.292 10.812 8.802 11.302Q8.312 11.792 8.312 12.5Q8.312 13.208 8.802 13.698Q9.292 14.188 10 14.188Q10.708 14.188 11.198 13.698Q11.688 13.208 11.688 12.5Q11.688 11.792 11.198 11.302Q10.708 10.812 10 10.812ZM5.083 8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417V16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583Q5.083 16.583 5.083 16.583V8.417Q5.083 8.417 5.083 8.417Q5.083 8.417 5.083 8.417Z"/></svg>',Vr='<svg><path d="M18.333 15.854 16.583 14.104V13.354H15.833L14.083 11.604H16.583V8.375H13.375V10.896L11.625 9.146V8.375H10.875L9.125 6.625H11.625V3.417H8.396V5.896L6.646 4.146V3.417H5.896L4.146 1.667H16.583Q17.312 1.667 17.823 2.177Q18.333 2.688 18.333 3.417ZM13.375 6.625H16.583V3.417Q16.583 3.417 16.583 3.417Q16.583 3.417 16.583 3.417H13.375ZM16.771 19.229 15.854 18.333H3.417Q2.688 18.333 2.177 17.823Q1.667 17.312 1.667 16.583V4.125L0.812 3.271L2.042 2.021L18 18ZM13.375 16.583H14.104L13.375 15.833ZM8.396 11.604H9.125L8.396 10.854ZM8.396 16.583H11.625V14.083L10.875 13.354H8.396ZM3.417 6.625H4.167L3.417 5.875ZM3.417 11.604H6.646V9.104L5.917 8.375H3.417ZM6.646 16.583V13.354H3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Z"/></svg>',It='<svg><path d="M7.521 17.5Q6.125 17.5 5.146 16.51Q4.167 15.521 4.167 14.125V7.417Q3.438 7.125 2.969 6.49Q2.5 5.854 2.5 5.042Q2.5 3.979 3.24 3.24Q3.979 2.5 5.042 2.5Q6.104 2.5 6.844 3.24Q7.583 3.979 7.583 5.042Q7.583 5.854 7.115 6.49Q6.646 7.125 5.917 7.417V14.125Q5.917 14.792 6.385 15.271Q6.854 15.75 7.521 15.75Q8.188 15.75 8.656 15.271Q9.125 14.792 9.125 14.125V5.875Q9.125 4.479 10.104 3.49Q11.083 2.5 12.479 2.5Q13.875 2.5 14.854 3.49Q15.833 4.479 15.833 5.875V12.583Q16.562 12.875 17.031 13.51Q17.5 14.146 17.5 14.958Q17.5 16.021 16.76 16.76Q16.021 17.5 14.958 17.5Q13.896 17.5 13.156 16.76Q12.417 16.021 12.417 14.958Q12.417 14.146 12.885 13.5Q13.354 12.854 14.083 12.583V5.875Q14.083 5.208 13.615 4.729Q13.146 4.25 12.479 4.25Q11.812 4.25 11.344 4.729Q10.875 5.208 10.875 5.875V14.125Q10.875 15.521 9.896 16.51Q8.917 17.5 7.521 17.5Z"/></svg>',Xn='<svg><path d="M5.833 15V3.333H10.375Q11.812 3.333 12.885 4.156Q13.958 4.979 13.958 6.375Q13.958 7.375 13.49 7.969Q13.021 8.562 12.396 8.875V9.042Q13.312 9.354 13.844 10.021Q14.375 10.688 14.375 11.75Q14.375 13.312 13.229 14.156Q12.083 15 10.5 15ZM8.125 8.042H10.188Q10.854 8.042 11.302 7.656Q11.75 7.271 11.75 6.708Q11.75 6.167 11.302 5.771Q10.854 5.375 10.188 5.375H8.125ZM8.125 12.917H10.354Q11.167 12.917 11.625 12.51Q12.083 12.104 12.083 11.458Q12.083 10.812 11.625 10.406Q11.167 10 10.354 10H8.125Z"/></svg>',Kn='<svg><path d="M4.167 16.667V14.083H6.979L10.229 5.917H7.5V3.333H15.833V5.917H13.021L9.771 14.083H12.5V16.667Z"/></svg>',Jn='<svg><path d="M3.021 16V15H17V16ZM3.021 13.5V12H17V13.5ZM3 10.5V8.5H16.979V10.5ZM3.021 7V4H17V7Z"/></svg>',Mr='<svg><path d="M3 16V14.5H4.5V16ZM6.125 16V14.5H7.625V16ZM9.25 16V14.5H10.75V16ZM12.375 16V14.5H13.875V16ZM15.5 16V14.5H17V16ZM3 13V11.5H6.5V13ZM8.25 13V11.5H11.75V13ZM13.5 13V11.5H17V13ZM3 10V8.5H9.25V10ZM10.75 10V8.5H17V10ZM3 7V4H17V7Z"/></svg>',Hr='<svg><path d="M5.312 14.979H7.125L8.042 12.479H11.979L12.896 14.979H14.708L10.917 5H9.083ZM8.542 10.958 9.958 6.958H10.042L11.458 10.958ZM3.417 18.333Q2.688 18.333 2.177 17.823Q1.667 17.312 1.667 16.583V3.417Q1.667 2.688 2.177 2.177Q2.688 1.667 3.417 1.667H16.583Q17.312 1.667 17.823 2.177Q18.333 2.688 18.333 3.417V16.583Q18.333 17.312 17.823 17.823Q17.312 18.333 16.583 18.333ZM3.417 16.583H16.583Q16.583 16.583 16.583 16.583Q16.583 16.583 16.583 16.583V3.417Q16.583 3.417 16.583 3.417Q16.583 3.417 16.583 3.417H3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583ZM3.417 3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417V16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583Q3.417 16.583 3.417 16.583V3.417Q3.417 3.417 3.417 3.417Q3.417 3.417 3.417 3.417Z"/></svg>',Nr='<svg><path d="M6 17 2 13 6 9 7.062 10.062 4.875 12.25H17V13.75H4.875L7.062 15.938ZM14 11 12.938 9.938 15.125 7.75H3V6.25H15.125L12.938 4.062L14 3L18 7Z"/></svg>',_r='<svg><path d="M2.5 15.833V14.083H7.667V15.833ZM2.5 5.917V4.167H10.771V5.917ZM9.208 17.5V12.438H10.958V14.083H17.5V15.833H10.958V17.5ZM5.917 12.542V10.875H2.5V9.125H5.917V7.479H7.667V12.542ZM9.208 10.875V9.125H17.5V10.875ZM12.333 7.562V2.5H14.083V4.167H17.5V5.917H14.083V7.562Z"/></svg>',et='<svg><path d="M16.354 18.833 14.521 17Q13.542 17.646 12.396 17.99Q11.25 18.333 10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.729 2.01 7.594Q2.354 6.458 3 5.458L1.167 3.625L2.396 2.396L17.583 17.604ZM10 16.583Q10.896 16.583 11.708 16.365Q12.521 16.146 13.25 15.729L4.292 6.75Q3.875 7.479 3.646 8.292Q3.417 9.104 3.417 10Q3.417 12.729 5.344 14.656Q7.271 16.583 10 16.583ZM17 14.562 15.708 13.271Q16.125 12.542 16.354 11.719Q16.583 10.896 16.583 10Q16.583 7.271 14.656 5.344Q12.729 3.417 10 3.417Q9.104 3.417 8.292 3.646Q7.479 3.875 6.75 4.292L5.458 3Q6.458 2.354 7.594 2.01Q8.729 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.271 17.979 12.417Q17.625 13.562 17 14.562ZM11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771Q11.229 8.771 11.229 8.771ZM8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Q8.771 11.229 8.771 11.229Z"/></svg>',nt='<svg ><path d="M16.354 18.833 14.521 17Q13.542 17.646 12.396 17.99Q11.25 18.333 10 18.333Q8.271 18.333 6.75 17.677Q5.229 17.021 4.104 15.896Q2.979 14.771 2.323 13.25Q1.667 11.729 1.667 10Q1.667 8.729 2.01 7.594Q2.354 6.458 3 5.458L1.167 3.625L2.396 2.396L17.583 17.604ZM17 14.562 5.458 3Q6.458 2.354 7.594 2.01Q8.729 1.667 10 1.667Q11.729 1.667 13.25 2.323Q14.771 2.979 15.896 4.104Q17.021 5.229 17.677 6.75Q18.333 8.271 18.333 10Q18.333 11.271 17.979 12.417Q17.625 13.562 17 14.562Z"/></svg>',X=["transparent","black","white","red","green","blue","yellow"],de=[0,1,2],Fr=[0,1,2,3],tt=[[1,0],[1,2],[4,6]],Or=["arial","serif","monospace"],_e="serif",Br=36,en={LOADING:2,PANEL:3,SNACKBAR:4},W="react-paint-",Zr={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:de,default:0}},Ur={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:de,default:0}},Wr={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:de,default:0}},zr={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"transparent"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:de,default:0}},Gr={opacity:{min:0,max:100,step:1,default:100}},$r={strokeColor:{values:X,default:"black"},opacity:{min:0,max:100,step:1,default:100},fontFamily:{values:Or,default:_e},fontBold:{values:[!1,!0],default:!1},fontItalic:{values:[!1,!0],default:!1}},Yr={strokeColor:{values:X,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:6,max:20,step:2,default:10},lineDash:{values:de,default:0}},Xr={strokeColor:{values:X,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:de,default:0},lineArrow:{values:Fr,default:0}},Kr={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:de,default:0},pointsCount:{min:3,max:10,step:1,default:3}},Jr={strokeColor:{values:X,default:"black"},fillColor:{values:X,default:"black"},opacity:{min:0,max:100,step:1,default:100},lineWidth:{min:1,max:20,step:1,default:1},lineDash:{values:de,default:0},pointsCount:{min:3,max:10,step:1,default:3}},Bn={type:"picture",id:`${W}picture`,icon:On,label:"Image",settings:Gr},At={type:"brush",id:`${W}brush`,icon:St,label:"Brosse",settings:Yr},Et={type:"line",id:`${W}line`,icon:Pt,label:"Ligne",settings:Xr},Rt={type:"polygon",id:`${W}polygon`,icon:Fn,label:"Polygone",settings:Kr},jt={type:"curve",id:`${W}curve`,icon:It,label:"Courbe",settings:Jr},Vt={type:"rect",id:`${W}rect`,icon:Ye,label:"Rectangle",settings:Zr},Mt={type:"square",id:`${W}square`,icon:Ye,label:"Carré",settings:Ur},Ht={type:"circle",id:`${W}circle`,icon:Xe,label:"Cercle",settings:Wr},Nt={type:"ellipse",id:`${W}ellipse`,icon:Xe,label:"Ellipse",settings:zr},_t={type:"text",id:`${W}text`,icon:Lt,label:"Texte",settings:$r},ea=[At,Et,Rt,jt,Vt,Mt,Ht,Nt,Bn,_t],le={id:`${W}selection`,type:"selection",icon:Dr,label:"Sélection"},ke={id:`${W}undo`,type:"undo",icon:kr,label:"Undo"},we={id:`${W}redo`,type:"redo",icon:wr,label:"Redo"},xe={id:`${W}clear`,type:"clear",icon:qr,label:"Clear"},wn={id:`${W}export`,type:"export",icon:Cr,label:"Export PNG"},rt={id:`${W}load`,type:"loadfile",icon:Sr,label:"Load project"},xn={id:`${W}save`,type:"savefile",icon:Qr,label:"Save project"},at={id:`${W}upload-picture`,type:"uploadpicture",icon:On,label:"Upload picture"},na=0,Ft=2,Ot="blue",B=14,Ln=16,Bt=[[0,0],[.5,0],[1,0],[1,.5],[1,1],[.5,1],[0,1],[0,.5]],Zt=["brush","rect","square","line","polygon","circle","curve","ellipse","picture","text","triangle"],Ut="react-paint-canvas-drawcanvas",Wt="react-paint-canvas-selectioncanvas",it={layersManipulation:!0,grid:0,canGrow:!1,canShrink:!0,withExport:!0,withLoadAndSave:!0,withUploadPicture:!0,withUrlPicture:!1,availableTools:ea,clearCallback:"empty",brushAlgo:"simple",isBrushShapeDoneOnMouseUp:!0,withFrameSelection:!1,withSkeleton:!0,canvasSelectionPadding:na},ta={canvasBackgroundColor:"white",canvasSelectionColor:Ot,canvasSelectionWidth:Ft},zt=(e,n)=>!(e.target instanceof Node)||!n?!1:n.contains(e.target),ra=({disabled:e,componentRef:n})=>{const[t,r]=m.useState(!1);return m.useEffect(()=>{if(e)r(!1);else{const a=i=>{r(zt(i,n.current))};return document.addEventListener("mousedown",a,{passive:!0}),document.addEventListener("touchstart",a,{passive:!0}),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}}},[e,n]),{isInsideComponent:t}},ue=300,Pn=(e,n)=>{const t={...n};for(const r of e)delete t[r];return t},Y=(e,n,t)=>{const r=Array.isArray(t)?[...t]:{...t},a=Array.isArray(e)?e:typeof e=="string"?e.split("."):[e];return a.reduce((i,s,o)=>(i[s]=In(i[s])?{...i[s]}:Array.isArray(i[s])?[...i[s]]:i[s]===void 0||i[s]===null?{}:i[s],o===a.length-1&&(i[s]=n),i[s]),r),r},In=e=>typeof e=="object"&&!Array.isArray(e)&&e!==null,se=(e,n,t)=>{if(!In(n)||!In(t))return t;const r={...n};for(const a in t)Object.hasOwn(t,a)&&(Object.hasOwn(r,a)?r[a]=e(r[a],t[a],a)??se(e,r[a],t[a]):r[a]=t[a]);return r},Gt=(e,n)=>{if(e===n)return!0;if(typeof e!="object"||typeof n!="object"||e===null||n===null)return!1;const t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(const a of t)if(!r.includes(a)||!Gt(e[a],n[a]))return!1;return!0},qn={},G=(e="")=>{qn[e]||(qn[e]=0);const n=++qn[e];return`${e}${n}`},Zn=e=>e.filter(n=>n!=null),$t=e=>{e.lineCap="round",e.lineJoin="round"},ye=(e,n={})=>{const{lineCap:t="round",fillColor:r="transparent",opacity:a=100,strokeColor:i=Ot,lineWidth:s=Ft,lineDash:o=0}=n;e.lineCap=t,e.globalAlpha=a/100,e.fillStyle=r,e.strokeStyle=i,e.lineWidth=s,e.setLineDash(o===0?[]:[tt[o][0]*s,tt[o][1]*s])},Un=(e,n,t,r)=>{e.save(),e.scale(n.canvasSize.scaleRatio,n.canvasSize.scaleRatio),e.translate(n.canvasOffset[0],n.canvasOffset[1]),t&&r&&(e.translate(r[0],r[1]),e.rotate(t),e.translate(-r[0],-r[1]))},Ke=e=>{const n=new Path2D;return n.rect(e.x,e.y,e.width,e.height),n},Je=e=>{const n=new Path2D;return n.arc(e.x,e.y,e.radius,0,2*Math.PI),n},aa=e=>{const n=new Path2D;return n.ellipse(e.x,e.y,e.radiusX,e.radiusY,0,0,2*Math.PI),n},An=e=>{const n=new Path2D;return n.moveTo(...e.points[0]),n.lineTo(...e.points[1]),n},ia=e=>{if(e.points.length<3)return;const n=new Path2D;n.moveTo(...e.points[0]);for(let t=1;t<e.points.length-1;t++)n.quadraticCurveTo(...e.points[t],e.points.length-2===t?e.points[t+1][0]:(e.points[t+1][0]-e.points[t][0])/2+e.points[t][0],e.points.length-2===t?e.points[t+1][1]:(e.points[t+1][1]-e.points[t][1])/2+e.points[t][1]);return n},sa=e=>{if(e.points.length<1)return;const n=new Path2D;n.moveTo(...e.points[0]);for(const t of e.points.slice(1))n.lineTo(...t);return n.lineTo(...e.points[0]),n},oa=e=>{const n=new Path2D;return n.moveTo(...e.points[0]),n.lineTo(...e.points[1]),n.lineTo(...e.points[2]),n.lineTo(...e.points[0]),n},Wn=(e,n,t,r=!1)=>{const{borders:a}=Z(n,t);return{border:Ke(a),shapePath:e,anchors:[...n.points.map((i,s)=>r&&s>0&&s<n.points.length-1?Ke({x:i[0]-B/2,y:i[1]-B/2,width:B/t.canvasSize.scaleRatio,height:B/t.canvasSize.scaleRatio}):Je({x:i[0],y:i[1],radius:B/2/t.canvasSize.scaleRatio}))]}},la=({ctx:e,shape:n,withAnchors:t,selectionWidth:r,selectionColor:a,settings:i})=>{if(n.selection&&(ye(e,{fillColor:"transparent",strokeColor:a,lineWidth:r/i.canvasSize.scaleRatio}),n.selection.shapePath&&e.stroke(n.selection.shapePath),!(!t||n.locked))){ye(e,{fillColor:"rgb(255,255,255)",strokeColor:"rgb(150,150,150)",lineWidth:2/i.canvasSize.scaleRatio});for(const s of n.selection.anchors)e.fill(s),e.stroke(s)}},Qn=18,ua=(e,{brushAlgo:n})=>{var u;if(e.points.length<1||((u=e.style)==null?void 0:u.strokeColor)==="transparent")return;const t=e.points.flat(),r=t.map(c=>c[0]),a=t.map(c=>c[1]),i=Math.min(...r),s=Math.min(...a),o=new Path2D;for(const c of e.points){if(!c.length)return;if(c.length===1)o.rect(...ie(c[0],i,s,e.scaleX,e.scaleY),1,1);else switch(o.moveTo(...ie(c[0],i,s,e.scaleX,e.scaleY)),n){case"quadratic":for(let d=0;d<c.slice(1).length-2;d++){const y=ie(c[d],i,s,e.scaleX,e.scaleY),w=ie(c[d+1],i,s,e.scaleX,e.scaleY),b=(y[0]+w[0])/2,p=(y[1]+w[1])/2;o.quadraticCurveTo(...y,b,p)}o.quadraticCurveTo(...ie(c[c.length-2],i,s,e.scaleX,e.scaleY),...ie(c[c.length-1],i,s,e.scaleX,e.scaleY));break;default:for(const d of c.slice(1))o.lineTo(...ie(d,i,s,e.scaleX,e.scaleY));break}}return o},Ce=(e,n)=>{const t=ua(e,n);return{...e,path:t,selection:Se(t,e,n)}},ca=Ce,da=(e,n,t)=>Ce({toolId:e.id,type:e.type,id:G(`${e.type}_`),points:[[n]],rotation:0,scaleX:1,scaleY:1,style:{opacity:e.settings.opacity.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default}},t),pa=(e,n)=>{var t;n.points.length<1||!n.path||e.globalAlpha!==0&&(((t=n.style)==null?void 0:t.strokeColor)==="transparent"||e.globalAlpha===0||e.stroke(n.path))},ma=(e,{selectionPadding:n})=>{const t=e.points.flat(),r=Math.min(...t.map(u=>u[0])),a=Math.min(...t.map(u=>u[1])),i=t.map(u=>ie(u,r,a,e.scaleX,e.scaleY)),s=Math.max(...i.map(u=>u[0]))+n,o=Math.max(...i.map(u=>u[1]))+n;return{x:r-n,width:s-r+n,y:a-n,height:o-a+n}},ya=(e,n,t,r)=>{const{borders:a}=Z(n,r),i=r.gridGap?j(a.x+e[0]-t[0],r)-a.x:e[0]-t[0],s=r.gridGap?j(a.y+e[1]-t[1],r)-a.y:e[1]-t[1];return Ce({...n,points:n.points.map(o=>o.map(([u,c])=>[u+i,c+s]))},r)},fa=(e,n,t,r,a)=>{const{borders:i}=Z({...n,scaleX:1,scaleY:1},r),{borders:s}=Z(n,r),{borderX:o,borderHeight:u,borderY:c,borderWidth:d}=De(e,n,t,r,a),y=Math.max(0,i.width-2*r.selectionPadding),w=Math.max(0,i.height-2*r.selectionPadding),b=Math.max(0,d-2*r.selectionPadding),p=Math.max(0,u-2*r.selectionPadding),k=y?b/y:1,f=w?p/w:1;if(!y||!w)return n;const v=ce(o-s.x),x=ce(c-s.y);return Ce({...n,points:n.points.map(q=>q.map(([Q,E])=>[Q+v,E+x])),scaleX:k,scaleY:f},r)},ga=(e,n,t)=>{const r={...e,points:Y(e.points.length-1,[...e.points[e.points.length-1],[Math.round(n[0]),Math.round(n[1])]],e.points)};return Ce(r,t)},va=(e,n,t)=>{const r={...e,points:Y(e.points.length,[[Math.round(n[0]),Math.round(n[1])]],e.points)};return Ce(r,t)},En=e=>e*180/Math.PI,ha=(e,n)=>n[0]>=e.x&&n[0]<=e.x+e.width&&n[1]>=e.y&&n[1]<=e.y+e.height,Yt=(e,n)=>{const t=n.x-Math.min(Math.max(n.x,e.x),e.x+e.width),r=n.y-Math.min(Math.max(n.y,e.y),e.y+e.height);return Math.sqrt(t*t+r*r)<=n.radius},ne=({origin:e=[0,0],point:n,rotation:t})=>{const r=[n[0]-e[0],n[1]-e[1]],a=r[1]*Math.cos(t)-r[0]*Math.sin(t);return[r[1]*Math.sin(t)+r[0]*Math.cos(t)+e[0],a+e[1]]},st=e=>(e+2*Math.PI)%(2*Math.PI),Xt=({targetVector:[e,n],radian:t=!0,originVector:r})=>{const a=st(Math.atan2(n[1]-e[1],n[0]-e[0]));if(r){const[i,s]=r,o=Math.atan2(s[1]-i[1],s[0]-i[0]),u=st(a-o);return t?u:En(u)}return t?a:En(a)},ce=(e,n=2)=>Math.round(e*10**n)/10**n,ie=(e,n,t,r=1,a=1)=>[n+(e[0]-n)*r,t+(e[1]-t)*a],j=(e,n,t=0)=>{if(!n.gridGap)return ce(e);const r=e+t,a=r>=0?n.gridGap:-n.gridGap;return r+a/2-(r+a/2)%a-t},ba=(e,n,t=0)=>n.gridGap?e+Math.PI/Qn/2-(e+Math.PI/Qn/2)%(Math.PI/Qn):ce(e,3),Ta=(e,n,t,r,a,i)=>{switch(r.mode){case"brush":return ga(n,t,a);case"translate":return Gn(t,r.originalShape,r.cursorStartPosition,a);case"rotate":return Li(n,t,r.originalShape,r.cursorStartPosition,r.center,a);case"resize":return Pi(e,n,t,r.originalShape,r,a,i);default:return n}},ka=(e,n,t,r,a=!1)=>{if(!e||!n||!r||!t)return[ue,ue];const i=e/n,s=t/r;if(i>s){const u=a?t:Math.min(e,t);return[u,u/i]}const o=a?r:Math.min(n,r);return[o*i,o]},wa=({line:e,size:n,direction:t})=>{const r=Math.PI/2-Xt({targetVector:[e.points[0],e.points[1]]}),a=[e.points[0][0]+(e.points[1][0]-e.points[0][0])/2,e.points[0][1]+(e.points[1][1]-e.points[0][1])/2];let i;if(["start","both"].includes(t)){const o=ne({point:e.points[0],origin:a,rotation:-r});i=ne({point:[o[0],o[1]+n],origin:a,rotation:r})}else i=[...e.points[0]];let s;if(["end","both"].includes(t)){const o=ne({point:e.points[1],origin:a,rotation:-r});s=ne({point:[o[0],o[1]-n],origin:a,rotation:r})}else s=[...e.points[1]];return{points:[i,s]}},Se=(e,n,t)=>{const{borders:r}=Z(n,t);return{border:Ke(r),shapePath:e,line:An({points:[[r.x+r.width/2,r.y],[r.x+r.width/2,r.y-(B/2+Ln)/t.canvasSize.scaleRatio]]}),anchors:[Je({x:r.x+r.width/2,y:r.y-(B/2+Ln)/t.canvasSize.scaleRatio,radius:B/2/t.canvasSize.scaleRatio}),...Bt.map(a=>Je({x:r.x+r.width*a[0],y:r.y+r.height*a[1],radius:B/2/t.canvasSize.scaleRatio}))]}},xa=(e,n,t,r,a,i)=>{if(n.selection&&(ye(e,{fillColor:"transparent",strokeColor:t,lineWidth:r/a.canvasSize.scaleRatio}),n.selection.shapePath?e.stroke(n.selection.shapePath):e.stroke(n.selection.border),!(!i||n.locked))){n.selection.shapePath&&e.stroke(n.selection.border),e.stroke(n.selection.line),ye(e,{fillColor:"rgb(255,255,255)",strokeColor:"rgb(150,150,150)",lineWidth:2/a.canvasSize.scaleRatio});for(const s of n.selection.anchors)e.fill(s),e.stroke(s)}},ot=({borderStart:e,borderSize:n,vector:t,settings:r,invertedAxe:a,anchor:i})=>{switch(i){case 0:{if(a){const o=n-2*r.selectionPadding;return[e+o,t-o]}const s=Math.max(2*r.selectionPadding,n-t);return[e+n-s,s]}case .5:return[e,n];case 1:if(a){const s=n+t;return[e+s,2*r.selectionPadding-s]}return[e,Math.max(2*r.selectionPadding,n+t)];default:return[0,0]}},qa=(e,n,t,r,a,i,s,o,u,c)=>{const{selectionPadding:d}=c,y=(n.width-d*2||1)/(n.height-d*2||1),w=(a-d*2)/(s-d*2);let b,p,k,f;return u.anchor[0]!==.5&&u.anchor[1]!==.5?w<y?(p=i,f=s,k=(s-d*2)*y+2*d,u.anchor[0]===0?b=n.width-e[0]>d?n.x+(n.width-k):n.x+n.width-2*d:b=n.width+e[0]>d?n.x:n.x-k+2*d):(b=r,k=a,f=(a-d*2)/y+2*d,u.anchor[1]===0?p=n.height-e[1]>d?n.y+(n.height-f):n.y+n.height-2*d:p=n.height+e[1]>d?n.y:n.y-f+2*d):u.anchor[0]!==.5?(b=r,k=a,f=(a-d*2)/y+2*d,p=n.y+(n.height-f)/2):(p=i,f=s,k=(s-d*2)*y+2*d,b=n.x+(n.width-k)/2),{borderX:b,borderWidth:k,borderY:p,borderHeight:f,center:t,originalShape:o}},lt=({borderX:e,borderWidth:n,borderY:t,borderHeight:r,center:a,originalShape:i})=>{const s=[e+n/2-a[0],t+r/2-a[1]],[o,u]=ne({point:s,rotation:-i.rotation});return{borderX:ce(e+o-s[0]),borderWidth:ce(n),borderY:ce(t+u-s[1]),borderHeight:ce(r)}},De=(e,n,t,r,a=!1)=>{const{center:i,borders:s}=Z(n,r),o=ne({origin:i,point:e,rotation:n.rotation}),u=t.anchor[0]===0&&o[0]>=s.x+s.width||t.anchor[0]===1&&o[0]<=s.x,c=t.anchor[1]===0&&o[1]>=s.y+s.height||t.anchor[1]===1&&o[1]<=s.y,d=[j(o[0],r,t.anchor[0]===0&&!u||t.anchor[0]===1&&u?r.selectionPadding:-r.selectionPadding),j(o[1],r,t.anchor[1]===0&&!c||t.anchor[1]===1&&c?r.selectionPadding:-r.selectionPadding)],y=r.gridGap?[t.anchor[0]===0?s.x:t.anchor[0]===.5?s.x+s.width/2:s.x+s.width,t.anchor[1]===0?s.y:t.anchor[1]===.5?s.y+s.height/2:s.y+s.height]:ne({origin:i,point:t.cursorStartPosition,rotation:n.rotation}),w=[d[0]-y[0],d[1]-y[1]],[b,p]=ot({borderStart:s.x,borderSize:s.width,vector:w[0],settings:r,invertedAxe:u,anchor:t.anchor[0]}),[k,f]=ot({borderStart:s.y,borderSize:s.height,vector:w[1],settings:r,invertedAxe:c,anchor:t.anchor[1]});if(a){const v=qa(w,s,i,b,p,k,f,n,t,r);return lt(v)}return lt({borderX:b,borderWidth:p,borderY:k,borderHeight:f,center:i,originalShape:n})},Qa=(e,n,t)=>{ye(e,{fillColor:"rgba(170,170,170, 0.1)",strokeColor:"rgb(170,170,170)",lineWidth:1/t.canvasSize.scaleRatio}),e.fillRect(n[0][0],n[0][1],n[1][0]-n[0][0],n[1][1]-n[0][1]),e.strokeRect(n[0][0],n[0][1],n[1][0]-n[0][0],n[1][1]-n[0][1])},nn=(e,n)=>{const t=Je(e);return{...e,path:t,selection:Se(t,e,n)}},Ca=nn,Sa=(e,n,t)=>nn({toolId:e.id,type:e.type,id:G(`${e.type}_`),x:n[0],y:n[1],radius:0,rotation:0,style:{opacity:e.settings.opacity.default,fillColor:e.settings.fillColor.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default}},t),Da=(e,n)=>{var t,r;e.globalAlpha===0||!n.path||(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},La=(e,n)=>({x:e.x-e.radius-n.selectionPadding,width:(e.radius+n.selectionPadding)*2,y:e.y-e.radius-n.selectionPadding,height:(e.radius+n.selectionPadding)*2}),Pa=(e,n,t,r)=>nn({...n,x:j(n.x+e[0]-t[0],r),y:j(n.y+e[1]-t[1],r)},r),Ia=(e,n,t,r)=>{const{borderX:a,borderHeight:i,borderY:s,borderWidth:o}=De(e,n,t,r,!0);return nn({...n,radius:Math.max(0,o/2-r.selectionPadding),x:a+o/2,y:s+i/2},r)},Rn=(e,n,t)=>{const{clientX:r=0,clientY:a=0}="touches"in e&&e.touches[0]?e.touches[0]:"changedTouches"in e&&e.changedTouches[0]?e.changedTouches[0]:"clientX"in e?e:{},i=(n==null?void 0:n.getBoundingClientRect())??{left:0,top:0,width:t.canvasSize.width,height:t.canvasSize.height};return[(r-i.left)*(t.canvasSize.width/i.width)/t.canvasSize.scaleRatio,(a-i.top)*(t.canvasSize.height/i.height)/t.canvasSize.scaleRatio]},Kt=e=>"touches"in e,fe=(e,n,[t,r],[a,i])=>ne({origin:[t-a,r-i],point:e,rotation:n}),Aa=(e,n,[t,r],[a,i])=>ne({origin:[t-a,r-i],point:e,rotation:-n}),ze=(e,n,t)=>t?Yt(e,{x:n[0],y:n[1],radius:t}):ha(e,n),Fe=(e,n,t,r=!1,a=0)=>{if(e.locked)return!1;const{canvasSize:{scaleRatio:i}}=t,{borders:s,center:o}=Z(e,t),u=fe(n,e.rotation,o,t.canvasOffset);if(r)if(e.type==="line"||e.type==="polygon"||e.type==="curve"){for(let c=0;c<e.points.length;c++)if(ze({x:e.points[c][0]-B/2/i,y:e.points[c][1]-B/2/i,width:B/i,height:B/i},u,a))return{mode:"resize",anchor:c}}else{if(ze({x:s.x+s.width/2-B/2/i,y:s.y-B/i-Ln/i,width:B/i,height:B/i},u,a))return{mode:"rotate"};for(const c of Bt)if(ze({x:s.x+s.width*c[0]-B/2/i,y:s.y+s.height*c[1]-B/2/i,width:B/i,height:B/i},u,a))return{mode:"resize",anchor:c}}return ze(s,u,a)?{mode:"translate"}:!1},Jt=(e,n,t,r)=>{var s,o,u;if(n.locked)return!1;const{center:a}=Z(n,r),i=fe(t,n.rotation,a,r.canvasOffset);return"path"in n&&n.path?((s=n.style)==null?void 0:s.fillColor)&&((o=n.style)==null?void 0:o.fillColor)!=="transparent"?e.isPointInPath(n.path,i[0],i[1])?{mode:"translate"}:!1:(e.lineWidth=(((u=n.style)==null?void 0:u.lineWidth)??0)+15,e.isPointInStroke(n.path,i[0],i[1])?{mode:"translate"}:!1):Fe(n,t,r,!1)};function ut(e,n){const t=Math.max(e.x,n.x),r=Math.max(e.y,n.y),a=Math.min(e.x+(e.width||1),n.x+(n.width||1)),i=Math.min(e.y+(e.height||1),n.y+(n.height||1));if(t<a&&r<i)return{x:t,y:r,width:a-t,height:i-r}}const ct=({ctx:e,path:n,rect:t,offset:r,checkFill:a})=>{for(let i=0;i<r;i+=r/2)for(let s=0;s<r;s+=r/2)for(let o=i+t.x;o<t.x+t.width;o+=r)for(let u=s+t.y;u<t.y+t.height;u+=r)if(a?e.isPointInPath(n,o,u):e.isPointInStroke(n,o,u))return!0;return!1},Cn=10,Ea=(e,n,t,r)=>{var v,x,q,Q;const{selectionPadding:a,canvasOffset:i}=r,{center:s,borders:o}=Z(n,r),u=fe(t[0],n.rotation,s,i),c=fe(t[1],n.rotation,s,i),d=Math.round(Math.min(u[0],c[0])-a/2),y=Math.round(Math.max(u[0],c[0])+a),w=Math.round(Math.min(u[1],c[1])-a/2),b=Math.round(Math.max(u[1],c[1])+a),p={x:d,y:w,width:y-d,height:b-w},k=ut(o,p);if(!k)return!1;if(o.width<=1||o.height<=1||!("path"in n&&n.path))return!0;if(e.lineWidth=(((v=n.style)==null?void 0:v.lineWidth)??0)+Cn,n.type==="brush"){const E=n.points.flat(),I=Math.min(...E.map(C=>C[0])),M=Math.min(...E.map(C=>C[1]));for(const C of n.points){if(C.length<1)break;if(C.length<2){const D=ie(C[0],I,M,n.scaleX,n.scaleY);if(Yt(k,{x:D[0],y:D[1],radius:(((x=n.style)==null?void 0:x.lineWidth)??1)/2}))return!0}for(let D=0;D<C.length-1;D++){const N=ie(C[D],I,M,n.scaleX,n.scaleY),V=ie(C[D+1],I,M,n.scaleX,n.scaleY),S=Math.min(N[0],V[0]),_=Math.min(N[1],V[1]),P=ut({x:S,y:_,width:Math.abs(N[0]-V[0]),height:Math.abs(N[1]-V[1])},p);if(P){const L=new Path2D;if(L.moveTo(...N),L.lineTo(...V),ct({ctx:e,path:L,rect:P,offset:Cn,checkFill:!1}))return!0}}}return!1}const f=!!((q=n.style)!=null&&q.fillColor&&((Q=n.style)==null?void 0:Q.fillColor)!=="transparent");return ct({ctx:e,path:n.path,rect:k,offset:Cn,checkFill:f})},qe=(e,n)=>{const t=sa(e);return{...e,path:t,selection:Wn(t,e,n)}},Ra=qe,ja=(e,n,t)=>qe({toolId:e.id,type:e.type,id:G(`${e.type}_`),points:new Array(e.settings.pointsCount.default).fill(n),rotation:0,style:{opacity:e.settings.opacity.default,fillColor:e.settings.fillColor.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default,pointsCount:e.settings.pointsCount.default}},t),Va=(e,n)=>{var t,r;n.path&&e.globalAlpha!==0&&(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},er=(e,n)=>{const t=Math.min(...e.points.map(s=>s[0]))-n.selectionPadding,r=Math.max(...e.points.map(s=>s[0]))+n.selectionPadding,a=Math.min(...e.points.map(s=>s[1]))-n.selectionPadding,i=Math.max(...e.points.map(s=>s[1]))+n.selectionPadding;return{x:t,width:r-t,y:a,height:i-a}},Ma=(e,n,t,r)=>{const{borders:a}=Z(n,r);return qe({...n,points:n.points.map(([i,s])=>r.gridGap?[i+j(a.x+e[0]-t[0],r)-a.x,s+j(a.y+e[1]-t[1],r)-a.y]:[j(i+e[0]-t[0],r),j(s+e[1]-t[1],r)])},r)},Ha=(e,n,t,r)=>{const a=[j(e[0],r),j(e[1],r)],{center:i}=Z(n,r),s=fe(a,n.rotation,i,r.canvasOffset),o=Y(["points",t.anchor],s,n);return qe(o,r)},Na=(e,n,t)=>{const r=e.points.length;if(r===n)return e;if(r>n){const o=e.points.slice(0,n);return qe({...e,points:o,style:{...e.style,pointsCount:o.length}},t)}const a=n-r,i=new Array(a).fill(void 0).map((o,u)=>[e.points[0][0]+(e.points[1][0]-e.points[0][0])*(u+1)/(a+1),e.points[0][1]+(e.points[1][1]-e.points[0][1])*(u+1)/(a+1)]),s=[e.points[0],...i,...e.points.slice(1,e.points.length)];return qe({...e,points:s,style:{...e.style,pointsCount:s.length}},t)},Qe=(e,n)=>{const t=ia(e);return{...e,path:t,selection:Wn(t,e,n,!0)}},_a=Qe,Fa=(e,n,t)=>Qe({toolId:e.id,type:e.type,id:G(`${e.type}_`),points:new Array(e.settings.pointsCount.default).fill(n),rotation:0,style:{opacity:e.settings.opacity.default,fillColor:e.settings.fillColor.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default,pointsCount:e.settings.pointsCount.default}},t),Oa=(e,n,t,r)=>{const a=[j(e[0],r),j(e[1],r)],{center:i}=Z(n,r),s=fe(a,n.rotation,i,r.canvasOffset),o=Y(["points",t.anchor],s,n);return Qe(o,r)},Ba=(e,n)=>{var t,r;n.path&&e.globalAlpha!==0&&(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},Za=er,Ua=(e,n,t,r)=>{const{borders:a}=Z(n,r);return Qe({...n,points:n.points.map(([i,s])=>r.gridGap?[i+j(a.x+e[0]-t[0],r)-a.x,s+j(a.y+e[1]-t[1],r)-a.y]:[j(i+e[0]-t[0],r),j(s+e[1]-t[1],r)])},r)},Wa=(e,n,t)=>{const r=e.points.length;if(r===n)return e;if(r>n){const o=e.points.slice(0,n);return Qe({...e,points:o,style:{...e.style,pointsCount:o.length}},t)}const a=n-r,i=new Array(a).fill(void 0).map((o,u)=>[e.points[0][0]+(e.points[1][0]-e.points[0][0])*(u+1)/(a+1),e.points[0][1]+(e.points[1][1]-e.points[0][1])*(u+1)/(a+1)]),s=[e.points[0],...i,...e.points.slice(1,e.points.length)];return Qe({...e,points:s,style:{...e.style,pointsCount:s.length}},t)},tn=(e,n)=>{const t=aa(e);return{...e,path:t,selection:Se(t,e,n)}},za=tn,Ga=(e,n,t)=>tn({toolId:e.id,type:e.type,id:G(`${e.type}_`),x:n[0],y:n[1],radiusX:0,radiusY:0,rotation:0,style:{opacity:e.settings.opacity.default,fillColor:e.settings.fillColor.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default}},t),$a=(e,n)=>{var t,r;e.globalAlpha===0||!n.path||(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},Ya=(e,n)=>({x:e.x-e.radiusX-n.selectionPadding,width:(e.radiusX+n.selectionPadding)*2,y:e.y-e.radiusY-n.selectionPadding,height:(e.radiusY+n.selectionPadding)*2}),Xa=(e,n,t,r)=>tn({...n,x:j(n.x+e[0]-t[0],r),y:j(n.y+e[1]-t[1],r)},r),Ka=(e,n,t,r,a=!1)=>{const{borderX:i,borderHeight:s,borderY:o,borderWidth:u}=De(e,n,t,r,a);return tn({...n,radiusX:Math.max(0,u/2-r.selectionPadding),radiusY:Math.max(0,s/2-r.selectionPadding),x:i+u/2,y:o+s/2},r)},Ja=e=>({...e,path:oa(e)}),dt=e=>{const n={...e,type:"triangle"};return Ja(n)},ei=(e,n)=>{var t,r;e.globalAlpha!==0&&n.path&&(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},rn=(e,n)=>{var a,i,s,o,u,c,d,y,w,b,p;const t=[];let r;if(((a=e.style)==null?void 0:a.lineArrow)===1||((i=e.style)==null?void 0:i.lineArrow)===2||((s=e.style)==null?void 0:s.lineArrow)===3){const k=Math.PI/2-Xt({targetVector:[e.points[0],e.points[1]]});(((o=e.style)==null?void 0:o.lineArrow)===1||((u=e.style)==null?void 0:u.lineArrow)===3)&&t.push(dt(pt(e.points[0],k,e.style))),(((c=e.style)==null?void 0:c.lineArrow)===2||((d=e.style)==null?void 0:d.lineArrow)===3)&&t.push(dt(pt(e.points[1],k+Math.PI,e.style)));const f=10+(((y=e.style)==null?void 0:y.lineWidth)??0)*2,v=wa({line:e,size:f,direction:((w=e.style)==null?void 0:w.lineArrow)===1?"start":((b=e.style)==null?void 0:b.lineArrow)===2?"end":"both"});r=An(v)}else r=An(e);return{...e,path:r,selection:Wn(r,e,n),arrows:t,style:{...e.style,lineCap:(p=e.style)!=null&&p.lineArrow?"butt":"round"}}},ni=rn,ti=(e,n,t)=>{const r={toolId:e.id,type:e.type,id:G(`${e.type}_`),points:[n,n],rotation:0,style:{opacity:e.settings.opacity.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default,lineArrow:e.settings.lineArrow.default}};return rn(r,t)},pt=(e,n,t)=>{const r=[ne({point:[0,0],rotation:n}),ne({point:[-(5+(t.lineWidth??0)),10+(t.lineWidth??0)*2],rotation:n}),ne({point:[5+(t.lineWidth??0),10+(t.lineWidth??0)*2],rotation:n})];return{points:[[e[0]+r[0][0],e[1]+r[0][1]],[e[0]+r[1][0],e[1]+r[1][1]],[e[0]+r[2][0],e[1]+r[2][1]]],style:{...t,fillColor:t.strokeColor,strokeColor:"transparent"}}},ri=(e,n)=>{var t,r;if(!(e.globalAlpha===0||!n.path)){((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path);for(const a of n.arrows??[])ye(e,a.style),ei(e,a)}},ai=(e,n)=>{const t=Math.min(e.points[0][0],e.points[1][0])-n.selectionPadding,r=Math.abs(e.points[0][0]-e.points[1][0])+n.selectionPadding*2,a=Math.min(e.points[0][1],e.points[1][1])-n.selectionPadding,i=Math.abs(e.points[0][1]-e.points[1][1])+n.selectionPadding*2;return{x:t,width:r,y:a,height:i}},ii=(e,n,t,r)=>rn({...n,points:n.points.map(([a,i])=>[j(a+e[0]-t[0],r),j(i+e[1]-t[1],r)])},r),si=(e,n,t,r)=>{const a=[j(e[0],r),j(e[1],r)],{center:i}=Z(n,r),s=fe(a,n.rotation,i,r.canvasOffset),o=Y(["points",t.anchor],s,n);return rn(o,r)},an=(e,n)=>{const t=Ke(e);return{...e,path:t,selection:Se(t,e,n)}},oi=an,li=(e,n,t,r=0,a=0)=>{const i={toolId:e.id,type:e.type,id:G(`${e.type}_`),x:n[0],y:n[1],width:r,height:a,rotation:0,style:{opacity:e.settings.opacity.default,fillColor:e.settings.fillColor.default,strokeColor:e.settings.strokeColor.default,lineWidth:e.settings.lineWidth.default,lineDash:e.settings.lineDash.default}};return an(i,t)},mt=(e,n)=>{var t,r;e.globalAlpha===0||!n.path||(((t=n.style)==null?void 0:t.fillColor)!=="transparent"&&e.fill(n.path),((r=n.style)==null?void 0:r.strokeColor)!=="transparent"&&e.stroke(n.path))},nr=(e,n)=>({x:e.x-n.selectionPadding,width:e.width+n.selectionPadding*2,y:e.y-n.selectionPadding,height:e.height+n.selectionPadding*2}),yt=(e,n,t,r,[a,i]=[!1,!1])=>{const s=e[0]===.5?t.x+t.width/2:e[0]===0?t.x+(a?0:t.width):t.x+(a?t.width:0),o=e[1]===.5?t.y+t.height/2:e[1]===0?t.y+(i?0:t.height):t.y+(i?t.height:0);return Aa([s,o],t.rotation,n,r.canvasOffset)},ui=(e,n,t,r)=>an({...n,x:j(n.x+e[0]-t[0],r),y:j(n.y+e[1]-t[1],r)},r),ci=(e,n,t,r,a=!1)=>{const{borderX:i,borderHeight:s,borderY:o,borderWidth:u}=De(e,n,t,r,a);return an({...n,width:Math.max(0,u-2*r.selectionPadding),height:Math.max(0,s-2*r.selectionPadding),x:i+r.selectionPadding,y:o+r.selectionPadding},r)},sn=(e,n)=>({...e,selection:Se(void 0,e,n)}),di=sn,jn=(e,n,t,r,a)=>{const[i,s]=ka(e.width,e.height,t,r,!0);return sn({toolId:Bn.id,type:"picture",id:G("picture_"),x:(t-i)/2,y:(r-s)/2,width:i,height:s,src:n,img:e,rotation:0},a)},pi=(e,n,t,r,a,i)=>{ar(t)?t.text().then(s=>{const o=rr(s);e.onload=async()=>{URL.revokeObjectURL(e.src);const u=jn(e,s,r,a,i);n(u)},e.src=o}):(e.onload=async()=>{URL.revokeObjectURL(e.src);const s=jn(e,e.src,r,a,i);n(s)},e.src=URL.createObjectURL(t))},mi=(e,n,t,r,a,i)=>{e.onload=()=>{URL.revokeObjectURL(e.src);const s=jn(e,t,r,a,i);n(s)},ir(t).then(s=>{e.src=s}).catch(()=>{e.src=""})},yi=(e,n,t,r)=>new Promise((a,i)=>{const s=new Image;s.onerror=()=>{i(new Error("Some images could not be loaded"))},setTimeout(()=>{i(new Error("Timeout while loading images"))},4e3),e instanceof File?pi(s,a,e,n,t,r):mi(s,a,e,n,t,r)}),fi=(e,n)=>{e.globalAlpha!==0&&(e.beginPath(),e.drawImage(n.img,n.x,n.y,n.width,n.height))},gi=(e,n)=>nr(e,n),vi=(e,n,t,r)=>sn({...n,x:j(n.x+e[0]-t[0],r),y:j(n.y+e[1]-t[1],r)},r),hi=(e,n,t,r,a)=>{const{borderX:i,borderHeight:s,borderY:o,borderWidth:u}=De(e,n,t,r,!0);return sn({...n,width:Math.max(0,u-2*r.selectionPadding),height:Math.max(0,s-2*r.selectionPadding),x:i+r.selectionPadding,y:o+r.selectionPadding},r)},Sn=["Texte"],on=(e,n)=>({...e,selection:Se(void 0,e,n)}),bi=on,zn=(e,n,t,r,a,i=_e)=>{e.font=`${a?"italic":""} ${r?"bold":""} 1px ${i}`;const s=n.map(o=>t/e.measureText(o).width);return Math.min(...s)||Br},Ti=(e,n,t,r)=>{var i,s;const a=zn(e,Sn,50,((i=n.settings)==null?void 0:i.fontBold.default)??!1,((s=n.settings)==null?void 0:s.fontItalic.default)??!1,n.settings.fontFamily.default);return on({toolId:n.id,type:n.type,id:G(`${n.type}_`),x:t[0],y:t[1],value:Sn,fontSize:a,width:50,height:a*(Sn.length||1),rotation:0,style:{opacity:n.settings.opacity.default,strokeColor:n.settings.strokeColor.default,fontFamily:n.settings.fontFamily.default,fontItalic:n.settings.fontItalic.default,fontBold:n.settings.fontBold.default}},r)},ki=(e,n)=>{var t,r,a,i;if(!(e.globalAlpha===0||!((t=n.style)!=null&&t.strokeColor)||n.style.strokeColor==="transparent")){e.font=`${(r=n.style)!=null&&r.fontItalic?"italic":""} ${(a=n.style)!=null&&a.fontBold?"bold":""} ${n.fontSize}px ${((i=n.style)==null?void 0:i.fontFamily)??_e}`,e.textBaseline="top",e.fillStyle=n.style.strokeColor;for(let s=0;s<n.value.length;s++)e.fillText(n.value[s],n.x,n.y+s*n.fontSize,n.width)}},wi=(e,n)=>({x:e.x-n.selectionPadding,width:e.width+n.selectionPadding*2,y:e.y-n.selectionPadding,height:e.height+n.selectionPadding*2}),xi=(e,n,t,r)=>on({...n,x:j(n.x+e[0]-t[0],r),y:j(n.y+e[1]-t[1],r)},r),qi=(e,n,t,r,a)=>{var d,y,w;const{borderX:i,borderHeight:s,borderY:o,borderWidth:u}=De(n,t,r,a,!0),c=on({...t,width:Math.max(0,u-2*a.selectionPadding),height:Math.max(0,s-2*a.selectionPadding),x:i+a.selectionPadding,y:o+a.selectionPadding},a);return{...c,fontSize:zn(e,c.value,c.width,((d=c.style)==null?void 0:d.fontBold)??!1,((y=c.style)==null?void 0:y.fontItalic)??!1,(w=c.style)==null?void 0:w.fontFamily)}},Qi=(e,n,t,r,a,i=_e)=>{e.font=`${a?"italic":""} ${r?"bold":""} ${t}px ${i}`;const s=n.map(o=>e.measureText(o).width);return Math.max(...s)||20},Ci=(e,n,t,r)=>{var p,k,f;const a={...n,value:t},i=Qi(e,a.value,a.fontSize,((p=a.style)==null?void 0:p.fontBold)??!1,((k=a.style)==null?void 0:k.fontItalic)??!1,(f=a.style)==null?void 0:f.fontFamily),s=a.fontSize*a.value.length,o={...a,width:i,height:s},{center:u}=Z(n,r),{center:c}=Z(o,r),[d,y]=yt([1,1],u,n,r),[w,b]=yt([1,1],c,o,r,[!1,!1]);return{...o,x:o.x-(w-d),y:o.y-(b-y)}},ft=(e,n,t,r)=>{const a=[j(t[0],r),j(t[1],r)];switch(n.type){case"brush":return da(n,a,r);case"line":return ti(n,a,r);case"polygon":return ja(n,a,r);case"curve":return Fa(n,a,r);case"rect":case"square":return li(n,a,r);case"text":return Ti(e,n,a,r);case"ellipse":return Ga(n,a,r);case"circle":return Sa(n,a,r)}},tr=(e,n,t)=>{if(n.visible===!1)return;const{center:r}=Z(n,t);switch(Un(e,t,n.rotation,r),ye(e,n.style),n.type){case"brush":pa(e,n);break;case"text":ki(e,n);break;case"line":ri(e,n);break;case"polygon":Va(e,n);break;case"curve":Ba(e,n);break;case"circle":Da(e,n);break;case"ellipse":$a(e,n);break;case"rect":mt(e,n);break;case"square":mt(e,n);break;case"picture":fi(e,n);break}e.restore()},Si=(e,n)=>{switch(e.type){case"brush":return ma(e,n);case"line":return ai(e,n);case"polygon":return er(e,n);case"curve":return Za(e,n);case"circle":return La(e,n);case"ellipse":return Ya(e,n);case"rect":case"square":return nr(e,n);case"text":return wi(e,n);case"picture":return gi(e,n);default:return{x:0,y:0,width:100,height:100}}},Di=e=>[e.x+e.width/2,e.y+e.height/2],Z=(e,n)=>{const t=Si(e,n),r=Di(t);return{borders:t,center:r}},Li=(e,n,t,r,a,i)=>{const s=a[0]-r[0],o=a[1]-r[1],u=a[0]-n[0],c=a[1]-n[1],d=t.rotation+Math.atan2(c,u)-Math.atan2(o,s);return{...e,rotation:ba(d,i)}},Pi=(e,n,t,r,a,i,s)=>{switch(r.type){case"line":return si(t,r,a,i);case"polygon":return Ha(t,r,a,i);case"curve":return Oa(t,r,a,i);case"brush":return fa(t,r,a,i,s);case"circle":return Ia(t,r,a,i);case"ellipse":return Ka(t,r,a,i,s);case"rect":case"square":return ci(t,r,a,i,n.type==="square"||s);case"text":return qi(e,t,r,a,i);case"picture":return hi(t,r,a,i);default:return r}},Gn=(e,n,t,r)=>{switch(n.type){case"rect":case"square":return ui(e,n,t,r);case"ellipse":return Xa(e,n,t,r);case"circle":return Pa(e,n,t,r);case"picture":return vi(e,n,t,r);case"text":return xi(e,n,t,r);case"line":return ii(e,n,t,r);case"polygon":return Ma(e,n,t,r);case"curve":return Ua(e,n,t,r);case"brush":return ya(e,n,t,r);default:return n}},Ne=(e,n)=>{switch(e.type){case"rect":case"square":return oi(e,n);case"ellipse":return za(e,n);case"circle":return Ca(e,n);case"picture":return di(e,n);case"text":return bi(e,n);case"line":return ni(e,n);case"polygon":return Ra(e,n);case"curve":return _a(e,n);case"brush":return ca(e,n);default:return e}},gt=({ctx:e,shape:n,settings:t,selectionWidth:r,selectionColor:a,withAnchors:i=!0})=>{const{center:s}=Z(n,t);switch(Un(e,t,n.rotation,s),n.type){case"rect":case"square":case"circle":case"ellipse":case"picture":case"text":case"brush":xa(e,n,a,r,t,i);break;case"polygon":case"line":case"curve":la({ctx:e,shape:n,withAnchors:i,selectionWidth:r,selectionColor:a,settings:t});break}e.restore()},Ii=({ctx:e,selectionFrame:n,settings:t})=>{Un(e,t),Qa(e,n,t),e.restore()},Ai=(e,n)=>({...Gn([20,20],e,[0,0],n),id:G(`${e.type}_`)}),rr=e=>{const r=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("svg")[0],a=r.getAttribute("width"),i=r.getAttribute("height");let s;if(a||i)s=e;else{const u=r.getAttribute("viewBox")??`0 0 ${ue} ${ue}`,[,,c,d]=u.split(" ");r.setAttribute("width",c??ue),r.setAttribute("height",d??ue),s=new XMLSerializer().serializeToString(r)}const o=new Blob([s],{type:"image/svg+xml"});return URL.createObjectURL(o)},ar=e=>(e instanceof File?e.name:e).includes(".svg"),ir=e=>ar(e)?fetch(e).then(n=>n.text()).then(n=>rr(n)):fetch(e).then(n=>n.blob()).then(n=>URL.createObjectURL(n)),vt=(e,n)=>{const t=document.createElement("a");t.href=e,t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t)},Ei=e=>{const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const t=n.getContext("2d");return t?(t.drawImage(e,0,0),n.toDataURL("image/png")):""},Ri=e=>e.src.includes("<svg")?e.src:Ei(e.img),ji=e=>`data:text/plain;charset=utf-8,${encodeURIComponent(JSON.stringify(e))}`,ht=(e,n,t,r)=>{const a=document.createElement("canvas");a.width=n,a.height=t;const i=a.getContext("2d");if(!i)return"";i.clearRect(0,0,n,t),$t(i);for(let s=e.length-1;s>=0;s--)tr(i,e[s],Y(["canvasSize","scaleRatio"],1,r));return a.toDataURL("image/png")},Vi=(e,n,t)=>{const r=$n(e,n,t);return ji(r)},Mi=async e=>new Promise((n,t)=>{const r=new FileReader;r.onload=a=>{var o;const i=(o=a.target)==null?void 0:o.result;if(!i)return t("Impossible de récupérer les données du fichier");const s=JSON.parse(i);n(s)},r.readAsText(e)}),Hi=async(e,n)=>{if(!e)return[];const t=[],r=Zn(e.map(a=>{if(!a||!Zt.includes(a.type))return null;if(a.type==="picture"){const i=new Image,s=new Promise((o,u)=>{i.onload=()=>{URL.revokeObjectURL(i.src),o()},i.onerror=()=>{u(new Error("Some images could not be loaded"))}});if(t.push(s),a.src.startsWith("http"))ir(a.src).then(o=>{i.src=o}).catch(()=>{i.src=""});else if(a.src.includes("<svg")){const o=new Blob([a.src],{type:"image/svg+xml"});i.src=URL.createObjectURL(o)}else i.src=a.src;return bt({...a,img:i},n)}return bt(a,n)}));return await Promise.all(t),r},Ni=e=>{const n=["img","id","selection","path","arrows"];return e.map(t=>t.type==="picture"&&!t.src.startsWith("http")?Pn(n,{...t,src:Ri(t)}):Pn(n,t))},$n=(e,n,t)=>({shapes:Ni(e),config:{width:n,height:t}}),bt=(e,n)=>Ne({...e,id:G(`${e.type}_`)},n),_i=e=>{const n=m.useRef([]),t=m.useRef({dataChanged:[]}),[r,a]=m.useState(void 0),[i,s]=m.useState(void 0),[o,u]=m.useState(void 0),[c,d]=m.useState({states:[{shapes:[],selectedShape:void 0,source:"user"}],cursor:0}),y=c.cursor>0,w=c.cursor<c.states.length-1,b=n.current.length>0,p=m.useCallback(()=>{d(T=>Gt(T.states[T.cursor].shapes,n.current)?T:{states:[...T.states.slice(0,T.cursor+1),{shapes:n.current,selectedShape:i,source:"user"}],cursor:T.cursor+1})},[i]),k=m.useCallback(T=>{n.current=[T,...n.current]},[]),f=m.useCallback((T,g,h)=>{if(T.target&&"className"in T.target&&![Ut,Wt].includes(T.target.className)){u(void 0);return}const R=n.current.find(A=>A.id===(i==null?void 0:i.id)?!!Fe(i,h,e):!!Jt(g,A,h,e));u(R)},[e,i]),v=m.useCallback(async(T,g=ue,h=ue)=>{const R=await yi(T,g,h,e);return k(R),p(),R},[k,p,e]),x=m.useCallback((T,g=!1)=>{n.current=n.current.map(h=>h.id===(i==null?void 0:i.id)?T:h),s(h=>(h==null?void 0:h.id)===T.id?T:h),g&&p()},[i,p]),q=m.useCallback(T=>{const g=T.map(h=>Pn(["chosen"],h));n.current=g,p()},[p]),Q=m.useCallback(T=>{s(g=>(g==null?void 0:g.id)===T.id?void 0:g),n.current=n.current.filter(g=>g.id!==T.id),p()},[p]),E=m.useCallback(T=>{d(g=>{const h=T(g);return n.current=g.states[h].shapes,s(g.states[h].selectedShape),Y("cursor",h,g)})},[]),I=m.useCallback(()=>{E(T=>Math.max(0,T.cursor-1))},[E]),M=m.useCallback(()=>{E(T=>Math.min(T.states.length-1,T.cursor+1))},[E]),C=m.useCallback((T,g)=>{s(void 0),n.current=T,d(h=>g.clearHistory?{states:[{shapes:T,selectedShape:void 0,source:g.source}],cursor:0}:{states:[...h.states.slice(0,h.cursor+1),{shapes:T,selectedShape:void 0,source:g.source}],cursor:h.cursor+1})},[]),D=m.useCallback((T,g)=>{const h=n.current,R=h.findIndex($=>$.id===T),A=h.findIndex($=>$.id===g);R<A?q([...h.slice(0,R),...h.slice(R+1,A+1),h[R],...h.slice(A+1,h.length)]):q([...h.slice(0,A),h[R],...h.slice(A,R),...h.slice(R+1,h.length)])},[q]),N=m.useCallback(T=>{const g=n.current,h=g.findIndex(A=>A.id===T.id);if(h<0)return;const R=Y("visible",T.visible===!1,T);s(A=>(A==null?void 0:A.id)===R.id?R:A),q(Y(h,R,g))},[q]),V=m.useCallback(T=>{const g=n.current,h=g.findIndex(A=>A.id===T.id);if(h<0)return;const R=Y("locked",!T.locked,T);s(A=>(A==null?void 0:A.id)===R.id?R:A),q(Y(h,R,g))},[q]),S=m.useCallback((T,g)=>{Object.hasOwn(t.current,T)&&(t.current[T]=[...t.current[T],g])},[]),_=m.useCallback((T,g)=>{if(Object.hasOwn(t.current,T))if(g){const h=t.current[T].findIndex(R=>R===g);t.current[T]=[...t.current[T].slice(0,h),...t.current[T].slice(h+1)]}else t.current[T]=[]},[]),{canvasSize:{width:P,height:L}}=e;m.useEffect(()=>{const T=c.states[c.cursor],g=$n(T.shapes,P,L);for(const h of t.current.dataChanged)h(g,T.source)},[P,L,c]),m.useEffect(()=>{n.current=n.current.map(T=>Ne(T,e)),s(T=>T===void 0?void 0:n.current.find(g=>g.id===T.id))},[e]);const H=m.useCallback((T,g)=>{a(h=>{const R=[(h==null?void 0:h[0])??[g[0],g[1]],[g[0],g[1]]],A=n.current.filter($=>Ea(T,$,R,e));return s(A==null?void 0:A[0]),R})},[e]);return{registerEvent:S,unregisterEvent:_,shapesRef:n,selectedShape:i,hoveredShape:o,selectionFrame:r,setSelectionFrame:a,refreshSelectedShapes:H,addShape:k,addPictureShape:v,moveShapes:D,saveShapes:p,setSelectedShape:s,refreshHoveredShape:f,toggleShapeVisibility:N,toggleShapeLock:V,removeShape:Q,updateShape:x,backwardShape:I,forwardShape:M,clearShapes:C,canGoBackward:y,canGoForward:w,canClear:b}},Tt=(e,n=!1)=>{const t=(a,i)=>{if(Array.isArray(a))return i},r=e.map(a=>{if(typeof a!="object")return null;switch(a.type){case"brush":return se(t,At,a);case"circle":return se(t,Ht,a);case"curve":return se(t,jt,a);case"ellipse":return se(t,Nt,a);case"line":return se(t,Et,a);case"polygon":return se(t,Rt,a);case"rect":return se(t,Vt,a);case"square":return se(t,Mt,a);case"text":return se(t,_t,a)}return null});return Zn(n?[...r,Bn]:r)},ms=({width:e=1e3,height:n=600,shapes:t,mode:r="editor",disabled:a=!1,options:i=it})=>{const{layersManipulation:s,brushAlgo:o,isBrushShapeDoneOnMouseUp:u,grid:c,canGrow:d,canShrink:y,withExport:w,withLoadAndSave:b,withUploadPicture:p,withUrlPicture:k,withSkeleton:f,withFrameSelection:v,clearCallback:x,availableTools:q,canvasSelectionPadding:Q}={...it,...i},E=r!=="viewer",I=a||!E,M=m.useRef(null),C=m.useRef(null),D=m.useRef(!1),N=m.useCallback(U=>{M.current=U},[]),[V,S]=m.useState(le),[_,P]=m.useState(c),[L,H]=m.useState({width:e,height:n,scaleRatio:1}),[T,g]=m.useState([0,0]),h=m.useMemo(()=>({brushAlgo:o,isBrushShapeDoneOnMouseUp:u,canvasSize:L,canvasOffset:T,gridGap:_,selectionPadding:Q}),[Q,_,o,u,T,L]),[R,A]=m.useState(Tt(q,p||k)),{isInsideComponent:$}=ra({disabled:I,componentRef:M}),{registerEvent:Le,unregisterEvent:Pe,shapesRef:J,selectedShape:ve,selectionFrame:Ie,hoveredShape:Ae,addShape:Ee,addPictureShape:Re,moveShapes:oe,setSelectedShape:te,setSelectionFrame:cn,refreshSelectedShapes:dn,refreshHoveredShape:pn,removeShape:Oe,updateShape:Be,backwardShape:Ze,forwardShape:ee,clearShapes:je,saveShapes:mn,toggleShapeVisibility:yn,toggleShapeLock:fn,canGoBackward:gn,canGoForward:ae,canClear:vn}=_i(h),Ve=m.useCallback(U=>{te(void 0),S(U)},[te]),he=m.useCallback((U,me)=>{je(U,me),Ve(le),g([0,0])},[Ve,je]),Ue=m.useCallback(U=>{S(le),te(U)},[te]),hn=m.useCallback(()=>{const U=Vi(J.current,e,n);if(!U)throw new Error("L'encodage a échoué");vt(U,"drawing.json")},[J,e,n]),bn=m.useCallback(()=>{const U=ht(J.current,e,n,h);if(!U)throw new Error;vt(U,"drawing.png")},[J,e,n,h]),Tn=()=>C.current?ht(J.current,e,n,h):void 0,kn=()=>$n(J.current,e,n);m.useEffect(()=>{$||te(void 0)},[$,te]);const F=m.useCallback(async(U,me)=>{const br=await Hi(U,h);he(br,me)},[he,h]),re=m.useCallback((U=[],me=!0)=>{F(U,{clearHistory:me,source:"remote"})},[F]);D.current||(D.current=!0,t&&F(t,{clearHistory:!0,source:"remote"}));const We=m.useCallback(async U=>{const me=await Mi(U);await F(me.shapes??[],{clearHistory:!0,source:"remote"})},[F]),pe=m.useCallback(()=>{typeof x!="string"?F(x(),{clearHistory:!1,source:"user"}):x==="defaultShapes"&&t!==void 0?F(t,{clearHistory:!1,source:"user"}):he([],{clearHistory:!1,source:"user"})},[he,F,t,x]);m.useEffect(()=>{A(Tt(q,p||k))},[q,p,k]);const be={canvas:C,editor:M,setEditor:N};return{editorProps:{shapesRef:J,addPictureShape:Re,moveShapes:oe,toggleShapeVisibility:yn,toggleShapeLock:fn,canGoBackward:gn,canGoForward:ae,canClear:vn,selectedShape:ve,removeShape:Oe,updateShape:Be,backwardShape:Ze,forwardShape:ee,refs:be,width:e,height:n,canvasSize:L,selectTool:Ve,selectShape:Ue,activeTool:V,setActiveTool:S,setAvailableTools:A,isEditMode:E,isDisabled:I,availableTools:R,gridGap:_,setGridGap:P,loadFile:We,exportPicture:bn,exportData:hn,clearCanvas:pe,settings:h,canvas:{canGrow:d,canShrink:y,layersManipulation:s,withExport:w,withLoadAndSave:b,withUploadPicture:p,withUrlPicture:k}},canvasProps:{shapesRef:J,selectedShape:ve,selectionFrame:Ie,hoveredShape:Ae,addShape:Ee,setSelectedShape:te,setSelectionFrame:cn,refreshSelectedShapes:dn,refreshHoveredShape:pn,removeShape:Oe,updateShape:Be,backwardShape:Ze,forwardShape:ee,saveShapes:mn,refs:be,width:e,height:n,settings:h,canvasSize:L,setCanvasSize:H,setCanvasOffset:g,selectShape:Ue,activeTool:V,setActiveTool:S,isInsideComponent:$,isEditMode:E,isDisabled:I,canvas:{withSkeleton:f,withFrameSelection:v,canGrow:d,canShrink:y}},registerEvent:Le,unregisterEvent:Pe,resetCanvas:re,getCurrentImage:Tn,getCurrentData:kn}},Fi=300,Oi=()=>{const e=m.useRef(void 0),n=m.useRef(void 0),t=i=>{var o;const s=new Date().getTime();e.current&&s<e.current+Fi&&((o=n.current)==null||o.call(n,i)),e.current=new Date().getTime()};return{registerDoubleClickEvent:(i,s)=>{n.current=s,i.addEventListener("click",t),i.addEventListener("touchend",t)},unRegisterDoubleClickEvent:i=>{i.removeEventListener("click",t),i.removeEventListener("touchend",t)}}},Bi=(e,n,t,r)=>{if(e.mode==="translate")return{mode:"translate",cursorStartPosition:t,originalShape:n};if(e.mode==="rotate"){const{center:a}=Z(n,r),i=[a[0],a[1]];return{mode:"rotate",cursorStartPosition:t,originalShape:n,center:i}}if(e.mode==="resize")return{mode:"resize",cursorStartPosition:t,originalShape:n,anchor:e.anchor}},Zi=(e,n,t,r,a,i,s)=>{let o=!1;if(a){o=Fe(a,t,r,!0,i?20:void 0);const c=Bi(o||{mode:"default"},a,t,r);if((c==null?void 0:c.mode)==="resize"||(c==null?void 0:c.mode)==="rotate")return{shape:a,mode:c}}const u=n.find(c=>c.id===(a==null?void 0:a.id)?!!o:!!Jt(e,c,t,r));return u?{shape:u,mode:{mode:"translate",cursorStartPosition:t,originalShape:u}}:{shape:void 0,mode:{mode:s?"selectionFrame":"default"}}},Ui=(e,n,t,r,a,i,s,o,u,c,d,y,w)=>{var k,f;const b=(k=n.current)==null?void 0:k.getContext("2d");if(!b)return;const p=Rn(e,n.current,y);if(t.type==="move"&&i!==void 0){c([p[0]-i[0],p[1]-i[1]]);return}if(a.mode==="selectionFrame"){d(b,p,y);return}if(Kt(e)||o(e,b,p,y),!(r===void 0||r.locked))if(a.mode==="default"||a.mode==="textedition"){const v=Fe(r,p,y,!0)||{mode:"default"};s(v)}else{const v=(f=n.current)==null?void 0:f.getContext("2d");if(!v)return;const x=Ta(v,r,p,a,y,w);u(x)}},Wi=({disabled:e=!1,addShape:n,drawCanvasRef:t,setActiveTool:r,refreshHoveredShape:a,shapes:i,selectionMode:s,activeTool:o,isInsideComponent:u,setCanvasOffset:c,selectedShape:d,selectionCanvasRef:y,canvasOffsetStartPosition:w,refreshSelectedShapes:b,setSelectedShape:p,setSelectionFrame:k,setCanvasOffsetStartPosition:f,updateSingleShape:v,saveShapes:x,setSelectionMode:q,settings:Q,isShiftPressed:E,withFrameSelection:I})=>{const[M,C]=m.useState({mode:"default"}),{registerDoubleClickEvent:D,unRegisterDoubleClickEvent:N}=Oi();m.useEffect(()=>{const S=_=>Ui(_,y,o,d,s,w,C,a,v,c,b,Q,E);if(u)return document.addEventListener("mousemove",S),document.addEventListener("touchmove",S),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)}},[u,y,d,s,w,v,o,c,a,b,Q,E]);const{isBrushShapeDoneOnMouseUp:V}=Q;return m.useEffect(()=>{const S=()=>{s.mode!=="textedition"&&s.mode!=="default"&&(s.mode==="brush"&&V&&p(void 0),q({mode:"default"}),k(void 0),x())};return u&&(document.addEventListener("mouseup",S),document.addEventListener("touchend",S)),()=>{u&&(document.removeEventListener("mouseup",S),document.removeEventListener("touchend",S))}},[u,s,V,x,k,q,p]),m.useEffect(()=>{const S=y.current;if(!S)return;const _=S.getContext("2d");if(!_||e)return;const P=L=>{var T;L.preventDefault();const H=Rn(L,y.current,Q);if(o.type==="selection"){const{shape:g,mode:h}=Zi(_,i,H,Q,d,Kt(L),I);p(g),q(h),h.mode==="selectionFrame"&&k([[H[0],H[1]],[H[0],H[1]]])}else if(o.type==="move")f(H);else if(Zt.some(g=>g===o.type)){const g=(T=t.current)==null?void 0:T.getContext("2d");if(!g)return;if(o.type==="brush"){if((d==null?void 0:d.type)==="brush"){const h=va(d,H,Q);v(h)}else{const h=ft(g,o,H,Q);if(!h)return;n(h),p(h)}q({mode:"brush"})}else if(o.type!=="picture"){const h=ft(g,o,H,Q);n(h),r(le),p(h),q({mode:"resize",cursorStartPosition:[H[0]+Q.selectionPadding,H[1]+Q.selectionPadding],originalShape:h,anchor:o.type==="line"||o.type==="polygon"||o.type==="curve"?0:[1,1]})}}};return S.addEventListener("mousedown",P,{passive:!1}),S.addEventListener("touchstart",P,{passive:!1}),()=>{S.removeEventListener("mousedown",P),S.removeEventListener("touchstart",P)}},[e,y,t,d,o,f,i,v,n,r,p,q,k,Q,I]),m.useEffect(()=>{const S=y.current;if(!S)return;const _=P=>{if(o.type==="selection"&&(d==null?void 0:d.type)==="text"){const L=Rn(P,y.current,Q);Fe(d,L,Q)&&q({mode:"textedition",defaultValue:d.value})}};if(u)return D(S,_),()=>{N(S)}},[D,N,u,y,o,d,q,Q]),{hoverMode:M}},zi=(e,n,t,r)=>{const{gridGap:a,canvasOffset:i,canvasSize:{scaleRatio:s}}=r;e.strokeStyle="rgb(220,220,220)",e.lineWidth=1,e.save(),e.scale(s,s),e.beginPath();const o=-i[0]%a,u=-i[1]%a,c=Math.ceil(n/s/a),d=Math.ceil(t/s/a);for(let y=0;y<c;y++)e.moveTo(o+(y+1)*a,u),e.lineTo(o+(y+1)*a,u+t/s);for(let y=0;y<d;y++)e.moveTo(o,u+(y+1)*a),e.lineTo(o+n/s,u+(y+1)*a);e.stroke(),e.restore()},sr=({disabled:e=!1,scaleRatio:n,shape:t,defaultValue:r,updateValue:a,saveShapes:i,settings:s})=>{var y,w,b,p,k;const o=m.useRef(null),u=m.useRef(i),c=f=>{const v=Array.from(f.target.childNodes).map(x=>x.childNodes[0].nodeValue??"");a(v)};m.useEffect(()=>{if(!o.current)return;const f=o.current,v=x=>{var Q;x.preventDefault();const q=(Q=x.clipboardData)==null?void 0:Q.getData("text/plain");document.execCommand("insertText",!1,q)};f.addEventListener("paste",v),f.innerText="";for(const x of r){const q=document.createElement("div");x===""?q.innerHTML="<br/>":q.innerText=x,f.appendChild(q)}return f.focus(),()=>{f.removeEventListener("paste",v)}},[r]),m.useEffect(()=>{const f=u.current;return()=>{f()}},[]);const d=m.useMemo(()=>{const{borders:f,center:v}=Z(t,s);return ne({point:[f.x,f.y],rotation:-t.rotation,origin:v})},[t,s]);return l.jsx("div",{className:"react-paint-editor-toolbox-edittextbox",ref:o,"data-fontbold":((y=t.style)==null?void 0:y.fontBold)??!1,"data-fontitalic":((w=t.style)==null?void 0:w.fontItalic)??!1,contentEditable:!e,onInput:c,style:{"--react-paint-editor-toolbox-edittextbox-transform":`translate3D(${d[0]*n}px, ${d[1]*n}px, 0) rotate(${En(t.rotation)}deg)`,"--react-paint-editor-toolbox-edittextbox-fontsize":`${t.fontSize*n}px`,"--react-paint-editor-toolbox-edittextbox-padding":`${s.selectionPadding*n}px`,"--react-paint-editor-toolbox-edittextbox-color":((b=t.style)==null?void 0:b.strokeColor)??"inherit","--react-paint-editor-toolbox-edittextbox-opacity":(((p=t.style)==null?void 0:p.opacity)??100)/100,"--react-paint-editor-toolbox-edittextbox-fontfamily":((k=t.style)==null?void 0:k.fontFamily)??_e}})};sr.__docgenInfo={description:"",methods:[],displayName:"EditTextBox",props:{scaleRatio:{required:!0,tsType:{name:"number"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},shape:{required:!0,tsType:{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]},description:""},defaultValue:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},settings:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  brushAlgo: BrushAlgo
  isBrushShapeDoneOnMouseUp: boolean
  gridGap: number
  canvasOffset: Point
  canvasSize: {
    width: number
    height: number
    scaleRatio: number
  }
  selectionPadding: number
}`,signature:{properties:[{key:"brushAlgo",value:{name:"union",raw:"'simple' | 'quadratic'",elements:[{name:"literal",value:"'simple'"},{name:"literal",value:"'quadratic'"}],required:!0}},{key:"isBrushShapeDoneOnMouseUp",value:{name:"boolean",required:!0}},{key:"gridGap",value:{name:"number",required:!0}},{key:"canvasOffset",value:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}],required:!0}},{key:"canvasSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
  scaleRatio: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"scaleRatio",value:{name:"number",required:!0}}]},required:!0}},{key:"selectionPadding",value:{name:"number",required:!0}}]}},description:""},updateValue:{required:!0,tsType:{name:"signature",type:"function",raw:"(newValue: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"newValue"}],return:{name:"void"}}},description:""},saveShapes:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Gi=(e,n,t,r,a)=>{const{canvasSize:{width:i,height:s}}=t;e.clearRect(0,0,i,s),$t(e),t.gridGap&&zi(e,i,s,t);for(let o=r.length-1;o>=0;o--)(n.mode!=="textedition"||r[o]!==a)&&tr(e,r[o],t)},$i=(e,n,t,r,a,i,s,o,u,c)=>{e.clearRect(0,0,t.canvasSize.width,t.canvasSize.height),c&&o&&o.id!==(s==null?void 0:s.id)&&r.type==="selection"&&n.mode==="default"&&gt({ctx:e,shape:o,settings:t,selectionWidth:a,selectionColor:i,withAnchors:!1}),s&&r.type!=="brush"&&gt({ctx:e,shape:s,settings:t,selectionWidth:a,selectionColor:i,withAnchors:n.mode!=="textedition"}),u&&Ii({ctx:e,selectionFrame:u,settings:t})},or=Ct.forwardRef(({canGrow:e,disabled:n=!1,canvasSize:t,shapes:r,addShape:a,updateSingleShape:i,selectedShape:s,setSelectedShape:o,setSelectionFrame:u,hoveredShape:c,selectionFrame:d,refreshHoveredShape:y,refreshSelectedShapes:w,saveShapes:b,activeTool:p,setActiveTool:k,canvasOffsetStartPosition:f,setCanvasOffsetStartPosition:v,setCanvasOffset:x,isInsideComponent:q,selectionMode:Q,setSelectionMode:E,selectionWidth:I,selectionColor:M,settings:C,isEditMode:D,isShiftPressed:N,withFrameSelection:V,withSkeleton:S},_)=>{const P=m.useRef(null),L=m.useRef(null);m.useImperativeHandle(_,()=>P.current);const{hoverMode:H}=Wi({disabled:n,addShape:a,drawCanvasRef:P,setActiveTool:k,shapes:r,selectionMode:Q,activeTool:p,isInsideComponent:q,setCanvasOffset:x,selectedShape:s,selectionCanvasRef:L,canvasOffsetStartPosition:f,setSelectedShape:o,setSelectionFrame:u,refreshHoveredShape:y,refreshSelectedShapes:w,setCanvasOffsetStartPosition:v,updateSingleShape:i,saveShapes:b,setSelectionMode:E,isShiftPressed:N,withFrameSelection:V,settings:C}),T=m.useCallback(g=>{var A;if((s==null?void 0:s.type)!=="text")return;const h=(A=P.current)==null?void 0:A.getContext("2d");if(!h)return;const R=Ne(Ci(h,s,g,C),C);i(R)},[i,s,C]);return m.useEffect(()=>{var h;const g=(h=P.current)==null?void 0:h.getContext("2d");g&&window.requestAnimationFrame(()=>Gi(g,Q,C,r,s))},[r,Q,s,C]),m.useEffect(()=>{var h;const g=(h=L.current)==null?void 0:h.getContext("2d");g&&window.requestAnimationFrame(()=>$i(g,Q,C,p,I,M,s,c,d,S))},[c,d,Q,s,p,C,I,M,S]),l.jsx("div",{className:"react-paint-canvas-box",children:l.jsxs("div",{className:"react-paint-canvas-container","data-grow":e,children:[l.jsx("canvas",{className:Ut,ref:P,"data-grow":e,width:t.width,height:t.height}),D&&l.jsx("canvas",{className:Wt,ref:L,width:t.width,height:t.height,"data-grow":e,style:{"--react-paint-canvas-cursor":p.type!=="selection"&&p.type!=="move"||H.mode==="resize"?"crosshair":p.type==="move"||H.mode==="translate"?"move":H.mode==="rotate"?"grab":"default"}}),D&&Q.mode==="textedition"&&(s==null?void 0:s.type)==="text"&&l.jsx(sr,{scaleRatio:t.scaleRatio,disabled:n,shape:s,defaultValue:Q.defaultValue,updateValue:T,saveShapes:b,settings:C})]})})});or.__docgenInfo={description:"",methods:[],displayName:"Canvas",props:{disabled:{defaultValue:{value:"false",computed:!1},required:!1}}};const z={ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",Delete:"Delete",Backspace:"Backspace",Escape:"Escape",Shift:"Shift",z:"z",Z:"Z",y:"y",Y:"Y"},Ge={Copy:"copy",Paste:"paste"},Yi=({isInsideComponent:e,selectedShape:n,isEditingText:t,settings:r,setSelectedShape:a,removeShape:i,pasteShape:s,updateShape:o,backwardShape:u,forwardShape:c,setShiftPressed:d})=>{const[y,w]=m.useState(void 0);return m.useEffect(()=>{const b=v=>{n&&(t||(v.preventDefault(),w({...n})))},p=v=>{y&&(t||(v.preventDefault(),s(Ai(y,r))))},k=v=>{switch(v.key){case z.Shift:d(!1);break}},f=v=>{if(v.metaKey||v.ctrlKey){if(v.key===z.Z||v.key===z.z){v.preventDefault(),v.stopPropagation(),u();return}if(v.key===z.Y||v.key===z.y){v.preventDefault(),v.stopPropagation(),c();return}}if(v.key===z.Shift){d(!0);return}if(!n)return;if(v.key===z.Escape){a(void 0);return}if(t)return;const x={[z.ArrowLeft]:[r.gridGap?-r.gridGap:-1,0],[z.ArrowRight]:[r.gridGap?r.gridGap:1,0],[z.ArrowDown]:[0,r.gridGap?r.gridGap:1],[z.ArrowUp]:[0,r.gridGap?-r.gridGap:-1]};switch(v.key){case z.ArrowLeft:case z.ArrowRight:case z.ArrowDown:case z.ArrowUp:v.preventDefault(),v.stopPropagation(),o(Gn(x[v.key],n,[0,0],r));break;case z.Delete:case z.Backspace:v.preventDefault(),v.stopPropagation(),i(n);break}};if(e)return document.addEventListener("keydown",f),document.addEventListener("keyup",k),document.addEventListener(Ge.Copy,b),document.addEventListener(Ge.Paste,p),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",k),document.removeEventListener(Ge.Copy,b),document.removeEventListener(Ge.Paste,p)}},[e,y,t,n,r,o,i,a,s,u,c,d]),{}},Xi=({onResized:e,element:n})=>{m.useEffect(()=>{const t=n.current;if(!t)return;const r=new ResizeObserver(a=>{var u,c;const i=(c=(u=a==null?void 0:a[0])==null?void 0:u.borderBoxSize)==null?void 0:c[0],{width:s,height:o}=i?{width:i.inlineSize,height:i.blockSize}:(a==null?void 0:a[0].contentRect)??{};e(s,o)});return r.observe(t),()=>{r.unobserve(t)}},[n,e])},Ki=({options:e,className:n,style:t,canvasProps:r})=>{const{shapesRef:a,selectedShape:i,selectionFrame:s,hoveredShape:o,addShape:u,setSelectedShape:c,setSelectionFrame:d,refreshSelectedShapes:y,refreshHoveredShape:w,removeShape:b,updateShape:p,backwardShape:k,forwardShape:f,saveShapes:v,refs:x,width:q,height:Q,settings:E,canvasSize:I,setCanvasSize:M,setCanvasOffset:C,selectShape:D,activeTool:N,setActiveTool:V,isInsideComponent:S,isEditMode:_,isDisabled:P,canvas:{withSkeleton:L,withFrameSelection:H,canGrow:T,canShrink:g}}=r,{canvasBackgroundColor:h,canvasSelectionColor:R,canvasSelectionWidth:A}={...ta,...e},$=m.useRef(null),[Le,Pe]=m.useState(void 0),[J,ve]=m.useState({mode:"default"}),[Ie,Ae]=m.useState(!1),Ee=m.useCallback(oe=>{u(oe),D(oe)},[u,D]),Re=m.useCallback(oe=>{const te=oe/q;M({width:oe,height:Q*te,scaleRatio:te})},[q,Q,M]);return Yi({isInsideComponent:S,isEditingText:J.mode==="textedition",settings:E,selectedShape:i,setSelectedShape:c,removeShape:b,pasteShape:Ee,updateShape:p,backwardShape:k,forwardShape:f,setShiftPressed:Ae}),Xi({element:$,onResized:Re}),l.jsx("div",{ref:$,className:`react-paint-app-row${n?` ${n}`:""}`,"data-grow":T,"data-shrink":g,style:{"--react-paint-app-row-width":I.width,"--react-paint-app-canvaswidth":`${q}px`,"--react-paint-app-row-aspectratio":`calc(${I.width} / ${I.height})`,"--react-paint-app-canvas-bg":h,...t},children:l.jsx(or,{ref:x.canvas,canGrow:T,disabled:P,isInsideComponent:S,activeTool:N,setActiveTool:V,canvasOffsetStartPosition:Le,setCanvasOffsetStartPosition:Pe,shapes:a.current,addShape:u,updateSingleShape:p,selectedShape:i,selectionFrame:s,setSelectedShape:c,setSelectionFrame:d,hoveredShape:o,refreshHoveredShape:w,refreshSelectedShapes:y,settings:E,setCanvasOffset:C,saveShapes:v,canvasSize:I,selectionMode:J,setSelectionMode:ve,selectionColor:R,selectionWidth:A,isEditMode:_,isShiftPressed:Ie,withFrameSelection:H,withSkeleton:L})})};Ki.__docgenInfo={description:"",methods:[],displayName:"App",props:{canvasProps:{required:!0,tsType:{name:"ReturnType['canvasProps']",raw:"UseReactPaintReturnType['canvasProps']"},description:""},className:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},options:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  canvasBackgroundColor?: string
  canvasSelectionColor?: string
  canvasSelectionWidth?: number
}`,signature:{properties:[{key:"canvasBackgroundColor",value:{name:"string",required:!1}},{key:"canvasSelectionColor",value:{name:"string",required:!1}},{key:"canvasSelectionWidth",value:{name:"number",required:!1}}]}},description:""}}};const kt=300,lr=({isLoading:e=!1})=>{const[n,t]=m.useState("hidden");return m.useEffect(()=>{if(e)t("visible");else{t("fadeOut");const r=setTimeout(()=>t("hidden"),kt);return()=>{clearTimeout(r)}}},[e]),n==="hidden"?null:l.jsx("div",{className:"react-paint-editor-loading","data-loading":n,style:{"--react-paint-editor-loading-zindex":en.LOADING,"--react-paint-editor-loading-transition-duration":`${kt}ms`},children:l.jsxs("div",{className:"react-paint-editor-loader",children:[l.jsx("div",{}),l.jsx("div",{}),l.jsx("div",{}),l.jsx("div",{})]})})};lr.__docgenInfo={description:"",methods:[],displayName:"Loading",props:{isLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const wt={type:"infos",duration:4e3},xt=500,qt=100,Ji=({type:e,text:n,duration:t})=>{const[r,a]=m.useState(!1);return m.useEffect(()=>{const i=setTimeout(()=>{a(!0)},qt),s=setTimeout(()=>{a(!1)},t-xt-qt);return()=>{clearTimeout(i),clearTimeout(s)}},[t]),l.jsx("div",{className:"react-paint-editor-snackbar","data-is-shown":+r,"data-type":e,style:{"--react-paint-editor-panel-transition-duration":`${xt}ms`},children:n})},ur=({snackbarList:e})=>l.jsx("div",{className:"react-paint-editor-snackbar-container",style:{"--react-paint-editor-snackbar-zindex":en.SNACKBAR},children:e.map(n=>l.jsx(Ji,{...n},n.id))});ur.__docgenInfo={description:"",methods:[],displayName:"SnackbarContainer",props:{snackbarList:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string
  type: SnackbarTypeType
  text: string
  duration: number
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'infos' | 'error' | 'success'",elements:[{name:"literal",value:"'infos'"},{name:"literal",value:"'error'"},{name:"literal",value:"'success'"}],required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"duration",value:{name:"number",required:!0}}]}}],raw:"SnackBarType[]"},description:""}}};const es=({disabled:e=!1,ref:n,shape:t,layoutDragging:r,setLayoutDragging:a,handleSelect:i,onMoveShapes:s})=>{const[o,u]=m.useState(!1);return m.useEffect(()=>{r||u(!1)},[r]),m.useEffect(()=>{const c=n.current;if(!c)return;const d=()=>{a(void 0)},y=f=>(f.preventDefault&&f.preventDefault(),!1),w=f=>{i(t),f.dataTransfer&&(f.dataTransfer.effectAllowed="move",f.dataTransfer.setData("draggableShapeId",t.id),a(t.id))},b=()=>{r!==t.id&&u(!0)},p=()=>{u(!1)},k=f=>(f.stopPropagation(),f.dataTransfer&&s(f.dataTransfer.getData("draggableShapeId"),t.id),!1);return e||(c.addEventListener("dragstart",w),c.addEventListener("dragend",d),c.addEventListener("dragover",y),c.addEventListener("dragenter",b),c.addEventListener("dragleave",p),c.addEventListener("drop",k)),()=>{e||(c.removeEventListener("dragstart",w),c.removeEventListener("dragend",d),c.removeEventListener("dragover",y),c.removeEventListener("dragenter",b),c.removeEventListener("dragleave",p),c.removeEventListener("drop",k))}},[e,n,t,a,i,s,r]),{isOver:o}},O=Ct.forwardRef((e,n)=>{if(e.type==="file"||e.type==="color"){const{hidden:d=!1,disabled:y=!1,selected:w=!1,icon:b,children:p,className:k="",title:f,onClick:v,...x}=e;return l.jsxs("label",{className:`react-paint-editor-button ${k}`,title:f,onClick:v,"data-disabled":+y,"data-selected":+w,"data-hidden":+d,children:[l.jsx("input",{ref:n,disabled:y,...x}),l.jsxs("span",{className:"react-paint-editor-button-content",children:[p&&l.jsx("span",{className:"react-paint-editor-button-children",children:p}),b&&l.jsx("span",{className:"react-paint-editor-button-icon",dangerouslySetInnerHTML:{__html:b}})]})]})}const{hidden:t=!1,disabled:r=!1,selected:a=!1,icon:i,children:s,type:o="button",className:u="",...c}=e;return l.jsx("button",{className:`react-paint-editor-button ${u}`,ref:n,disabled:r,"data-disabled":+r,"data-selected":+a,"data-hidden":+t,type:o,...c,children:l.jsxs("span",{className:"react-paint-editor-button-content",children:[s&&l.jsx("span",{className:"react-paint-editor-button-children",children:s}),i&&l.jsx("span",{className:"react-paint-editor-button-icon",dangerouslySetInnerHTML:{__html:i}})]})})});O.__docgenInfo={description:"",methods:[],displayName:"Button"};const ge=({children:e,title:n="",className:t="",position:r="bottom",fitContainer:a=!1,alignment:i="center"})=>l.jsxs("div",{className:`react-paint-editor-panel ${t}`,"data-fitcontainer":a,"data-position":r,"data-alignment":i,style:{"--react-paint-editor-panel-zindex":en.PANEL},children:[n&&l.jsx("h3",{className:"react-paint-editor-panel-title",children:n}),e]});ge.__docgenInfo={description:"",methods:[],displayName:"Panel",props:{vertical:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},fitContainer:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},position:{required:!1,tsType:{name:"union",raw:"'bottom' | 'top'",elements:[{name:"literal",value:"'bottom'"},{name:"literal",value:"'top'"}]},description:"",defaultValue:{value:"'bottom'",computed:!1}},alignment:{required:!1,tsType:{name:"union",raw:"'left' | 'right' | 'center'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"},{name:"literal",value:"'center'"}]},description:"",defaultValue:{value:"'center'",computed:!1}}}};const ns=e=>{switch(e){case"brush":return St;case"line":return Pt;case"polygon":return Fn;case"curve":return It;case"rect":return Ye;case"square":return Ye;case"circle":return Xe;case"ellipse":return Xe;case"text":return Lt;case"picture":return On;case"triangle":return""}},ts=({disabled:e=!1,shape:n,selected:t,layoutDragging:r,toggleShapeVisibility:a,toggleShapeLock:i,setLayoutDragging:s,handleRemove:o,handleSelect:u,onMoveShapes:c})=>{const d=m.useRef(null),y=f=>{e||(f.preventDefault(),f.stopPropagation(),o(n))},w=f=>{e||(f.preventDefault(),f.stopPropagation(),u(n))},b=f=>{e||(f.preventDefault(),f.stopPropagation(),a(n))},p=f=>{e||(f.preventDefault(),f.stopPropagation(),i(n))},{isOver:k}=es({disabled:e,ref:d,shape:n,layoutDragging:r,setLayoutDragging:s,handleSelect:u,onMoveShapes:c});return l.jsxs("div",{className:"react-paint-editor-layout","data-disabled":+e,draggable:!e,"data-is-dragging":+(r===n.id),"data-is-over":+k,onClick:w,"data-selected":+t,ref:d,children:[l.jsx("span",{dangerouslySetInnerHTML:{__html:ns(n.type)}}),l.jsx("span",{children:n.id}),l.jsx("div",{className:"react-paint-editor-layouts-separator"}),l.jsx(O,{className:"react-paint-editor-layouts-visible-button",title:n.visible?"Hide":"Show","data-visible":n.visible!==!1,disabled:e,selected:t,onClick:b,icon:n.visible===!1?Ir:Pr}),l.jsx(O,{className:"react-paint-editor-layouts-locked-button",title:n.locked?"Locked":"Unlocked","data-locked":!!n.locked,disabled:e,selected:t,onClick:p,icon:n.locked?Rr:jr}),l.jsx(O,{className:"react-paint-editor-layouts-remove-button",title:"Remove",disabled:e,onClick:y,icon:Dt})]})},cr=({gridFormat:e,setGridFormat:n,disabled:t=!1,shapes:r,removeShape:a,toggleShapeVisibility:i,toggleShapeLock:s,selectedShape:o,moveShapes:u,selectShape:c,isLayoutPanelShown:d})=>{const[y,w]=m.useState(void 0);return d?l.jsx(ge,{alignment:"right",className:"react-paint-editor-layouts-panel",children:l.jsx("div",{className:"react-paint-editor-layouts-panel-content",children:l.jsxs("div",{className:"react-paint-editor-layouts-scrolling-content",children:[l.jsxs("div",{className:"react-paint-editor-layouts-row",children:[l.jsx("span",{className:"react-paint-editor-layouts-subtitle",children:"Grid"}),l.jsx(O,{icon:Vr,className:"react-paint-editor-layouts-grid-button",selected:e==="none",disabled:t,onClick:()=>n("none")}),["small","medium","large"].map(b=>l.jsx(O,{className:"react-paint-editor-layouts-grid-button",selected:e===b,disabled:t,onClick:()=>n(b),children:b.charAt(0).toUpperCase()},b))]}),l.jsx("hr",{}),l.jsx("div",{className:"react-paint-editor-layouts",children:r.length===0?l.jsx("div",{className:"react-paint-editor-layouts-placeholder",children:"No layer yet"}):r.map(b=>l.jsx(ts,{shape:b,disabled:t,layoutDragging:y,setLayoutDragging:w,selected:(o==null?void 0:o.id)===b.id,handleSelect:c,handleRemove:a,onMoveShapes:u,toggleShapeVisibility:i,toggleShapeLock:s},b.id))})]})})}):null};cr.__docgenInfo={description:"",methods:[],displayName:"Layouts",props:{gridFormat:{required:!0,tsType:{name:"union",raw:"keyof typeof GridValues",elements:[{name:"literal",value:"none"},{name:"literal",value:"small"},{name:"literal",value:"medium"},{name:"literal",value:"large"}]},description:""},setGridFormat:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: GridLabelType) => void",signature:{arguments:[{type:{name:"union",raw:"keyof typeof GridValues",elements:[{name:"literal",value:"none"},{name:"literal",value:"small"},{name:"literal",value:"medium"},{name:"literal",value:"large"}]},name:"value"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},shapes:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:`{
  id: string
  toolId?: string
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  toolId?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]}],raw:"ShapeEntity[]"},description:""},removeShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{
  id: string
  toolId?: string
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  toolId?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""},toggleShapeVisibility:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{
  id: string
  toolId?: string
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  toolId?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""},toggleShapeLock:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{
  id: string
  toolId?: string
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  toolId?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""},selectedShape:{required:!0,tsType:{name:"union",raw:"ShapeEntity | undefined",elements:[{name:"intersection",raw:`{
  id: string
  toolId?: string
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  toolId?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},{name:"undefined"}]},description:""},selectShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{
  id: string
  toolId?: string
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  toolId?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""},moveShapes:{required:!0,tsType:{name:"signature",type:"function",raw:"(firstShapeId: string, lastShapeId: string) => void",signature:{arguments:[{type:{name:"string"},name:"firstShapeId"},{type:{name:"string"},name:"lastShapeId"}],return:{name:"void"}}},description:""},isLayoutPanelShown:{required:!0,tsType:{name:"boolean"},description:""}}};const ln=({children:e,onClose:n,position:t="center",className:r=""})=>l.jsxs("div",{className:"react-paint-editor-modal","data-position":t,style:{"--react-paint-editor-modal-zindex":en.PANEL},children:[l.jsx("div",{className:"react-paint-editor-modal-mask",onClick:n}),l.jsx("div",{className:`react-paint-editor-modal-panel ${r}`,children:e})]});ln.__docgenInfo={description:"",methods:[],displayName:"Modal",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},position:{required:!1,tsType:{name:"union",raw:"'center' | 'bottom'",elements:[{name:"literal",value:"'center'"},{name:"literal",value:"'bottom'"}]},description:"",defaultValue:{value:"'center'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}}}};const Me=({selectedSettings:e,setSelectedSettings:n,title:t="Choisissez une couleur",mode:r="fill",disabled:a=!1,values:i,field:s,value:o="",valueChanged:u})=>{const[c]=m.useState(G("settings_")),d=p=>{const k=+p.target.value;u(s,Number.isNaN(k)?p.target.value:k)},y=p=>{u(s,p)},w=()=>{n(p=>p===c?void 0:c)},b=e===c;return i.length?l.jsxs(l.Fragment,{children:[l.jsx(O,{selected:b,title:t,disabled:a,onClick:w,icon:o==="transparent"?r==="fill"?nt:et:void 0,children:o!=="transparent"&&l.jsx("div",{className:"react-paint-editor-colorfield-color","data-mode":r,style:{"--react-paint-editor-colorfield-color-value":o}})}),b&&l.jsx(ge,{title:t,alignment:"left",children:l.jsxs("div",{className:"react-paint-editor-colorfield-wrapper",children:[i.map((p,k)=>l.jsx(O,{title:p,selected:p===o,color:p,icon:p==="transparent"?r==="fill"?nt:et:void 0,onClick:()=>y(p),children:p!=="transparent"&&l.jsx("div",{className:"react-paint-editor-colorfield-color",color:p,"data-mode":r,style:{"--react-paint-editor-colorfield-color-value":p}})},p)),l.jsx(O,{type:"color",title:"Custom color",selected:!i.includes(o),value:o,onChange:d,children:l.jsx("div",{className:"react-paint-editor-colorfield-customcolor",style:{"--react-paint-editor-colorfield-color-value":i.includes(o)?"var(--react-paint-editor-app-font-color)":o},children:l.jsx("span",{dangerouslySetInnerHTML:{__html:Ar}})})})]})})]}):null};Me.__docgenInfo={description:"",methods:[],displayName:"ColorField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Choisissez une couleur'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},field:{required:!0,tsType:{name:"string"},description:""},mode:{required:!1,tsType:{name:"union",raw:"'fill' | 'stroke'",elements:[{name:"literal",value:"'fill'"},{name:"literal",value:"'stroke'"}]},description:"",defaultValue:{value:"'fill'",computed:!1}},value:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:"",defaultValue:{value:"''",computed:!1}},values:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const dr=({disabled:e=!1,selectedShape:n,removeShape:t})=>{const r=()=>{t(n)};return l.jsx(O,{title:"Delete",disabled:e,"data-disabled":+e,onClick:r,icon:Dt})};dr.__docgenInfo={description:"",methods:[],displayName:"DeleteButton",props:{disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},selectedShape:{required:!0,tsType:{name:"intersection",raw:`{
  id: string
  toolId?: string
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  toolId?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},description:""},removeShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{
  id: string
  toolId?: string
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  toolId?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""}}};const un=({CustomOption:e,selectedSettings:n,setSelectedSettings:t,title:r="Choisissez l'option",disabled:a=!1,field:i,icon:s,values:o,defaultValue:u,valueChanged:c})=>{const[d]=m.useState(G("settings_")),y=p=>{c(i,p)},w=()=>{t(p=>p===d?void 0:d)},b=n===d;return o.length?l.jsxs(l.Fragment,{children:[l.jsx(O,{selected:b,title:r,icon:s,disabled:a,onClick:w}),b&&l.jsx(ge,{title:r,alignment:"left",fitContainer:!0,children:l.jsx("div",{className:"react-paint-editor-selectfield-wrapper",children:o.map(p=>l.jsx(O,{title:`${p}`,onClick:()=>y(p),selected:u===p,style:{"--react-paint-editor-button-padding":"16px"},children:l.jsx(e,{children:p})},p))})})]}):null};un.__docgenInfo={description:"",methods:[],displayName:"SelectField",props:{CustomOption:{required:!0,tsType:{name:"ReactFC",raw:`React.FC<{
  children?: React.ReactNode
}>`,elements:[{name:"signature",type:"object",raw:`{
  children?: React.ReactNode
}`,signature:{properties:[{key:"children",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}}]}}]},description:""},selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:`"Choisissez l'option"`,computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},icon:{required:!0,tsType:{name:"string"},description:""},field:{required:!0,tsType:{name:"string"},description:""},values:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(string | number)[]"},description:""},defaultValue:{required:!1,tsType:{name:"union",raw:"number | string | undefined",elements:[{name:"number"},{name:"string"},{name:"undefined"}]},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const rs=({children:e})=>l.jsx("span",{className:"react-paint-editor-fontfamily-option",style:{"--react-paint-editor-fontfamily-family":e},children:e}),Vn=({selectedSettings:e,setSelectedSettings:n,disabled:t=!1,values:r,defaultValue:a,valueChanged:i})=>r.length?l.jsx(un,{selectedSettings:e,setSelectedSettings:n,CustomOption:rs,title:"Police",icon:Hr,disabled:t,field:"fontFamily",values:r,defaultValue:a,valueChanged:i}):null;Vn.__docgenInfo={description:"",methods:[],displayName:"FontFamilyField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},values:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},defaultValue:{required:!1,tsType:{name:"union",raw:"number | string | undefined",elements:[{name:"number"},{name:"string"},{name:"undefined"}]},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const pr=({disabled:e,toggleLayoutPanel:n})=>l.jsx(O,{title:"Toggle layers panel",disabled:e,onClick:n,icon:xr,className:"react-paint-editor-layout-button"});pr.__docgenInfo={description:"",methods:[],displayName:"LayoutButton",props:{disabled:{required:!0,tsType:{name:"boolean"},description:""},toggleLayoutPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const as=({children:e})=>l.jsxs("span",{className:"react-paint-editor-linearrow-option","data-type":e,children:[l.jsx("span",{className:"react-paint-editor-linearrow-left"}),l.jsx("span",{className:"react-paint-editor-linearrow-right"})]}),Mn=({selectedSettings:e,setSelectedSettings:n,disabled:t=!1,values:r,defaultValue:a,valueChanged:i})=>r.length?l.jsx(un,{selectedSettings:e,setSelectedSettings:n,CustomOption:as,title:"Flèches",icon:Nr,disabled:t,field:"lineArrow",values:r,defaultValue:a,valueChanged:i}):null;Mn.__docgenInfo={description:"",methods:[],displayName:"LineArrowField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},values:{required:!0,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:""},defaultValue:{required:!1,tsType:{name:"union",raw:"number | string | undefined",elements:[{name:"number"},{name:"string"},{name:"undefined"}]},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const mr=({children:e})=>l.jsxs("span",{className:"react-paint-editor-linetype-option","data-type":e,children:[l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{}),l.jsx("span",{})]}),Hn=({selectedSettings:e,setSelectedSettings:n,disabled:t=!1,values:r,defaultValue:a,valueChanged:i})=>r.length?l.jsx(un,{selectedSettings:e,setSelectedSettings:n,CustomOption:mr,icon:Mr,title:"Type de traits",disabled:t,field:"lineDash",values:r,defaultValue:a,valueChanged:i}):null;mr.__docgenInfo={description:"",methods:[],displayName:"LineTypeOption",props:{children:{required:!0,tsType:{name:"string"},description:""}}};Hn.__docgenInfo={description:"",methods:[],displayName:"LineTypeField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},values:{required:!0,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:""},defaultValue:{required:!1,tsType:{name:"union",raw:"number | string | undefined",elements:[{name:"number"},{name:"string"},{name:"undefined"}]},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const Te=({selectedSettings:e,setSelectedSettings:n,title:t="Choisissez l'intervalle",icon:r,disabled:a=!1,field:i,value:s=1,min:o=1,max:u=20,step:c=1,unity:d="",valueChanged:y})=>{const w=Math.round(s),[b]=m.useState(G("settings_")),p=m.useRef(null),k=x=>{const q=+x.target.value;y(i,Number.isNaN(q)?x.target.value:q,!1),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{y(i,Number.isNaN(q)?x.target.value:q,!0)},1e3)},f=()=>{n(x=>x===b?void 0:b)};m.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const v=e===b;return o===u?null:l.jsxs(l.Fragment,{children:[l.jsx(O,{selected:v,title:t,disabled:a,icon:r,onClick:f}),v&&l.jsx(ge,{title:t,alignment:"left",fitContainer:!0,children:l.jsx("div",{children:l.jsxs("label",{className:"react-paint-editor-rangefield",children:[l.jsx("input",{type:"range",min:o,max:u,step:c,value:s,onChange:k}),l.jsxs("span",{children:[w,d]})]})})})]})};Te.__docgenInfo={description:"",methods:[],displayName:"RangeField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:`"Choisissez l'intervalle"`,computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},field:{required:!0,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"string"},description:""},min:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},max:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"20",computed:!1}},step:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},unity:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},value:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:"",defaultValue:{value:"1",computed:!1}},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number, needHistorySave?: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"},{type:{name:"boolean"},name:"needHistorySave"}],return:{name:"void"}}},description:""}}};const Nn=({selectedSettings:e,setSelectedSettings:n,disabled:t=!1,min:r,max:a,step:i,value:s,valueChanged:o})=>r===a?null:l.jsx(Te,{selectedSettings:e,setSelectedSettings:n,icon:Fn,title:"Nombre de points",disabled:t,field:"pointsCount",min:r,max:a,step:i,unity:"",value:s,valueChanged:o});Nn.__docgenInfo={description:"",methods:[],displayName:"PointsNumberField",props:{selectedSettings:{required:!0,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""},setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},min:{required:!0,tsType:{name:"number"},description:""},max:{required:!0,tsType:{name:"number"},description:""},step:{required:!0,tsType:{name:"number"},description:""},value:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:""},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: string | number) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""}}};const He=({setSelectedSettings:e,disabled:n=!1,field:t,icon:r,values:a,value:i=!1,valueChanged:s})=>{const[o]=m.useState(G("settings_")),u=()=>{e(c=>c===o?void 0:o),s(t,!i)};return a.length!==2?null:l.jsx(O,{onClick:u,selected:i,disabled:n,icon:r})};He.__docgenInfo={description:"",methods:[],displayName:"ToggleField",props:{setSelectedSettings:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<string | undefined>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<string | undefined>",elements:[{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]}]}]},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},field:{required:!0,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"string"},description:""},values:{required:!0,tsType:{name:"Array",elements:[{name:"boolean"}],raw:"boolean[]"},description:""},value:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},valueChanged:{required:!0,tsType:{name:"signature",type:"function",raw:"(field: string, value: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"field"},{type:{name:"boolean"},name:"value"}],return:{name:"void"}}},description:""}}};const is=40,Dn=({activeTool:e,selectedShape:n,selectedShapeTool:t,disabled:r,selectedSettings:a,setSelectedSettings:i,handleShapeStyleChange:s,handlePolygonLinesCount:o,handleShapeFontFamilyChange:u})=>{var c,d,y,w,b,p,k,f,v,x;return n?l.jsx(l.Fragment,{children:t&&l.jsxs(l.Fragment,{children:["strokeColor"in t.settings&&!t.settings.strokeColor.hidden&&l.jsx(Me,{selectedSettings:a,setSelectedSettings:i,title:"Couleur du trait",mode:"stroke",disabled:r,field:"strokeColor",value:(c=n.style)==null?void 0:c.strokeColor,valueChanged:s,values:t.settings.strokeColor.values}),"fillColor"in t.settings&&!t.settings.fillColor.hidden&&l.jsx(Me,{selectedSettings:a,setSelectedSettings:i,title:"Couleur de fond",disabled:r,field:"fillColor",value:(d=n.style)==null?void 0:d.fillColor,valueChanged:s,values:t.settings.fillColor.values}),"lineWidth"in t.settings&&!t.settings.lineWidth.hidden&&l.jsx(Te,{selectedSettings:a,setSelectedSettings:i,title:"Epaisseur du trait",icon:Jn,disabled:r,field:"lineWidth",value:(y=n.style)==null?void 0:y.lineWidth,valueChanged:s,unity:"px",min:t.settings.lineWidth.min,max:t.settings.lineWidth.max,step:t.settings.lineWidth.step}),"lineDash"in t.settings&&!t.settings.lineDash.hidden&&l.jsx(Hn,{selectedSettings:a,setSelectedSettings:i,disabled:r,defaultValue:(w=n.style)==null?void 0:w.lineDash,valueChanged:s,values:t.settings.lineDash.values}),"lineArrow"in t.settings&&!t.settings.lineArrow.hidden&&l.jsx(Mn,{selectedSettings:a,setSelectedSettings:i,disabled:r,defaultValue:(b=n.style)==null?void 0:b.lineArrow,valueChanged:s,values:t.settings.lineArrow.values}),"pointsCount"in t.settings&&!t.settings.pointsCount.hidden&&l.jsx(Nn,{selectedSettings:a,setSelectedSettings:i,disabled:r,valueChanged:o,min:t.settings.pointsCount.min,max:t.settings.pointsCount.max,step:t.settings.pointsCount.step,value:(p=n.style)==null?void 0:p.pointsCount}),"fontFamily"in t.settings&&!t.settings.fontFamily.hidden&&l.jsx(Vn,{selectedSettings:a,setSelectedSettings:i,disabled:r,valueChanged:u,values:t.settings.fontFamily.values,defaultValue:(k=n.style)==null?void 0:k.fontFamily}),"fontBold"in t.settings&&!t.settings.fontBold.hidden&&l.jsx(He,{setSelectedSettings:i,disabled:r,field:"fontBold",icon:Xn,valueChanged:u,values:t.settings.fontBold.values,value:(f=n.style)==null?void 0:f.fontBold}),"fontItalic"in t.settings&&!t.settings.fontItalic.hidden&&l.jsx(He,{setSelectedSettings:i,disabled:r,field:"fontItalic",icon:Kn,valueChanged:u,values:t.settings.fontItalic.values,value:(v=n.style)==null?void 0:v.fontItalic}),"opacity"in t.settings&&!t.settings.opacity.hidden&&l.jsx(Te,{selectedSettings:a,setSelectedSettings:i,title:"Opacité",icon:Yn,min:t.settings.opacity.min,max:t.settings.opacity.max,step:t.settings.opacity.step,unity:"%",disabled:r,field:"opacity",value:((x=n.style)==null?void 0:x.opacity)??100,valueChanged:s})]})}):"settings"in e?l.jsxs(l.Fragment,{children:["strokeColor"in e.settings&&!e.settings.strokeColor.hidden&&l.jsx(Me,{selectedSettings:a,setSelectedSettings:i,title:"Couleur du trait",mode:"stroke",disabled:r,field:"strokeColor",value:e.settings.strokeColor.default,valueChanged:s,values:e.settings.strokeColor.values}),"fillColor"in e.settings&&!e.settings.fillColor.hidden&&l.jsx(Me,{selectedSettings:a,setSelectedSettings:i,title:"Couleur de fond",disabled:r,field:"fillColor",value:e.settings.fillColor.default,valueChanged:s,values:e.settings.fillColor.values}),"lineWidth"in e.settings&&!e.settings.lineWidth.hidden&&l.jsx(Te,{selectedSettings:a,setSelectedSettings:i,title:"Epaisseur du trait",disabled:r,field:"lineWidth",icon:Jn,value:e.settings.lineWidth.default,valueChanged:s,unity:"px",min:e.settings.lineWidth.min,max:e.settings.lineWidth.max,step:e.settings.lineWidth.step}),"lineDash"in e.settings&&!e.settings.lineDash.hidden&&l.jsx(Hn,{selectedSettings:a,setSelectedSettings:i,disabled:r,defaultValue:e.settings.lineDash.default,valueChanged:s,values:e.settings.lineDash.values}),"lineArrow"in e.settings&&!e.settings.lineArrow.hidden&&l.jsx(Mn,{selectedSettings:a,setSelectedSettings:i,disabled:r,defaultValue:e.settings.lineArrow.default,valueChanged:s,values:e.settings.lineArrow.values}),"pointsCount"in e.settings&&!e.settings.pointsCount.hidden&&l.jsx(Nn,{selectedSettings:a,setSelectedSettings:i,disabled:r,valueChanged:o,min:e.settings.pointsCount.min,max:e.settings.pointsCount.max,step:e.settings.pointsCount.step,value:e.settings.pointsCount.default}),"fontFamily"in e.settings&&!e.settings.fontFamily.hidden&&l.jsx(Vn,{selectedSettings:a,setSelectedSettings:i,disabled:r,valueChanged:u,values:e.settings.fontFamily.values,defaultValue:e.settings.fontFamily.default}),"fontBold"in e.settings&&!e.settings.fontBold.hidden&&l.jsx(He,{setSelectedSettings:i,disabled:r,field:"fontBold",icon:Xn,valueChanged:u,values:e.settings.fontBold.values,value:e.settings.fontBold.default}),"fontItalic"in e.settings&&!e.settings.fontItalic.hidden&&l.jsx(He,{setSelectedSettings:i,disabled:r,field:"fontItalic",icon:Kn,valueChanged:u,values:e.settings.fontItalic.values,value:e.settings.fontItalic.default}),"opacity"in e.settings&&!e.settings.opacity.hidden&&l.jsx(Te,{selectedSettings:a,setSelectedSettings:i,title:"Opacité",icon:Yn,min:e.settings.opacity.min,max:e.settings.opacity.max,step:e.settings.opacity.step,unity:"%",disabled:r,field:"opacity",value:e.settings.opacity.default,valueChanged:s})]}):null},yr=({width:e,disabled:n=!1,availableTools:t,updateToolSettings:r,layersManipulation:a,toggleLayoutPanel:i,activeTool:s,selectedShape:o,canvas:u,settings:c,updateShape:d,removeShape:y})=>{const[w,b]=m.useState(void 0),[p,k]=m.useState(!1),f=()=>{k(C=>!C)},v=o?t.find(C=>C.id===o.toolId)||t.find(C=>C.type===o.type):void 0,x=(v?Object.keys(v.settings).length+1:"settings"in s?Object.keys(s.settings).length:0)+(a?1:0),q=x*is,Q=e<q,E=(C,D,N=!0)=>{o?(d(Ne(Y(["style",C],D,o),c),N),v&&r(v.id,C,D)):r(s.id,C,D)},I=(C,D)=>{var N,V,S;if(o){if(o.type!=="text")return;const _=u==null?void 0:u.getContext("2d");if(!_)return;const P=Y(["style",C],D,o),L=zn(_,P.value,P.width,((N=P.style)==null?void 0:N.fontBold)??!1,((V=P.style)==null?void 0:V.fontItalic)??!1,(S=P.style)==null?void 0:S.fontFamily),H=Ne({...P,fontSize:L,height:L*P.value.length},c);d(H,!0),v&&r(v.id,C,D)}else r(s.id,C,D)},M=(C,D)=>{if(o){if(o.type!=="polygon"&&o.type!=="curve")return;d(o.type==="polygon"?Na(o,D,c):Wa(o,D,c),!0),v&&r(v.id,C,D)}else r(s.id,C,D)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"react-paint-editor-settings-bar",children:[l.jsxs("div",{className:"react-paint-editor-settings-shrinkable",children:[Q&&x>2&&l.jsx(O,{disabled:n,onClick:f,title:"Toggle settings",icon:_r}),o?l.jsx(l.Fragment,{children:v&&l.jsxs(l.Fragment,{children:[!Q&&l.jsx(Dn,{activeTool:s,selectedShape:o,selectedShapeTool:v,disabled:n,selectedSettings:w,setSelectedSettings:b,handleShapeStyleChange:E,handlePolygonLinesCount:M,handleShapeFontFamilyChange:I}),s.type==="selection"&&l.jsx(dr,{disabled:n,selectedShape:o,removeShape:y})]})}):!Q&&l.jsx(Dn,{activeTool:s,selectedShape:o,selectedShapeTool:v,disabled:n,selectedSettings:w,setSelectedSettings:b,handleShapeStyleChange:E,handlePolygonLinesCount:M,handleShapeFontFamilyChange:I})]}),l.jsx("div",{className:"react-paint-editor-settings-separator"}),a&&l.jsx(pr,{disabled:n,toggleLayoutPanel:i})]}),p&&l.jsx(ln,{className:"react-paint-editor-settings-modal",onClose:f,position:"bottom",children:l.jsx(Dn,{activeTool:s,selectedShape:o,selectedShapeTool:v,disabled:n,selectedSettings:w,setSelectedSettings:b,handleShapeStyleChange:E,handlePolygonLinesCount:M,handleShapeFontFamilyChange:I})})]})};yr.__docgenInfo={description:"",methods:[],displayName:"SettingsBar",props:{width:{required:!0,tsType:{name:"number"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},availableTools:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]}],raw:"CustomTool[]"},description:""},updateToolSettings:{required:!0,tsType:{name:"signature",type:"function",raw:"(toolId: string, field: string, value: string | number | boolean) => void",signature:{arguments:[{type:{name:"string"},name:"toolId"},{type:{name:"string"},name:"field"},{type:{name:"union",raw:"string | number | boolean",elements:[{name:"string"},{name:"number"},{name:"boolean"}]},name:"value"}],return:{name:"void"}}},description:""},layersManipulation:{required:!1,tsType:{name:"boolean"},description:""},activeTool:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{
  id: string
  type: ActionsType
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},selectedShape:{required:!0,tsType:{name:"union",raw:"ShapeEntity | undefined",elements:[{name:"intersection",raw:`{
  id: string
  toolId?: string
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  toolId?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},{name:"undefined"}]},description:""},canvas:{required:!0,tsType:{name:"union",raw:"HTMLCanvasElement | null",elements:[{name:"HTMLCanvasElement"},{name:"null"}]},description:""},settings:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  brushAlgo: BrushAlgo
  isBrushShapeDoneOnMouseUp: boolean
  gridGap: number
  canvasOffset: Point
  canvasSize: {
    width: number
    height: number
    scaleRatio: number
  }
  selectionPadding: number
}`,signature:{properties:[{key:"brushAlgo",value:{name:"union",raw:"'simple' | 'quadratic'",elements:[{name:"literal",value:"'simple'"},{name:"literal",value:"'quadratic'"}],required:!0}},{key:"isBrushShapeDoneOnMouseUp",value:{name:"boolean",required:!0}},{key:"gridGap",value:{name:"number",required:!0}},{key:"canvasOffset",value:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}],required:!0}},{key:"canvasSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
  scaleRatio: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}},{key:"scaleRatio",value:{name:"number",required:!0}}]},required:!0}},{key:"selectionPadding",value:{name:"number",required:!0}}]}},description:""},updateShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity, withSave?: boolean) => void",signature:{arguments:[{type:{name:"intersection",raw:`{
  id: string
  toolId?: string
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  toolId?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"},{type:{name:"boolean"},name:"withSave"}],return:{name:"void"}}},description:""},removeShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(shape: ShapeEntity) => void",signature:{arguments:[{type:{name:"intersection",raw:`{
  id: string
  toolId?: string
} & DrawableShape<T>`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  toolId?: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"toolId",value:{name:"string",required:!1}}]}},{name:"intersection",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
} & (T extends 'line'
  ? Line & {
      type: 'line'
      selection?: SelectionLinesType
      path?: Path2D
      arrows?: DrawableShape<'triangle'>[]
    }
  : T extends 'picture'
    ? Picture & {
        type: 'picture'
        img: HTMLImageElement
        selection?: SelectionDefaultType
      }
    : T extends 'text'
      ? Text & { type: 'text'; selection?: SelectionDefaultType }
      : T extends 'rect'
        ? Rect & {
            type: 'rect'
            selection?: SelectionDefaultType
            path?: Path2D
          }
        : T extends 'square'
          ? Rect & {
              type: 'square'
              selection?: SelectionDefaultType
              path?: Path2D
            }
          : T extends 'circle'
            ? Circle & {
                type: 'circle'
                selection?: SelectionDefaultType
                path?: Path2D
              }
            : T extends 'ellipse'
              ? Ellipse & {
                  type: 'ellipse'
                  selection?: SelectionDefaultType
                  path?: Path2D
                }
              : T extends 'triangle'
                ? Triangle & { type: 'triangle'; path?: Path2D }
                : T extends 'polygon'
                  ? Polygon & {
                      type: 'polygon'
                      selection?: SelectionLinesType
                      path?: Path2D
                    }
                  : T extends 'curve'
                    ? Curve & {
                        type: 'curve'
                        selection?: SelectionLinesType
                        path?: Path2D
                      }
                    : T extends 'brush'
                      ? Brush & {
                          type: 'brush'
                          selection?: SelectionDefaultType
                          path?: Path2D
                          scaleX?: number
                          scaleY?: number
                        }
                      : never)`,elements:[{name:"signature",type:"object",raw:`{
  toolId?: string
  visible?: boolean
  locked?: boolean
  rotation: number
  style?: StyleShape
}`,signature:{properties:[{key:"toolId",value:{name:"string",required:!1}},{key:"visible",value:{name:"boolean",required:!1}},{key:"locked",value:{name:"boolean",required:!1}},{key:"rotation",value:{name:"number",required:!0}},{key:"style",value:{name:"signature",type:"object",raw:`{
  fillColor?: string
  opacity?: number
  strokeColor?: string
  lineWidth?: number
  lineDash?: number
  lineArrow?: number
  pointsCount?: number
  fontFamily?: string
  fontItalic?: boolean
  fontBold?: boolean
}`,signature:{properties:[{key:"fillColor",value:{name:"string",required:!1}},{key:"opacity",value:{name:"number",required:!1}},{key:"strokeColor",value:{name:"string",required:!1}},{key:"lineWidth",value:{name:"number",required:!1}},{key:"lineDash",value:{name:"number",required:!1}},{key:"lineArrow",value:{name:"number",required:!1}},{key:"pointsCount",value:{name:"number",required:!1}},{key:"fontFamily",value:{name:"string",required:!1}},{key:"fontItalic",value:{name:"boolean",required:!1}},{key:"fontBold",value:{name:"boolean",required:!1}}]},required:!1}}]}},{name:"unknown"}]}]},name:"shape"}],return:{name:"void"}}},description:""},toggleLayoutPanel:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ss=(e,n)=>{const t=n.flatMap(r=>{if(typeof r!="object")return e.filter(i=>i.type===r);const a=e.filter(i=>r.toolsType.includes(i.type));return a?{...r,toolsType:a}:null});return Zn(t)},_n=({disabled:e=!1,withText:n=!1,loadFile:t,type:r,img:a,accept:i})=>{const s=m.useRef(null),o=c=>{c.stopPropagation(),s.current&&(s.current.value="")},u=c=>{var y;const d=(y=c.target.files)==null?void 0:y.item(0);d&&t(d)};return l.jsx(O,{ref:s,type:"file",onClick:o,onChange:u,accept:i,title:r.label??r.type,icon:a,disabled:e,children:n?r.label:void 0})};_n.__docgenInfo={description:"",methods:[],displayName:"LoadFileTool",props:{disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},loadFile:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},type:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{
  id: string
  type: ActionsType
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},img:{required:!1,tsType:{name:"string"},description:""},accept:{required:!0,tsType:{name:"string"},description:""},withText:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const K=({type:e,img:n,isActive:t,withText:r=!1,disabled:a=!1,setActive:i})=>{const s=()=>{i(e)};return l.jsx(O,{disabled:a,selected:t,onClick:s,title:e.label??e.type,icon:n,children:r?e.label:void 0})};K.__docgenInfo={description:"",methods:[],displayName:"Tool",props:{type:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{
  id: string
  type: ActionsType
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},img:{required:!1,tsType:{name:"string"},description:""},withText:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isActive:{required:!0,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},setActive:{required:!0,tsType:{name:"signature",type:"function",raw:"(marker: ToolsType) => void",signature:{arguments:[{type:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{
  id: string
  type: ActionsType
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},name:"marker"}],return:{name:"void"}}},description:""}}};const fr=({activeTool:e,withActionsInMenu:n,hasActionToUndo:t=!1,hasActionToRedo:r=!1,hasActionToClear:a=!1,undoAction:i,redoAction:s,clearCanvas:o,alignment:u,group:c,vertical:d=!1,disabled:y=!1,withLoadAndSave:w,withExport:b,addPicture:p,loadFile:k,togglePictureUrlModal:f,saveFile:v,exportCanvasInFile:x,withUploadPicture:q,withUrlPicture:Q})=>{var P;const[E,I]=m.useState(!1),[,M]=m.useTransition(),C=L=>{I(!1),k(L)},D=async L=>{I(!1),await p(L)},N=()=>{M(()=>{I(!0)})},V=(P=c==null?void 0:c.tools)==null?void 0:P.some(L=>L===e.type),S=(V?e.icon:c.img)??c.title;return m.useEffect(()=>{if(!E)return;const L=()=>{I(!1)};return document.addEventListener("click",L),()=>{document.removeEventListener("click",L)}},[E]),n||q||Q||w||b?l.jsxs("div",{className:"react-paint-editor-toolbox-relative",children:[l.jsx(O,{selected:V,title:c.title,disabled:y,onClick:N,icon:S}),E&&l.jsx(ge,{alignment:u,position:"top",children:l.jsxs("div",{className:"react-paint-editor-toolbox-panel-content","data-vertical":+d,children:[n&&l.jsxs(l.Fragment,{children:[l.jsx(K,{withText:!0,type:ke,disabled:y||!t,img:ke.icon,isActive:e.id===ke.id,setActive:i}),l.jsx(K,{withText:!0,type:we,disabled:y||!r,img:we.icon,isActive:e.id===we.id,setActive:s}),l.jsx(K,{withText:!0,type:xe,disabled:y||!a,img:xe.icon,isActive:e.id===xe.id,setActive:o}),(q||Q||w)&&l.jsx("hr",{})]}),q&&l.jsx(_n,{withText:!0,type:at,disabled:y,loadFile:D,img:at.icon,accept:"image/png, image/gif, image/jpeg, image/svg+xml"}),Q&&l.jsx(O,{disabled:y,selected:!1,onClick:f,title:"Add picture from URL",icon:Er,children:"Add picture from URL"}),(q||Q)&&w&&l.jsx("hr",{}),w&&l.jsxs(l.Fragment,{children:[l.jsx(_n,{withText:!0,type:rt,disabled:y,loadFile:C,img:rt.icon,accept:"application/JSON"}),l.jsx(K,{withText:!0,disabled:y,type:xn,img:xn.icon,isActive:e.id===xn.id,setActive:v})]}),b&&l.jsx(K,{withText:!0,disabled:y,type:wn,img:wn.icon,isActive:e.id===wn.id,setActive:x})]})})]}):null};fr.__docgenInfo={description:"",methods:[],displayName:"MenuGroup",props:{activeTool:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{
  id: string
  type: ActionsType
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},withActionsInMenu:{required:!0,tsType:{name:"boolean"},description:""},group:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  tools?: ShapeType[]
  title: string
  img: string
}`,signature:{properties:[{key:"tools",value:{name:"Array",elements:[{name:"unknown[number]",raw:"(typeof ShapeTypeArray)[number]"}],raw:"ShapeType[]",required:!1}},{key:"title",value:{name:"string",required:!0}},{key:"img",value:{name:"string",required:!0}}]}},description:""},vertical:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},alignment:{required:!1,tsType:{name:"union",raw:"'left' | 'center' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'center'"},{name:"literal",value:"'right'"}]},description:""},title:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},img:{required:!1,tsType:{name:"string"},description:""},loadFile:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},addPicture:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File) => Promise<void>",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},saveFile:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},exportCanvasInFile:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},togglePictureUrlModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},withLoadAndSave:{required:!0,tsType:{name:"boolean"},description:""},withExport:{required:!0,tsType:{name:"boolean"},description:""},hasActionToUndo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hasActionToRedo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hasActionToClear:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},withUploadPicture:{required:!0,tsType:{name:"boolean"},description:""},withUrlPicture:{required:!0,tsType:{name:"boolean"},description:""},undoAction:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},redoAction:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},clearCanvas:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const gr=({togglePictureUrlModal:e,addPicture:n})=>{const t=m.useRef(null),r=async a=>{var s;a.preventDefault();const i=(s=t.current)==null?void 0:s.value;i&&(await n(i),e())};return m.useEffect(()=>{t.current&&t.current.focus()},[]),l.jsx(ln,{className:"react-paint-editor-toolbox-pictureinput-modal",onClose:e,children:l.jsxs("form",{onSubmit:r,children:[l.jsxs("label",{children:["URL ",l.jsx("input",{type:"text",ref:t})]}),l.jsx(O,{onClick:e,children:"Annuler"}),l.jsx(O,{type:"submit",selected:!0,children:"Ajouter"})]})})};gr.__docgenInfo={description:"",methods:[],displayName:"PictureUrlModal",props:{togglePictureUrlModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},addPicture:{required:!0,tsType:{name:"signature",type:"function",raw:"(url: string) => Promise<void>",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""}}};const vr=({activeTool:e,alignment:n,group:t,disabled:r=!1,setActiveToolFromId:a})=>{var k,f,v;const i=m.useRef(null),[s,o]=m.useState(!1),[,u]=m.useTransition(),[c,d]=m.useState(void 0),y=x=>{d(x),a(x.id)};if(m.useEffect(()=>{if(!s)return;const x=q=>{!zt(q,i.current)&&o(!1)};return document.addEventListener("mousedown",x,{passive:!1}),document.addEventListener("touchstart",x,{passive:!1}),()=>{document.removeEventListener("mousedown",x),document.removeEventListener("touchstart",x)}},[s]),"type"in t)return l.jsx(K,{disabled:r,type:t,img:t.icon,isActive:e.id===t.id,setActive:y});if(!t.toolsType.length)return null;if(((k=t.toolsType)==null?void 0:k.length)===1)return l.jsx(K,{disabled:r,type:t.toolsType[0],img:t.toolsType[0].icon,isActive:e.id===t.toolsType[0].id,setActive:y});const w=(t==null?void 0:t.toolsType.find(x=>x.type===e.type))!==void 0,b=(c?c.icon:(v=(f=t.toolsType)==null?void 0:f[0])==null?void 0:v.icon)??t.title,p=()=>{var x;c?a(c.id):(x=t.toolsType)!=null&&x[0]&&y(t.toolsType[0]),u(()=>{o(!0)})};return l.jsxs("div",{className:"react-paint-editor-toolbargroup-relative",children:[l.jsx(O,{selected:w,title:t.title,disabled:r,onClick:p,icon:b}),s&&l.jsx(ge,{alignment:n,position:"top",children:l.jsx("div",{className:"react-paint-editor-toolbargroup-panel-content","data-vertical":+t.vertical,ref:i,children:t.toolsType.map((x,q)=>l.jsx(K,{disabled:r,type:x,img:x.icon,isActive:e.id===x.id,setActive:y},x.id))})})]})};vr.__docgenInfo={description:"",methods:[],displayName:"ToolbarGroup",props:{activeTool:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{
  id: string
  type: ActionsType
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},group:{required:!0,tsType:{name:"union",raw:`| CustomTool
| {
    title: string
    toolsType: CustomTool[]
    vertical: boolean
  }`,elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{
  title: string
  toolsType: CustomTool[]
  vertical: boolean
}`,signature:{properties:[{key:"title",value:{name:"string",required:!0}},{key:"toolsType",value:{name:"Array",elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]}],raw:"CustomTool[]",required:!0}},{key:"vertical",value:{name:"boolean",required:!0}}]}}]},description:""},alignment:{required:!1,tsType:{name:"union",raw:"'left' | 'center' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'center'"},{name:"literal",value:"'right'"}]},description:""},title:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},img:{required:!1,tsType:{name:"string"},description:""},setActiveToolFromId:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""}}};const Qt=40,os=[{title:"brush",toolsType:["brush"],vertical:!1},{title:"lines",toolsType:["line","curve","polygon"],vertical:!1},{title:"shapes",toolsType:["rect","square","circle","ellipse"],vertical:!1},"text"],hr=({width:e,disabled:n=!1,activeTool:t,hasActionToUndo:r=!1,hasActionToRedo:a=!1,hasActionToClear:i=!1,withLoadAndSave:s,withExport:o,clearCanvas:u,setActiveTool:c,undoAction:d,redoAction:y,addPicture:w,loadFile:b,saveFile:p,exportCanvasInFile:k,availableTools:f,withUrlPicture:v,withUploadPicture:x})=>{const q=ss(f,os),Q=(5+q.length)*Qt,E=e<Q,I=(2+q.length)*Qt,M=e<I,[C,D]=m.useState(!1),[N,V]=m.useState(!1),S=()=>{D(g=>!g)},_=()=>{V(!0)},P=()=>{V(g=>!g)},L=g=>{c(g),D(!1)},H=g=>{L(f.find(h=>h.id===g)??t)},T=f.find(g=>g.type===t.type)!==void 0;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"react-paint-editor-toolbar-toolbox",children:[l.jsxs("div",{className:"react-paint-editor-toolbar-shrinkable",children:[l.jsx(K,{type:le,disabled:n,img:le.icon,isActive:t.id===le.id,setActive:L}),M?l.jsx(O,{disabled:n,onClick:S,title:"Toggle tools",icon:Tr,selected:T}):q.map((g,h)=>l.jsx(vr,{disabled:n,activeTool:t,group:g,setActiveToolFromId:H},"id"in g?g.id:g.title))]}),!E&&l.jsxs(l.Fragment,{children:[l.jsx(K,{type:ke,disabled:n||!r,img:ke.icon,isActive:t.id===ke.id,setActive:d}),l.jsx(K,{type:we,disabled:n||!a,img:we.icon,isActive:t.id===we.id,setActive:y}),l.jsx(K,{type:xe,disabled:n||!i,img:xe.icon,isActive:t.id===xe.id,setActive:u})]}),l.jsx(fr,{withActionsInMenu:E,disabled:n,vertical:!0,alignment:"right",group:{title:"Menu",img:Lr},activeTool:t,addPicture:w,loadFile:b,saveFile:p,togglePictureUrlModal:_,exportCanvasInFile:k,withUploadPicture:x,withUrlPicture:v,withLoadAndSave:s,withExport:o,hasActionToUndo:r,hasActionToRedo:a,hasActionToClear:i,undoAction:d,redoAction:y,clearCanvas:u})]}),C&&l.jsx(ln,{className:"react-paint-editor-toolbar-modal",onClose:S,children:f.map((g,h)=>g.type==="picture"?null:l.jsx(K,{disabled:n,type:g,img:g.icon,withText:!1,isActive:t.id===g.id,setActive:L},g.id))}),N&&l.jsx(gr,{togglePictureUrlModal:P,addPicture:w})]})};hr.__docgenInfo={description:"",methods:[],displayName:"Toolbar",props:{width:{required:!0,tsType:{name:"number"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},activeTool:{required:!0,tsType:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{
  id: string
  type: ActionsType
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},description:""},hasActionToUndo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hasActionToRedo:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hasActionToClear:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},undoAction:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},redoAction:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},clearCanvas:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},setActiveTool:{required:!0,tsType:{name:"signature",type:"function",raw:"(tool: ToolsType) => void",signature:{arguments:[{type:{name:"union",raw:"CustomTool | ActionsTool",elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]},{name:"signature",type:"object",raw:`{
  id: string
  type: ActionsType
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'selection' | 'undo' | 'redo' | 'clear' | 'export' | 'loadfile' | 'savefile' | 'move' | 'uploadpicture' | 'addurlpicture'",elements:[{name:"literal",value:"'selection'"},{name:"literal",value:"'undo'"},{name:"literal",value:"'redo'"},{name:"literal",value:"'clear'"},{name:"literal",value:"'export'"},{name:"literal",value:"'loadfile'"},{name:"literal",value:"'savefile'"},{name:"literal",value:"'move'"},{name:"literal",value:"'uploadpicture'"},{name:"literal",value:"'addurlpicture'"}],required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}]},name:"tool"}],return:{name:"void"}}},description:""},loadFile:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:""},addPicture:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: File | string) => Promise<void>",signature:{arguments:[{type:{name:"union",raw:"File | string",elements:[{name:"File"},{name:"string"}]},name:"file"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""},saveFile:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},exportCanvasInFile:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},availableTools:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:`{
  id: string
  icon: string
  label: string
} & (
  | {
      type: 'brush'
      settings: ToolsSettingsType<'brush'>
    }
  | {
      type: 'circle'
      settings: ToolsSettingsType<'circle'>
    }
  | {
      type: 'ellipse'
      settings: ToolsSettingsType<'ellipse'>
    }
  | {
      type: 'rect'
      settings: ToolsSettingsType<'rect'>
    }
  | {
      type: 'square'
      settings: ToolsSettingsType<'square'>
    }
  | {
      type: 'line'
      settings: ToolsSettingsType<'line'>
    }
  | {
      type: 'polygon'
      settings: ToolsSettingsType<'polygon'>
    }
  | {
      type: 'curve'
      settings: ToolsSettingsType<'curve'>
    }
  | {
      type: 'text'
      settings: ToolsSettingsType<'text'>
    }
  | {
      type: 'picture'
      settings: ToolsSettingsType<'picture'>
    }
)`,elements:[{name:"signature",type:"object",raw:`{
  id: string
  icon: string
  label: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"icon",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}},{name:"unknown"}]}],raw:"CustomTool[]"},description:""},withLoadAndSave:{required:!0,tsType:{name:"boolean"},description:""},withExport:{required:!0,tsType:{name:"boolean"},description:""},withUrlPicture:{required:!0,tsType:{name:"boolean"},description:""},withUploadPicture:{required:!0,tsType:{name:"boolean"},description:""}}};const $e={none:0,small:10,medium:20,large:40},ls={toolbarBackgroundColor:"white",dividerColor:"#36418129",fontRadius:8,fontDisabledColor:"#3641812b",fontDisabledBackgroundColor:"transparent",fontColor:"#364181",fontBackgroundColor:"transparent",fontSelectedColor:"white",fontSelectedBackgroundColor:"#364181",fontHoverColor:"#364181",fontHoverBackgroundColor:"#afd8d8"},us=()=>{const e=m.useRef([]),[n,t]=m.useState([]),r=i=>{t(s=>s.filter(o=>o.id!==i))},a=({type:i=wt.type,duration:s=wt.duration,text:o})=>{const u={id:G("snackbar_"),duration:s,type:i,text:o};t(c=>[...c,u]),e.current=[...e.current,setTimeout(()=>r(u.id),s)]};return m.useEffect(()=>()=>{for(const i of e.current)clearTimeout(i)},[]),{snackbarList:n,addSnackbar:a}},cs=({editorProps:e,className:n,style:t,options:r,children:a})=>{const{shapesRef:i,addPictureShape:s,moveShapes:o,toggleShapeVisibility:u,toggleShapeLock:c,canGoBackward:d,canGoForward:y,canClear:w,selectedShape:b,removeShape:p,updateShape:k,backwardShape:f,forwardShape:v,refs:x,width:q,height:Q,canvasSize:E,selectTool:I,selectShape:M,activeTool:C,setActiveTool:D,setAvailableTools:N,isEditMode:V,isDisabled:S,availableTools:_,gridGap:P,setGridGap:L,loadFile:H,exportPicture:T,exportData:g,clearCanvas:h,settings:R,canvas:{canGrow:A,layersManipulation:$,withExport:Le,withLoadAndSave:Pe,withUploadPicture:J,withUrlPicture:ve}}=e,{toolbarBackgroundColor:Ie,dividerColor:Ae,fontRadius:Ee,fontDisabledColor:Re,fontDisabledBackgroundColor:oe,fontColor:te,fontBackgroundColor:cn,fontSelectedColor:dn,fontSelectedBackgroundColor:pn,fontHoverColor:Oe,fontHoverBackgroundColor:Be}={...ls,...r},[Ze,ee]=m.useState(!1),[je,mn]=m.useState(!1),yn=P>=$e.large?"large":P>=$e.medium?"medium":P>=$e.small?"small":"none",fn=F=>{L($e[F])},{snackbarList:gn,addSnackbar:ae}=us(),vn=m.useCallback((F,re,We)=>{N(pe=>pe.map(be=>be.id===F?Y(["settings",re,"default"],We,be):be)),D(pe=>pe.id===F?Y(["settings",re,"default"],We,pe):pe)},[D,N]),Ve=m.useCallback(()=>{I(le),f()},[I,f]),he=m.useCallback(()=>{I(le),v()},[I,v]),Ue=m.useCallback(()=>{ee(!0);try{T(),ee(!1)}catch(F){F instanceof Error&&ae({type:"error",text:"L'export a échoué"}),console.warn(F)}finally{ee(!1)}},[T,ae]),hn=m.useCallback(()=>{ee(!0);try{g(),ee(!1)}catch(F){F instanceof Error&&ae({type:"error",text:"L'enregistrement a échoué"}),console.warn(F)}finally{ee(!1)}},[g,ae]),bn=m.useCallback(async F=>{ee(!0);try{await H(F),ae({type:"success",text:"Fichier chargé !"})}catch(re){re instanceof Error&&ae({type:"error",text:"Le chargement a échoué"}),console.warn(re)}finally{ee(!1)}},[H,ae]),Tn=m.useCallback(async F=>{ee(!0);try{const re=await s(F,q,Q);M(re)}catch(re){re instanceof Error&&ae({type:"error",text:"Le chargement a échoué"}),console.warn(re)}finally{ee(!1)}},[s,M,ae,q,Q]),kn=`${n?`${n} `:""}${je?"react-paint-editor-layout-opened ":""}react-paint-editor-app`;return l.jsxs("div",{ref:x.setEditor,className:kn,style:{"--react-paint-editor-app-maxWidth":A?"100%":`${q}px`,"--react-paint-editor-app-toolbar-bg":Ie,"--react-paint-editor-app-divider-color":Ae,"--react-paint-editor-app-font-radius":Ee,"--react-paint-editor-app-font-disabled-color":Re,"--react-paint-editor-app-font-disabled-bg":oe,"--react-paint-editor-app-font-color":te,"--react-paint-editor-app-font-bg":cn,"--react-paint-editor-app-font-selected-color":dn,"--react-paint-editor-app-font-selected-bg":pn,"--react-paint-editor-app-font-hover-color":Oe,"--react-paint-editor-app-font-hover-bg":Be,...t},children:[V&&l.jsx(hr,{width:E.width,disabled:S,activeTool:C,clearCanvas:h,setActiveTool:I,exportCanvasInFile:Ue,saveFile:hn,loadFile:bn,addPicture:Tn,hasActionToUndo:d,hasActionToRedo:y,hasActionToClear:w,undoAction:Ve,redoAction:he,availableTools:_,withExport:Le,withLoadAndSave:Pe,withUploadPicture:J,withUrlPicture:ve}),a,V&&$&&l.jsx(cr,{gridFormat:yn,setGridFormat:fn,disabled:S,shapes:i.current,moveShapes:o,selectedShape:b,removeShape:p,selectShape:M,toggleShapeVisibility:u,toggleShapeLock:c,isLayoutPanelShown:je}),V&&l.jsxs(l.Fragment,{children:[l.jsx(yr,{width:E.width,disabled:S,activeTool:C,availableTools:_,selectedShape:b,settings:R,removeShape:p,updateShape:k,canvas:x.canvas.current,layersManipulation:$,toggleLayoutPanel:()=>{mn(F=>!F)},updateToolSettings:vn}),l.jsx(lr,{isLoading:Ze}),l.jsx(ur,{snackbarList:gn})]})]})};cs.__docgenInfo={description:"",methods:[],displayName:"Editor",props:{editorProps:{required:!0,tsType:{name:"ReturnType['editorProps']",raw:"UseReactPaintReturnType['editorProps']"},description:""},className:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},options:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  toolbarBackgroundColor?: string
  dividerColor?: string
  fontRadius?: number
  fontDisabledColor?: string
  fontDisabledBackgroundColor?: string
  fontColor?: string
  fontBackgroundColor?: string
  fontSelectedColor?: string
  fontSelectedBackgroundColor?: string
  fontHoverColor?: string
  fontHoverBackgroundColor?: string
}`,signature:{properties:[{key:"toolbarBackgroundColor",value:{name:"string",required:!1}},{key:"dividerColor",value:{name:"string",required:!1}},{key:"fontRadius",value:{name:"number",required:!1}},{key:"fontDisabledColor",value:{name:"string",required:!1}},{key:"fontDisabledBackgroundColor",value:{name:"string",required:!1}},{key:"fontColor",value:{name:"string",required:!1}},{key:"fontBackgroundColor",value:{name:"string",required:!1}},{key:"fontSelectedColor",value:{name:"string",required:!1}},{key:"fontSelectedBackgroundColor",value:{name:"string",required:!1}},{key:"fontHoverColor",value:{name:"string",required:!1}},{key:"fontHoverBackgroundColor",value:{name:"string",required:!1}}]}},description:""}}};export{Ki as A,cs as E,ms as u};
